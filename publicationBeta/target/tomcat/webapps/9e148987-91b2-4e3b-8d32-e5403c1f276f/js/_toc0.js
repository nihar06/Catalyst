/*
Copyright © 1998, 2014, Oracle and/or its affiliates.  All rights reserved.
*/
function filterHTML(a){a=replaceString("&","&amp;",a);a=replaceString("<","&lt;",a);return a=replaceString(">","&gt;",a)}function replaceString(a,b,c){if(c!=null)return c.replace(RegExp(a,"g"),b)}function PtToPx(a,b){return Math.floor(a*b/72)}function PxToPt(a,b){return a/b*72}function Bool(a){if(typeof a=="boolean")return a;if(typeof a=="string"){if(a.toLowerCase()=="false")return false;if(a.toLowerCase()=="true")return true}return null}
function getDPICookie(){var a=new Cookie(document,"UPKDpiDailyWarning","today","/",null,false);a.Load();if(a.DPIdailyWarning==1)return true;a.DPIdailyWarning=1;a.Store();return false}var KeepAlive_url_ping=null,KeepAlive_url_closeserver=null,KeepAlive_finished=false,KeepAlive_timer=null;
function KeepAlive_Init(a){if(KeepAlive_url_ping==null){KeepAlive_url_ping=a+"xml/ping.xml";KeepAlive_url_closeserver=a+"closeserver.xml";KeepAlive_finished=false;KeepAlive_timer=setInterval("KeepAlive_Ping()",2E3)}}function KeepAlive_DoNotSendClose(){KeepAlive_finished=true}
function KeepAlive_Close(){if(KeepAlive_url_ping!=null)if(KeepAlive_finished!=true){KeepAlive_Track("close...");KeepAlive_finished=true;clearTimeout(KeepAlive_timer);LoadXMLDoc(KeepAlive_url_closeserver,KeepAlive_Return_OK,KeepAlive_Return_OK,"PING",true)}}function KeepAlive_Ping(){KeepAlive_Track("ping...");KeepAlive_finished!=true&&LoadXMLDoc(KeepAlive_url_ping,KeepAlive_Return_OK,KeepAlive_Return_Error,"PING",false)}function KeepAlive_Return_OK(){KeepAlive_Track("ping returned")}
function KeepAlive_Return_Error(){KeepAlive_Track("error returned");if(KeepAlive_finished!=true){KeepAlive_finished=true;clearInterval(KeepAlive_timer);alert(R_playexe_comm_error)}}var _KeepAlive_window=null,_KeepAlive_track=false;function KeepAlive_Track(a){if(_KeepAlive_track!=false){if(_KeepAlive_window==null)_KeepAlive_window=window.open();_KeepAlive_window.document.writeln(a+"<br/>")}}
var dlg_parent,dialogh_ref,device_dpi,dialog2_html,modal_dialog,dlg_width,dlg_height,dlg_autosizeheight=false,callback_end="",isopened=false,dlg_context="",grayPosition,overflowValue="",resizefn="";function setParent(a){dlg_parent=a}function Click1(){closeDialog();$("#graydiv").remove()}function getDPI(){return device_dpi}function setWidth(a,b){$(a).css("width",b)}function setHeight(a,b){$(a).css("height",b)}
function setPadding(a,b,c){b="<div style='padding:"+b+"px'";if(c&&c!="")b+=" class='"+c+"'";b+=">"+a+"</div>";return b}function getContentSize(a){var b={width:0,height:0};a=$("<div style='display:visible;position:absolute;top:0px;left:0px;' id='04A98DB973UPK'>"+a+"</div>");$("body").append(a);b.width=$("#04A98DB973UPK").outerWidth(true);b.height=$("#04A98DB973UPK").outerHeight(true);$("#04A98DB973UPK").remove();return b}
function showDialog3(a,b,c,e,f,h,j,l,k){showDialog2(a,b,c,e,f,h,j,l);$("body").append("<div id='04A98DB974UPK'>"+k+"</div>")}function showDialog2(a,b,c,e,f,h,j,l){dlg_autosizeheight=f==-1?true:false;dialog2_html=a;showDialog("",b,c,e,f,h,j,"",l)}
(function(a){a.fn.drags=function(b){b=a.extend({handle:"",cursor:"move"},b);var c=a("<div>",{id:"ehandler",css:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"none",cursor:b.cursor,"z-index":999,"background-color":"red",opacity:"0",filter:"alpha(opacity=0)"}}).appendTo(document.body);return this.addClass("draggable").each(function(){$drag=a(this);(b.handle===""?$drag:$drag.find(b.handle)).addClass("active-handle").on("mousedown",function(e){if(a(e.target).is(a(this))){$drag.css("cursor",
b.cursor);e.preventDefault();$drag.css("z-index");var f=$drag.outerHeight(),h=$drag.outerWidth(),j=$drag.offset().top+f-e.pageY,l=$drag.offset().left+h-e.pageX;c.show().on("mousemove",function(k){k.preventDefault();y=k.pageY+j-f;x=k.pageX+l-h;if(y<0)y=0;if(x<0)x=0;if(window.innerWidth>$drag.outerWidth())if(x>window.innerWidth-$drag.outerWidth())x=window.innerWidth-$drag.outerWidth();if(window.innerHeight>$drag.outerHeight())if(y>window.innerHeight-$drag.outerHeight())y=window.innerHeight-$drag.outerHeight();
a(".draggable").offset({top:y,left:x})}).add(document).on("mouseup",function(k){$drag.css("cursor","default");k.preventDefault();a(this).off("mousemove mouseup");c.hide()})}})})}})(jQuery);
function showDialog(a,b,c,e,f,h,j,l,k){isopened=true;j=96;if(b!=-1)b=PtToPx(b,j);if(c!=-1)c=PtToPx(c,j);e=PtToPx(e,j);f=PtToPx(f,j);dlg_width=e;dlg_height=f;device_dpi=j;dialogh_ref=a;modal_dialog=h;j=$(document.body).scrollLeft();var q=$(document.body).scrollTop();if(j==0&&q==0&&upk.browserInfo.isiOS()){j=parent.window.pageXOffset;q=parent.window.pageYOffset}if(b==-1||c==-1){c=b=0;if(window.innerWidth)if(upk.browserInfo.isiOS()){b=parent.window.innerWidth;c=parent.window.innerHeight}else{b=window.innerWidth;
c=window.innerHeight}else if(document.documentElement){b=document.documentElement.scrollWidth;c=document.documentElement.scrollHeight}b=Math.floor(b/2-e/2+j);c=Math.floor(c/2-f/2+q)}if(k)k=dialogh_ref;if(document.body.scrollHeight<f)c=0;if(typeof lmsMode!=="undefined")if(lmsMode&&lmsMode=="LMS"&&upk.browserInfo.isiOS())c=20;k="top:0;left:0;";if(upk.browserInfo.isIEQuirks()){grayPosition="absolute";k="top:"+q+"px;left:"+j+"px;";overflowValue=$(document.body).css("overflow");overflowValue==="auto"&&
$(document.body).css("overflow","hidden");document.body.scroll="no";resizefn=window.onresize;window.onresize=""}else grayPosition="fixed";h?$(document.body).append('<div id="graydiv" scrolling="no" class="pointerdiv" style="position:'+grayPosition+";display:none;z-index: 99;"+k+'bottom:0;right:0;"></div>'):$(document.body).append('<div id="graydiv" scrolling="no" class="pointerdiv2" style="position:'+grayPosition+";display:none;z-index: 99;"+k+'bottom:0;right:0;" onclick="Click1();"></div>');$("#graydiv").on("touchmove",
function(){return false});$("input").on("focus",function(){this.blur()});$("#graydiv").show();style="left:"+b+"px; top:"+c+"px; width: "+e+"px; height: "+f+"px;";wwpx=e-60;hhpx=f-60;if(upk.browserInfo.isIEQuirks()&&upk.browserInfo.isIE9()||upk.browserInfo.isIEQuirks()&&upk.browserInfo.isIE8()){wwpx-=20;hhpx-=20}innerstyle="width: "+wwpx+"px; height: "+hhpx+"px;";k="iossafefordesktop";if(IsTouchDevice())k="iossafe";j="../img/empty.gif";if(l)j=l+"img/empty.gif";if(h){$(document.body).append('<div class="desktopDialog" id="dialog" style="'+
style+'"><div id="closebtn" onclick="Click1();"><img id="closeimg" class="close_qualifier" src="'+j+'" alt="" width="16" /></div><div class="'+k+'" style="'+innerstyle+'"><iframe id="dialogBody" frameborder="0" scrolling="yes" src="'+a+'" style="width: 100%; height: 100%;margin:0px; padding:0px; position: absolute;top: 0px; left: 0px; background-color: white;"></iframe></div></div>');$("#dialog").drags();$("#dialog").on("touchmove",function(){return false})}else{innerstyle="width: "+e+"px; height: "+
f+"px;";k="../html/dialog2.html";$(document.body).append('<div class="noborderDialog" id="dialog" style="'+style+'"><div id="dialogBodyDiv" class="noBorderDialogDesktop" style="'+innerstyle+'"><iframe id="dialogBody" frameborder="0" scrolling="no" src="'+k+'" style="width: 100%; height: 100%;margin:0px; padding:0px; position: absolute;top: 0px; left: 0px; background-color: white;"></iframe></div></div>')}dlg_context!=""&&ctxHelper.SetContext(dlg_context)}function isOpenDialog(){return isopened}
function removeDiv(a){$(a).remove()}function appendDiv(a){$(document.body).append(a)}
function closeDialog(){$("#04A98DB974UPK").remove();$("#graydiv").remove();$("#dialog").remove();$("#ehandler").remove();if(dlg_context!=""){ctxHelper.SetPrevContext();dlg_context=""}if(upk.browserInfo.isIEQuirks()){if(overflowValue==="auto"){$(document.body).css("overflow",overflowValue);overflowValue=""}document.body.scroll="auto";window.onresize=resizefn;resizefn=""}isopened=false;if(dlg_parent)callback_end&&dlg_parent.eval(callback_end);else callback_end&&eval(callback_end);$("input").off("focus")}
function setOnCloseEvent(a){if(callback_end.indexOf(a)<0)callback_end=a+";"+callback_end}function getOnCloseEvent(){return callback_end}function getDialog2Content(){return dialog2_html}function setDlgCtx(a){dlg_context=a}
var swfobject=function(){function a(){if(!da){try{var n=J.getElementsByTagName("body")[0].appendChild(J.createElement("span"));n.parentNode.removeChild(n)}catch(p){return}da=true;n=U.length;for(var u=0;u<n;u++)U[u]()}}function b(n){if(da)n();else U[U.length]=n}function c(n){if(typeof O.addEventListener!=A)O.addEventListener("load",n,false);else if(typeof J.addEventListener!=A)J.addEventListener("load",n,false);else if(typeof O.attachEvent!=A)z(O,"onload",n);else if(typeof O.onload=="function"){var p=
O.onload;O.onload=function(){p();n()}}else O.onload=n}function e(){var n=J.getElementsByTagName("body")[0],p=J.createElement(Q);p.setAttribute("type",V);var u=n.appendChild(p);if(u){var G=0;(function(){if(typeof u.GetVariable!=A){try{var F=u.GetVariable("$version")}catch(d){}if(F){F=F.split(" ")[1].split(",");C.pv=[parseInt(F[0],10),parseInt(F[1],10),parseInt(F[2],10)]}}else if(G<10){G++;setTimeout(arguments.callee,10);return}n.removeChild(p);u=null;f()})()}else f()}function f(){var n=aa.length;if(n>
0)for(var p=0;p<n;p++){var u=aa[p].id,G=aa[p].callbackFn,F={success:false,id:u};if(C.pv[0]>0){var d=r(u);if(d)if(B(aa[p].swfVersion)&&!(C.wk&&C.wk<312)){K(u,true);if(G){F.success=true;F.ref=h(u);G(F)}}else if(aa[p].expressInstall&&j()){F={};F.data=aa[p].expressInstall;F.width=d.getAttribute("width")||"0";F.height=d.getAttribute("height")||"0";if(d.getAttribute("class"))F.styleclass=d.getAttribute("class");if(d.getAttribute("align"))F.align=d.getAttribute("align");var g={};d=d.getElementsByTagName("param");
for(var i=d.length,m=0;m<i;m++)if(d[m].getAttribute("name").toLowerCase()!="movie")g[d[m].getAttribute("name")]=d[m].getAttribute("value");l(F,g,u,G)}else{k(d);G&&G(F)}}else{K(u,true);if(G){if((u=h(u))&&typeof u.SetVariable!=A){F.success=true;F.ref=u}G(F)}}}}function h(n){var p=null;if((n=r(n))&&n.nodeName=="OBJECT")if(typeof n.SetVariable!=A)p=n;else if(n=n.getElementsByTagName(Q)[0])p=n;return p}function j(){return!ga&&B("6.0.65")&&(C.win||C.mac)&&!(C.wk&&C.wk<312)}function l(n,p,u,G){ga=true;ha=
G||null;Y={success:false,id:u};var F=r(u);if(F){if(F.nodeName=="OBJECT"){ba=q(F);ja=null}else{ba=F;ja=u}n.id=P;if(typeof n.width==A||!/%$/.test(n.width)&&parseInt(n.width,10)<310)n.width="310";if(typeof n.height==A||!/%$/.test(n.height)&&parseInt(n.height,10)<137)n.height="137";J.title=J.title.slice(0,47)+" - Flash Player Installation";G=C.ie&&C.win?"ActiveX":"PlugIn";G="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+G+"&MMdoctitle="+J.title;if(typeof p.flashvars!=A)p.flashvars+=
"&"+G;else p.flashvars=G;if(C.ie&&C.win&&F.readyState!=4){G=J.createElement("div");u+="SWFObjectNew";G.setAttribute("id",u);F.parentNode.insertBefore(G,F);F.style.display="none";(function(){F.readyState==4?F.parentNode.removeChild(F):setTimeout(arguments.callee,10)})()}o(n,p,u)}}function k(n){if(C.ie&&C.win&&n.readyState!=4){var p=J.createElement("div");n.parentNode.insertBefore(p,n);p.parentNode.replaceChild(q(n),p);n.style.display="none";(function(){n.readyState==4?n.parentNode.removeChild(n):setTimeout(arguments.callee,
10)})()}else n.parentNode.replaceChild(q(n),n)}function q(n){var p=J.createElement("div");if(C.win&&C.ie)p.innerHTML=n.innerHTML;else if(n=n.getElementsByTagName(Q)[0])if(n=n.childNodes)for(var u=n.length,G=0;G<u;G++)!(n[G].nodeType==1&&n[G].nodeName=="PARAM")&&n[G].nodeType!=8&&p.appendChild(n[G].cloneNode(true));return p}function o(n,p,u){var G,F=r(u);if(C.wk&&C.wk<312)return G;if(F){if(typeof n.id==A)n.id=u;if(C.ie&&C.win){var d="",g;for(g in n)if(n[g]!=Object.prototype[g])if(g.toLowerCase()==
"data")p.movie=n[g];else if(g.toLowerCase()=="styleclass")d+=' class="'+n[g]+'"';else if(g.toLowerCase()!="classid")d+=" "+g+'="'+n[g]+'"';g="";for(var i in p)if(p[i]!=Object.prototype[i])g+='<param name="'+i+'" value="'+p[i]+'" />';F.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+d+">"+g+"</object>";ia[ia.length]=n.id;G=r(n.id)}else{i=J.createElement(Q);i.setAttribute("type",V);for(var m in n)if(n[m]!=Object.prototype[m])if(m.toLowerCase()=="styleclass")i.setAttribute("class",
n[m]);else m.toLowerCase()!="classid"&&i.setAttribute(m,n[m]);for(d in p)if(p[d]!=Object.prototype[d]&&d.toLowerCase()!="movie"){n=i;g=d;m=p[d];u=J.createElement("param");u.setAttribute("name",g);u.setAttribute("value",m);n.appendChild(u)}F.parentNode.replaceChild(i,F);G=i}}return G}function v(n){var p=r(n);if(p&&p.nodeName=="OBJECT")if(C.ie&&C.win){p.style.display="none";(function(){if(p.readyState==4){var u=r(n);if(u){for(var G in u)if(typeof u[G]=="function")u[G]=null;u.parentNode.removeChild(u)}}else setTimeout(arguments.callee,
10)})()}else p.parentNode.removeChild(p)}function r(n){var p=null;try{p=J.getElementById(n)}catch(u){}return p}function z(n,p,u){n.attachEvent(p,u);fa[fa.length]=[n,p,u]}function B(n){var p=C.pv;n=n.split(".");n[0]=parseInt(n[0],10);n[1]=parseInt(n[1],10)||0;n[2]=parseInt(n[2],10)||0;return p[0]>n[0]||p[0]==n[0]&&p[1]>n[1]||p[0]==n[0]&&p[1]==n[1]&&p[2]>=n[2]?true:false}function H(n,p,u,G){if(!(C.ie&&C.mac)){var F=J.getElementsByTagName("head")[0];if(F){u=u&&typeof u=="string"?u:"screen";if(G)ka=Z=
null;if(!Z||ka!=u){G=J.createElement("style");G.setAttribute("type","text/css");G.setAttribute("media",u);Z=F.appendChild(G);if(C.ie&&C.win&&typeof J.styleSheets!=A&&J.styleSheets.length>0)Z=J.styleSheets[J.styleSheets.length-1];ka=u}if(C.ie&&C.win)Z&&typeof Z.addRule==Q&&Z.addRule(n,p);else Z&&typeof J.createTextNode!=A&&Z.appendChild(J.createTextNode(n+" {"+p+"}"))}}}function K(n,p){if(ma){var u=p?"visible":"hidden";if(da&&r(n))r(n).style.visibility=u;else H("#"+n,"visibility:"+u)}}function I(n){return/[\\\"<>\.;]/.exec(n)!=
null&&typeof encodeURIComponent!=A?encodeURIComponent(n):n}var A="undefined",Q="object",V="application/x-shockwave-flash",P="SWFObjectExprInst",O=window,J=document,W=navigator,ca=false,U=[function(){ca?e():f()}],aa=[],ia=[],fa=[],ba,ja,ha,Y,da=false,ga=false,Z,ka,ma=true,C=function(){var n=typeof J.getElementById!=A&&typeof J.getElementsByTagName!=A&&typeof J.createElement!=A,p=W.userAgent.toLowerCase(),u=W.platform.toLowerCase(),G=u?/win/.test(u):/win/.test(p);u=u?/mac/.test(u):/mac/.test(p);p=/webkit/.test(p)?
parseFloat(p.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false;var F=!+"\u000b1",d=[0,0,0],g=null;if(typeof W.plugins!=A&&typeof W.plugins["Shockwave Flash"]==Q){if((g=W.plugins["Shockwave Flash"].description)&&!(typeof W.mimeTypes!=A&&W.mimeTypes[V]&&!W.mimeTypes[V].enabledPlugin)){ca=true;F=false;g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1");d[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10);d[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10);d[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,
"$1"),10):0}}else if(typeof O.ActiveXObject!=A)try{var i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(i)if(g=i.GetVariable("$version")){F=true;g=g.split(" ")[1].split(",");d=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}}catch(m){}return{w3:n,pv:d,wk:p,ie:F,win:G,mac:u}}();(function(){if(C.w3){if(typeof J.readyState!=A&&J.readyState=="complete"||typeof J.readyState==A&&(J.getElementsByTagName("body")[0]||J.body))a();if(!da){typeof J.addEventListener!=A&&J.addEventListener("DOMContentLoaded",
a,false);if(C.ie&&C.win){J.attachEvent("onreadystatechange",function(){if(J.readyState=="complete"){J.detachEvent("onreadystatechange",arguments.callee);a()}});O==top&&function(){if(!da){try{J.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,0);return}a()}}()}C.wk&&function(){da||(/loaded|complete/.test(J.readyState)?a():setTimeout(arguments.callee,0))}();c(a)}}})();(function(){C.ie&&C.win&&window.attachEvent("onunload",function(){for(var n=fa.length,p=0;p<n;p++)fa[p][0].detachEvent(fa[p][1],
fa[p][2]);n=ia.length;for(p=0;p<n;p++)v(ia[p]);for(var u in C)C[u]=null;C=null;for(var G in swfobject)swfobject[G]=null;swfobject=null})})();return{registerObject:function(n,p,u,G){if(C.w3&&n&&p){var F={};F.id=n;F.swfVersion=p;F.expressInstall=u;F.callbackFn=G;aa[aa.length]=F;K(n,false)}else G&&G({success:false,id:n})},getObjectById:function(n){if(C.w3)return h(n)},embedSWF:function(n,p,u,G,F,d,g,i,m,t){var E={success:false,id:p};if(C.w3&&!(C.wk&&C.wk<312)&&n&&p&&u&&G&&F){K(p,false);b(function(){u+=
"";G+="";var L={};if(m&&typeof m===Q)for(var M in m)L[M]=m[M];L.data=n;L.width=u;L.height=G;M={};if(i&&typeof i===Q)for(var N in i)M[N]=i[N];if(g&&typeof g===Q)for(var R in g)if(typeof M.flashvars!=A)M.flashvars+="&"+R+"="+g[R];else M.flashvars=R+"="+g[R];if(B(F)){N=o(L,M,p);L.id==p&&K(p,true);E.success=true;E.ref=N}else if(d&&j()){L.data=d;l(L,M,p,t);return}else K(p,true);t&&t(E)})}else t&&t(E)},switchOffAutoHideShow:function(){ma=false},ua:C,getFlashPlayerVersion:function(){return{major:C.pv[0],
minor:C.pv[1],release:C.pv[2]}},hasFlashPlayerVersion:B,createSWF:function(n,p,u){if(C.w3)return o(n,p,u)},showExpressInstall:function(n,p,u,G){C.w3&&j()&&l(n,p,u,G)},removeSWF:function(n){C.w3&&v(n)},createCSS:function(n,p,u,G){C.w3&&H(n,p,u,G)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(n){var p=J.location.search||J.location.hash;if(p){if(/\?/.test(p))p=p.split("?")[1];if(n==null)return I(p);p=p.split("&");for(var u=0;u<p.length;u++)if(p[u].substring(0,p[u].indexOf("="))==n)return I(p[u].substring(p[u].indexOf("=")+
1))}return""},expressInstallCallback:function(){if(ga){var n=r(P);if(n&&ba){n.parentNode.replaceChild(ba,n);if(ja){K(ja,true);if(C.ie&&C.win)ba.style.display="block"}ha&&ha(Y)}ga=false}}}}(),_simulate_120_dpi=false;function IsTouchDevice(){return upk.browserInfo.isTouchDevice()}var upk=upk||{};
(function(a){var b="",c,e=false,f,h=false,j=false;a.getAgentInfo=function(){return typeof document.documentMode!="undefined"?navigator.userAgent+" - "+document.documentMode:navigator.userAgent};a.isSupportedBrowser=function(){var o=false;if(b=="MSIE"&&(c>=8||e&&f>=4))o=true;if(b=="Firefox"&&(c==24||c>=27))o=true;if(b=="Safari"&&c>=6)o=true;if(b=="Chrome"&&c>=32)o=true;if(a.isiOS())o=true;return o};a.isHardStop=function(){return b=="MSIE"&&c<=6};a.isMacOs=function(){return h};a.isFF3=function(){return j};
a.isFF=function(){return b=="Firefox"};a.isFF4=function(){return b=="Firefox"&&c==4};a.checkFFVersion=function(o){return b=="Firefox"&&c==o};a.isSafari=function(){return b=="Safari"||b=="Chrome"};a.isChrome=function(){return b=="Chrome"};a.isExplorer=function(){return b=="MSIE"};a.isIEVersion=function(o){return b=="MSIE"&&c==o};a.isIEQuirks=function(){if(a.isExplorer()==false)return false;return document.compatMode!=="CSS1Compat"};a.isIE8=function(){if(b!="MSIE")return false;return c==8&&e&&f==4};
a.isIE9=function(){if(b!="MSIE")return false;if(c==9&&e&&f==5)return true;if(c==7&&e&&f==5)return true;return e&&f==6&&(c!=10||document.documentMode!=10)};a.isIE10=function(){if(b!="MSIE")return false;return c==10&&e&&f==6&&document.documentMode==10};a.isIE10Compatibility=function(){if(b!="MSIE")return false;return e&&f==6&&(c!=10||document.documentMode!=10)};a.isIE10orHigher=function(){if(b!="MSIE")return false;return c>=10&&e&&f>=6&&document.documentMode>=10};a.isIE11=function(){if(b!="MSIE")return false;
return c==11&&e&&f==7&&document.documentMode==11};a.isIE11Compatibility=function(){if(b!="MSIE")return false;return e&&f==7&&(c!=11||document.documentMode!=11)};a.isActiveXEnabled=function(){var o=null,v="";try{new ActiveXObject("")}catch(r){v=r.name}try{o=!!new ActiveXObject("htmlfile")}catch(z){o=false}return v!="ReferenceError"&&o==false?false:true};a.isIE10Modern=function(){if(a.isIE10()==false)return false;return!a.isActiveXEnabled()};a.isiOS=function(){var o=navigator.platform;if(o==="iPad"||
o==="iPad Simulator"||o==="iPhone"||o==="iPod")return true;if(a.isChrome()&&a.isTouchDevice())return true;return false};a.isiOS5=function(){return navigator.userAgent.indexOf("CPU OS 5_")>=0};a.isiOS6=function(){return navigator.userAgent.indexOf("CPU OS 6_")>=0};a.isiOS7=function(){return navigator.userAgent.indexOf("CPU OS 7_")>=0};a.isTouchDevice=function(){return"ontouchstart"in window?window:null};a.isSoundSupported=function(){if(a.isiOS())return true;if(window.location.href.substr(0,7).toLowerCase()==
"file://")return false;if(swfobject.getFlashPlayerVersion().major>0)return true;return false};var l=navigator.userAgent,k=-1;if(l.indexOf("OPR")>=0){b="Opera";k=l.indexOf("OPR")+4}else if(l.indexOf("Chrome")>=0){b="Chrome";k=l.indexOf("Chrome")+7}else if(l.indexOf("Opera")>=0){b="Opera";k=l.indexOf("Opera")+6}else if(l.indexOf("Firefox")>=0){b="Firefox";k=l.indexOf("Firefox")+8}else if(l.indexOf("Safari")>=0){b="Safari";k=l.indexOf("Version")+8}else if(l.indexOf("MSIE")>=0){b="MSIE";k=l.indexOf("MSIE")+
5;var q=l.indexOf("Trident/");if(q>=0){e=true;f=parseInt(l.substr(q+8))}}else if(l.indexOf(" rv:")>=0){b="MSIE";k=l.indexOf(" rv:")+3;q=l.indexOf("Trident/");if(q>=0){e=true;f=parseInt(l.substr(q+8))}}else{b="";c=0}if(b!=""){c=parseInt(l.substr(k));if(isNaN(c)){k++;c=parseInt(l.substr(k))}parseInt(l.substr(k+2,1))}if(b=="Safari"&&isNaN(c))c=5;h=l.indexOf("Macintosh")>=0;j=b=="Firefox"&&l.indexOf("Firefox/3")>0})(upk.browserInfo={});function getDIV(a){return document.getElementById(a)}
function getDIVstyle(a){try{return document.getElementById(a).style}catch(b){return null}}function shiftTo(a,b,c){a=getDIVstyle(a);a.left=b+"px";a.top=c+"px"}function getUniWidth(a){return a.offsetWidth}function getUniHeight(a){return a.offsetHeight}function getClientWidth(a){return a.offsetWidth}function getClientHeight(a){return a.offsetHeight}function getObjHeight(a){return getDIV(a).offsetHeight}function getObjWidth(a){return getDIV(a).offsetWidth}
function getObjLeft(a){try{var b=getDIVstyle(a);return b.pixelLeft?b.pixelLeft:b.left!=""?parseInt(b.left):document.getElementById(a).offsetLeft}catch(c){return parseInt(a.offsetLeft)}}function getObjTop(a){try{var b=getDIVstyle(a);return b.pixelTop?b.pixelTop:b.top!=""?parseInt(b.top):document.getElementById(a).offsetTop}catch(c){return parseInt(a.offsetTop)}}function getInsideWindowWidth(){return window.innerWidth?window.innerWidth:document.body.clientWidth}
function getInsideWindowHeight(){return window.innerHeight?window.innerHeight:document.body.clientHeight}function getScrollLeft(){return window.pageXOffset||window.pageXOffset==0?window.pageXOffset:document.body.scrollLeft}function getScrollTop(){return window.pageYOffset||window.pageYOffset==0?window.pageYOffset:document.body.scrollTop}
function show(a,b){getDIVstyle(a).visibility="visible";if(b&&upk.browserInfo.isiOS())try{playMode=="S"&&showActObj.type=="Input"&&$("#"+a+" input").attr("readonly",true)}catch(c){}}function hide(a){getDIVstyle(a).visibility="hidden"}var __DPIwidth=0;
function getDpiInfo(){var a=document.getElementById("DPIInfoDiv");if(a!=null){__DPIwidth=a.clientWidth;if(__DPIwidth==0)__DPIwidth=96;__DPIwidth!=0&&document.getElementsByTagName("body")[0].removeChild(a)}return _simulate_120_dpi==true?120:__DPIwidth}function initDpiInfo(){document.write('<div id="DPIInfoDiv" style="visibility:hidden; width: 72pt; height: 1pt;">DPIINFODIV</div>')}function checkIEDPI(){return true}function Get_Element(a){return document.getElementById(a)}
function touch(a){if(a.originalEvent.touches&&a.originalEvent.touches.length)return a.originalEvent.touches[0];else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)return a.originalEvent.changedTouches[0]}function isNavBar(){return typeof navBar!=="undefined"}
function Cookie(a,b,c,e,f,h){this.$document=a;this.$name=b;if(c=="today"){a=new Date;a.setHours(23);a.setMinutes(59);a.setSeconds(59);this.$exp=a}else this.$exp=c?new Date((new Date).getTime()+c*864E5):null;this.$path=e?e:null;this.$domain=f?f:null;this.$secure=h?true:false}
Cookie.prototype.Store=function(){if(PlayerConfig.EnableCookies){var a="",b;for(b in this)if(!(b.charAt(0)=="$"||typeof this[b]=="function")){if(a!="")a+="&";a+=b+":"+escape(this[b])}a=this.$name+"="+a;if(this.$exp)a+="; expires="+this.$exp.toGMTString();if(this.$path)a+="; path="+this.$path;if(this.$domain)a+="; domain="+this.$domain;if(this.$secure)a+="; secure=";this.$document.cookie=a}};
Cookie.prototype.Load=function(){if(!PlayerConfig.EnableCookies)return false;var a=this.$document.cookie;if(a=="")return false;var b=a.indexOf(this.$name+"=");if(b==-1)return false;b+=this.$name.length+1;var c=a.indexOf(";",b);if(c==-1)c=a.length;a=decodeURIComponent(a.substring(b,c)).split("&");for(b=0;b<a.length;b++){c=a[b].split(":");this[c[0]]=unescape(c[1])}return true};
Cookie.prototype.Remove=function(){if(PlayerConfig.EnableCookies){var a=this.$name+"=";if(this.$path)a+="; path="+this.$path;if(this.$domain)a+="; domain="+this.$domain;a+="; expires=Fri, 02-Jan-1970 00:00:00 GMT";this.$document.cookie=a}};
var Escape=function(){function a(f,h){for(var j="",l=0;l<f.length;l++){var k=f.substr(l,1),q;if(h==0)q=k>="0"&&k<="9"||k>="a"&&k<="z"||k>="A"&&k<="Z";else{a:{q=e.length;for(var o=0;o<q;o++)if(k==e[o]){q=true;break a}q=k==c?true:false}q=!q}if(q)j+=k;else{k=f.charCodeAt(l);k="0000"+k.toString(16).toUpperCase();j+=(h==0?"$":c)+k.substr(k.length-4)}}return j}function b(f,h){for(var j="",l=false,k=0;k<f.length;k++){var q;if(l){q=f.substr(k,4);j+=String.fromCharCode(parseInt("0x"+q));k+=3;l=false}else{q=
f.substr(k,1);if(q==(h==0?"$":c))l=true;else j+=q}}return j}var c="/",e=["<",">",'"',"'","%",";","(",")","&","+"];return{SafeUriEscape:function(f){return a(f,1)},SafeUriUnEscape:function(f){return b(f,1)},MyEscape:function(f){return a(f,0)},MyUnEscape:function(f){return b(f,0)}}}();function UrlParser(){this.params=[];this.safemode=false}
UrlParser.prototype.Clone=function(){var a=new UrlParser;a.params=[];a.safemode=this.safemode;for(var b in this.params)if(this.params[b]!=null)a.params[b]=this.params[b];return a};
UrlParser.prototype.Parse=function(){var a,b;a=document.location.hash.substring(1);a=a.split("&");if(a.length==0||a[0]==""){a=document.location.search.substring(1);a=a.split("&")}if(a.length>0)if(a[0].toLowerCase().substr(0,3)=="su="){this.safemode=true;a=a[0].substr(3);a=Escape.SafeUriUnEscape(a);a=a.split("&")}for(var c=0;c<a.length;c++){b=a[c];if(b.length!=0){var e=b.split("=");if(e.length==2)this.params[e[0].toLowerCase()]=e[1];else if(e.length<2)this.params[e[0].toLowerCase()]="";else this.params[e[0].toLowerCase()]=
b.substr(e[0].length+1)}}};UrlParser.prototype.GetSafeMode=function(){return this.safemode};UrlParser.prototype.SetSafeMode=function(a){this.safemode=a};UrlParser.prototype.GetParameter=function(a){return this.params[a.toLowerCase()]};UrlParser.prototype.AddParameter=function(a,b){this.params[a.toLowerCase()]=b};UrlParser.prototype.RemoveParameter=function(a){this.params[a.toLowerCase()]=null};UrlParser.prototype.ClearParameterList=function(){this.params=null;this.params=[]};
UrlParser.prototype.BuildParameterList=function(a){a="";var b=true,c;for(c in this.params){var e=this.params[c];if(e!=null){if(b==false)a+="&";b=false;a+=e.length==0?c:c+"="+this.params[c]}}if(this.safemode)a="su="+Escape.MyEscape(a);return a};
UrlParser.prototype.GetCorrectUrl=function(a,b){if(!this.safemode)return a;var c,e=a.indexOf("#");if(e==-1)e=a.indexOf("?");if(e>=0){var f=a.substring(e+1);c=f.split("&");if(c[0].toLowerCase().substr(0,3)=="su=")return a;return a.substring(0,e+1)+"su="+Escape.SafeUriEscape(f)}else return a+(b?"":"?su=")};function UnescapeQuotes(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function AbsUrl(a){return a}
function LoadXMLDoc(a,b,c,e,f){var h=AbsUrl(a);if(f==undefined)f=false;var j=null;try{if(window.location.href.substr(0,7).toLowerCase()=="http://"||window.location.href.substr(0,8).toLowerCase()=="https://")j=new XMLHttpRequest;if(window.location.href.substr(0,7).toLowerCase()=="file://"&&IsTouchDevice())j=new XMLHttpRequest}catch(l){}finally{if(j==null)j=new ActiveXObject("Microsoft.XMLHTTP")}j.onreadystatechange=function(){state_Change(h,j,b,c,e)};j.open("GET",h,!f);e=="PING"&&j.setRequestHeader("If-Modified-Since",
"Sat, 1 Jan 2005 00:00:00 GMT");j.send(null)}
function state_Change(a,b,c,e,f){if(b.readyState==4)if(b.status==200||b.status==0&&f!="PING"){if(b.responseXML==null||b.responseXML.documentElement==null){a=null;try{a=new ActiveXObject("Microsoft.XMLDOM");a.async=false;a.loadXML(b.responseText)}catch(h){a=(new window.DOMParser).parseFromString(b.responseText,"application/xml")}e=b.responseText;b={};b.responseXML=a;b.responseText=e}c(b,f)}else if(e){f!="PING"&&alert(a+" not found. Logged...");e(f)}else alert("Problem retrieving data: "+b.statusText)}
function LoadXMLDocArray(a,b,c,e,f){LoadXMLDoc(a,f?XMLDocArrayWorker2:XMLDocArrayWorker,c,{nodeName:e,returnFunction:b},false)}function XMLDocArrayWorker(a,b){for(var c=[],e=a.responseXML.getElementsByTagName(b.nodeName),f=0;f<e.length;f++){var h=e[f];(h=h.textContent?h.textContent:h.text)||(h="");var j=h.length;if(j>=2)if(h.substr(0,1)=='"'&&h.substr(j-1,1)=='"')h=h.substr(1,j-2);c[c.length]=h}b.returnFunction(c)}
function XMLDocArrayWorker2(a,b){for(var c=[],e=a.responseXML.getElementsByTagName(b.nodeName),f=0;f<e.length;f++){for(var h=e[f],j=h.attributes[0].value,l="",k=0;k<h.childNodes.length;k++)if(h.childNodes[k].xml)l+=h.childNodes[k].xml;else{var q=new XMLSerializer;l+=q.serializeToString(h.childNodes[k])}c[c.length]=j+"="+l}b.returnFunction(c)}var lms_TOCState=null;
function lms_LoadAdapterComplete(){__Ialert("lms_LoadAdapterComplete() called");var a=document.LmsCom;a.Begin();var b=a.ParentLmsCom;if(b&&b.bigScoItemCount){a.OpenTOCStatus(b.bigScoItemCount,b.bigScoHash);lms_TOCState=a.status_obj.getTocState();a.bigsco=true}else a.OpenBasicStatus();lms_UpdateUI(a.status_obj.getStatus());lms_initialized=true;setTimeout(lms_store.callbackfunction,1)}
function GetChildLmsCom(a){__Ialert("lms_GetChildLmsCom() called");var b=document.LmsCom,c=a.window.document.LmsCom=Kpath_launch&&a.cguid?new LmsComKPath:new LmsComBase(b);c.owner=a.window;var e=parseInt(a.childIndex,10);c.SetOrdinalNumber(e);c.lesson_data=lms_TOCState?lms_TOCState.GetStatus(e)+lms_TOCState.GetChildren(e):"";b.child=c;b.lesson_location=a.childIndex}
function ListenChildClose(){__alert("lms_ListenChildClose() called");if(_sco){var a=document.LmsCom.child;if(a.lesson_status!==LMS_NOT_ATTEMPTED){var b=a.GetOrdinalNumber(),c=Lms2Stat(a.lesson_status),e=a.score;a=a.lesson_data.substring(1);lms_TOCState.SetStatus(b,c);lms_TOCState.SetScore(b,e);lms_TOCState.SetChildren(b,a);lms_ItemStatus_Changed(b)}}}function lms_GetItemStatus(a){return lms_TOCState.GetStatus(a)}function lms_SetItemStatus(a,b){lms_TOCState.SetStatus(a,b)}
function lms_ItemStatus_Changed(a){UpdateItemStatus(a)}var _lms_module_name="lms_toc.js",_lms_show_alert=false,_lms_show_Ialert=false,ctxHelper,lastExpressionF="",lastExpressionH="",roleStatusChanged=false,viewApplicable=false,viewSearch=false,selectorMode="A",actuallySelected,actuallySelectedFull,actuallyChildIndex,playerwindow,toc_safeUriMode=false,playMode="P",odsTopicID,_goToFlatMode=false,_lastSearchResultIsEmpty=false,urlParser,minConceptWidth=0,separator;
function InitRoles(a){if(a=="NOROLES")setTimeout("Init1();",10);else(a=QueryParser.Parse("URI",a))&&QueryProcessor.Start(a,Init0)}function SetRoles(a){SearchProcess_Show(true);modeDescA.treeCreated=false;modeDescF.treeCreated=false;modeDescH.treeCreated=false;modeDescFH.treeCreated=false;roleStatusChanged=true;if(a!="NOROLES")(a=QueryParser.Parse("URI",a))&&QueryProcessor.Start(a,result_Roles_Search);else SetTopicList("NOROLES",null,result_Search2)}
function Trim(a){if(a.length==0)return"";for(;a.substr(0,1)==" ";){a=a.substr(1);if(a.length==0)return""}for(;a.substr(a.length-1,1)==" ";)a=a.substr(0,a.length-1);return a}function IsFilteredChar(a){for(var b=0;b<14;b++)if(a==".,;:!?(){}[]\\'".substr(b,1))return" ";return a}function SearchStringFilter(a){for(var b="",c=false,e=0;e<a.length;e++){var f=a.substr(e,1);if(f=='"'){c=!c;b+=f}else b+=c==true?f:IsFilteredChar(f)}return{s:b,r:c==false}}
function TrimQuotes(a){if(a.length==0)return a;var b=a;if(a.substr(0,1)=='"')b=b.substr(1);if(a.substr(a.length-1,1)=='"')b=b.substr(0,b.length-1);return b}
function Select(a){SearchProcess_Show(true);if(a==0)if(viewApplicable&&viewSearch){if(lastExpressionH==""&&lastExpressionF=="")a=3}else if(viewApplicable){if(lastExpressionH=="")a=2}else if(viewSearch)if(lastExpressionF=="")a=1;if(a==0)if(viewApplicable&&viewSearch){selectorMode="FH";setTimeout(ShowFilteredHemi,0)}else if(viewApplicable){selectorMode="H";setTimeout(ShowHemi,0)}else if(viewSearch){selectorMode="F";setTimeout(ShowFiltered,0)}else{selectorMode="A";setTimeout(ShowAll,0)}else if(a==1){a=
$("#searchbox");var b=a.val();b=SearchStringFilter(b);if(b.r){_lastChangeIsFilterOnly=false;b=Trim(b.s);a.val(TrimQuotes(b));if(b.length==0)SearchProcess_Show(false);else if(b.indexOf("'")>=0)SearchProcess_Show(false);else{selectorMode="F";if(lastExpressionF!=b){modeDescF.treeCreated=false;modeDescFH.treeCreated=false;lastExpressionF=b;(a=QueryParser.Parse("EXPR",b))&&QueryProcessor.Start(a,result_Search)}else viewApplicable?setTimeout(ShowFilteredHemi,0):setTimeout(ShowFiltered,0)}}else{SearchProcess_Show(false);
alert(R_Toc_search_expression_problem)}}else if(a==2)if(hemiParam==null&&genericMode==true){selectorMode="H";ShowGenToc2()}else{b=hemiParam;if(b.length==0)SearchProcess_Show(false);else{selectorMode="H";if(lastExpressionH!=b){modeDescH.treeCreated=false;modeDescFH.treeCreated=false;lastExpressionH=b;(a=QueryParser.Parse("URI","e"+b))&&QueryProcessor.Start(a,result_Search)}else viewApplicable?setTimeout(ShowFilteredHemi,0):setTimeout(ShowHemi,0)}}else if(a==3){a=$("#searchbox");b=Trim(a.val());b=SearchStringFilter(b);
if(b.r){b=Trim(b.s);modeDescF.treeCreated=false;lastExpressionF=b;selectorMode="FH1";(a=QueryParser.Parse("EXPR",b))&&QueryProcessor.Start(a,result_Search)}else{SearchProcess_Show(false);alert(R_Toc_search_expression_problem)}}else if(a==4)if(hemiParam==null&&genericMode==true){selectorMode="FH2";ShowGenToc2()}else{b=hemiParam;modeDescH.treeCreated=false;lastExpressionH=b;selectorMode="FH2";(a=QueryParser.Parse("URI","e"+b))&&QueryProcessor.Start(a,result_Search)}else if(a==5){selectorMode="H";onTocLoaded=
true}}function result_Search2(){if(selectorMode=="F")viewApplicable?setTimeout(ShowFilteredHemi,0):setTimeout(ShowFiltered,0);else if(selectorMode=="H")viewSearch?setTimeout(ShowFilteredHemi,0):setTimeout(ShowHemi,0);else if(selectorMode=="FH1")setTimeout(function(){Select(4)},0);else selectorMode=="FH2"||selectorMode=="FH"?setTimeout(ShowFilteredHemi,0):setTimeout(ShowAll,0)}function result_Roles_Search(a){SetTopicList("ROLES",a,result_Search2)}
function result_Search(a){_lastSearchResultIsEmpty=a.length==0;if(genericMode_SearchHemi==true)ShowGenToc2(a);else if(selectorMode=="F")SetTopicList("FILTERED",a,result_Search2);else if(selectorMode=="H")SetTopicList("HEMI",a,result_Search2);else if(selectorMode=="FH1")SetTopicList("FILTERED",a,result_Search2);else selectorMode=="FH2"&&SetTopicList("HEMI",a,result_Search2)}
var _showBookmark=true,MyBookmark=new function(){function a(){var b=new Cookie(document,"Bookmark_"+toc_hash,30);b.Load();return b}this.StoreBookmark=function(b){var c=a();c.Location=b;c.Store()};this.ReadBookmark=function(){var b=a();if(typeof b.Location=="undefined")return 0;return parseInt(b.Location)}};
function ShowAll(){var a=document.getElementById("treeControlHostForAll"),b=document.getElementById("treeControlHostForFiltered"),c=document.getElementById("flatControlHostForFiltered"),e=document.getElementById("treeControlHostForHemi"),f=document.getElementById("flatControlHostForHemi"),h=document.getElementById("treeControlHostForFilteredHemi"),j=document.getElementById("flatControlHostForFilteredHemi");b.style.display="none";c.style.display="none";e.style.display="none";f.style.display="none";
h.style.display="none";j.style.display="none";a.style.display="block";treeViewMode="ALL";a=_tree_root==""?titles[0]:_tree_root;if(_associated_content==false&&_see_also==false&&_showBookmark){b=MyBookmark.ReadBookmark();c=a.substr(37);if(_treeIndex>=0){b=_treeIndex;c="0"}e=null;try{e=parseInt(c,10)+b}catch(l){}createTreeControl(a,false,null,null,e)}else createTreeControl(a,false,null,_seealso_selecteditem,null);SearchResult_Show(false);_showBookmark=false}
function ShowFiltered(){var a=document.getElementById("treeControlHostForAll"),b=document.getElementById("treeControlHostForFiltered"),c=document.getElementById("flatControlHostForFiltered"),e=document.getElementById("treeControlHostForHemi"),f=document.getElementById("flatControlHostForHemi"),h=document.getElementById("treeControlHostForFilteredHemi"),j=document.getElementById("flatControlHostForFilteredHemi");a.style.display="none";e.style.display="none";f.style.display="none";h.style.display="none";
j.style.display="none";a=GetActualFlatView();if(_goToFlatMode==true)a=true;b.style.display=a?"none":"block";c.style.display=a?"block":"none";_goToFlatMode=false;treeViewMode="FILTERED";createTreeControl(titles[0],a,null,null,null);SearchResult_Show(true);_showBookmark=false;document.getElementById("resulttext").innerHTML=filterHTML(lastExpressionF)}
function ShowHemi(){var a=document.getElementById("treeControlHostForAll"),b=document.getElementById("treeControlHostForFiltered"),c=document.getElementById("flatControlHostForFiltered"),e=document.getElementById("treeControlHostForHemi"),f=document.getElementById("flatControlHostForHemi"),h=document.getElementById("treeControlHostForFilteredHemi"),j=document.getElementById("flatControlHostForFilteredHemi");a.style.display="none";b.style.display="none";c.style.display="none";h.style.display="none";
j.style.display="none";a=GetActualFlatView();if(_goToFlatMode==true)a=true;e.style.display=a?"none":"block";f.style.display=a?"block":"none";_goToFlatMode=false;treeViewMode="HEMI";createTreeControl(titles[0],a,null,null,null);SearchResult_Show(false);_showBookmark=false}
function ShowFilteredHemi(){var a=document.getElementById("treeControlHostForAll"),b=document.getElementById("treeControlHostForFiltered"),c=document.getElementById("flatControlHostForFiltered"),e=document.getElementById("treeControlHostForHemi"),f=document.getElementById("flatControlHostForHemi"),h=document.getElementById("treeControlHostForFilteredHemi"),j=document.getElementById("flatControlHostForFilteredHemi");a.style.display="none";b.style.display="none";c.style.display="none";e.style.display=
"none";f.style.display="none";a=GetActualFlatView();if(_goToFlatMode==true)a=true;h.style.display=a?"none":"block";j.style.display=a?"block":"none";_goToFlatMode=false;treeViewMode="FILTEREDHEMI";createTreeControl(titles[0],a,null,null,null);SearchResult_Show(true);_showBookmark=false;document.getElementById("resulttext").innerHTML=filterHTML(lastExpressionF)}
function EmptyContent(a){a||(a=false);return a==true?'<div style="text-align: center; color: red; font-size: 16px;">'+R_no_results+'<br/><br/><a class="tocMyRoles" href="javascript:viewAll()">'+R_no_results_linkToAll+"</a></div>":'<div style="text-align: center; color: red; font-size: 16px;">'+R_toc_emptycontent+"</div>"}
function FastDoIt(){if(bypassToc!=false){var a=topicDescriptorCache[actuallySelected];if(a==undefined)setTimeout(function(){FastDoIt()},100);else{if(a.playmodes.indexOf("D")>=0){HideToc();PlayFastDoIt()}bypassToc=false}}}
function TreeFinished(a,b){SetSelectionViewText(false);var c=false;if(bypassToc==true)if(treeViewMode=="HEMI")if(GetActualFlatView()==true)if(GetActualFlatItemCounter()==1){c=true;setTimeout(FastDoIt,0)}if(c==false)bypassToc=false;if(b){c=document.getElementById("treeControlHostForAll");var e=document.getElementById("treeControlHostForFiltered"),f=document.getElementById("flatControlHostForFiltered"),h=document.getElementById("treeControlHostForHemi"),j=document.getElementById("flatControlHostForHemi"),
l=document.getElementById("treeControlHostForFilteredHemi"),k=document.getElementById("flatControlHostForFilteredHemi");if(a=="ALL")c.innerHTML=EmptyContent(false);else if(a=="FILTERED"){e.innerHTML=EmptyContent(false);f.innerHTML=EmptyContent(false)}else if(a=="HEMI"){h.innerHTML=EmptyContent(true);j.innerHTML=EmptyContent(true)}else if(a=="FILTEREDHEMI"){l.innerHTML=EmptyContent(true);k.innerHTML=EmptyContent(true)}EnableSelectionViewText(false);Refresh(null)}else EnableSelectionViewText(true)}
var _tocHidden=false;function HideToc(){}function ResumeToc(){}function DoItFinished(a){if(!_closing){window.focus();ResumeToc();if(a==true){top.opener=null;top.open("","_self");top.close()}}}var topicDescriptorCache=[];
function topicDescriptorObj(a,b,c,e,f,h,j,l,k,q,o,v){this.title=a;this.type=b;this.tpc=c;this.playmodes=e;this.jumpInArray=f;this.leadin=h;this.concept=j;this.printitname=encodeURIComponent(l);this.userdefined=k;this.remediation=q;this.seealsoroot="";this.seealsolinks=[];this.qreference=o;this.bigsco=v}function _getFilteredStatus(a){return getFilteredStatus(a)}function seeAlsoLink(a,b,c){this.type=a;this.title=b;this.guid=c;this.filtered=false}
function JumpInPoint(a,b){this.label=a;this.frame_id=b}function CheckSeeAlso(){if(_see_also==true)return false;return true}var _playConceptSound=true;function PlayConceptSound(){return _playConceptSound}function SCO_Supported(){return _sco}var _launchMode="",_lastSelectedItem="",_lastMode="Init",_lastTpc="Init";
function TreeItemSelected(a,b){_launchMode="";if(a){var c=getBaseIndex(),e=a.substr(37),f=e-c;selectorMode=="A"&&MyBookmark.StoreBookmark(f);if(_lastMode!=b||_lastTpc!=a)actuallyChildIndex=-2222;_lastMode=b;_lastTpc=a;if(f==actuallyChildIndex){SearchProcess_Show(false);try{viewApplicable==true?this.frames.myconceptframeToc.SetCtxexParam(lastExpressionH):this.frames.myconceptframeToc.SetCtxexParam(null)}catch(h){}if(roleStatusChanged==true){try{this.frames.myconceptframeToc.RoleStatusChanged()}catch(j){}roleStatusChanged=
false}a==null&&b==null?SetSelectionViewText(true):SetSelectionViewText(false);EnableSelectionViewText(!_lastSearchResultIsEmpty);return}actuallyChildIndex=e-c}_lastMode=b;_lastTpc=a;a==null&&b==null?SetSelectionViewText(true):SetSelectionViewText(false);EnableSelectionViewText(!_lastSearchResultIsEmpty);if(b=="HIDE")SearchProcess_Show(false);else{FocusToSearchField();if(a==null)Refresh(null);else{actuallySelected=c=a.substr(0,36);actuallySelectedFull=a.split("#")[0];_playConceptSound=true;topicDescriptorCache[c]?
Refresh(c):LoadXMLDoc("tpc/"+c+"/descriptor.xml",TreeItemSelected_Returned_Descriptor,null,c,false)}}}
function _StartTopic(a){try{var b=this.frames.myconceptframeToc.location.href;if(b.indexOf("lmstart.html")<0){setTimeout("_StartTopic('"+a+"')",100);return}b=this.frames.myconceptframeToc.frames.myframe.location.href;if(b.indexOf("lmsui.html")<0){setTimeout("_StartTopic('"+a+"')",100);return}if(!this.frames.myconceptframeToc.frames.myframe.launchTopic){setTimeout("_StartTopic('"+a+"')",100);return}if(actuallySelected!=this.frames.myconceptframeToc.topicID){setTimeout("_StartTopic('"+a+"')",100);return}}catch(c){setTimeout("_StartTopic('"+
a+"')",100);return}setTimeout("this.frames['myconceptframeToc'].StartTopic('"+a+"')",100)}
function TreeItemDoubleSelected(){var a=topicDescriptorCache[actuallySelected];try{if(a.type=="Topic"){UserPrefs.LoadCookie();var b=UserPrefs.DefaultPlayMode;_playConceptSound=false;if(a.playmodes.indexOf(b)>=0){_launchMode=b;_lastSelectedItem==actuallySelected&&_StartTopic(_launchMode)}else{a=R_mode_seeit;switch(b){case "T":a=R_mode_tryit;break;case "K":a=R_mode_knowit;break;case "D":a=R_mode_doit;break;case "P":a=R_mode_printit;break;default:a=R_mode_seeit}alert(R_not_playable1+a+R_not_playable2)}}}catch(c){setTimeout(TreeItemDoubleSelected,
0)}}function fixHTMLString(a){a=replaceString("<","&lt;",a);a=replaceString(">","&gt;",a);a=replaceString("'","&#39;",a);return a=replaceString('"',"&#34;",a)}function getDescriptorItem(a,b){var c="";try{var e=a.responseXML.getElementsByTagName(b);if(e.length>0){var f=e[0];if(f.textContent!=null)c=f.textContent;else if(f.text!=null)c=f.text;else if(f.firstChild.data!=null)c=f.firstChild.data}}catch(h){}return c}var firstrun=true;
function TreeItemSelected_Returned_Descriptor(a,b){if(firstrun){firstrun=false;window.scrollTo(0,0)}for(var c=getDescriptorItem(a,"PlayModes"),e=[],f=a.responseXML.getElementsByTagName("JumpIn"),h=0;h<f.length;h++){var j=f[h];if(j.textContent)var l=j.textContent;else if(j.text)l=j.text;else if(j.firstChild.data)l=j.firstChild.data;r=j.attributes[0];j=r.value;e[e.length]=new JumpInPoint(fixHTMLString(l),j)}h="./../html/empty.html";f=a.responseXML.getElementsByTagName("Leadin");if(f.length>0)h="./tpc/"+
b+"/leadin.html";r="";f=a.responseXML.getElementsByTagName("Concept");if(f.length>0){j=f[0];if(j.textContent)r=j.textContent;else if(j.text)r=j.text;else if(j.firstChild.data)r=j.firstChild.data;if(r.indexOf("odrel://")==0)r=resolve(r)}f=getDescriptorItem(a,"Title");j=getDescriptorItem(a,"Type");l=getDescriptorItem(a,"PrintItName");var k=getDescriptorItem(a,"UserDefined"),q=getDescriptorItem(a,"Remediation");if(q=="")q="Always";var o=getDescriptorItem(a,"Reference"),v=getDescriptorItem(a,"BigSco");
topicDescriptorCache[b]=new topicDescriptorObj(f,j,b,c,e,h,r,l,k,q,o,v);f=a.responseXML.getElementsByTagName("SeeAlsoRoot");if(f.length>0){j=f[0];c="";if(j.textContent)c=j.textContent;else if(j.text)c=j.text;else if(j.firstChild.data)c=j.firstChild.data;topicDescriptorCache[b].seealsoroot=c}f=a.responseXML.getElementsByTagName("SeeAlso");for(h=0;h<f.length;h++){j=f[h];l=e=c="";for(k=0;k<j.attributes.length;k++){var r=j.attributes[k];if(r.nodeName=="Type")c=getTextContent(r);if(r.nodeName=="Title")e=
getTextContent(r);if(r.nodeName=="Guid")l=getTextContent(r)}if(c.length>0&&e.length>0)topicDescriptorCache[b].seealsolinks[topicDescriptorCache[b].seealsolinks.length]=new seeAlsoLink(c,e,l)}Refresh(b)}function getTextContent(a){try{if(a.value)return a.value;else if(a.text)return a.text;else if(a.firstChild.data)return a.firstChild.data;return""}catch(b){return""}}var lastConcept="",rcTimeout=null,nextConcept="";
function EmptyHtmlLoaded(){this.frames.myconceptframeToc.location.replace(urlParser.GetCorrectUrl(nextConcept))}function SetConceptLocation(a){nextConcept=AbsUrl(a);EmptyHtmlLoaded()}function _RefreshConcept(a){a||(a=false);if(lastConcept!="")if(lastConcept.indexOf(".htm")>0){if(a==true)_playConceptSound=false;SetConceptLocation(lastConcept)}}function RefreshConcept(){try{clearTimeout(rcTimeout)}catch(a){}}function OnUpdatePreferences(){_RefreshConcept(true)}var psInit=null;
function PlaySound_Init(){try{this.frames.myconceptframeToc.PlaySound_Init()}catch(a){}}function ShowConcept(a){if(a==lastConcept)try{if(_playConceptSound==true)psInit=setTimeout(PlaySound_Init,0);else clearTimeout(psInit)}catch(b){}else{lastConcept=a;SetConceptLocation(a)}}
function Refresh(a){a!=null&&TreeRefreshed(a.substr(0,36));SearchProcess_Show(false);if(a==null||a=="null"){setTimeout('ShowConcept("./../html/empty.html")',1);conceptVisible=false}else{var b=topicDescriptorCache[a],c=b.concept;if(b.type=="Outline"||b.type=="Section"||b.type=="Topic"){c="";if(_launchMode.length>0)c="&mode="+_launchMode;if(b.type=="Topic"&&viewApplicable==true)if(lastExpressionH.length>0||genericMode==true){var e=actuallySelectedFull.split("#")[0],f=getModeDesc(false).filteredGuids[e].context;
e=getModeDesc(false).filteredGuids[e].guid.substr(0,36);c+="&guid="+e+"&contextlist="+f}f=urlParser.GetParameter("guid");if(f!=null)c+="&guid="+f;f=urlParser.GetParameter("contextlist");if(f!=null)c+="&contextlist="+f;c="./tpc/"+a+"/lmstart.html?toc"+(_launchFromKPath?"&launchFromKPath":"")+"&lmsChildIndex="+actuallyChildIndex+c}if(b.type=="Question")c="./tpc/"+a+"/lmstart.html?toc"+(_launchFromKPath?"&launchFromKPath":"")+"&lmsChildIndex="+actuallyChildIndex;if(b.type=="Assessment"){c="";c=getOwnerOfSelection().substr(0,
36);c="./tpc/"+a+"/lmstart.html?toc"+(_launchFromKPath?"&launchFromKPath":"")+"&owner="+c+"&lmsChildIndex="+actuallyChildIndex}_lastSelectedItem=actuallySelected;if(c.length==0)c=b.leadin;setTimeout('ShowConcept("'+c+'")',50);conceptVisible=true;RolesRemoved()}Resize()}function LoadRuntime(a){a=topicDescriptorCache[a];var b=a.concept;if(b.length==0)b=a.leadin;setTimeout('ShowConcept("'+b+'")',50);conceptVisible=true;RolesRemoved();Resize()}
function GetBasePath(){var a=this.location.href,b=a.indexOf("?");if(b<0)b=a.indexOf("#");if(b>=0)a=a.substr(0,b);b=a.lastIndexOf("/");return a.substr(0,b)}function ClosePlayer(){try{if(playerwindow)playerwindow.closed||playerwindow.close()}catch(a){}}
function PlayFastDoIt(){_playConceptSound=false;try{this.frames.myconceptframeToc.Sound_Stop()}catch(a){}var b="mode=D";if(viewApplicable==true)if(lastExpressionH.length>0){var c=actuallySelectedFull.split("#")[0],e=getModeDesc(false).filteredGuids[c].context;c=getModeDesc(false).filteredGuids[c].guid.substr(0,36);b+="&contextlist="+e;b+="&guid="+c}e=topicDescriptorCache[actuallySelected];if(e.playmodes.indexOf("P")>=0&&e.printitname.length>0)b+="&printitname="+e.printitname;if(bypassToc==true)b+=
"&fastdoit=true";if(toc_safeUriMode==true)b="su="+Escape.SafeUriEscape(b);e=GetBasePath();LaunchDoIt(e+"/tpc/"+actuallySelected+"/",b)}function OnQuestionContinue(){GoToNext()}
var showParameters=false,searchParam=null,hemiParam=null,appParam=null,ctxParam=null,udvParam=null,shParam=null,XDTParam=null,genericMode=false,genericMode_SearchHemi=false,searchVisible=false,conceptVisible=false,allRoles=[],_rolesRemoved=false,ctxTopicList=[],ctxTopicList2=[],onTocLoaded=false,showButtons=[],_tree_root="",_sco=false,_associated_content=false,_see_also=false,_seealso_selecteditem=0,isTocHtml=true,_selectedItemId=0,_deviceDPI=0,_launchFromKPath=false,_treeIndex=-1,_launchedFromSharedLink=
false;function IsReducedMode(){return _tree_root.length>0}function NoWrap(a){for(var b="",c=0;c<a.length;c++)b+=a.substr(c,1)==" "?"&nbsp;":a.substr(c,1);return b}function _getObjectById(a,b){for(var c=0;c<a.childNodes.length;c++){var e=a.childNodes[c];if(e.id==b)return e;else{e=_getObjectById(e,b);if(e!=null)return e}}return null}function getObjectById(a){return document.getElementById(a)}
var _header1DivObj=null,_treeContainerObj=null,_searchResultObj=null,_pmTableObj=null,_ctTableObj=null,_searchBoxObj=null,_changeViewObj=null,_resulttextObj=null,_vbordersize=5,_hbordersize=5,_sbordersize=5;function getOffsetLeft(a){var b=0;if(a.parentNode)b=getOffsetLeft(a.parentNode);return(a.offsetLeft?a.offsetLeft:0)+b}function getOffsetTop(a){var b=0;if(a.parentNode)b=getOffsetTop(a.parentNode);return(a.offsetTop?a.offsetTop:0)+b}var _cover_dragged=false,treeWidth=250;
function RefreshPdf(){if(upk.browserInfo.isiOS()){var a=$("#contentdiv").position().left;setTimeout(function(){$("#contentdiv").css({left:a+1+"px"});setTimeout(function(){$("#contentdiv").css({left:a+"px"})},100)},100)}}function SetFocusToTree(){$("#searchtopcontainer").focus()}function lmsUILoaded(){upk.browserInfo.isiOS()&&setTimeout(function(){RefreshPdf()},100);for(var a=1;a<=4;a++)setTimeout(function(){SetFocusToTree()},300*a)}
function initSeparator(){function a(r){if(v){r.preventDefault();return false}if(IsTouchDevice())r=touch(r);h=j=r.pageX;$(document).on("touchmove",function(z){c(z)}).on("touchend",function(){e()});return true}function b(r){minConceptWidth=getConceptPageWidth();if(IsTouchDevice())r=touch(r);_cover_dragged=true;l=false;k=true;if(!o){var z=r.clientX-$("#sepdiv").width()/2;if(IsTouchDevice())z+=window.pageXOffset+4;q=setTimeout(function(){k=false;o=true;$("#sepbutton>.left").show();$("#sepbutton>.right").hide();
$("#contentdiv").css({left:z+"px"});$("#treeside").css({width:z+"px","-webkit-transform":"translate3d(0,0,0)"}).show()},250)}if(IsTouchDevice()){$(document).on("touchmove",function(B){c(B)}).on("touchend",function(){e()});h=j=r.pageX}$("#cover").show();r=document.getElementById("cover");r.setCapture&&r.setCapture()}function c(r){if(v){r.preventDefault();return false}var z=r;if(z==null)z=window.event;if(IsTouchDevice())z=touch(z);if(!_cover_dragged){if(j!=z.pageX)h=j;j=z.pageX;return true}clearTimeout(q);
if(z.pageX>j+10||z.pageX<j-10)l=true;if(l){var B=z.clientX-$("#sepdiv").width()/2;if(IsTouchDevice()){B+=window.pageXOffset+4;if(j!=z.pageX)h=j;j=z.pageX;r.preventDefault()}if(B<$("#container").width()-minConceptWidth-$("#sepdiv").width()){$("#contentdiv").css("left",B+"px");$("#treeside").css("width",B+"px")}if(!o){$("#sepbutton>.left").show();$("#sepbutton>.right").hide();$("#treeside").css({"-webkit-transform":"translate3d(0,0,0)"}).show();o=true}if(_treeContainerObj==null)_treeContainerObj=getObjectById("treecontainer");
setTimeout(_HResize,1)}}function e(){$(document).off("touchmove").off("touchend");if(!_cover_dragged){var r=h-j;if(r>30&&o||r<-30&&!o)f();return true}clearTimeout(q);_cover_dragged=false;$("#cover").hide();r=document.getElementById("cover");r.releaseCapture&&r.releaseCapture();document.frames&&document.frames[0].focus();var z=false;if(IsTouchDevice()){if(!l&&k){f();return true}r=h-j;if(r>30&&o||r<-30&&!o)z=true}if($("#treeside").width()<125&&o||z)f();else if(l){treeWidth=$("#treeside").width();if(treeWidth<
125)treeWidth=125;r=new Cookie(document,"OnDemandToc",365,null,null,false);r.Load();r.Separator=treeWidth;r.Store()}}function f(){if(!v){v=true;$("#contentdiv").position();$("#treeDiv").scrollLeft(0);if(o){w=$("#treeside").width();$("#sepbutton>.left").hide();$("#sepbutton>.right").show();if(IsTouchDevice()){$("#treeside, #sepbutton, #contentdiv").addClass("swipeanim");$("#treeside").css({"-webkit-transform":"translate3d("+-w+"px,0,0)"});$("#contentdiv").on("webkitTransitionEnd",function(){$("#contentdiv").off("webkitTransitionEnd");
$("#treeside, #sepbutton, #contentdiv").removeClass("swipeanim");$("#treeside").css({width:treeWidth+"px","-webkit-transform":"translate3d("+-treeWidth+"px,0,0)"});$("#treeinner").css({"border-left-width":"8px"});$("#contentdiv").css({left:"7px","-webkit-transform":"translate3d(0,0,0)"});v=false});$("#contentdiv").css({"-webkit-transform":"translate3d("+-(w-7)+"px,0,0)"})}else{$("#treeside").animate({width:"0"},300);$("#contentdiv").animate({left:"0"},300,function(){v=false})}o=false}else{$("#sepbutton>.left").show();
$("#sepbutton>.right").hide();if(IsTouchDevice()){$("#treeside, #sepbutton, #contentdiv").addClass("swipeanim");$("#treeside").css({"-webkit-transform":"translate3d(0,0,0)"});$("#contentdiv").on("webkitTransitionEnd",function(){$("#contentdiv").off("webkitTransitionEnd");$("#treeside, #sepbutton, #contentdiv").removeClass("swipeanim");$("#treeside").css({width:treeWidth+"px"});$("#contentdiv").css({left:treeWidth+"px","-webkit-transform":"translate3d(0,0,0)"});v=false});$("#contentdiv").css({"-webkit-transform":"translate3d("+
treeWidth+"px,0,0)"})}else{$("#treeside").animate({width:treeWidth+"px"},300);$("#contentdiv").animate({left:treeWidth+"px"},300,function(){v=false})}o=true}}}var h=0,j=0,l=false,k,q,o=true,v=false;$("#sepdiv").on("mousedown",b);$("#cover").on("mousemove",c);$("#cover").on("mouseup",e);if(IsTouchDevice()){$("#sepbutton").on("touchstart",function(r){b(r);r.preventDefault()});$(document).on("touchstart",function(r){a(r)})}else $("#sepbutton").on("click",function(){f()});return{isTreeVisible:function(){return o}}}
function OpenSeeAlso(a,b){this.frames.myconceptframeToc.OpenSeeAlso(a,b)}function launchTopic(a,b,c){this.frames.myconceptframeToc.StartTopic(a,b,c)}function getConceptPageWidth(){return this.frames.myconceptframeToc.getConceptPageWidth()}function ShowAbout(){this.frames.myconceptframeToc.OnPrepareDialog&&this.frames.myconceptframeToc.OnPrepareDialog();setDlgCtx("about");showDialog(GetBasePath()+"/../html/about.html",-1,-1,300,375,true,_deviceDPI,null,false)}
function TreeRefreshed(a){_selectedItemId=a}function ConnectionLostEvent(a){this.frames.myconceptframeToc.ConnectionLostEvent(a)}function SearchResult_Show(a){if(_searchResultObj==null)_searchResultObj=getObjectById("searchresult");_searchResultObj.style.display=a?"":"none";searchVisible=viewSearch=a;Resize()}
function SearchProcess_Show(a){if(a){document.getElementById("coversearch").style.width="100%";document.getElementById("coversearch").style.height="100%";a=document.getElementById("searchprdiv");a.style.display="block";var b=Math.round(document.body.clientHeight/2-20);a.style.left=""+Math.round(document.body.clientWidth/2-60)+"px";a.style.top=""+b+"px"}else{document.getElementById("coversearch").style.width="0px";document.getElementById("coversearch").style.height="0px";document.getElementById("searchprdiv").style.display=
"none"}}function Resize(){setTimeout(_Resize,0)}function Resize0(){setTimeout(_Resize,0)}function _HResize(){checkIEDPI()}
function _Resize(){if(checkIEDPI()!=false){if(document.body.clientHeight<100||document.body.clientWidth<100){_HResize();return false}if(hemiParam!=null||XDTParam!=null||allRoles.length>0&&PlayerConfig.EnableCookies==true)getObjectById("appandroles").className="tocSearchColor";if(_header1DivObj==null)_header1DivObj=getObjectById("header1");if(_treeContainerObj==null)_treeContainerObj=getObjectById("treecontainer");if(_searchResultObj==null)_searchResultObj=getObjectById("searchresult");if(_changeViewObj==
null)_changeViewObj=getObjectById("changeview");if(_pmTableObj==null)_pmTableObj=getObjectById("playmodetable");if(_ctTableObj==null)_ctTableObj=getObjectById("concepttitletable");_HResize();var a=$("#treeinner").height();if(upk.browserInfo.isSafari()||upk.browserInfo.isFF())a-=2;a-=8;var b=viewApplicable||searchVisible;_changeViewObj.className=b?"tocFrameText modebuttonshow":"tocFrameText modebuttonhide";var c=0;if(searchVisible)c=_searchResultObj.clientHeight;if(b)c+=getObjectById("changeview").clientHeight;
if(!IsTouchDevice())try{var e=$("#searchtopcontainer").height()+$("#appandroles").height();_treeContainerObj.style.height=""+(a-e-c)+"px"}catch(f){_treeContainerObj.style.height="0px"}RefreshConcept()}}function MyEventKeyDown(a){if(!a)a=window.event;var b=a.keyCode;if(b==27)try{if(parent.isOpenDialog()){parent.closeDialog();return}}catch(c){}if(b==13&&_inputHasFocus==true){Search_Click();return false}upk.browserInfo.isSafari()&&EventKeyDown(a)}function FocusToSearchField(){}
function applicable_Click(){if($("#chapp").prop("checked"))_goToFlatMode=viewApplicable=true;else viewApplicable=false;Select(0)}function applicable_Clear(){$("#chapp").prop("checked",false);applicable_Click()}function Search_Click(){if(_inputIsEmpty!=true){_goToFlatMode=viewSearch=true;FocusToSearchField();IsTouchDevice()&&document.getElementById("searchcontainer2").focus();SetSelectionViewText(true);Select(1)}}
function Search_Clear_Click(){$("#searchbox").val("");OnInputBlur();if(viewSearch!=false){viewSearch=false;FocusToSearchField();Select(0);SearchProcess_Show(false)}}function SetSelectionViewText(a){var b=GetActualFlatView();a||(a=IsActualViewEmpty());if(a==true)document.getElementById("selectionviewtext").innerHTML="";else document.getElementById("selectionviewtext").innerHTML=b?R_toc_tree_view_in_outline:R_toc_tree_view_resultlist}
function EnableSelectionViewText(a){a?$("selectionviewtext").show():$("selectionviewtext").hide()}function ChangeView_Click(){_goToFlatMode=ChangeTreeView();SetSelectionViewText(false)}var _inputIsEmpty=true,_inputHasFocus=false;function OnInputFocus(){_inputHasFocus=true;_inputIsEmpty==true&&$("#searchbox").val("").attr("class","tocSearch");_inputIsEmpty=false}
function OnInputBlur(){_inputHasFocus=false;var a=$("#searchbox");if(a.val()==""){_inputIsEmpty=true;a.val(R_Toc_search);a.attr("class","tocSearchBarText")}else{_inputIsEmpty=false;a.attr("class","tocSearch")}}function SearchFontSize(a){for(var b=1;b<document.styleSheets.length;b++){var c=document.styleSheets[b];c="rules"in c?c.rules:"cssRules"in c?c.cssRules:[];for(var e=0;e<c.length;e++){var f=c[e];if(f.selectorText==a)return f.style.fontSize}}return""}
function getAbsoluteXPosInToc(a){_sbordersize=$("#sepdiv").width();return(separator.isTreeVisible()?$("#treeside").width():0)+a+_vbordersize+_sbordersize}function getAbsoluteYPosInToc(a){_hbordersize=5;return _header1DivObj.clientHeight+_hbordersize+a}function Toc_onCloseDialog(){if(upk.browserInfo.isExplorer()){$("#searchbox").focus();$("#searchbox").blur()}}function viewAll(){applicable_Clear&&applicable_Clear()}
function loadResources(){$("*[data-value]").each(function(){$(this).text(function(){return window[$(this).attr("data-value")]})});$("*[data-alt]").each(function(){$(this).attr("alt",function(){return window[$(this).attr("data-alt")]})});$("*[data-title]").each(function(){$(this).attr("title",function(){return window[$(this).attr("data-title")]})})}$(function(){setTimeout(Init,0)});$(window).load(function(){navigator.userAgent.indexOf("Firefox")>=0&&$("#treeside").css("display","block")});
function Init(){loadResources();if(_deviceDPI==0)_deviceDPI=getDpiInfo();if(_deviceDPI==0)setTimeout(Init,100);else{if(_deviceDPI!=96)if(getDPICookie()==false){this.location.replace("./../html/unsuppdpi.html?"+Escape.MyEscape(AbsUrl(this.location.href)));return}ctxHelper.SetContext("toc");setOnCloseEvent("parent.parent.Toc_onCloseDialog()");ParseArguments();_see_also==false&&_associated_content==false&&InitLmsMode("toc");var a=0;if(_lmsMode!=null)a=-1;if(_see_also==true||_associated_content==true)a=
-1;try{if(soundIsExported==undefined)soundIsExported=false;if(soundIsExported==null)soundIsExported=false}catch(b){soundIsExported=false}if(_lmsMode!=null)if(urlParser.GetParameter("nosound")==null)if(Sound_Init(soundIsExported,UserPref_PlayAudio_Original,null,false,"../")==false)return;if(lms_initialized==false)lms_InitPage(a,_lmsMode==null?window.opener:null,null,"Init()");else{urlParser.GetParameter("nosound")!=null&&SetNoSound(true);IsTouchDevice()&&$("#container").addClass("ipad");tree_Init()}}}
function Init_treeloaded(){var a=document.getElementById("searchbox"),b=parseInt(SearchFontSize(".tocSearch")),c=parseInt(a.style.height);b=Math.floor((c-b)/2);a.style.height=""+(c-b)+"px";a.style.paddingTop=""+b+"px";try{if(_sco==false)document.title=(UIComponents.TitlePrefix==true?R_toc_title+" - ":"")+UnescapeQuotes(moduleName)}catch(e){_Resize();window.onresize=Resize0;document.getElementById("searchbox").disabled=true;document.getElementById("contentisemptydiv").innerHTML=R_toc_content_empty;
document.getElementById("treecontainer").style.verticalAlign="top";document.getElementById("mytreeframe").style.display="none";document.getElementById("contentisemptydiv").style.display="block";return}if(_resulttextObj==null)_resulttextObj=getObjectById("resulttext");if(document.all)_resulttextObj.style.width="100px";PlayerConfig.EnableCookies==true&&UserPrefs.EnablePreferences==true&&getObjectById("prefsbutton");LoadXMLDocArray("roles.xml",Roles_Returned,Roles_Error,"Role",false)}
function RolesRemoved(){_rolesRemoved==true&&alert(R_roles_all_removed);_rolesRemoved=false}
function Roles_Returned(a){if(UIComponents.Help===false){a={};a.length=0}for(var b=0;b<a.length;b++)allRoles[b]=a[b];a=getObjectById("hasrole");if(allRoles.length>0&&PlayerConfig.EnableCookies==true)a.style.display="inline";if(UIComponents.Help===false)setTimeout(Init1,50);else{UserRoles.LoadCookie();a=GetTopLevelLmsMode();if(a!="Cookie"&&a!="KPT")UserRoles.Filtering=false;if(_associated_content==true)UserRoles.Filtering=false;if(_launchedFromSharedLink==true)UserRoles.Filtering=false;if(UserRoles.Filtering==
true&&allRoles.length==0){UserRoles.Filtering=false;UserRoles.StoreCookie();_rolesRemoved=true}$("#chroles").prop("checked",UserRoles.Filtering);UserRoles.Filtering==true?InitRoles(GetRolesQueryString()):setTimeout(Init1,50)}}function Roles_Error(){setTimeout(Init1,50)}function Init0(a){SetTopicList("ROLES",a,Init1)}function GetAllRoles(){return allRoles}
function onRoles(){this.frames.myconceptframeToc.OnPrepareDialog&&this.frames.myconceptframeToc.OnPrepareDialog();setDlgCtx("roles");showDialog(GetBasePath()+"/../html/roles.html",-1,-1,320,290,true,_deviceDPI,null,false)}function roles_Click(){var a=$("#chroles");if(a.prop("checked")&&UserRoles.Roles.length==0){a.prop("checked",false);onRoles()}else{UserRoles.Filtering=a.prop("checked");UserRoles.StoreCookie();setRoleFiltering()}TocToTop(100)}
function onUpdateRoles(){setRoleFiltering();TocToTop(200)}function TocToTop(a){upk.browserInfo.isiOS()&&setTimeout(function(){window.scrollTo(0,0)},a)}function GetRolesQueryString(){if(!UserRoles.Filtering)return"NOROLES";var a=UserRoles.Roles.length;if(a==0)return"NOROLES";for(var b="r",c=0;c<a;c++){var e=UserRoles.Roles[c];e=Escape.MyUnEscape(e);e=e.toLowerCase();e=Escape.MyEscape(e);b+="'"+e+"'";if(c!=a-1)b+="-"}return b}
function setRoleFiltering(){SetSelectionViewText(true);UserRoles.LoadCookie();$("#chroles").prop("checked",UserRoles.Filtering);var a=GetRolesQueryString();SetRoles(a)}var XdtTimeout=null;
function Init1(){if(window.parent!==window){if(XDTParam!=null){XdtTimeout=setTimeout(function(){if(XdtTimeout!=null){clearTimeout(XdtTimeout);XdtTimeout=null;Init2()}},15E3);XdTransfer.AddListener(this,function(a,b){if(XdtTimeout!=null)if(a=="oraupk-context"){clearTimeout(XdtTimeout);XdtTimeout=null;XdTransfer.PostMessage(window.parent,"oraupk-debuginfo_searchexpression",{data:b});var c=QueryParser.Parse("XDT",b);c&&QueryProcessor.Start(c,result_XDT)}})}XdTransfer.PostMessage(this.parent,"oraupk-ready",
null)}Init2()}function result_XDT(a){hemiParam=null;genericMode=true;selectorMode="H";ShowGenToc(a)}
function Init2(){if(upk.browserInfo.isSafari())document.onkeydown=MyEventKeyDown;else document.onkeypress=MyEventKeyDown;FocusToSearchField();if(hemiParam!=null||genericMode==true||XDTParam==true){a=$("#hasapp");a.css("display","inline");a.css("paddingLeft","4px")}else if(allRoles.length>0&&PlayerConfig.EnableCookies==true){a=$("#hasrole");a.css("paddingLeft","4px")}if(hemiParam==null&&genericMode==false||XDTParam==false||allRoles.length==0)document.getElementById("searchbox").style.marginTop=upk.browserInfo.isFF3()?
"-2px":upk.browserInfo.isSafari()?"0px":"-1px";a=new Cookie(document,"OnDemandToc",365,null,null,false);a.Load();treeWidth=a.Separator?Number(a.Separator):250;$("#contentdiv").css("left",treeWidth+"px");$("#treeside").css("width",treeWidth+"px");$("#container").css("top",Number($("#header1").height())+5+"px");_Resize();window.onresize=Resize0;separator=initSeparator();$("#searchbox").val("");OnInputBlur();if(_tree_root!=""){document.getElementById("appandroles").style.display="none";document.getElementById("searchcontainer1").style.display=
"none";document.getElementById("searchcontainer2").style.display="none";document.getElementById("searchcontainer3").style.display="none";if(_associated_content==true){document.getElementById("specialcontentdiv").style.display="block";document.getElementById("specialcontenttext").innerHTML=R_toc_associated_content}if(_see_also==true){document.getElementById("specialcontentdiv").style.display="block";document.getElementById("specialcontenttext").innerHTML=R_toc_see_also}if(_sco==true){document.getElementById("specialcontentdiv").style.display=
"block";document.getElementById("specialcontenttext").innerHTML=""}if(upk.browserInfo.isFF()||upk.browserInfo.isSafari())document.getElementById("specialcontentdiv").style.paddingTop="5px"}$("#treeside").show();if(genericMode==true||XDTParam==true){OnInputBlur();var a=$("#chapp");a.prop("disabled",false);a.prop("checked",true);InitApplicableOutlineDisplay();Select(viewApplicable?5:0)}else if(searchParam!=null&&hemiParam!=null){a=$("#searchbox");a.val(searchParam);OnInputBlur();a=$("#chapp");a.prop("disabled",
false);a.prop("checked",true);InitApplicableOutlineDisplay();Select(viewApplicable?3:1)}else if(searchParam!=null){a=$("#searchbox");a.val(searchParam);OnInputBlur();Select(1)}else if(hemiParam!=null){a=$("#chapp");a.prop("disabled",false);a.prop("checked",true);InitApplicableOutlineDisplay();Select(viewApplicable?2:0)}else Select(0)}
function InitApplicableOutlineDisplay(){switch(UserPrefs.ApplicableOutlineDisplay){case "A":viewApplicable=false;break;case "O":viewApplicable=true;_goToFlatMode=false;break;default:_goToFlatMode=viewApplicable=true}$("#chapp").prop("checked",viewApplicable)}function UnescapeHemiParam(a){return replaceString("%27","'",a)}
function ParseArguments(){if(showParameters==true){var a=document.location.hash.substring(1),b=a.split("&");if(b.length==0||b[0]=="")a=document.location.search.substring(1);alert(a)}urlParser=new UrlParser;urlParser.Parse();toc_safeUriMode=urlParser.GetSafeMode();a=null;if(searchParam=urlParser.GetParameter("search"))_goToFlatMode=true;if(hemiParam=urlParser.GetParameter("ctxex")||null){hemiParam=UnescapeHemiParam(hemiParam);if(hemiParam==""||hemiParam=="''")hemiParam=null;else{_goToFlatMode=true;
appParam=urlParser.GetParameter("app");ctxParam=urlParser.GetParameter("ctx");udvParam=urlParser.GetParameter("udv");shParam=urlParser.GetParameter("sh")}}if(XDTParam=urlParser.GetParameter("XDT"))XDTParam=true;if(urlParser.GetParameter("genctx")!=null)_goToFlatMode=genericMode=true;if(a=urlParser.GetParameter("sac")||""){_tree_root=a;_associated_content=true}if(a=urlParser.GetParameter("sco")||""){_tree_root=a;_sco=true}if(a=urlParser.GetParameter("seealso")||""){_tree_root=a;_see_also=true}if(a=
urlParser.GetParameter("selectitem"))_seealso_selecteditem=parseInt(a,10);if(urlParser.GetParameter("launchfromkpath")!=null)_launchFromKPath=true;if(genericMode==true)searchParam=null;if(a=urlParser.GetParameter("treeindex")||"")_treeIndex=parseInt(a,10);urlParser.GetParameter("keep-alive-timer")!=null&&KeepAlive_Init("../");if(urlParser.GetParameter("treeindex")!=null&&urlParser.GetParameter("guid")!=null&&urlParser.GetParameter("bypasstoc")!=null)_launchedFromSharedLink=true}
function IndexObject(a,b){this.index=a;this.score=b}function SortFunction(a,b){return b.score-a.score}function ShowGenToc(a){ctxTopicList=[];ctxTopicList2=[];for(var b=0;b<a.length;b++)ctxTopicList[ctxTopicList.length]=new IndexObject(a[b].index,typeof a[b].score!="undefined"?a[b].score:a[b].weight);ctxTopicList.sort(SortFunction);if(hemiParam==null)ShowGenToc2(null);else{genericMode_SearchHemi=true;Select(2)}}
function ShowGenToc2(a){genericMode_SearchHemi=false;if(a!=null){for(var b=0;b<a.length;b++){for(var c=a[b].index,e=false,f=0;f<ctxTopicList.length;f++){var h=ctxTopicList[f].index;if(c==h){e=true;break}}if(e==false)for(f=0;f<ctxTopicList2.length;f++){h=ctxTopicList2[f].index;if(c==h){e=true;break}}if(e==false)ctxTopicList2[ctxTopicList2.length]=new IndexObject(c,1)}if(ctxTopicList2.length>0){for(b=0;b<ctxTopicList.length;b++)ctxTopicList2[ctxTopicList2.length]=ctxTopicList[b];ctxTopicList=ctxTopicList2}}result_Search(ctxTopicList)}
function IsEmptyArgument(a,b){if(a.length<=b)return true;if(a.length>b+2)return false;var c=a.substr(b);if(c=='""'||c=="''")return true;return false}var _closing=false;function Closing2(){upk.browserInfo.isExplorer()||Closing()}
function Closing(){lms_ClosePage(false);_closing=true;ClosePlayer();KeepAlive_Close();var a=new Cookie(document,"OnDemandToc",365,null,null,false);a.Load();if(window.screenLeft!=null){a.TocLeft=window.screenLeft-4;a.TocTop=window.screenTop-30;a.TocWidth=document.body.clientWidth;a.TocHeight=document.body.clientHeight}else{a.TocLeft=window.screenX;a.TocTop=window.screenY;a.TocWidth=window.innerWidth;a.TocHeight=window.innerHeight}a.Store()}function NotSupportedYet(){alert("Coming soon ...")}
var logger_enabled_query=false;function log(a){logger_enabled_query&&window.top.console&&window.top.console.log(a)}var datasourceroot="querydb/",ConvertDbSelector={t:"text",u:"ctxod",e:"ctxex",r:"role",g:"genctx"},q_search_and=" and ",q_search_or=" or ";
function ToHalfWidth(a){for(var b="",c=0;c<a.length;c++){var e="\u30f2\u30a1\u30a3\u30a5\u30a7\u30a9\u30e3\u30e5\u30e7\u30c3\u30fc\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f3".indexOf(a.charAt(c));b+=e!==-1?"\uff66\uff67\uff68\uff69\uff6a\uff6b\uff6c\uff6d\uff6e\uff6f\uff70\uff71\uff72\uff73\uff74\uff75\uff76\uff77\uff78\uff79\uff7a\uff7b\uff7c\uff7d\uff7e\uff7f\uff80\uff81\uff82\uff83\uff84\uff85\uff86\uff87\uff88\uff89\uff8a\uff8b\uff8c\uff8d\uff8e\uff8f\uff90\uff91\uff92\uff93\uff94\uff95\uff96\uff97\uff98\uff99\uff9a\uff9b\uff9c\uff9d".charAt(e):
a.charCodeAt(c)>=65281&&a.charCodeAt(c)<=65375?String.fromCharCode(a.charCodeAt(c)-65248):a.charAt(c)}return b}
var QueryParser=function(){function a(f){var h=[];switch(f[0].Op){case "&":case "|":h=a(f[1]);for(var j=2;j<f.length;j++){h=h.concat(a(f[j]));h.push({a:"o",p:f[0].Op})}return h;case "EM":h[0]={a:"s",d:"e",p:f[0].App+"$"+Escape.MyEscape(f[1])};for(j=2;j<f.length;j++){h.push({a:"s",d:"e",p:f[0].App+"$"+Escape.MyEscape(f[j])});h.push({a:"o",p:"&"})}return h;case "SM":return[{a:"s",d:"g",p:f}];default:console.log("Error: Unknown operator "+f[0].Op)}return null}function b(f,h){for(log("QueryProcessor.SM "+
f+" "+h);;){var j=e[c[c.length-1].st][f];if(j===10)return false;if(j===0)return true;if(j>0){c.push({st:j,se:h});return false}if(j<0){var l,k=c.length,q=c[k-1],o=c[k-2];k=c[k-3];switch(-j){case 1:l={ev:"{a:'s', d:'"+q.se.charAt(0)+"', p:'"+q.se.slice(1)+"'}",pr:q.se.slice(1)};break;case 2:if(q.se==="!")l={ev:"{a:'s', d:'"+o.se.charAt(0)+"', p:'"+o.se.slice(1)+"', m:'"+q.se+"'}"};else{l=o.se.slice(1,parseInt(q.se)+1)+"$002A";l={ev:"{a:'s', d:'"+o.se.charAt(0)+"', p:'"+o.se.slice(1)+"'}, {a:'s', d:'"+
o.se.charAt(0)+"', p:'"+l+"'}, {a:'o', p:'|'}"}}l.pr=o.se.slice(1);break;case 3:l={ev:k.se.ev+", "+q.se.ev+", {a:'o', p:'"+o.se+"'}",pr:k.se.pr+(o.se==="|"?" or ":" ")+q.se.pr};break;case 4:l={ev:o.se.ev,pr:"("+o.se.pr+")"};j=-3}if(j===-1||j===-2){l.pr=decodeURIComponent(l.pr);if(l.pr.search(/\s/)!==-1)l.pr='"'+l.pr+'"'}c.length+=j;c.push({st:e[c[c.length-1].st][6],se:l})}}}var c,e=[0,[2,3,0,0,0,0,4],[-1,-1,-1,-1,5,-1,0],[2,3,0,0,0,0,6],[0,0,0,7,0,10,0],[-2,-2,-2,-2,-2,-2,0],[0,0,8,7,0,0,0],[2,3,
0,0,0,0,9],[-4,-4,-4,-4,-4,-4,0],[-3,-3,-3,-3,-3,-3,0]];return{Parse:function(f,h){log("QueryProcessor.Parse");if(f==="XDT"){var j=a(h);return JSON.stringify(j)}q_search_and=" "+R_search_AND.toLowerCase()+" ";q_search_or=" "+R_search_OR.toLowerCase()+" ";var l;if("URI"===f){j=/\(|\)|\+|-|[u,e,k,r,g]|!|\d|'[^']+'/g;l=["(",")","+","-","u","e","t","r","g","!","0","1","2","3","4","5","6","7","8","9"]}else{j=RegExp("\\(|\\)|"+q_search_and+"|"+q_search_or+'|"[^"]+"|[^ \\(\\)]+(?=\\(|\\)|\\s|$)',"gi");l=
["(",")",q_search_and,q_search_or]}var k=[1,2,3,3,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4],q=[0,0,"&","|",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];if(f!=="URI"){h=ToHalfWidth(h);h=h.toLowerCase()}var o=null,v=null;c=[];c.push({st:1,se:0});for(var r,z,B=0,H="t";(r=j.exec(h))!=null;){r=r[0];var K=0;for(z in l)if(r===l[z]){K=k[z];if(q[z])r=q[z];break}if(K===5)H=r;else{if(K===3)B=0;if((K===0||K===1)&&B){if(b(3,"&"))return;B=0}if(K===0){if(r.charAt(0)==='"'||r.charAt(0)==="'")r=r.slice(1,r.length-1);if("URI"!==f){if(r.length>
1){B=r[r.length-1];if(B==="%"||B==="*")r=r.slice(0,-1)}r=Escape.MyEscape(r.toLowerCase())}r=H+r;B=1}if(b(K,r)){log("QueryProcessor.Parse return");return}}}if(!b(5,"$")){o=c[1].se.ev;v=c[1].se.pr}log("QueryProcessor.Parse "+o+" "+v);return o}}}(),QueryProcessor={rr:null,Start:function(a,b){log("QueryProcessor.Start");this.rr=b;if(a.slice(0,1)==="["&&a.slice(-1)==="]")this.qa=eval(a);else eval("this.qa = ["+a+"]");this.qp=0;this.Eval()},Eval:function(){var a=this.qa[this.qp];if(a.a==="s")if(a.d==="g")SearchSM(a.p,
function(c){QueryProcessor.ReportResult(c)});else{var b=a.d==="t"?false:true;if(a.m==="!")b=!b;SearchDBs[a.d].Search(a.p,b)}else if(a.a==="o"){a.p==="&"?this.qa[this.qp-2].And(this.qa[this.qp-1]):this.qa[this.qp-2].Or(this.qa[this.qp-1]);this.qp-=2;this.qa.splice(this.qp+1,2);this.Next()}},Next:function(){if(this.qa.length===1)this.rr(this.qa[0].rs);else{this.qp++;this.Eval()}},ReportResult:function(a){log("QueryProcessor.ReportResult r = "+a);log("QueryProcessor.ReportResult this.qa = "+this.qa+
" this.qp = "+this.qp+" "+this.qa[this.qp]);this.qa[this.qp]=a;this.Next()}};function ReadBase64_6(a){if(a===43)return 62;if(a===45)return 63;if(a<58)return a-48;return a<91?a-55:a-61}function ReadBase64_32(a){var b,c;c=0;for(b=32;b&32;){b=ReadBase64_6(a.s.charCodeAt(a.p));c<<=5;c|=b&31;a.p++}return c}function ReadBase64_ITP(a,b){for(var c=[],e,f,h=0;a.p<a.s.length;){f=ReadBase64_32(a);for(e=1===f?ReadBase64_32(a):1;e;){h+=f;c.push(new b(h));e--}}return c}
function SearchDB(a){log("SearchDB dbid = "+a);this.db_id=a;this.ResetIndex();this.request_count=this.request_total=0}SearchDB.prototype.ResetIndex=function(){this.index=[];this.index.push({key:null,node:"1"})};
SearchDB.prototype.k=function(a){log("SearchDB.k() args.length = "+a.length);for(var b="",c=0;c<a.length;c++){var e={s:a[c],p:0},f,h="";f=ReadBase64_32(e);var j;j=c===a.length-1?this.index[this.index_insert_position]:{};j.node=f>0?e.s.slice(e.p,e.p+f):0;e.p+=f;f=ReadBase64_32(e);h+=b.slice(0,f);f=ReadBase64_32(e);h+=e.s.slice(e.p,e.p+f);e.p+=f;if(h.length>0)j.key=h;for(b=h;e.p<e.s.length;){j.values=[];f=ReadBase64_32(e);j.values.push(e.s.slice(e.p,e.p+f));e.p+=f}if(c<a.length-1){this.index.splice(this.index_insert_position,
0,j);this.index_insert_position++}}this.d()};SearchDB.prototype.LoadScript=function(a){CDB=this;LoadXMLDocArray(datasourceroot+ConvertDbSelector[this.db_id]+"/"+a+".xml",function(b){return function(c){b.LoadScript_Callback(c)}}(SearchDBs[this.db_id]),null,"N",false);this.request_total++;this.request_count++};SearchDB.prototype.LoadScript_Callback=function(a){CDB=this;CDB.k(a)};
SearchDB.prototype.Search=function(a,b,c){log("SearchDB.Search() = "+a);this.Search_CallBack=c?c:QueryProcessor.ReportResult;this.RequestCount=0;this.search=a;this.exact_match=b;this.results=new SearchResultSet(null);if(this.search.length!==0){this.index_match=0;this.d=this.d1;this.d()}};
SearchDB.prototype.IndexSearch=function(){log("SearchDB.IndexSearch() this.index.length = "+this.index.length);var a;for(a=this.index_match;a<this.index.length;a++)if(null==this.index[a].key||this.search<=this.index[a].key)break;this.index_match=a;log("SearchDB.IndexSearch() this.index_match = "+this.index_match)};
SearchDB.prototype.d1=function(){log("SearchDB.d1()");this.IndexSearch();if(null!=this.index[this.index_match].key&&this.search===this.index[this.index_match].key)if(!this.exact_match&&this.index[this.index_match].values.length<2){this.results.Or(new SearchResultSet(this.index[this.index_match].values[0]));this.index_match++;this.d=this.d2;this.d()}else{var a=this.index[this.index_match].values,b;for(b in a){this.results.Or(new SearchResultSet(a[b]));if(this.exact_match)break}this.ReportResult(this.results)}else if(this.index[this.index_match].node!=
0){this.index_insert_position=this.index_match;this.LoadScript(this.index[this.index_match].node)}else if(this.exact_match)this.ReportResult(this.results);else{this.d=this.d2;this.d()}};
SearchDB.prototype.d2=function(){log("SearchDB.d2()");if(this.index[this.index_match].node!==0){this.index_insert_position=this.index_match;this.LoadScript(this.index[this.index_match].node)}else if(null!==this.index[this.index_match].key&&this.index[this.index_match].key.substring(0,this.search.length)===this.search){this.results.Or(new SearchResultSet(this.index[this.index_match].values[0]));this.index_match++;this.d2()}else{log("SearchDB.d2() this.results = "+this.results);this.ReportResult(this.results)}};
SearchDB.prototype.ReportResult=function(a){log("SearchDB.ReportResult() r = "+a);this.db_id!=="g"?QueryProcessor.ReportResult(a):this.Search_CallBack(a)};var SearchDBs={t:new SearchDB("t"),u:new SearchDB("u"),e:new SearchDB("e"),r:new SearchDB("r"),g:new SearchDB("g")},CDB=null;function SearchResult(a){this.index=a;this.weight=1}function SearchResultSet(a){this.rs=a?ReadBase64_ITP({s:a,p:0},SearchResult):[]}SearchResultSet.prototype.Or=function(a){this.AOR(a,true)};
SearchResultSet.prototype.AOR=function(a,b,c){var e,f;for(f=e=0;e<a.rs.length;e++){for(;f<this.rs.length&&this.rs[f].index<a.rs[e].index;)f++;if(f===this.rs.length||this.rs[f].index!==a.rs[e].index)this.rs.splice(f,0,a.rs[e]);else{var h=this.rs[f].weight,j=a.rs[e].weight;this.rs[f].weight=b?Math.max(h,j):h+j*c}}};SearchResultSet.prototype.Combine=function(a,b){this.AOR(a,false,b)};
SearchResultSet.prototype.GetMaxWeight=function(){for(var a=0,b=0;b<this.rs.length;b++)if(this.rs[b].weight>a)a=this.rs[b].weight;return a};SearchResultSet.prototype.CutOffByLimit=function(a){for(var b=0;b<this.rs.length;b++)if(this.rs[b].weight<a){this.rs.splice(b,1);b--}};
SearchResultSet.prototype.And=function(a){var b,c;for(c=b=0;b<a.rs.length&&c<this.rs.length;b++){for(;c<this.rs.length&&this.rs[c].index<a.rs[b].index;)this.rs.splice(c,1);if(c<this.rs.length&&a.rs[b].index===this.rs[c].index){this.rs[c].weight=Math.min(this.rs[c].weight,a.rs[b].weight);c++}}this.rs.splice(c,this.rs.length-c)};
function UserPreferences(){this.EnablePreferences=true;this.TimeStamp="000000000000";this.ShowLeadIn=this.PlayAudio="all";this.MarqueeColor="red";this.TryIt={};this.TryIt.EnableSkipping=true;this.DoIt={};this.DoIt.HotKey={};this.DoIt.HotKey.Ctrl="L";this.DoIt.HotKey.Shift="N";this.DoIt.HotKey.Alt="L";this.DefaultPlayMode="S";this.WebPageAutoPlayback=true;this.ApplicableOutlineDisplay="L";this.NavbarVolume=100;this.EnableShowDiagnostics=false}
UserPreferences.prototype.Copy=function(a){this.TimeStamp=a.TimeStamp;this.PlayAudio=a.PlayAudio;this.ShowLeadIn=a.ShowLeadIn;this.MarqueeColor=a.MarqueeColor;this.TryIt.EnableSkipping=a.TryIt.EnableSkipping;this.DoIt.HotKey.Ctrl=a.DoIt.HotKey.Ctrl;this.DoIt.HotKey.Shift=a.DoIt.HotKey.Shift;this.DoIt.HotKey.Alt=a.DoIt.HotKey.Alt;this.DefaultPlayMode=a.DefaultPlayMode;this.WebPageAutoPlayback=a.WebPageAutoPlayback;this.ApplicableOutlineDisplay=a.ApplicableOutlineDisplay;this.NavbarVolume=a.NavbarVolume;
this.EnableShowDiagnostics=a.EnableShowDiagnostics};
UserPreferences.prototype.Compare=function(a){if(this.PlayAudio!=a.PlayAudio)return true;if(this.ShowLeadIn!=a.ShowLeadIn)return true;if(this.MarqueeColor!=a.MarqueeColor)return true;if(this.TryIt.EnableSkipping!=a.TryIt.EnableSkipping)return true;if(this.DoIt.HotKey.Ctrl!=a.DoIt.HotKey.Ctrl)return true;if(this.DoIt.HotKey.Shift!=a.DoIt.HotKey.Shift)return true;if(this.DoIt.HotKey.Alt!=a.DoIt.HotKey.Alt)return true;if(this.DefaultPlayMode!=a.DefaultPlayMode)return true;if(this.WebPageAutoPlayback!=
a.WebPageAutoPlayback)return true;if(this.ApplicableOutlineDisplay!=a.ApplicableOutlineDisplay)return true;if(this.NavbarVolume!=a.NavbarVolume)return true;if(this.EnableShowDiagnostics!=a.EnableShowDiagnostics)return true;return false};UserPreferences.prototype.GetCookie=function(){return new Cookie(document,"OnDemandPlayer",365,"/",null,false)};
UserPreferences.prototype.LoadCookie=function(){var a=this.GetCookie();a.Load();if(a.PlayAudio)this.PlayAudio=a.PlayAudio;UserPref_PlayAudio_Original=this.PlayAudio;if(upk.browserInfo.isSoundSupported()==false)this.PlayAudio="none";if(!(UserPrefs.TimeStamp!="000000000000"&&(!a.TimeStamp||UserPrefs.TimeStamp>a.TimeStamp))){if(a.ShowLeadIn)this.ShowLeadIn=a.ShowLeadIn;if(a.MarqueeColor)this.MarqueeColor=a.MarqueeColor;if(a.TryIt_EnableSkipping)this.TryIt.EnableSkipping=a.TryIt_EnableSkipping=="true";
if(a.DoIt_HotKey_Ctrl)this.DoIt.HotKey.Ctrl=a.DoIt_HotKey_Ctrl;if(a.DoIt_HotKey_Shift)this.DoIt.HotKey.Shift=a.DoIt_HotKey_Shift;if(a.DoIt_HotKey_Alt)this.DoIt.HotKey.Alt=a.DoIt_HotKey_Alt;if(a.DefaultPlayMode)this.DefaultPlayMode=a.DefaultPlayMode;if(a.WebPageAutoPlayback)this.WebPageAutoPlayback=a.WebPageAutoPlayback;if(a.ApplicableOutlineDisplay)this.ApplicableOutlineDisplay=a.ApplicableOutlineDisplay;if(a.NavbarVolume)this.NavbarVolume=a.NavbarVolume;if(a.EnableShowDiagnostics)this.EnableShowDiagnostics=
a.EnableShowDiagnostics=="true"}};
UserPreferences.prototype.StoreCookie=function(){var a=this.GetCookie();a.TimeStamp=this.TimeStamp;a.PlayAudio=this.PlayAudio;a.ShowLeadIn=this.ShowLeadIn;a.MarqueeColor=this.MarqueeColor;a.TryIt_EnableSkipping=this.TryIt.EnableSkipping;a.DoIt_HotKey_Ctrl=this.DoIt.HotKey.Ctrl;a.DoIt_HotKey_Shift=this.DoIt.HotKey.Shift;a.DoIt_HotKey_Alt=this.DoIt.HotKey.Alt;a.DefaultPlayMode=this.DefaultPlayMode;a.WebPageAutoPlayback=this.WebPageAutoPlayback;a.ApplicableOutlineDisplay=this.ApplicableOutlineDisplay;
a.NavbarVolume=this.NavbarVolume;a.EnableShowDiagnostics=this.EnableShowDiagnostics;a.Store()};UserPreferences.prototype.GetUrlParamString=function(){return"PP_SOUND="+this.PlayAudio+"&PP_LEADIN="+this.ShowLeadIn+"&PP_SKIP="+(this.TryIt.EnableSkipping?"true":"false")+"&PP_MARQUEE="+this.MarqueeColor+"&PP_ENABLE="+(this.EnablePreferences?"true":"false")+"&PP_HOTKEY="+this.DoIt.HotKey.Ctrl+this.DoIt.HotKey.Shift+this.DoIt.HotKey.Alt};
UserPreferences.prototype.ParseUrlParamString=function(a){a=a.split("&");for(var b=0;b<a.length;b++){var c=a[b].split("=");if(c[0].toUpperCase()=="PP_SOUND")this.PlayAudio=c[1];else if(c[0].toUpperCase()=="PP_LEADIN")this.ShowLeadIn=c[1];else if(c[0].toUpperCase()=="PP_MARQUEE")this.MarqueeColor=c[1];else if(c[0].toUpperCase()=="PP_SKIP")this.TryIt.EnableSkipping=c[1]=="true";else if(c[0].toUpperCase()=="PP_ENABLE")this.EnablePreferences=c[1]=="true";else if(c[0].toUpperCase()=="PP_HOTKEY"){this.DoIt.HotKey.Ctrl=
c[1].charAt(0);this.DoIt.HotKey.Shift=c[1].charAt(1);this.DoIt.HotKey.Alt=c[1].charAt(2)}}};var UserPrefs=new UserPreferences,UserPref_PlayAudio_Original="";typeof SetDefaultPreferences!=="undefined"&&SetDefaultPreferences();UserPrefs.EnablePreferences&&UserPrefs.LoadCookie();var paramstr=unescape(document.location.hash.substring(1));if(paramstr=="")paramstr=unescape(document.location.search.substring(1));UserPrefs.ParseUrlParamString(paramstr);
function OpenPreferencesDialog(a,b){if(UserPrefs.EnablePreferences){var c=a+"/html/preferences.html",e;e=upk.browserInfo.isChrome()?430:upk.browserInfo.isFF()?420:upk.browserInfo.isSafari()?350:412;var f=[];try{if(lms_IsUserProfileAvailable()){var h=lms_GetUserProfileUrl();if(h!="")f[f.length]="UserProfileUrl="+Escape.MyEscape(h)}}catch(j){}if(b)f[f.length]="nosound";for(h=0;h<f.length;h++){c+=h==0?"?":"&";c+=f[h]}if(IsTouchDevice()||upk.browserInfo.isIE10Modern()){e+=50;showDialog(c,-1,-1,400,e,
true,96,"../../../",false)}else window.open(c,"prefwin","width=500,height="+e+",resizable=1,scrollbars=0,top="+(screen.availHeight-290)/2+",left="+(screen.availWidth-500)/2)}else alert(R_preferences_disabled)}function SessionPreferences(){this.swipeInstructionShowed=false}SessionPreferences.prototype.GetCookie=function(){return new Cookie(document,"OnDemandPlayerSession",null,"/")};
SessionPreferences.prototype.LoadCookie=function(){var a=this.GetCookie();a.Load();if(a.swipeInstructionShowed)this.swipeInstructionShowed=a.swipeInstructionShowed};SessionPreferences.prototype.StoreCookie=function(){var a=this.GetCookie();a.swipeInstructionShowed=this.swipeInstructionShowed;a.Store()};var SessionPrefs=new SessionPreferences;
function GetContentPathName(){var a=window.location.pathname,b=a.indexOf("data/toc.html");if(b>0)return a.substr(0,b);b=a.indexOf("html/roles.html");if(b>0)return a.substr(0,b);b=a.indexOf("data/tpc/");if(b>0)return a.substr(0,b);b=a.indexOf("html/lmsui.html");if(b>0)return a.substr(0,b);return a}function UserRolesClass(){this.Filtering=false;this.Roles=[]}UserRolesClass.prototype.Copy=function(a){this.Filtering=a.Filtering;this.Roles=[];for(var b=0;b<a.Roles.length;b++)this.Roles[b]=a.Roles[b]};
UserRolesClass.prototype.Compare=function(a){if(this.Filtering!=a.Filtering)return true;if(this.Roles.length!=a.Roles.length)return true;for(var b=0;b<this.Roles.length;b++)if(this.Roles[b]!=a.Roles[b])return true;return false};UserRolesClass.prototype.GetCookie=function(){return new Cookie(document,"OnDemandPlayerRoles",90,GetContentPathName(),null,false)};
UserRolesClass.prototype.LoadCookie=function(){var a=this.GetCookie();a.Load();this.Filtering=false;if(a.Filtering)this.Filtering=a.Filtering=="true";this.Roles=[];if(a.Roles)this.Roles=a.Roles.split("+")};UserRolesClass.prototype.StoreCookie=function(){var a=this.GetCookie();a.Filtering=this.Filtering?"true":"false";a.Roles=this.Roles.join("+");a.Store()};UserRolesClass.prototype.GetUrlParamString=function(){return"PP_ROLEFILTERING="+(this.Filtering?"true":"false")+"&PP_ROLES="+encodeURIComponent(this.Roles.join("+"))};
UserRolesClass.prototype.ParseUrlParamString=function(a){a=a.split("&");for(var b=0;b<a.length;b++){var c=a[b].split("=");if(c[0].toUpperCase()=="PP_ROLEFILTERING")this.Filtering=c[1]=="true";else if(c[0].toUpperCase()=="PP_ROLES"){this.Roles=[];if(c[1])this.Roles=c[1].split("+")}}};var UserRoles=new UserRolesClass;UserRoles.LoadCookie();UserRoles.ParseUrlParamString(paramstr);
function OpenRolesDialog(a){window.open(a+"/html/roles.html","roleswin","width=500,height=318,resizable=1,scrollbars=0,top="+(screen.availHeight-286)/2+",left="+(screen.availWidth-500)/2)}
var upk_tocTreeData=function(){function a(){if(!h.rootNode)h.rootNode={t:null,y:"S",g:h.root,o:1,r:null};return h.rootNode}function b(v,r){if(v in j)j[v].push(r);else{j[v]=[r];LoadXMLDoc(k+"toc/"+v+".json.js",function(z){z=$.parseJSON(z.responseText);if(z.seealsoroots==undefined)z.seealsoroots=[];if(v==1)h=z;else for(var B in z.data)h.data[B]=z.data[B];l[v]=true;for(B=0;B<j[v].length;B++)j[v][B]();delete j[v]},null,null,true)}}function c(v,r){function z(){if(H in h.data)r(v,h.data[H]);else if(B()==
false){for(;h.indexer[K].block in l||h.indexer[K].min>v||h.indexer[K].max<v;)K++;b(h.indexer[K].block,z)}}function B(){function I(ca,U){f();o[ca]?U(o[ca].block,o[ca].obj):U(null,null)}if(q==0)return false;h.seealsoroots.sort(function(ca,U){return parseInt(ca)-parseInt(U)});for(var A=0;A<h.seealsoroots.length;A++){for(var Q=[],V=0,P=h.seealsoroots[A],O=0;O<h.data[P].length;O++){var J=h.data[P][O];if(q>=J.r[0]&&q<=J.r[1]){Q.unshift(J);V=P;break}}if(V!=0){for(var W=true;W==true;)I(V,function(ca,U){if(ca){Q.unshift(U);
V=ca}else{r(0,Q);W=false}});return true}}return false}var H=v.toString(),K=0;h?z():b(1,z)}function e(v,r,z){function B(K,I){if(H==null)H=[a()];if(K==0){var A=I[I.length-1];r(I,A.t,A.y,v-A.r[0])}else for(var Q=I.length-1;Q>=0;Q--){A=I[Q];if(A.r[0]<=v){H.push(A);v<=A.r[1]?r(H,A.t,A.y,v-A.r[0]):c(A.o,B);break}}}var H=null;q=z==true?v:0;c(1,B)}function f(){function v(){o=[];for(var r=0;r<h.seealsoroots.length;r++)for(var z=h.seealsoroots[r],B=0;B<h.data[z].length;B++){var H=h.data[z][B];o[H.o]={block:z,
obj:H}}}o==null&&c(1,v)}var h,j={},l={},k="",q=0,o=null;return{getByOrdinal:c,getByCIndex:e,getByGuid:function(v,r){QueryProcessor.Start(QueryParser.Parse("URI","t'"+Escape.MyEscape('"'+v)+"'"),function(z){e(z[0].index,r,false)})},getPathByOrdinal:function(v,r){function z(H,K){if(B==null)B=[a()];for(var I=K.length-1;I>=0;I--){var A=K[I];if(A.o<=v){B.push(A);v==A.o?r(B,A.t,A.y):c(A.o,z);break}}}var B=null;c(1,z)},getSeeAlsoReferences:function(v,r){var z=[];c(1,function(){for(var B=0;B<h.seealsoroots.length;B++)for(var H=
h.seealsoroots[B],K=0;K<h.data[H].length;K++){var I=h.data[H][K];I.g==v.g&&z.push(I)}r(z)})},setDataPath:function(v){k=v}}}(),treeControlDB=false,bigsco=false,treeControl;function ModeDesc(a){this.treeCreated=false;this.lastSelected=null;this.filteredGuids=[];this.filteredGuidList=[];this.filteredTopicCount=0;this.guidsForFlat=[];this.lastSelectedFlat=null;this.flatMode=false;this.modeLetter=a;this.flatControl=this.treeControl=null;this.loadedGuids=[];this.foundItemMap=[]}
var modeDescA=new ModeDesc("A"),modeDescF=new ModeDesc("F"),modeDescH=new ModeDesc("H"),modeDescFH=new ModeDesc("X"),treeViewMode="ALL",treeIsEmpty,_rootData="";function GetJunctionId(a){var b=a.indexOf("_");b=a.indexOf("_",b+1);return a.substr(0,b)}var filteredGuidsR=[],filteredTopicCountR=0,rolefilter_enabled=false,selection_need=0,stl_mode="ALL",stl_callback,stl_myTopicArray=[],stl_myscoresArray=[],stl_i=0,seeAlsoSelection=0,_lastChangeIsFilterOnly=false;
function AddToFoundItemMap(a,b,c){var e=modeDescA;if(e.foundItemMap[a]==null)e.foundItemMap[a]=Object({guid:a,ordinal:b,cindexes:[]});e.foundItemMap[a].cindexes.push(c)}
function SetTopicList(a,b,c){var e=[];modeDescA.foundItemMap=[];if(b)for(var f=0;f<b.length;f++){e.push(b[f]);upk_tocTreeData.getByCIndex(b[f].index,function(j){var l=j[j.length-1];AddToFoundItemMap(l.g,l.o,Object({cindex:b[f].index,nullindex:l.r[0],score:b[f].weight||b[f].score}));if(l.d){j=l.d.split(",");for(var k=0;k<j.length;k++)upk_tocTreeData.getPathByOrdinal(j[k],function(q){q=q[q.length-1];var o=b[f].index-l.r[0];AddToFoundItemMap(q.g,q.o,Object({cindex:q.r[0]+o,nullindex:q.r[0],score:b[f].weight||
b[f].score}));e.push(Object({index:q.r[0]+o,weight:b[f].weight||b[f].score}))})}a=="ROLES"&&upk_tocTreeData.getSeeAlsoReferences(l,function(q){for(var o=0;o<q.length;o++){var v;a:{for(v=0;v<e.length;v++)if(q[o].r[0]==e[v].index){v=false;break a}v=true}if(v){AddToFoundItemMap(q[o].g,q[o].o,Object({cindex:q[o].r[0],nullindex:q[o].r[0],score:b[f].weight||b[f].score}));e.push(Object({index:q[o].r[0],weight:b[f].weight||b[f].score}))}}})},a=="ROLES")}e.sort(function(j,l){var k=j.weight||j.score||0,q=l.weight||
l.score||0;if(k!=q)return q-k;return j.index-l.index});stl_mode=a;stl_callback=c;_lastChangeIsFilterOnly=false;getModeDesc().loadedGuids=[];if(a=="FILTERED"){modeDescF.filteredGuids=[];modeDescF.filteredGuidList=[];modeDescF.filteredTopicCount=e.length;modeDescF.guidsForFlat=[];modeDescF.flatMode=true}else if(a=="HEMI"){modeDescH.filteredGuids=[];modeDescH.filteredGuidList=[];modeDescH.filteredTopicCount=e.length;modeDescH.guidsForFlat=[];modeDescH.flatMode=true}else if(a=="ROLES"){filteredGuidsR=
[];filteredTopicCountR=e.length;_lastChangeIsFilterOnly=rolefilter_enabled=true}else{rolefilter_enabled=false;_lastChangeIsFilterOnly=true;stl_callback();return}stl_myTopicArray=[];stl_myTopicArray=e;stl_myscoresArray=[];if(e.length>0)try{if(e[0].index){stl_myTopicArray=[];for(f=0;f<e.length;f++){stl_myTopicArray[stl_myTopicArray.length]=e[f].index;stl_myscoresArray[e[f].index]=e[f].score}}}catch(h){}stl_i=0;SetTopicList_Next()}
function SetTopicList_Next(){var a=modeDescF.filteredTopicCount;if(stl_mode=="HEMI")a=modeDescH.filteredTopicCount;if(stl_mode=="ROLES")a=filteredTopicCountR;stl_i<a?upk_tocTreeData.getByCIndex(stl_myTopicArray[stl_i],SetTopicList_Next2,stl_mode=="ROLES"):stl_callback()}function ItemDesc(a,b,c){this.type=a;this.title=b;this.empty=c;this.found=false;this.parentguid=null;this.openable=[];this.treeitemdiv=null;this.loaded=false}
function AddItemdesc(a,b,c,e,f,h,j,l,k){var q=false;c=c.split("#");var o=c[0];try{q=b[o].title.length>0}catch(v){}if(!q){b[o]=new ItemDesc(e,f,h);if(a)a.filteredGuidList[a.filteredGuidList.length]=o;AddToIndexMap(o)}b[o].parentguid=k;if(j==true)b[o].found=true;if(l.length>0)b[o].openable[b[o].openable.length]=l;if(b[o].guid==undefined){b[o].guid=o;b[o].context=c[1]}else b[o].context+=c[1]}
function AddTreeItemToItemDesc(a,b){var c=getModeDesc(false);try{if(treeViewMode=="FILTEREDHEMI"){if(!c.filteredGuids)c.filteredGuids=[];if(!c.filteredGuids[a]){c.filteredGuids[a]=new ItemDesc("","",false);c.filteredGuidList[c.filteredGuidList.length]=a}AddToIndexMap(a)}c.filteredGuids[a].treeitemdiv=b}catch(e){}saveModeDesc(c)}function GetTreeItemOfItemDesc(a){var b=getModeDesc(false),c=null;try{c=b.filteredGuids[a].treeitemdiv}catch(e){}return c}
function FlatItemDesc(a,b,c,e,f,h){this.type=a;this.title=b;this.empty=c;this.guid=e;this.isroot=f;h||(h=0);this.score=h}function AddFlatItemdesc(a,b,c,e,f,h,j){var l=b.indexOf("#");b=l<0?b:b.substring(0,l);for(l=0;l<a.length;l++){if(a[l].guid==b)return;if(a[l].guid.substr(0,36)==b.substr(0,36))return}a[a.length]=new FlatItemDesc(c,e,f,b,h,j)}
function SetTopicList_Next2(a,b,c,e){var f,h=false,j,l=[];for(f=0;f<a.length;f++)l.push(a[f].g+"_"+a[f].o);f=l.join("/");l=l[l.length-1];switch(c){case "S":j="Section";break;case "E":j="Section";h=true;break;case "T":j="Topic";break;case "Q":j="Question";break;case "A":j="Assessment"}a=a[a.length-1].c;f+=e>0?"#C"+e:"";e=f.indexOf("/");var k=null;if(c=="T"||a==1||c=="Q"||c=="A"){for(;e>=0;){c=""+f.substr(0,e);if(stl_mode=="FILTERED"){AddItemdesc(modeDescF,modeDescF.filteredGuids,c,j,b,h,false,l,k);
AddItemdesc(modeDescF,modeDescF.filteredGuids,c.substr(0,36),j,b,h,false,l,k)}else if(stl_mode=="HEMI"){AddItemdesc(modeDescH,modeDescH.filteredGuids,c,j,b,h,false,l,k);AddItemdesc(modeDescH,modeDescH.filteredGuids,c.substr(0,36),j,b,h,false,l,k)}else{AddItemdesc(null,filteredGuidsR,c,j,b,h,false,l,null);AddItemdesc(null,filteredGuidsR,c.substr(0,36),j,b,h,false,l,null)}k=c;f=c=f.substr(e+1);e=f.indexOf("/")}if(f.length>0){c=f;e=f.indexOf("#");if(e<0)c+="#";if(stl_mode=="FILTERED"){AddItemdesc(modeDescF,
modeDescF.filteredGuids,c,j,b,h,true,"",k);AddFlatItemdesc(modeDescF.guidsForFlat,c,j,b,h,false,0)}else if(stl_mode=="HEMI"){AddItemdesc(modeDescH,modeDescH.filteredGuids,c,j,b,h,true,"",k);AddFlatItemdesc(modeDescH.guidsForFlat,c,j,b,h,false,stl_myscoresArray[stl_myTopicArray[stl_i]])}else{AddItemdesc(null,filteredGuidsR,c,j,b,h,true,"",null);AddItemdesc(null,filteredGuidsR,c.substr(0,36),j,b,h,true,"",null)}}}stl_i++;SetTopicList_Next()}
function TreeViewModeLetter(){if(treeViewMode=="FILTEREDHEMI")return"X";return treeViewMode.substr(0,1)}
function IsFiltered(a,b){var c=0;try{c=filteredGuidsR[a].title.length}catch(e){}var f=0;if(rolefilter_enabled)f=c>0?1:2;if(b=="ALL")if(f==0){treeIsEmpty=false;return true}else if(f==1){c=false;try{c=filteredGuidsR[a].openable.length>0||filteredGuidsR[a].found}catch(h){}if(c)treeIsEmpty=false;return c}else return false;else if(b=="FILTERED"){c=0;try{c=modeDescF.filteredGuids[a].title.length}catch(j){}if(c==0)return false;if(f==0){treeIsEmpty=false;return true}else if(f==1){c=false;try{c=Cut(modeDescF.filteredGuids[a].openable,
filteredGuidsR[a].openable)||modeDescF.filteredGuids[a].found&&filteredGuidsR[a].found}catch(l){}if(c)treeIsEmpty=false;return c}else return false}else if(b=="HEMI"){c=0;try{c=modeDescH.filteredGuids[a].title.length}catch(k){}if(c==0)return false;if(f==0){treeIsEmpty=false;return true}else if(f==1){c=false;try{c=Cut(modeDescH.filteredGuids[a].openable,filteredGuidsR[a].openable)||modeDescH.filteredGuids[a].found&&filteredGuidsR[a].found}catch(q){}if(c)treeIsEmpty=false;return c}else return false}else if(f==
0){c=false;try{c=Cut(modeDescF.filteredGuids[a].openable,modeDescH.filteredGuids[a].openable)||modeDescF.filteredGuids[a].found&&modeDescH.filteredGuids[a].found}catch(o){}if(c)treeIsEmpty=false;return c}else if(f==1){c=false;try{c=Cut3(modeDescF.filteredGuids[a].openable,modeDescH.filteredGuids[a].openable,filteredGuidsR[a].openable)||modeDescF.filteredGuids[a].found&&modeDescH.filteredGuids[a].found&&filteredGuidsR[a].found}catch(v){}if(c)treeIsEmpty=false;return c}else return false}
function Cut(a,b){if(b==null)return a.length>0;for(var c=0;c<a.length;c++)for(var e=0;e<b.length;e++)if(a[c]==b[e])return true;return false}function Cut3(a,b,c){if(c==null)return Cut(a,b);for(var e=0;e<a.length;e++)for(var f=0;f<b.length;f++)for(var h=0;h<c.length;h++)if(a[e]==b[f]&&b[f]==c[h])return true;return false}
function IsOpenable(a){var b=null;if(rolefilter_enabled==true)b=filteredGuidsR[a].openable;if(treeViewMode=="ALL"){if(rolefilter_enabled){var c=false;try{c=b.length>0}catch(e){}return c}return true}else{if(treeViewMode=="FILTERED"){c=true;try{c=Cut(modeDescF.filteredGuids[a].openable,b)}catch(f){}}else if(treeViewMode=="HEMI"){c=true;try{c=Cut(modeDescH.filteredGuids[a].openable,b)}catch(h){}}else c=Cut3(modeDescF.filteredGuids[a].openable,modeDescH.filteredGuids[a].openable,b);return c}}
var _expandLevel=-1;
function IsAutoExpand(a,b){if(GetActualFlatView()==true)return treeViewMode=="FILTERED"?modeDescF.filteredTopicCount<TreeConfig.AutoExpandLimit:treeViewMode=="FILTEREDHEMI"?modeDescF.filteredTopicCount<TreeConfig.AutoExpandLimit:modeDescH.filteredTopicCount<TreeConfig.AutoExpandLimit;else{var c=getModeDesc(),e=GetTpcAttribute(a);if(e==null&&a.i)e=a.i;if(e==null&&a.d)e=a.d;if(e==null&&a.id){var f=a.id;if(f[8]=="-"&&f[13]=="-"&&f[18]=="-"&&f[36]=="_"){e=f.indexOf("_");var h=f.lastIndexOf("_");e=e==
h?f:f.substr(0,h)}}for(f=0;e in c.filteredGuids;){f++;e=c.filteredGuids[e].parentguid}if(_expandLevel<0){try{_expandLevel=parseInt(TreeConfig.DefaultExpandLevel,10)}catch(j){_expandLevel=1}if(_expandLevel<1)_expandLevel=1;_expandLevel--}if(!b)return f<=_expandLevel;return f<_expandLevel}}
function Queue_Next(a){if(_childItem_found){_childItem_found=false;createTreeControl(null,false,null,null,null)}else{if(selection_need>0){var b=false;if(_lastSelectedGlobal.length>0)if(rolefilter_enabled==true){var c=0;try{c=filteredGuidsR[_lastSelectedGlobal].title.length}catch(e){}if(c>0)b=true}else b=true;if(b==true){selection_need=0;if(ChangeTreeView_CallBack()==true)return}a.SelectFirstItem()}TreeFinished&&TreeFinished(treeViewMode,treeIsEmpty)}}
function SelectionCallBack(a){var b=getModeDesc(false);switch(treeViewMode){case "ALL":if(_lastSelectedItem_tree!=null)if(_lastSelectedItem_tree.startAction==true)_lastSelectedItem_tree.startAction=false;else{_lastSelectedItem_tree.startAction=true;ChangeTreeView_CallBack();return}a=a==null?b.lastSelected:a;break;default:if(b.flatMode==true){SetFlatSelection();return}a=b.flatMode==true?b.lastSelectedFlat:a==null?b.lastSelected:a}if(a==null)TreeItemSelected&&TreeItemSelected(null,null);else{var c=
a.getAttribute("tpc");if(c==null)c=a.parentNode.getAttribute("tpc");if(c==null)c=a.parentNode.parentNode.getAttribute("tpc");if(b.flatMode==false){ChangeSelection(a);window.scrollTo(0,a.parentNode.offsetTop/2+10)}c!=null&&SetLastSelected(c,treeViewMode,false);TreeItemSelected&&TreeItemSelected(c,treeViewMode)}}
function ClearDescriptor(a,b){a.treeCreated=true;a.lastSelected=null;a.lastSelectedFlat=null;a.flatMode=b;for(var c=0;c<a.filteredGuidList.length;c++){var e=a.filteredGuidList[c];a.filteredGuids[e].treeitem=null;a.filteredGuids[e].treeitemdiv=null;a.filteredGuids[e].loaded=false}a.loadedGuids=[]}function LastSelectedItem(a,b){this.guid=a;this.mode=b;this.firsdBuild=this.startAction=false}var _lastSelectedItem_tree=null,_lastSelectedGlobal="",_lastSelectedGlobalMode="";
function SetLastSelected(a,b,c){_lastSelectedGlobal=a;_lastSelectedGlobalMode=b;if(!c)if(treeViewMode=="ALL")return;_lastSelectedItem_tree=new LastSelectedItem(a,b)}function GetTpcAttribute(a){for(var b=null;b==null;){try{b=a.getAttribute("tpc")}catch(c){return null}if(b==null)a=a.parentNode}return b}var _childItem=null,_childItem2=null,_childItem_found=false;
function createTreeControl(a,b,c,e,f){if(a)_rootData=a;try{bigsco=SCO_Supported()}catch(h){}InitTocStates();if(e)seeAlsoSelection=e;if(f)_childItem2=_childItem=f;b=b==true?true:false;selection_need=1;if(treeViewMode=="ALL"){if(modeDescA.treeCreated==true){SelectionCallBack(c);return}ClearDescriptor(modeDescA,false);if(_lastSelectedItem_tree!=null){_lastSelectedItem_tree.startAction=true;_lastSelectedItem_tree.firstBuild=true}else selection_need=2}else if(treeViewMode=="FILTERED"){if(modeDescF.treeCreated==
true){modeDescF.flatMode=b;SelectionCallBack(c);return}ClearDescriptor(modeDescF,b)}else if(treeViewMode=="FILTEREDHEMI"){if(modeDescFH.treeCreated==true){modeDescFH.flatMode=b;SelectionCallBack(c);return}ClearDescriptor(modeDescFH,b)}else{if(modeDescH.treeCreated==true){modeDescH.flatMode=b;SelectionCallBack(c);return}ClearDescriptor(modeDescH,b)}treeIsEmpty=true;if(treeViewMode=="ALL")treeControl=new TreeControl(document.getElementById("treeControlHostForAll"),a);else if(treeViewMode=="FILTERED"){treeControl=
new TreeControl(document.getElementById("treeControlHostForFiltered"),a);modeDescF.flatControl=new FlatControl("flatControlHostForFiltered");modeDescF.flatControl.Load();selection_need=modeDescF.flatMode==true?0:1}else if(treeViewMode=="FILTEREDHEMI"){treeControl=new TreeControl(document.getElementById("treeControlHostForFilteredHemi"),a);modeDescFH.flatControl=new FlatControl("flatControlHostForFilteredHemi");modeDescFH.flatControl.Load();selection_need=modeDescFH.flatMode==true?0:1}else{treeControl=
new TreeControl(document.getElementById("treeControlHostForHemi"),a);modeDescH.flatControl=new FlatControl("flatControlHostForHemi");modeDescH.flatControl.Load();selection_need=modeDescH.flatMode==true?0:1}treeControl.LoadScript(treeControl.rootData,treeControl.treeHost.id)}
function TreeControl(a,b){this.host=a;this.rootData=b;a.innerHTML="";this.treeHost=document.createElement("div");this.treeHost.id=b+"_"+TreeViewModeLetter();this.treeHost.className="treeControlNode";this.treeHost.onclick=this.OnClick;this.treeHost.onmouseup=this.OnMouseUp;this.treeHost.ondblclick=this.OnDoubleClick;this.host.appendChild(this.treeHost)}TreeControl.prototype.LoadScript=function(a,b){setTimeout(function(){treeControl.LoadScriptInternal(a,b)},0)};
TreeControl.prototype.LoadScriptInternal=function(a,b){treeControlDB=true;upk_tocTreeData.getByOrdinal(parseInt(a.substring(37)),function(c,e){for(var f=[],h=0;h<e.length;h++){f[h]={t:e[h].t,y:e[h].y};f[h][e[h].y=="S"||e[h].y=="E"?"d":"i"]=e[h].g+"_"+e[h].o}treeControl.Bind({c:f},b)})};TreeControl.prototype.Bind=function(a,b){if(treeControlDB){treeControlDB=false;this.TraverseChildren(a.c,document.getElementById(b));_childNode_Loaded(null)}directMode==true?ChangeTreeView_CallBack():Queue_Next(this)};
function GetClassNameFromFile(a){a=a.split("/");return a[a.length-1].replace(".gif","")}
TreeControl.prototype.TraverseNode=function(a,b,c,e){var f=getModeDesc(),h=a.i?a.i:a.d,j=a.c||a.d,l=a.d?IsOpenable(a.d):false;if(h in f.filteredGuids){if(f.filteredGuids[h].loaded==true)if(j&&l){if(a.d)return a.d+"_"+TreeViewModeLetter()}else return null;f.filteredGuids[h].loaded=true}var k,q,o;f=a.y=="E";if(treeViewMode=="ALL"){q=b.getAttribute("id");k=q.lastIndexOf("_");q=q.substr(0,k);k=a.d?a.d:a.i;AddItemdesc(modeDescA,modeDescA.filteredGuids,k,"","-",f,false,"",q);AddTreeItemToItemDesc(k,true)}a.element=
document.createElement("div");q=a.element;q.className="treeControlNode";o=q.appendChild(document.createElement("div"));o.setAttribute("tpc",h);k=o.appendChild(document.createElement("img"));k.setAttribute("srcroot","../img/outl_"+c);if(f||a.d&&!l){c=k.getAttribute("srcroot")+".gif";k.className=GetClassNameFromFile(c);k.openable=false;k.src="../img/empty.gif"}else{c=k.getAttribute("srcroot")+(j?IsAutoExpand(k)?"o.gif":"c.gif":".gif");k.className=GetClassNameFromFile(c);k.src="../img/empty.gif";k.openable=
j?IsAutoExpand(k)?true:true:false}k=o.appendChild(document.createElement("img"));if(bigsco){c=GetItemStatus(h);k.className=_GetItemStatusFile(c);k.src="../img/empty.gif";k.title=_GetItemStatusTitle(c);k.alt=_GetItemStatusTitle(c)}else{k.src="../img/empty.gif";k.className="sco_empty"}k=o.appendChild(document.createElement("img"));if(f){k.className=GetClassNameFromFile("../img/emptysection.gif");k.src="../img/empty.gif"}else{c=j?IsAutoExpand(k)&&l?"../img/module_o.gif":"../img/module_c.gif":"../img/topic.gif";
k.src="../img/empty.gif";k.className=GetClassNameFromFile(c);if(a.y=="Q")k.className="question_player";if(a.y=="A")k.className="assessment_player"}k=o.appendChild(document.createElement("span"));f=k.appendChild(document.createElement("a"));f.className="";f.style.cursor="pointer";f.onmouseover=this.OnOverItem;f.onmouseout=this.OnOutItem;f.appendChild(document.createTextNode(UnescapeQuotes(a.t)));AddTreeItemToItemDesc(h,f);b.appendChild(q);if(j&&l&&a.y.toUpperCase()!="E"){k=a.element.appendChild(document.createElement("table"));
k.className="treeControlChildren"+(!IsAutoExpand(a)?"H":"V");k.cellSpacing=0;k=k.appendChild(document.createElement("tbody"));k=k.appendChild(document.createElement("tr"));q=k.appendChild(document.createElement("td"));q.className=(e?"horz_line":"vert_line")+(bigsco?"_wide":"");q=q.appendChild(document.createElement("img"));q.src="../img/empty.gif";q.className="s";q=k.appendChild(document.createElement("td"));a.c&&this.TraverseChildren(a.c,q);if(a.d){q.id=a.d+"_"+TreeViewModeLetter();return q.id}}return null};
TreeControl.prototype.TraverseChildren=function(a,b){if(a){var c=getModeDesc(),e=a[0].d?a[0].d:a[0].i;if(!c.loadedGuids[e]){c.loadedGuids[e]=true;c=[];for(var f=[],h=0;h<a.length;h++){e=a[h].d?a[h].d:a[h].i;if(IsFiltered(e,treeViewMode))c[c.length]=a[h]}if(c.length>0)if(b.className=="treeControlNode")if(c.length==1)f[0]=this.TraverseNode(c[0],b,"r",true);else{f[0]=this.TraverseNode(c[0],b,"f",false);e=c.length-1;for(h=1;h<e;h++)f[h]=this.TraverseNode(c[h],b,"m",false);f[e]=this.TraverseNode(c[e],
b,"l",true)}else{e=c.length-1;for(h=0;h<e;h++)f[h]=this.TraverseNode(c[h],b,"m",false);f[e]=this.TraverseNode(c[e],b,"l",true)}if(c.length>0)if(IsAutoExpand(b,true))for(e=0;e<c.length;e++)c[e].d&&c[e].y=="S"&&this.LoadScript(c[e].d,f[e]);for(e=0;e<c.length;e++){h=c[e].d?c[e].d.substr(37):c[e].i.substr(37);try{h=parseInt(h,10)}catch(j){}if(h==_childItem2){_childItem=_childItem2;_childItem_found=false}}if(_childItem!=null){var l=c.length-1;for(e=0;e<c.length;e++){h=c[e].d?c[e].d.substr(37):c[e].i.substr(37);
try{h=parseInt(h,10)}catch(k){}if(h>_childItem&&e==0){_childItem=null;break}else if(h<_childItem&&e==l){if(c[e].d)this.LoadScript(c[e].d,f[e]);else _childItem=null;break}else if(h==_childItem){_childItem=null;_childItem_found=true;SetLastSelected(c[e].d?c[e].d:c[e].i,"ALL",true);break}else if(h>_childItem){if(c[e-1].d)this.LoadScript(c[e-1].d,f[e-1]);else _childItem=null;break}}}}}};
TreeControl.prototype.OnOverItem=function(a){if(!a)a=window.event;var b=a.target;if(!b)b=a.srcElement;if(b.className!="tselected")b.className="thover"};TreeControl.prototype.OnOutItem=function(a){if(!a)a=window.event;var b=a.target;if(!b)b=a.srcElement;if(b.className!="tselected")b.className=""};TreeControl.prototype.OnMouseUp=function(a){try{a.target.nodeName=="A"&&a.target.focus()}catch(b){}};
TreeControl.prototype.OnClick=function(a){if(!a)a=window.event;var b=a.target;if(!b)b=a.srcElement;treeControl.OnClickHandler(a,b)};
TreeControl.prototype.OnDoubleClick=function(a){if(!a)a=window.event;var b=a.target;if(!b)b=a.srcElement;if(!b.tagName)b=b.parentNode;if(b.tagName=="A"||b.tagName=="IMG"){if(b.tagName=="IMG"){var c=b.className;if(c.indexOf("topic")<0&&c.indexOf("question")<0&&c.indexOf("assessment")<0)return}b=b.parentNode.parentNode.firstChild;treeControl.OnClickHandler(a,b);TreeItemDoubleSelected&&TreeItemDoubleSelected()}clearTextSelection()};
function ChangeSelection(a){a=a.tagName=="A"?a:a.childNodes[0];SetLastSelected(GetTpcAttribute(a),treeViewMode,false);if(treeViewMode=="ALL"){if(modeDescA.lastSelected)modeDescA.lastSelected.className="";modeDescA.lastSelected=a;modeDescA.lastSelected.className="tselected"}else if(treeViewMode=="FILTERED"){if(modeDescF.lastSelected)modeDescF.lastSelected.className="";modeDescF.lastSelected=a;modeDescF.lastSelected.className="tselected"}else if(treeViewMode=="FILTEREDHEMI"){if(modeDescFH.lastSelected)modeDescFH.lastSelected.className=
"";modeDescFH.lastSelected=a;modeDescFH.lastSelected.className="tselected"}else{if(modeDescH.lastSelected)modeDescH.lastSelected.className="";modeDescH.lastSelected=a;modeDescH.lastSelected.className="tselected"}}
TreeControl.prototype.SelectFirstItem=function(){var a="";a=treeViewMode=="ALL"?"treeControlHostForAll":treeViewMode=="FILTERED"?"treeControlHostForFiltered":treeViewMode=="FILTEREDHEMI"?"treeControlHostForFilteredHemi":"treeControlHostForHemi";var b="",c;a=document.getElementById(a).firstChild;for(a=seeAlsoSelection>=a.childNodes.length?a.firstChild:a.childNodes[seeAlsoSelection];b=="";){try{var e=a.getAttribute("tpc")}catch(f){return}if(e){b=e;c=a.lastChild}a=a.firstChild}ChangeSelection(c);selection_need=
0;TreeItemSelected&&TreeItemSelected(b,treeViewMode)};
TreeControl.prototype.OnClickHandler=function(a,b){var c=false,e=true;if(!b.tagName)b=b.parentNode;if(b.tagName=="IMG"){var f=b.parentNode.parentNode.lastChild;if(f.tagName=="TABLE"){var h=b.parentNode.firstChild;if(b.openable||h.openable||f.openable)if(f.className=="treeControlChildrenV"){var j=h.getAttribute("srcroot")+"c.gif";h.src="../img/empty.gif";h.className=GetClassNameFromFile(j);h=h.nextSibling;h=h.nextSibling;h.src="../img/empty.gif";h.className=GetClassNameFromFile("../img/module_c.gif");
f.className="treeControlChildrenH";_go_closed=true}else{j=h.getAttribute("srcroot")+"o.gif";h.src="../img/empty.gif";h.className=GetClassNameFromFile(j);h=h.nextSibling;h=h.nextSibling;h.src="../img/empty.gif";h.className=GetClassNameFromFile("../img/module_o.gif");f.className="treeControlChildrenV";f=f.firstChild.firstChild.lastChild;if(!f.firstChild){j=f.id.length>36?GetJunctionId(f.id):f.id;e=false;treeControl.LoadScript(j,f.id)}}}else{f=b.parentNode.lastChild;if(f.tagName=="IMG")return;ChangeSelection(f);
c=true}}if(b.tagName=="A"){ChangeSelection(b);c=true}f=b.parentNode.getAttribute("tpc");if(f==null)f=b.parentNode.parentNode.getAttribute("tpc");c&&TreeItemSelected&&TreeItemSelected(f,treeViewMode);if(e){c=null;try{c=h.parentNode.childNodes[h.parentNode.childNodes.length-1].childNodes[0]}catch(l){}_childNode_Loaded(c)}};function GetTableItemForThis(a){a=a.parentNode;if(a==null)return null;for(;a.tagName!="TABLE";){a=a.parentNode;if(a==null)return null}return a}
function ShowTreeItem(a){var b=getModeDesc(false),c=getModeDesc(true),e=GetTreeItemOfItemDesc(a);if(e==null){for(;e==null;){e=null;e=c.filteredGuids[a];if(e==null)e=modeDescF.filteredGuids[a];if(e==null)e=modeDescH.filteredGuids[a];if(e==null)return false;a=e.parentguid;if(a==null)return false;e=GetTreeItemOfItemDesc(a)}treeControl.LoadScript(a,a+"_"+b.modeLetter)}return true}
function OpenItem(a){if(a.className=="treeControlChildrenH"){var b=a.parentNode.firstChild.firstChild;b.src="../img/empty.gif";var c=b.getAttribute("srcroot")+"o.gif";b.className=GetClassNameFromFile(c);b=b.nextSibling;b=b.nextSibling;b.src="../img/empty.gif";b.className=GetClassNameFromFile("../img/module_o.gif");a.className="treeControlChildrenV"}}
function ChangeTreeView(){var a=false;document.getElementById("treeControlHostForAll");var b=document.getElementById("treeControlHostForFiltered"),c=document.getElementById("flatControlHostForFiltered"),e=document.getElementById("treeControlHostForHemi"),f=document.getElementById("flatControlHostForHemi"),h=document.getElementById("treeControlHostForFilteredHemi"),j=document.getElementById("flatControlHostForFilteredHemi");if(treeViewMode=="FILTERED"){modeDescF.flatMode=!modeDescF.flatMode;a=modeDescF.flatMode;
b.style.display=modeDescF.flatMode?"none":"block";c.style.display=modeDescF.flatMode?"block":"none"}else if(treeViewMode=="HEMI"){modeDescH.flatMode=!modeDescH.flatMode;a=modeDescH.flatMode;e.style.display=modeDescH.flatMode?"none":"block";f.style.display=modeDescH.flatMode?"block":"none"}else{modeDescFH.flatMode=!modeDescFH.flatMode;a=modeDescFH.flatMode;h.style.display=modeDescFH.flatMode?"none":"block";j.style.display=modeDescFH.flatMode?"block":"none"}ChangeTreeView_CallBack();return a}
var directMode=false;function _rec_SearchAInFlat(a,b){if(a.nodeName=="IMG")if(a.getAttribute("tpc")==b)return a;for(var c=0;c<a.childNodes.length;c++){var e=_rec_SearchAInFlat(a.childNodes[c],b);if(e!=null)return e}return null}function _rec_GetFirstObjInFlat(a){if(a.nodeName=="IMG")return a;for(var b=0;b<a.childNodes.length;b++){var c=_rec_GetFirstObjInFlat(a.childNodes[b]);if(c!=null)return c}return null}
function SetFlatSelection(){var a=getModeDesc(false),b=_rec_SearchAInFlat(a.flatControl.host,_lastSelectedGlobal);if(b==null)b=_rec_GetFirstObjInFlat(a.flatControl.host);if(b!=null)a.flatControl.OnClickHandler(null,b);else TreeItemSelected&&TreeItemSelected(null,null)}
function ChangeTreeView_CallBack(){var a=getModeDesc(false);getModeDesc(true);var b=null;if(a.flatMode==true){SetFlatSelection();return true}if(a.flatMode==false||treeViewMode=="ALL"){var c=null;c=_lastSelectedGlobal;b=GetTreeItemOfItemDesc(c);if(b==null){if(!IsFiltered(c,treeViewMode))return false;directMode=true;return ShowTreeItem(c)}if(b!=null)for(c=GetTableItemForThis(b);c!=null;){OpenItem(c);c=GetTableItemForThis(c)}}directMode=false;createTreeControl(null,a.flatMode,b,null,null);return true}
function FlatControl(a){this.host=document.getElementById(a);this.document=this.host.document?this.host.document:this.host.ownerDocument}function showOnFlat(a){var b=parseInt(a.guid.split("_")[1]);if(a.isroot==true&&b==1)return false;if(rolefilter_enabled==false)return true;b=false;if(typeof filteredGuidsR[a.guid]!="undefined")b=filteredGuidsR[a.guid].found;return b}
function isInOutline(a,b){if(a.filteredGuids.length==0)return true;var c=a.filteredGuids[b].parentguid;if(c==null)return false;return c.split("_")[1]=="1"?true:isInOutline(a,c)}
function getModeDesc(a){if(a==null)a=false;a=a==true?_lastSelectedGlobalMode:treeViewMode;if(a=="ALL")return modeDescA;else if(a=="FILTERED")return modeDescF;else if(a=="HEMI")return modeDescH;else if(a=="FILTEREDHEMI"){modeDescFH.guidsForFlat=[];for(a=0;a<modeDescF.guidsForFlat.length;a++)for(var b=modeDescF.guidsForFlat[a],c=0;c<modeDescH.guidsForFlat.length;c++){var e=modeDescH.guidsForFlat[c];if(b.guid==e.guid)modeDescFH.guidsForFlat[modeDescFH.guidsForFlat.length]=b}modeDescFH.filteredGuids=
[];modeDescFH.filteredGuidList=[];for(a=0;a<modeDescF.filteredGuidList.length;a++){b=modeDescF.filteredGuidList[a];for(c=0;c<modeDescH.filteredGuidList.length;c++){e=modeDescH.filteredGuidList[c];if(b.guid==e.guid){if(modeDescFH.filteredGuids[b]==undefined)modeDescFH.filteredGuids[b]={};modeDescFH.filteredGuids[b].guid=b;modeDescFH.filteredGuids[b].context=modeDescH.filteredGuids[e].context;modeDescFH.filteredGuidList.push(b)}}}return modeDescFH}return null}
function saveModeDesc(a){if(treeViewMode=="ALL")modeDescA=a;else if(treeViewMode=="FILTERED")modeDescF=a;else if(treeViewMode=="HEMI")modeDescH=a;else if(treeViewMode=="FILTEREDHEMI")modeDescFH=a}
FlatControl.prototype.Load=function(){function a(z){var B={o:z.guid,info:[],t:z.title};z=z.guid.split("_")[0];z=modeDescA.foundItemMap[z];if(z!=null)for(var H=0;H<z.cindexes.length;H++){var K={};K.a=z.cindexes[H].cindex;K.c=z.cindexes[H].cindex-z.cindexes[H].nullindex;K.w=z.cindexes[H].score;B.info.push(K)}return B}var b=getModeDesc(false);this.host.innerHTML="";var c=this.host.appendChild(this.document.createElement("div"));c.className="treeControlNode";c.onclick=this.OnClick;c.ondblclick=this.OnDoubleClick;
c.onmouseup=this.OnMouseUp;c=c.appendChild(this.document.createElement("table"));c.cellSpacing=0;var e=true,f=0,h=[];UserPrefs.LoadCookie();for(var j=Debug.EnableShowDiagnostics==true&&UserPrefs.EnableShowDiagnostics==true||Debug.is_ta_debug,l=0;l<b.guidsForFlat.length;l++){var k=b.guidsForFlat[l];if(showOnFlat(k)&&isInOutline(b,k.guid)){f++;if(!(f>TreeConfig.SearchResultLimit)){b.actualFlatCounter=f;var q=c.appendChild(this.document.createElement("tbody"));q=q.appendChild(this.document.createElement("tr"));
var o=q.appendChild(this.document.createElement("td"));o=o.appendChild(this.document.createElement("img"));o.className=GetClassNameFromFile(k.type=="Topic"?"../img/topic.gif":k.empty?"../img/emptysection.gif":"../img/module_c.gif");o.src="../img/empty.gif";o.setAttribute("tpc",k.guid);o=q.appendChild(this.document.createElement("td"));o.className="treeControlNode flatControl";q=o.appendChild(this.document.createElement("a"));if(e==true){b.lastSelectedFlat=q;saveModeDesc(b)}q.className=e==true?"tselected":
"";e==true&&_lastChangeIsFilterOnly==false&&SetLastSelected(k.guid,treeViewMode,false);e=false;q.style.cursor="pointer";q.setAttribute("tpc",k.guid);q.onmouseover=this.OnOverItem;q.onmouseout=this.OnOutItem;o=k.title;if(j&&treeViewMode=="HEMI"){k=a(k);h.push(k);o+=" [";for(var v=0;v<k.info.length;v++)o+="{a:"+k.info[v].a+" c:"+k.info[v].c+" w:"+parseInt(k.info[v].w*100)+"} ";o+=" {"+k.o+"}]"}q.appendChild(this.document.createTextNode(o))}}}j&&XdTransfer.PostMessage(window.parent,"oraupk-debuginfo_outlinedata",
{data:h});b.flatMode==true&&SetFlatSelection();c=null;try{c=b.lastSelectedFlat.getAttribute("tpc")}catch(r){}TreeItemSelected&&TreeItemSelected(c,treeViewMode)};FlatControl.prototype.OnOverItem=function(a){if(!a)a=window.event;var b=a.target;if(!b)b=a.srcElement;if(b.className!="tselected")b.className="thover"};FlatControl.prototype.OnOutItem=function(a){if(!a)a=window.event;var b=a.target;if(!b)b=a.srcElement;if(b.className!="tselected")b.className=""};
FlatControl.prototype.OnMouseUp=function(a){try{a.target.nodeName=="A"&&a.target.focus()}catch(b){}};FlatControl.prototype.OnClick=function(a){if(!a)a=window.event;var b=a.target;if(!b)b=a.srcElement;getModeDesc(false).flatControl.OnClickHandler(a,b)};FlatControl.prototype.OnDoubleClick=function(a){if(!a)a=window.event;var b=a.target;if(!b)b=a.srcElement;getModeDesc(false).flatControl.OnClickHandler(a,b);TreeItemDoubleSelected&&TreeItemDoubleSelected()};
FlatControl.prototype.OnClickHandler=function(a,b){var c=b,e=GetTpcAttribute(c);e!=null&&SetLastSelected(e,treeViewMode,false);if(!(b.tagName!="A"&&b.tagName!="IMG")){if(b.tagName!="A"){e=b.parentNode.parentNode;for(var f=0;f<e.childNodes.length;f++){var h=e.childNodes[f].childNodes[0];if(h.tagName=="A")c=h}}if(treeViewMode=="FILTERED")modeDescF.lastSelectedFlat.className="";else if(treeViewMode=="HEMI")modeDescH.lastSelectedFlat.className="";else modeDescFH.lastSelectedFlat.className="";c.className=
"tselected";if(treeViewMode=="FILTERED")modeDescF.lastSelectedFlat=c;else if(treeViewMode=="HEMI")modeDescH.lastSelectedFlat=c;else modeDescFH.lastSelectedFlat=c;c=c.getAttribute("tpc");TreeItemSelected&&TreeItemSelected(c,treeViewMode)}};function GetActualFlatView(){return getModeDesc(false).flatMode}function GetActualFlatItemCounter(){return getModeDesc(false).actualFlatCounter}
function IsActualViewEmpty(){var a=getModeDesc(false);if(a.filteredGuidList.length==0)return true;if(a.flatMode==true&&$("#chroles").prop("checked")==true){for(var b=0;b<a.guidsForFlat.length;b++){var c=a.guidsForFlat[b].guid,e=false;if(typeof filteredGuidsR[c]!="undefined")e=filteredGuidsR[c].found;if(e==true)return false}return true}return false}
function getActualIndex_Flat(){var a=getModeDesc(false);if(a.flatMode==true)for(var b=0;b<a.flatControl.host.firstChild.firstChild.childNodes.length;b++)if(a.flatControl.host.firstChild.firstChild.childNodes[b].firstChild.childNodes[1].firstChild.className=="tselected")return b;return-1}
function getActualIndex_Tree(a,b){for(var c=0;c<a.length;c++)if(a[c].firstChild.childNodes[3].firstChild.className=="tselected")return c;if(b.lastSelected!=null){var e=b.lastSelected.parentNode.parentNode.getAttribute("tpc");for(c=0;c<a.length;c++)if(a[c].firstChild.getAttribute("tpc")==e)return c}return-1}function getTargetForIndex_Flat(a,b){return a.flatControl.host.firstChild.firstChild.childNodes[b].firstChild.firstChild.firstChild}var ls;
function getTargetForIndex_Tree(a){return ls[a].firstChild.childNodes[3].firstChild}function getActualImageObj_Tree(a){return a.lastSelected.parentNode.parentNode.firstChild}function getSpecifiedImageObj_Tree(a,b){return a[b].firstChild.firstChild}function getOwnerOfSelection(){var a=getModeDesc(false),b=a.lastSelected.parentNode.parentNode.parentNode.childNodes[0].getAttribute("tpc");return a.filteredGuids[b].parentguid}
function getOpenedStatus(a){a=a.className;return a.substr(a.length-1,1)=="o"}function getFilteredStatus(a){return!IsFiltered(a,"ALL")}function _getLinearStructure_Recursive(a,b){b[b.length]=a;if(getOpenedStatus(a.firstChild.firstChild)==true)for(var c=0;c<a.childNodes[1].firstChild.firstChild.childNodes[1].childNodes.length;c++)_getLinearStructure_Recursive(a.childNodes[1].firstChild.firstChild.childNodes[1].childNodes[c],b)}
function getRoot(a){if(a.tagName=="DIV"&&a.id.substr(0,15)=="treeControlHost")return a.firstChild;return getRoot(a.parentNode)}function getLinearStructure_Tree(a){var b=[];a=getRoot(a.lastSelected);for(var c=0;c<a.childNodes.length;c++)_getLinearStructure_Recursive(a.childNodes[c],b);return b}
function EventKeyDown(a){if(a==null)a=window.event;var b=a.which?a.which:a.keyCode;if(b==13)TreeItemDoubleSelected&&_inputHasFocus!=true&&TreeItemDoubleSelected();else{a=getModeDesc(false);if(a.flatMode==true){var c=getActualIndex_Flat();if(b==38){if(c>0){b=getTargetForIndex_Flat(a,c-1);a.flatControl.OnClickHandler(null,b)}}else if(b==40)if(c<a.actualFlatCounter-1){b=getTargetForIndex_Flat(a,c+1);a.flatControl.OnClickHandler(null,b)}}else{var e=getActualImageObj_Tree(a),f=e.openable?e.openable:e.getAttribute("openable"),
h=getOpenedStatus(e);ls=getLinearStructure_Tree(a);c=getActualIndex_Tree(ls,a);if(b==37){if(f==true)if(h==true){treeControl.OnClickHandler(null,e);return false}}else if(b==38){if(c>0){b=getTargetForIndex_Tree(c-1);treeControl.OnClickHandler(null,b)}}else if(b==39){if(f==true)if(h==false){treeControl.OnClickHandler(null,e);return false}}else if(b==40)if(c<ls.length-1){b=getTargetForIndex_Tree(c+1);treeControl.OnClickHandler(null,b)}}}}
function tree_SetFocus(){document.frames[0].document.childNodes[1].childNodes[1].focus()}function tree_Init(){document.onkeydown=EventKeyDown;Init_treeloaded&&Init_treeloaded()}function clearTextSelection(){document.selection&&document.selection.empty();window.getSelection&&window.getSelection().removeAllRanges()}
function GoToNext(){var a=getModeDesc(false);if(a.flatMode==true){var b=getActualIndex_Flat();if(b<a.actualFlatCounter-1){b=getTargetForIndex_Flat(a,b+1);a.flatControl.OnClickHandler(null,b)}}else{b=getActualImageObj_Tree(a);b.openable||b.getAttribute("openable");getOpenedStatus(b);ls=getLinearStructure_Tree(a);b=getActualIndex_Tree(ls,a);if(b<ls.length-1){b=getTargetForIndex_Tree(b+1);treeControl.OnClickHandler(null,b)}}}
function TreeNavigator(){this.GoForward=function(){Navigation_Down()};this.GoBack=function(){Navigation_Up()};this.isForwardEnabled=function(){return!isLastItem()};this.isBackEnabled=function(){return!isFirstItem()}}var treeNavigator=new TreeNavigator,_go_next=false,_go_prev=false,_go_closed=false;
function Navigation_Up(){var a=getModeDesc(false);if(a.flatMode==false){ls=getLinearStructure_Tree(a);a=getActualIndex_Tree(ls,a);a=getSpecifiedImageObj_Tree(ls,a-1);var b=Bool(a.openable!=undefined?a.openable:a.getAttribute("openable")),c=getOpenedStatus(a);if(b&&!c){_go_prev=true;treeControl.OnClickHandler(null,a);return}}EventKeyDown({keyCode:38})}
function Navigation_Down(){var a=getModeDesc(false);if(a.flatMode==false){var b=getActualImageObj_Tree(a);a=Bool(b.openable!=undefined?b.openable:b.getAttribute("openable"));b=getOpenedStatus(b);if(a&&!b){_go_next=true;a={keyCode:39};EventKeyDown(a);return}}a={};a.keyCode=40;EventKeyDown(a)}function isFirstItem(){var a=getModeDesc(false);if(a.flatMode==true)a=getActualIndex_Flat();else{if(a.lastSelected==null)return true;ls=getLinearStructure_Tree(a);a=getActualIndex_Tree(ls,a)}return a==0}
function isLastItem(){var a=getModeDesc(false);if(a.flatMode==true){var b=getActualIndex_Flat();return b==a.filteredTopicCount-1}else{if(a.lastSelected==null)return false;ls=getLinearStructure_Tree(a);b=getActualIndex_Tree(ls,a);if(b==ls.length-1)return getActualImageObj_Tree(a).openable==false;return false}}
function _childNode_Loaded(a){if(_go_next==true){_go_next=false;Navigation_Down()}if(_go_prev==true){var b=getModeDesc(false);if(b.flatMode==false){ls=getLinearStructure_Tree(b);b=getActualIndex_Tree(ls,b);b=getSpecifiedImageObj_Tree(ls,b-1);var c=Bool(b.openable!=undefined?b.openable:b.getAttribute("openable")),e=getOpenedStatus(b);if(c&&!e){_go_prev=true;treeControl.OnClickHandler(null,b);return}else{_go_prev=false;Navigation_Up()}}}if(_go_closed==true){_go_closed=false;b=getModeDesc(false);if(b.flatMode==
false){ls=getLinearStructure_Tree(b);b=getActualIndex_Tree(ls,b);b==-1&&treeControl.OnClickHandler(null,a)}}}var indexMap=[],treeIndex=[];function AddToIndexMap(a){if(bigsco!=false)if(!(a.length<=36)){var b=a.substr(0,36);a=a.substr(37);indexMap[a]=b}}var _tocStates2=null,_tocStates_initialized=false;
function InitTocStates(){if(!_tocStates_initialized){_tocStates_initialized=true;if(bigsco!=false){for(var a=0;a<parentIndex.length;a++){treeIndex[a]=[];treeIndex[a][0]=parentIndex[a]}for(a=0;a<parentIndex.length;a++){var b=parentIndex[a];treeIndex[b][treeIndex[b].length]=a}_tocStates2=[];for(a=0;a<lms_TOCState.NodeCounter;a++)_tocStates2[a]=lms_GetItemStatus(a);InitOneItemState(childIndexLocal2Global(0));a=lms_GetItemStatus(0);b=_tocStates2[0];a!=b&&lms_SetItemStatus(0,b);updateTreeTrace()}}}
function InitOneItemState(a){for(var b=index_getChildList(a,false),c=0;c<b.length;c++)InitOneItemState(b[c]);childIndexGlobal2Local(a);if(a!=0)_tocStates2[a]=BuildItemStatus(a)}function GetItemStatus(a){var b=a.substr(37);a=childIndexGlobal2Local(b);b=BuildItemStatus(b);return _tocStates2[a]=b}function _GetItemStatusFile(a){switch(a){case "N":return"sco_notstarted";case "I":return"sco_incomplete";case "C":return"sco_completed";case "P":return"sco_passed";case "F":return"sco_failed"}return""}
function _GetItemStatusTitle(a){switch(a){case "N":return R_status_tree_notstarted;case "I":return R_status_tree_inprogress;case "C":return R_status_tree_complete;case "P":return R_status_tree_passed;case "F":return R_status_tree_failed}return""}function UpdateItemStatus(a){_tocStates2[a]=lms_GetItemStatus(a);a=childIndexLocal2Global(a);RefreshItemStatus(indexMap[a]+"_"+a);BuildRootItemStatus();updateTreeTrace()}
function RefreshItemStatus(a){if(bigsco!=false){var b=getModeDesc(a).filteredGuids[a];if(b!=null){a=GetItemStatus(a);b.treeitemdiv.parentNode.parentNode.childNodes[1].setAttribute("src","../img/empty.gif");var c=_GetItemStatusFile(a);b.treeitemdiv.parentNode.parentNode.childNodes[1].setAttribute("class",c);b.treeitemdiv.parentNode.parentNode.childNodes[1].setAttribute("className",c);b.treeitemdiv.parentNode.parentNode.childNodes[1].setAttribute("title",_GetItemStatusTitle(a));b.treeitemdiv.parentNode.parentNode.childNodes[1].setAttribute("alt",
_GetItemStatusTitle(a));b.parentguid!=null&&RefreshParentItemStatus(b.parentguid)}}}
function RefreshParentItemStatus(a){var b=a.substr(37),c=childIndexGlobal2Local(b),e=_tocStates2[c];b=BuildItemStatus(b);if(c==0)if(b=="N")return;if(b!=e){_tocStates2[c]=b;c==0&&lms_SetItemStatus(0,b);updateTreeTrace();a=getModeDesc(a).filteredGuids[a];if(a!=null){a.treeitemdiv.parentNode.parentNode.childNodes[1].setAttribute("src","../img/empty.gif");c=_GetItemStatusFile(b);a.treeitemdiv.parentNode.parentNode.childNodes[1].setAttribute("class",c);a.treeitemdiv.parentNode.parentNode.childNodes[1].setAttribute("className",
c);a.treeitemdiv.parentNode.parentNode.childNodes[1].setAttribute("title",_GetItemStatusTitle(b));a.treeitemdiv.parentNode.parentNode.childNodes[1].setAttribute("alt",_GetItemStatusTitle(b));a.parentguid!=null&&RefreshParentItemStatus(a.parentguid)}}}function getBaseIndex(){return parseInt(_rootData.substr(37))}function childIndexLocal2Global(a){return parseInt(a)+getBaseIndex()}function childIndexGlobal2Local(a){return a-getBaseIndex()}
function index_getParent(a){if(!index_checkIndex(a))return-1;return treeIndex[a][0]}function index_getChildList(a,b){if(!index_checkIndex(a))return[];for(var c=treeIndex[a],e=[],f=1;f<c.length;f++)if(b){if(b!=c[f])e[f-1]=c[f]}else e[f-1]=c[f];return e}function index_hasChildren(a){if(!index_checkIndex(a))return-1;return treeIndex[a].length>1}function index_checkIndex(a){if(a>treeIndex.length-1)return false;return treeIndex[a].length>0}
function BuildItemStatus(a){var b=childIndexGlobal2Local(a);return BuildItemStatus2(a,b)}function BuidStatus(a,b){if(a.indexOf("I")>=0)return"I";if(a.indexOf("N")>=0)return a.indexOf("C")>=0||a.indexOf("F")>=0||a.indexOf("P")>=0?"I":"N";if(a.indexOf("F")>=0)return b==false?"F":"C";if(a.indexOf("P")>=0)if(b==false)return"P";return"C"}
function BuildItemStatus2(a,b){var c=index_getChildList(a,false),e="";if(b!=0)if(conceptIndex[a]>0)e+=lms_GetItemStatus(b);for(var f=0;f<c.length;f++)e+=_tocStates2[childIndexGlobal2Local(c[f])];return BuidStatus(e,c.length>0)}function BuildRootItemStatus(){var a=childIndexLocal2Global(0);a=index_getChildList(a,false);for(var b="",c=0;c<a.length;c++)b+=_tocStates2[childIndexGlobal2Local(a[c])];a=BuidStatus(b,a.length>0);_tocStates2[0]=a}var treeTraceOn=false,treeTraceWnd=null;
function updateTreeTrace(){try{if(treeTraceOn){if(treeTraceWnd==null)treeTraceWnd=window.open();treeTraceWnd.document.body.innerHTML="";for(var a=0;a<_tocStates2.length;a++)treeTraceWnd.document.write(" "+a+": "+_tocStates2[a]+" - "+lms_GetItemStatus(a)+"<br/>")}}catch(b){}}function splitUri(a){a=a.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);a.shift();return a=[a[1]+"://"+a[3],a[4],a[6]+a[8]]}
function combine(a,b){var c=b;if(c.indexOf("odrel://")==0)c=c.substr(8);if(c=="")c=".";var e=splitUri(a),f=e[0];e=e[1];if(e.charAt(0)=="/")e=e.substr(1);if(e.charAt(e.length-1)=="/")e=e.substr(0,e.length-1);if(c.charAt(c.length-1)=="/")c=c.substr(0,c.length-1);e=e.split("/");var h=c.split("/");if(h.length>2&&h[0]==""&&h[1]==""){f=f.split(":")[0]+":/";for(c=2;c<h.length;c++)f+="/"+h[c];return f}var j=[];for(c=0;c<e.length;c++)j[c]=e[c];for(c=0;c<h.length;c++)if(h[c]==".."){if(j.length>0)j=j.slice(0,
j.length-1)}else if(h[c]!=".")if(h[c]=="")j=[];else j[j.length]=h[c];e="";for(c=0;c<j.length;c++)e+="/"+j[c];return f+e}function getRootUrl(){if(typeof isTocHtml!="undefined"){var a=document.location.href;return a.substr(0,a.lastIndexOf("/"))}var b=splitUri(document.location.href);a=b[0];b=b[1];if(b.charAt(0)=="/")b=b.substr(1);b=b.split("/");var c;for(c=b.length-1;b[c]!="tpc"&&c>=0;c--);if(c>0&&(b[c-1]=="data"||b[c-1]=="help"))c-=1;for(var e="",f=0;f<c;f++)e+="/"+b[f];return a+e}
function isRelative(a){a=a.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);return a[1]==""||a[1]==undefined}function resolveIfRelative(a){return a.indexOf("odrel://")==0?resolve(a):a}function resolve(a){if(isRelative(PlayerConfig.BaseUrl)){var b=getRootUrl();b=combine(b,PlayerConfig.BaseUrl);return combine(b,a)}else return combine(PlayerConfig.BaseUrl,a)}
function resolveLinksInWebPage(){for(var a=document.getElementsByTagName("a"),b=0;b<a.length;b++){var c=a[b].getAttribute("href");if(c!=null)if(c.indexOf("odrel://")==0)a[b].href=resolve(a[b].getAttribute("href"))}}var intPos=window.location.search.toLowerCase().indexOf("aicc_url"),intPos2=window.location.search.toLowerCase().indexOf("aicc_sid");function getOnlyPath(a){for(;a.indexOf("\\")!=-1;)a=a.replace("\\","/");return a.substr(0,a.lastIndexOf("/"))}
if(intPos>-1&&intPos2>-1){if(LmsConfig.AiccAppletPath==""){var currentPgPath=window.location.protocol+"//"+window.location.host+getOnlyPath(window.location.pathname);fullPath=currentPgPath+"/"+lms_path+"aicc"}else fullPath=LmsConfig.AiccAppletPath;document.write("<div style='position: absolute;'><applet NAME='GetHTTPPostData' codebase='"+fullPath+"' archive='gethttppostdata.jar' code='GetHTTPPostData' width='1' height='1' MAYSCRIPT><param name='permissions' value='sandbox' /></applet></div>")}
function InsertRuntimeAPI(a){if(Kpath_launch==false)setTimeout(a,1);else{var b=findKPathAPIFrame(window);if(b==null){b=document.createElement("iframe");b.id="KPATH_API_FRAME";b.style.display="none";document.body.appendChild(b);if(a)if(navigator.appName=="Microsoft Internet Explorer")b.attachEvent("onload",a);else b.onload=a;b.src=Kpath_Runtime_API}else setTimeout(a,1)}}
function findKPathAPIFrame(a){var b=null,c=0,e=a;try{for(;e!=null;){b=e.document.getElementById("KPATH_API_FRAME");if(b!=null)return b.contentWindow;c++;if(c>7)break;if(e===e.parent)break;e=e.parent}if(a.top.opener!=null)return findKPathAPIFrame(a.top.opener)}catch(f){}return null}var _GlobalLmsComFactory=null;function GetLmsComFactory(){_GlobalLmsComFactory==null&&alert(R_initializelmscom_not_called);return _GlobalLmsComFactory}
function CheckForLMSAPI(){if(_lmsMode=="LMS"&&!(_GlobalLmsComFactory.api_type=="scorm2004"||_GlobalLmsComFactory.api_type=="scorm12"||_GlobalLmsComFactory.api_type=="aicc"||_GlobalLmsComFactory.api_type=="kpath"&&findKPathAPIFrame(window)))alert(R_scorm_noapi);_lmsMode=="KPT"&&!findKPathAPIFrame(window)&&alert(R_scorm_noapi)}function InitializeLmsCom(){_GlobalLmsComFactory=new LmsComFactory(window.location.search)}
function LmsComFactory(a){this.api_type="none";this.launch_arg=a;this.aicc_sid=this.aicc_url="";this.scorm_api_2004=this.scorm_api_12=null;a=this.launch_arg.substring(1).split("&");lmslog.addEntry(0,"LmsComFactory","strArgs",a);for(var b=0;b<a.length;b++){strArg=a[b];var c;c=this.CheckParam(strArg,"aicc_url=");if(c!="")this.aicc_url=c.substr(0,4).toLowerCase()!="http"?LmsConfig.AiccUrlProtocol+c:c;else{c=this.CheckParam(strArg,"aicc_sid=");if(c!="")this.aicc_sid=c}}if(LmsConfig.ScormVersion!=="1.2")this.scorm_api_2004=
this.FindScorm2004API();if(this.scorm_api_2004==null&&LmsConfig.ScormVersion!=="2004")this.scorm_api_12=this.FindScorm12API();if(this.aicc_url!=""&&this.aicc_sid!="")this.api_type="aicc";else if(Kpath_launch==true)this.api_type="kpath";else if(this.scorm_api_2004!=null)this.api_type="scorm2004";else if(this.scorm_api_12!=null)this.api_type="scorm12"}
LmsComFactory.prototype.CreateLmsCom=function(){if(this.api_type=="aicc")return new LmsComAICC(this.aicc_url,this.aicc_sid);else if(this.api_type=="scorm2004")return new LmsComScorm2004;else if(this.api_type=="kpath"){var a=new LmsComKPath;a.API=this.scorm_api_2004;return a}else if(this.api_type=="scorm12")return new LmsComScorm12;return PlayerConfig.EnableCookies?new LmsComCookie:new LmsComBase};
LmsComFactory.prototype.FindScorm12API=function(){try{var a=this.FindWindowScorm12API(window);if(a==null&&top.window.opener!=null&&!top.window.opener.closed)a=this.FindWindowScorm12API(top.window.opener);return a}catch(b){return null}};LmsComFactory.prototype.FindWindowScorm12API=function(a){for(var b=0;a.API==null&&a.parent!=null&&a.parent!=a;){b++;if(b>500){lmslog.addEntry(0,"FindScorm12API","",R_scorm_apideep);return null}a=a.parent}return a.API};
LmsComFactory.prototype.FindScorm2004API=function(){try{var a=this.FindWindowScorm2004API(window);if(a==null&&top.window.opener!=null&&!top.window.opener.closed)a=this.FindWindowScorm2004API(top.window.opener);return a}catch(b){return null}};LmsComFactory.prototype.FindWindowScorm2004API=function(a){for(var b=0;a.API_1484_11==null&&a.parent!=null&&a.parent!=a;){b++;if(b>500){lmslog.addEntry(0,"FindScorm2004API","",R_scorm_apideep);return null}a=a.parent}return a.API_1484_11};
LmsComFactory.prototype.CheckParam=function(a,b){var c=b.length,e="";if(a.substr(0,c).toLowerCase()==b)e=a.substring(c);return e};var LMS_PASSED="passed",LMS_FAILED="failed",LMS_COMPLETED="completed",LMS_INCOMPLETE="incomplete",LMS_NOT_ATTEMPTED="not attempted";Date.prototype.toSCORM=function(){return this.getFullYear()+"-"+("0"+(this.getMonth()+1)).slice(-2)+"-"+("0"+this.getDate()).slice(-2)+"T"+("0"+this.getHours()).slice(-2)+":"+("0"+this.getMinutes()).slice(-2)+":"+("0"+this.getSeconds()).slice(-2)};
function LmsComBase(a){this.status_obj=null;this.ordinal_number=0;this.credit=this.student_name=this.student_id=this.end_date=this.start_date="";this.lesson_status=LMS_NOT_ATTEMPTED;this.time=this.score=this.core_vendor=this.original_lesson_data=this.lesson_data=this.lesson_location=this.lesson_flag="";this.doit_child_time=this.mode_idle_time=this.idle_time=0;this.guid=this.owner=null;this.isTestIt=this.bigsco=this.session_active=false;if(a!=null){this.Copy(a);this.ParentLmsCom=a}this.object_type_name=
"LmsComBase"}LmsComBase.prototype.GetOrdinalNumber=function(){return this.ordinal_number};LmsComBase.prototype.SetOrdinalNumber=function(a){this.ordinal_number=a};LmsComBase.prototype.Copy=function(a){this.student_id=a.student_id;this.student_name=a.student_name;this.credit=a.credit;this.lesson_status=a.lesson_status;this.bigsco=a.bigsco;this.lesson_data=a.lesson_data;this.lesson_location=a.lesson_location};
LmsComBase.prototype.Begin=function(){this.start_date=(new Date).getTime();this.session_active&&alert(R_lmscom_already_active);return this.session_active=true};LmsComBase.prototype.End=function(){this.session_active||alert(R_lmscom_inactive);this.end_date=(new Date).getTime();this.session_active=false;return true};LmsComBase.prototype.LoadAPIAdapter=function(a){a()};LmsComBase.prototype.SendCompletionInfo=function(){};
LmsComBase.prototype.NotifyParent=function(){var a=this.ParentLmsCom;a&&!a.owner.closed&&a.owner.ListenChildClose&&a.owner.ListenChildClose()};LmsComBase.prototype.getReportedLessonStatus=function(){return this.lesson_status===LMS_PASSED?LmsConfig.ReportOnPass:this.lesson_status===LMS_FAILED?LmsConfig.ReportOnFail:this.lesson_status};LmsComBase.prototype.computeTime=function(a,b){return this.convertTotalSeconds((b-a-this.idle_time)/1E3)};
LmsComBase.prototype.computeTime2=function(a,b){return""+(b.getTime()-a-this.doit_child_time)/1E3};LmsComBase.prototype.convertTotalSeconds=function(a){var b=a%60;a-=b;var c=a%3600;a-=c;b=Math.round(b*100)/100;var e=b=new String(b);if(b.indexOf(".")!=-1){e=b.substring(0,b.indexOf("."));b.substring(b.indexOf(".")+1,b.length)}if(e.length<2)e="0"+e;b=e;a=a%3600!=0?0:a/3600;c=c%60!=0?0:c/60;if((new String(a)).length<2)a="0"+a;if((new String(c)).length<2)c="0"+c;return a+":"+c+":"+b};
LmsComBase.prototype.doGetUPKValue=function(a){if(this.ParentLmsCom)return this.ParentLmsCom.doGetUPKValue(a);return""};LmsComBase.prototype.doSetUPKValue=function(a,b){this.ParentLmsCom&&this.ParentLmsCom.doSetUPKValue(a,b)};LmsComBase.prototype.doUPKCommit=function(){this.ParentLmsCom&&this.ParentLmsCom.doUPKCommit()};LmsComBase.prototype.setInteraction=function(a,b){if(this.ParentLmsCom)return this.ParentLmsCom.setInteraction(a,b)};
LmsComBase.prototype.getAnsweredQuestions=function(){if(this.ParentLmsCom)return this.ParentLmsCom.getAnsweredQuestions();return{}};LmsComBase.prototype.setObjective=function(a,b){this.ParentLmsCom&&this.ParentLmsCom.setObjective(a,b)};LmsComBase.prototype.requestContinue=function(){this.ParentLmsCom&&this.ParentLmsCom.requestContinue()};LmsComBase.prototype.IsConnected=function(){if(this.ParentLmsCom)return this.ParentLmsCom.IsConnected();return false};
LmsComBase.prototype.OpenBasicStatus=function(){this.status_obj=new LmsBasicStatus;this.status_obj.status=this.lesson_status;return this.status_obj};
LmsComBase.prototype.OpenTopicStatus=function(a,b,c){this.status_obj=new LmsTopicStatus;this.status_obj.setRequiredMode(a,b,c);lmslog.addEntry(0,"OpenTopicStatus","RequiredMode",this.status_obj.requiredMode);this.status_obj.isScored=!!a.K;a=GetTopLevelLmsMode()=="LMS"?a:b;this.status_obj.setModeavail("S",a.S);this.status_obj.setModeavail("T",a.T);this.status_obj.setModeavail("K",a.K);this.status_obj.setModeavail("D",a.D);this.status_obj.setModeavail("P",a.P);this.status_obj.setModeavail("E",a.E);
lmslog.addEntry(0,"OpenTopicStatus","SeeIt",this.status_obj.getModeavail("S"));lmslog.addEntry(0,"OpenTopicStatus","TryIt",this.status_obj.getModeavail("T"));lmslog.addEntry(0,"OpenTopicStatus","KnowIt",this.status_obj.getModeavail("K"));lmslog.addEntry(0,"OpenTopicStatus","DoIt",this.status_obj.getModeavail("D"));lmslog.addEntry(0,"OpenTopicStatus","PrintIt",this.status_obj.getModeavail("P"));lmslog.addEntry(0,"OpenTopicStatus","TestIt",this.status_obj.getModeavail("E"));if(this.bigsco){this.status_obj.savedStatus=
this.lesson_data.charAt(0);this.lesson_data=this.lesson_data.substring(1)}this.status_obj.initTopicstat(this.lesson_data);return this.status_obj};
LmsComBase.prototype.OpenTopicLaunchStatus=function(a,b,c,e){this.status_obj=new LmsTopicLaunchStatus(a);this.status_obj.setRequiredMode(b,c,e);lmslog.addEntry(0,"OpenTopicLaunchStatus","RequiredMode",this.status_obj.requiredMode);this.status_obj.isScored=b.indexOf("K")!=-1;a=GetTopLevelLmsMode()=="LMS"?b:c;this.status_obj.setModeavail("S",a.indexOf("S")!=-1);this.status_obj.setModeavail("T",a.indexOf("T")!=-1);this.status_obj.setModeavail("K",a.indexOf("K")!=-1);this.status_obj.setModeavail("D",
a.indexOf("D")!=-1);this.status_obj.setModeavail("P",a.indexOf("P")!=-1);this.status_obj.setModeavail("E",a.indexOf("E")!=-1);lmslog.addEntry(0,"OpenTopicLaunchStatus","SeeIt",this.status_obj.getModeavail("S"));lmslog.addEntry(0,"OpenTopicLaunchStatus","TryIt",this.status_obj.getModeavail("T"));lmslog.addEntry(0,"OpenTopicLaunchStatus","KnowIt",this.status_obj.getModeavail("K"));lmslog.addEntry(0,"OpenTopicLaunchStatus","DoIt",this.status_obj.getModeavail("D"));lmslog.addEntry(0,"OpenTopicLaunchStatus",
"PrintIt",this.status_obj.getModeavail("P"));lmslog.addEntry(0,"OpenTopicLaunchStatus","TestIt",this.status_obj.getModeavail("E"));this.status_obj.initTopicstat(this.lesson_data);return this.status_obj};LmsComBase.prototype.OpenQuestionStatus=function(){this.status_obj=new LmsQuestionStatus;this.status_obj.status=LMS_NOT_ATTEMPTED;this.status_obj.savedStatus=this.lesson_data?Stat2Lms(this.lesson_data):LMS_NOT_ATTEMPTED;return this.status_obj};
LmsComBase.prototype.OpenAssessmentStatus=function(a,b,c){this.status_obj=new LmsAssessmentStatus;this.status_obj.hash=b;this.status_obj.questionlimit=c;var e=this.lesson_data,f,h=null,j=-1;if(e)if(this.bigsco)h=b;else{var l=e.indexOf("@");if(l>0){f=parseInt(e.substring(0,l));h=e.substring(l+1,l+f+1).replace(/ /g,"+");e=e.substring(l+f+1);l=e.indexOf("@");if(l>0){f=parseInt(e.substring(0,l));j=parseInt(e.substring(l+1,l+f+1));e=e.substring(l+f+1)}}}if(b===h&&e.length===a+1&&c===j){this.status_obj.savedStatus=
e.charAt(0);this.status_obj.status=e.charAt(0)==="I"?LMS_INCOMPLETE:LMS_NOT_ATTEMPTED;for(b=0;b<a;b++)this.status_obj.questionstatus[b]=e.charAt(b+1)}else{if(e&&!this.bigsco){this.status_obj.stateDiscarded=true;this.status_obj.savedStatus=e.charAt(0)==="I"?"N":e.charAt(0)}else this.status_obj.savedStatus="N";this.status_obj.status=LMS_NOT_ATTEMPTED;for(b=0;b<a;b++)this.status_obj.questionstatus[b]="N"}return this.status_obj};
LmsComBase.prototype.OpenTOCStatus=function(a,b){var c=new LmsTOCStatus;this.status_obj=c;var e=new TOCState(a,b);c.setTocState(e);this.lesson_data!=null&&this.lesson_data.length>0&&e.DeserializeTOC(this.lesson_data);return c};LmsComBase.prototype.SaveStatus=function(){this.status_obj&&this.status_obj.Save(this)};LmsComBase.prototype.utGetModeIndex=function(){this.ParentLmsCom&&this.ParentLmsCom.utGetModeIndex()};LmsComBase.prototype.utPushModeIndex=function(){this.ParentLmsCom&&this.ParentLmsCom.utPushModeIndex()};
LmsComBase.prototype.utPopModeIndex=function(){this.ParentLmsCom&&this.ParentLmsCom.utPopModeIndex()};LmsComBase.prototype.utRecordType=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordType(a)};LmsComBase.prototype.utRecordStartTime=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordStartTime(a)};LmsComBase.prototype.utRecordTimespan=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordTimespan(a)};LmsComBase.prototype.utRecordEndTime=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordEndTime(a)};
LmsComBase.prototype.utRecordCompletionStatus=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordCompletionStatus(a)};LmsComBase.prototype.utRecordSuccessStatus=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordSuccessStatus(a)};LmsComBase.prototype.utRecordScoreScaled=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordScoreScaled(a)};LmsComBase.prototype.utRecordFrameViewed=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordFrameViewed(a)};
LmsComBase.prototype.utSendTestItResult=function(a){this.ParentLmsCom&&this.ParentLmsCom.utSendTestItResult(a)};function LmsComScorm12(){this.allow_launch=false;this.object_type_name="LmsComScorm12"}LmsComScorm12.prototype=new LmsComBase;LmsComScorm12.prototype.constructor=LmsComScorm12;LmsComScorm12.prototype.BaseClass=LmsComBase.prototype;
LmsComScorm12.prototype.Begin=function(){LmsComScorm12.prototype.BaseClass.Begin.call(this);lmslog.addEntry(0,"LmsComScorm12.Begin","","Start");if(this.API==null){this.allow_launch=true;return false}if(this.API.LMSInitialize("")=="false"){var a=this.API.LMSGetLastError(),b=this.API.LMSGetErrorString(a)+"\n"+this.API.LMSGetDiagnostic("");this.API=null;lms_ConnectionLost(a+" "+b);lmslog.addEntry(0,"LmsComScorm12.Begin","",b);return false}this.lesson_status=this.original_lesson_status=this.doLMSGetValue("cmi.core.lesson_status");
this.lesson_data=this.doLMSGetValue("cmi.suspend_data");this.lesson_location=this.doLMSGetValue("cmi.core.lesson_location");this.student_id=this.doLMSGetValue("cmi.core.student_id");this.student_name=this.doLMSGetValue("cmi.core.student_name");this.allow_launch=true;lmslog.addEntry(0,"LmsComScorm12.Begin","","LMS session started");return true};
LmsComScorm12.prototype.End=function(){LmsComScorm12.prototype.BaseClass.End.call(this);lmslog.addEntry(0,"LmsComScorm12.End","","Start");if(!this.allow_launch)return false;this.allow_launch=false;if(this.API==null)return false;this.lesson_status==LMS_INCOMPLETE?this.doLMSSetValue("cmi.core.exit","suspend"):this.doLMSSetValue("cmi.core.exit","");this.doLMSSetValue("cmi.core.session_time",this.computeTime(this.start_date,this.end_date));this.lesson_data&&this.doLMSSetValue("cmi.suspend_data",this.lesson_data);
this.lesson_location&&this.doLMSSetValue("cmi.core.lesson_location",this.lesson_location);this.SendCompletionInfo(true);if(this.API&&this.API.LMSFinish("")=="false"){var a=this.API.LMSGetLastError(),b=this.API.LMSGetErrorString(a)+"\n"+this.API.LMSGetDiagnostic("");this.API=null;lms_ConnectionLost(a+" "+b);lmslog.addEntry(0,"LmsComScorm12.End","",b);return false}this.API=null;lmslog.addEntry(0,"LmsComScorm12.End","","LMS session terminated");return true};
LmsComScorm12.prototype.SendCompletionInfo=function(a){if(this.lesson_status===LMS_NOT_ATTEMPTED)this.original_lesson_status===LMS_NOT_ATTEMPTED?this.doLMSSetValue("cmi.core.lesson_status",LMS_INCOMPLETE):this.doLMSSetValue("cmi.core.lesson_status",this.original_lesson_status);else this.doLMSSetValue("cmi.core.lesson_status",this.getReportedLessonStatus());if(this.score!==""){this.doLMSSetValue("cmi.core.score.raw",this.score);this.doLMSSetValue("cmi.core.score.min","0");this.doLMSSetValue("cmi.core.score.max",
"100")}a||this.doLMSCommit()};LmsComScorm12.prototype.LoadAPIAdapter=function(a){this.API=null;if(GetLmsComFactory())this.API=GetLmsComFactory().scorm_api_12;a()};LmsComScorm12.prototype.IsConnected=function(){return this.API!=null};LmsComScorm12.prototype.ErrorCodes={NoError:0,GeneralException:101,ElementCannotHaveChildren:202,ElementNotAnArray:203,NotInitialized:301,NotImplemented:401,InvalidSetValue:402,ElementIsReadOnly:403,ElementIsWriteOnly:404,IncorrectDataType:405};
LmsComScorm12.prototype.doLMSGetValue=function(a){if(this.API==null)return"";var b=this.API.LMSGetValue(a),c=this.API.LMSGetLastError();if(c!=this.ErrorCodes.NoError){b=this.API.LMSGetErrorString(c);lms_ConnectionLost(c+" "+b+", "+a);lmslog.addEntry(0,"doLMSGetValue","",R_scorm_getvalfail+a+" "+b);return""}lmslog.addEntry(1,"doLMSGetValue",a,b);return b};
LmsComScorm12.prototype.doLMSSetValue=function(a,b){if(this.API==null)return"false";if(this.API.LMSSetValue(a,b)=="false"){var c=this.API.LMSGetLastError();if(c!=this.ErrorCodes.NoError&&c!=this.ErrorCodes.NotImplemented){var e=this.API.LMSGetErrorString(c);lms_ConnectionLost(c+" "+e+", "+a+", "+b);lmslog.addEntry(0,"doLMSSetValue","",R_scorm_setvalfail+a+":"+b+" "+e);return"false"}}lmslog.addEntry(1,"doLMSSetValue",a,b);return"true"};
LmsComScorm12.prototype.doLMSCommit=function(){if(this.API==null)return"false";if(this.API.LMSCommit("")=="false"){var a=this.API.LMSGetLastError(),b=this.API.LMSGetErrorString(a);lms_ConnectionLost(a+" "+b);lmslog.addEntry(0,"doLMSCommit","",b);this.API=null;return"false"}lmslog.addEntry(1,"doLMSCommit","","");return"true"};function LmsComScorm2004(){this.allow_launch=false;this.object_type_name="LmsComScorm2004";this.lesson_data_location="cmi.suspend_data"}LmsComScorm2004.prototype=new LmsComBase;
LmsComScorm2004.prototype.constructor=LmsComScorm2004;LmsComScorm2004.prototype.BaseClass=LmsComBase.prototype;
LmsComScorm2004.prototype.Begin=function(){LmsComScorm2004.prototype.BaseClass.Begin.call(this);lmslog.addEntry(0,"LmsComScorm2004.Begin","","Start");if(this.API==null){this.allow_launch=true;return false}if(this.API.Initialize("")=="false"){var a=this.API.GetLastError(),b=this.API.GetErrorString(a)+"\n"+this.API.GetDiagnostic("");this.API=null;lms_ConnectionLost(a+" "+b);lmslog.addEntry(0,"LmsComScorm2004.Begin","",b);return false}this.lesson_status=this.doGetValue("cmi.completion_status");if(this.lesson_status===
"unknown")this.lesson_status=LMS_NOT_ATTEMPTED;else if(this.lesson_status===LMS_COMPLETED){a=this.doGetValue("cmi.success_status");if(a===LMS_PASSED||a===LMS_FAILED)this.lesson_status=a}this.original_lesson_status=this.lesson_status;this.lesson_data=this.doGetValue(this.lesson_data_location);this.lesson_location=this.doGetValue("cmi.location");this.student_id=this.doGetValue("cmi.learner_id");this.student_name=this.doGetValue("cmi.learner_name");this.allow_launch=true;lmslog.addEntry(0,"LmsComScorm2004.Begin",
"","LMS session started");return true};
LmsComScorm2004.prototype.End=function(){LmsComScorm2004.prototype.BaseClass.End.call(this);lmslog.addEntry(0,"LmsComScorm2004.End","","Start");if(!this.allow_launch)return false;this.allow_launch=false;if(this.API==null)return false;this.lesson_status==LMS_INCOMPLETE?this.doSetValue("cmi.exit","suspend"):this.doSetValue("cmi.exit","normal");this.doSetValue("cmi.session_time",this.computeTime(this.start_date,this.end_date));this.lesson_data&&this.doSetValue(this.lesson_data_location,this.lesson_data);
this.lesson_location&&this.doSetValue("cmi.location",this.lesson_location);this.SendCompletionInfo(true);if(this.API&&this.API.Terminate("")=="false"){var a=this.API.GetLastError(),b=this.API.GetErrorString(a)+"\n"+this.API.GetDiagnostic("");this.API=null;lms_ConnectionLost(a+" "+b);lmslog.addEntry(0,"LmsComScorm2004.End","",b);return false}this.API=null;lmslog.addEntry(0,"LmsComScorm2004.End","","LMS session terminated");return true};
LmsComScorm2004.prototype.LoadAPIAdapter=function(a){this.API=null;if(GetLmsComFactory())this.API=GetLmsComFactory().scorm_api_2004;a()};
LmsComScorm2004.prototype.SendCompletionInfo=function(a){var b=this.getReportedLessonStatus();if(b===LMS_NOT_ATTEMPTED)b=this.original_lesson_status;if(b==LMS_PASSED||b==LMS_FAILED){this.doSetValue("cmi.success_status",b);this.doSetValue("cmi.completion_status",LMS_COMPLETED)}else this.doSetValue("cmi.completion_status",b);if(this.score!==""){this.doSetValue("cmi.score.raw",this.score);this.doSetValue("cmi.score.scaled",this.score/100);this.doSetValue("cmi.score.min","0");this.doSetValue("cmi.score.max",
"100")}a||this.doCommit()};LmsComScorm2004.prototype.convertTotalSeconds=function(a){var b=a%60;a-=b;var c=a%3600;a-=c;b=Math.round(b*100)/100;var e=b=new String(b);if(b.indexOf(".")!=-1){e=b.substring(0,b.indexOf("."));b.substring(b.indexOf(".")+1,b.length)}if(e.length<2)e="0"+e;b=e;a=a%3600!=0?0:a/3600;c=c%60!=0?0:c/60;if((new String(a)).length<2)a="0"+a;if((new String(c)).length<2)c="0"+c;return"PT"+a+"H"+c+"M"+b+"S"};LmsComScorm2004.prototype.IsConnected=function(){return this.API!=null};
LmsComScorm2004.prototype.ErrorCodes={NoError:0,GeneralException:101,GeneralInitializationFailure:102,AlreadyInitialized:103,ContentInstanceTerminated:104,GeneralTerminationFailure:111,TerminationBeforeInitialization:112,TerminationAfterTermination:113,RetrieveDataBeforeInitialization:122,RetrieveDataAfterTermination:123,StoreDataBeforeInitialization:132,StoreDataAfterTermination:133,CommitBeforeInitialization:142,CommitAfterTermination:143,GeneralArgumentError:201,GeneralGetFailure:301,GeneralSetFailure:351,
GeneralCommitFailure:391,UndefinedDataModelElement:401,UnimplementedDataModelElement:402,DataModelElementValueNotInitialized:403,DataModelElementIsReadOnly:404,DataModelElementIsWriteOnly:405,DataModelElementTypeMismatch:406,DataModelElementValueOutOfRange:407,DataModelDependencyNotEstablished:408,KPathTimeout:1501,KPathConnect:1502,KPathBusy:1503};
LmsComScorm2004.prototype.doGetValue=function(a){if(this.API==null)return"";var b=this.API.GetValue(a),c=this.API.GetLastError();if(c!=this.ErrorCodes.NoError&&c!=this.ErrorCodes.DataModelElementValueNotInitialized)if(c==this.ErrorCodes.KPathTimeout&&this.object_type_name=="LmsComKPath"){lmslog.addEntry(0,"doGetValue","","KCenter timeout");c=this.API.GetValue("upk.idle_time");lmslog.addEntry(0,"doGetValue","upk.idle_time",c);this.idle_time+=c;this.mode_idle_time+=c;lmslog.addEntry(0,"doGetValue",
"idle_time",this.idle_time);return this.doGetValue(a)}else{b=this.API.GetErrorString(c);lms_ConnectionLost(c+" "+b+", "+a);lmslog.addEntry(0,"doGetValue","",R_scorm_getvalfail+a+" "+b);return""}lmslog.addEntry(1,"doGetValue",a,b);return b};
LmsComScorm2004.prototype.doSetValue=function(a,b){if(this.API==null)return"false";if(this.API.SetValue(a,b)=="false"){var c=this.API.GetLastError();if(c!=this.ErrorCodes.NoError&&c!=this.ErrorCodes.UnimplementedDataModelElement)if(c==this.ErrorCodes.KPathTimeout&&this.object_type_name=="LmsComKPath"){lmslog.addEntry(0,"doSetValue","","KCenter timeout");c=this.API.GetValue("upk.idle_time");lmslog.addEntry(0,"doSetValue","upk.idle_time",c);this.idle_time+=c;this.mode_idle_time+=c;lmslog.addEntry(0,
"doSetValue","idle_time",this.idle_time);return this.doSetValue(a,b)}else{var e=this.API.GetErrorString(c);lms_ConnectionLost(c+" "+e+", "+a+", "+b);lmslog.addEntry(0,"doSetValue","",R_scorm_setvalfail+a+":"+b+" "+e);return"false"}}lmslog.addEntry(1,"doSetValue",a,b);return"true"};
LmsComScorm2004.prototype.doCommit=function(){if(this.API==null)return"false";if(this.API.Commit("")=="false"){var a=this.API.GetLastError(),b=this.API.GetErrorString(a);this.API=null;lms_ConnectionLost(a+" "+b);lmslog.addEntry(0,"doCommit","",b);return"false"}lmslog.addEntry(1,"doCommit","","");return"true"};
function LmsComKPath(a){this.allow_launch=false;if(a!=null){this.Copy(a);this.ParentLmsCom=a}this.object_type_name="LmsComKPath";this.lesson_data_location="upk.sco_data";this.commitNeeded=this.commitActive=false}LmsComKPath.prototype=new LmsComScorm2004;LmsComKPath.prototype.constructor=LmsComKPath;LmsComKPath.prototype.BaseClass=LmsComScorm2004.prototype;
LmsComKPath.prototype.Begin=function(){lmslog.addEntry(0,"LmsComKPath.Begin","","Start");var a=LmsComKPath.prototype.BaseClass.Begin.call(this);this.doSetValue("upk.launch_from",GetTopLevelLmsMode());lmslog.addEntry(0,"LmsComKPath.Begin","","LMS session started");return a};
LmsComKPath.prototype.SendCompletionInfo=function(a){var b=this.getReportedLessonStatus();if(b===LMS_NOT_ATTEMPTED)this.doSetValue("cmi.completion_status",LMS_NOT_ATTEMPTED);else{if(b==LMS_PASSED||b==LMS_FAILED){this.doSetValue("cmi.success_status",b);this.doSetValue("cmi.completion_status",LMS_COMPLETED)}else this.doSetValue("cmi.completion_status",b);if(this.score!==""){this.doSetValue("cmi.score.raw",this.score);this.doSetValue("cmi.score.scaled",this.score/100);this.doSetValue("cmi.score.min",
"0");this.doSetValue("cmi.score.max","100")}a||this.doCommit()}};LmsComKPath.prototype.LoadAPIAdapter=function(a){if(this.API)a();else{var b=findKPathAPIFrame(window);if(b&&b.LoadRuntime&&this.guid){this.deferred_callback=a;var c=this;b.LoadRuntime(this.guid,0,0,0,function(e,f,h,j){c.LoadAPIAdapterCallback(e,f,h,j)},upk.browserInfo.isTouchDevice(),this.isTestIt)}else a()}};
LmsComKPath.prototype.LoadAPIAdapterCallback=function(a,b,c,e){if(a=="succeeded"&&b==this.guid){this.API=c.GetAPI();lmslog.addEntry(0,"LoadAPIAdapterCallback","","KPath adapter bound");try{this.deferred_callback()}catch(f){}}else{if(a=="no SCO")this.API=null;else alert(R_scorm_noapi+" "+e);lmslog.addEntry(0,"LoadAPIAdapterCallback","",e);this.deferred_callback()}};LmsComKPath.prototype.doGetUPKValue=function(a){a=this.doGetValue(a);if(a==="")a=-1;return a};
LmsComKPath.prototype.doSetUPKValue=function(a,b){this.doSetValue(a,b)};LmsComKPath.prototype.doUPKCommit=function(){this.doCommit()};
LmsComKPath.prototype.doCommit=function(){if(this.API==null)return"false";if(this.commitActive){lmslog.addEntry(0,"doCommit","commitActive==true","");this.commitNeeded=true;return"true"}lmslog.addEntry(1,"doCommit","","");if(upk.browserInfo.isTouchDevice())b=null;else{this.commitActive=true;var a=this,b=function(e,f){a.doCommitCallback(e,f)}}if(this.API.Commit("",b)=="false"){this.commitActive=false;b=this.API.GetLastError();var c=this.API.GetErrorString(b);if(b==this.ErrorCodes.KPathTimeout&&this.object_type_name==
"LmsComKPath"){lmslog.addEntry(0,"doCommit","","KCenter timeout");b=this.API.GetValue("upk.idle_time");lmslog.addEntry(0,"doCommit","upk.idle_time",b);this.idle_time+=b;this.mode_idle_time+=b;lmslog.addEntry(0,"doCommit","idle_time",this.idle_time);return this.doCommit()}else{this.API=null;lms_ConnectionLost(b+" "+c);lmslog.addEntry(0,"doCommit","",c);return"false"}}return"true"};
LmsComKPath.prototype.doCommitCallback=function(a,b){lmslog.addEntry(1,"doCommitCallback","","");this.commitActive=false;if(!a){this.API=null;lms_ConnectionLost(b);lmslog.addEntry(0,"doCommitCallback","",b)}if(this.commitNeeded){this.commitNeeded=false;this.doCommit()}};
LmsComKPath.prototype.setInteraction=function(a,b){if(this.API){var c=b.status_obj,e=this.doGetValue("cmi.interactions._count");if(a==-1)a=e;a>=e&&this.doSetValue("cmi.interactions."+a+".id",b.guid);this.doSetValue("cmi.interactions."+a+".type",c.getQuestionType());this.doSetValue("cmi.interactions."+a+".timestamp",(new Date).toSCORM());this.doSetValue("cmi.interactions."+a+".weighting","1");if(c.getResult()){this.doSetValue("cmi.interactions."+a+".learner_response",c.getLearnerResponse());this.doSetValue("cmi.interactions."+
a+".result",c.getResult())}this.doCommit();return a}};LmsComKPath.prototype.getAnsweredQuestions=function(){var a={};if(!this.API)return a;for(var b=this.doGetValue("cmi.interactions._count"),c=0;c<b;c++){var e=this.doGetValue("cmi.interactions."+c+".id");a[e]={index:c};a[e].weighting=this.doGetValue("cmi.interactions."+c+".weighting");a[e].result=this.doGetValue("cmi.interactions."+c+".result")}return a};
LmsComKPath.prototype.setObjective=function(a,b){if(this.API){this.doSetValue("cmi.objectives."+a+".id",b.objectiveGuid=="PRIMARYOBJ"?"PRIMARYOBJ":"OBJ_"+b.objectiveGuid);this.doSetValue("cmi.objectives."+a+".score.scaled",b.score/100);this.doSetValue("cmi.objectives."+a+".completion_status",b.completed?"completed":"incomplete");this.doSetValue("cmi.objectives."+a+".success_status",b.completed?"passed":"failed")}};
LmsComKPath.prototype.requestContinue=function(){this.doSetValue("adl.nav.request","continue")};LmsComKPath.prototype.utGetModeIndex=function(){this.mode_index=this.doGetValue("upk.modes._count")};LmsComKPath.prototype.utPushModeIndex=function(){this.saved_mode_index=this.mode_index;this.utGetModeIndex()};LmsComKPath.prototype.utPopModeIndex=function(){this.mode_index=this.saved_mode_index;delete this.saved_mode_index};
LmsComKPath.prototype.utRecordType=function(a){this.doSetValue("upk.modes."+this.mode_index+".type",a)};LmsComKPath.prototype.utRecordStartTime=function(a){this.doSetValue("upk.modes."+this.mode_index+".start_time",a.toSCORM());this.mode_idle_time=0};LmsComKPath.prototype.utRecordEndTime=function(a){this.doSetValue("upk.modes."+this.mode_index+".end_time",a.toSCORM())};
LmsComKPath.prototype.utRecordTimespan=function(a){this.doSetValue("upk.modes."+this.mode_index+".timespan",a-this.mode_idle_time/1E3)};LmsComKPath.prototype.utRecordCompletionStatus=function(a){this.doSetValue("upk.modes."+this.mode_index+".completion_status",a)};LmsComKPath.prototype.utRecordSuccessStatus=function(a){this.doSetValue("upk.modes."+this.mode_index+".success_status",a)};
LmsComKPath.prototype.utRecordScoreScaled=function(a){this.doSetValue("upk.modes."+this.mode_index+".score.scaled",a)};LmsComKPath.prototype.utRecordFrameViewed=function(a){this.doSetValue("upk.modes."+this.mode_index+".frame_viewed",a);this.doSetValue("cmi.session_time",this.computeTime(this.start_date,(new Date).getTime()));this.doCommit()};LmsComKPath.prototype.utSendTestItResult=function(a){this.doSetValue("upk.modes."+this.mode_index+".test_result",a);this.doCommit()};
function LmsComAICC(a,b){this.allow_launch=false;this.aicc_url=a;this.aicc_sid=b;this.app=document.applets.GetHTTPPostData;this.object_type_name="LmsComAICC"}LmsComAICC.prototype=new LmsComBase;LmsComAICC.prototype.constructor=LmsComScorm12;LmsComAICC.prototype.BaseClass=LmsComBase.prototype;LmsComAICC.prototype.Begin=function(){LmsComAICC.prototype.BaseClass.Begin.call(this);lmslog.addEntry(0,"LmsComAICC.Begin","","Start");this.hacpGetparam();lmslog.addEntry(0,"LmsComAICC.Begin","","about to log paramvalues")};
LmsComAICC.prototype.End=function(){LmsComAICC.prototype.BaseClass.End.call(this);lmslog.addEntry(0,"LmsComAICC.End","","Start");if(!this.allow_launch)return false;this.allow_launch=false;var a=this.hacpGetpostdata();a="command=putparam&version="+LmsConfig.AiccVersion+"&session_id="+this.aicc_sid+"&aicc_data="+escape(a)+"&";lmslog.addEntry(0,"LmsComAICC.End","params",a);a=this.app.GetData(unescape(this.aicc_url),a);lmslog.addEntry(0,"LmsComAICC.End","strData",a);a="version="+LmsConfig.AiccVersion+
"&command=ExitAU&session_id="+this.aicc_sid+"&";lmslog.addEntry(0,"LmsComAICC.End","params",a);a=this.app.GetData(unescape(this.aicc_url),a);lmslog.addEntry(0,"LmsComAICC.End","strData",a)};var closingAmp=true;
LmsComAICC.prototype.hacpGetparam=function(){lmslog.addEntry(0,"hacpGetparam","","Start");var a="";a="version="+LmsConfig.AiccVersion+"&command=GetParam&session_id="+this.aicc_sid;if(closingAmp)a+="&";lmslog.addEntry(0,"hacpGetparam","params",a);a=this.app.GetData(unescape(this.aicc_url),a);lmslog.addEntry(0,"hacpGetparam","strData",a);var b,c,e=false;a+=" ";for(var f=a.split("\r"),h=0;h<f.length;h++){var j=f[h],l=trimValue(j.substring(0,j.indexOf("="))),k=trimValue(j.substring(j.indexOf("=")+1));
if(l.toLowerCase()=="error"){b=k;e=true}if(l.toLowerCase()=="error_text")c=k;if(l.toLowerCase()=="aicc_data"){this.aicc_data=a.substring(a.indexOf(j.substring(0,j.indexOf("=")))+j.substring(0,j.indexOf("=")).length+1);e=true}}if(e)if(b==0){f=get_group_content("core",this.aicc_data).split("\r");for(h=0;h<f.length;h++){j=f[h];l=trimValue(j.substring(0,j.indexOf("=")));k=trimValue(j.substring(j.indexOf("=")+1));if(l.toLowerCase()=="student_id")this.student_id=k;if(l.toLowerCase()=="student_name")this.student_name=
k;if(l.toLowerCase()=="lesson_status"){this.lesson_status=k.toLowerCase().charAt(0);if(k.indexOf(",")!=-1)this.lesson_flag=trimValue(k.substring(k.indexOf(",")+1)).toLowerCase();if(this.lesson_status=="p")this.lesson_status=LMS_PASSED;if(this.lesson_status=="c")this.lesson_status=LMS_COMPLETED;if(this.lesson_status=="f")this.lesson_status=LMS_FAILED;if(this.lesson_status=="i")this.lesson_status=LMS_INCOMPLETE;if(this.lesson_status=="n")this.lesson_status=LMS_NOT_ATTEMPTED;this.original_lesson_status=
this.lesson_status}if(l.toLowerCase()=="lesson_location")this.lesson_location=k;if(l.toLowerCase()=="credit")this.credit=k;if(l.toLowerCase()=="score")this.score=k;if(l.toLowerCase()=="time")this.time=k}this.lesson_data=this.lesson_status==LMS_INCOMPLETE||this.lesson_status==LMS_COMPLETED||this.lesson_status==LMS_PASSED||this.lesson_status==LMS_FAILED?trimValue(get_group_content("core_lesson",this.aicc_data)):"";this.core_vendor=trimValue(get_group_content("core_vendor",this.aicc_data));this.allow_launch=
true}else{alert(R_error_unexp+c);lmslog.addEntry(0,"hacpGetparam","","Unable to continue because of the following error: "+c)}else{alert(R_error_svr+unescape(this.aicc_url)+"\r\r - "+a);lmslog.addEntry(0,"hacpGetparam","","Unable to post to server "+unescape(this.aicc_url)+" - "+a)}};
LmsComAICC.prototype.hacpGetpostdata=function(){lmslog.addEntry(0,"hacpGetpostdata","","Start");var a="";a="[CORE]\r\n";a+="Lesson_Location=\r\n";var b=this.getReportedLessonStatus();if(b===LMS_NOT_ATTEMPTED)b=this.original_lesson_status;a+=this.lesson_status===LMS_INCOMPLETE?"Lesson_Status="+b+", suspend\r\n":"Lesson_Status="+b+"\r\n";lmslog.addEntry(0,"hacpGetpostdata","is_assess",this.is_assess);a+=this.score!==""?"Score="+this.score+"\r\n":"Score=\r\n";a+="Time="+this.computeTime(this.start_date,
this.end_date)+"\r\n";a+="[CORE_LESSON]\r\n";a+=this.lesson_data+"\r\n";lmslog.addEntry(0,"hacpGetpostdata","NewAiccData",a);return a};function get_group_content(a,b){for(var c="",e=b.split("\r"),f=false,h=0;h<e.length;h++){var j=trimValue(e[h]);if(j.substr(0,1)=="[")f=j.toLowerCase().indexOf("["+a.toLowerCase()+"]")>=0?true:false;else if(f)c+=j+"\r\n"}return c}
function trimValue(a){for(var b=0,c=a.length,e=0;e<a.length;e++)if(a.substr(e,1)!=" "&&a.substr(e,1)!="\t"&&a.substr(e,1)!="\n"&&a.substr(e,1)!="\r"){b=e;break}if(e==a.length)return"";for(e=a.length-1;e>0;e--)if(a.substr(e,1)!=" "&&a.substr(e,1)!="\t"&&a.substr(e,1)!="\n"&&a.substr(e,1)!="\r"){c=e;break}if(e==0)c=0;return a.substring(b,c+1)}LmsComAICC.prototype.IsConnected=function(){return true};function LmsComCookie(){this.allow_launch=false;this.object_type_name="LmsComCookie"}
LmsComCookie.prototype=new LmsComBase;LmsComCookie.prototype.constructor=LmsComCookie;LmsComCookie.prototype.BaseClass=LmsComBase.prototype;LmsComCookie.prototype.Begin=function(){LmsComCookie.prototype.BaseClass.Begin.call(this)};LmsComCookie.prototype.End=function(){LmsComCookie.prototype.BaseClass.End.call(this)};function LmsBasicStatus(){this.status=LMS_NOT_ATTEMPTED}LmsBasicStatus.prototype.getStatus=function(){return this.status};LmsBasicStatus.prototype.setStatus=function(a){this.status=a};
LmsBasicStatus.prototype.Save=function(a){a.lesson_status=this.status};LmsTopicStatus.prototype=new LmsBasicStatus;LmsTopicStatus.prototype.constructor=LmsTopicStatus;LmsTopicStatus.prototype.BaseClass=LmsBasicStatus.prototype;function LmsTopicStatus(){this.score="";this.passed=false;this.modes=[];this.modes.S=new Mode("S");this.modes.T=new Mode("T");this.modes.K=new Mode("K");this.modes.D=new Mode("D");this.modes.P=new Mode("P");this.modes.E=new Mode("E");this.anylaunched=false}
LmsTopicStatus.prototype.Save=function(a){a.lesson_data=a.bigsco?"":this.getStatusstring();a.lesson_status=this.getLMSStatus();a.score=this.getScore()};LmsTopicStatus.prototype.setModeavail=function(a,b){this.modes[a].avail=b};LmsTopicStatus.prototype.getModeavail=function(a){return this.modes[a].avail};LmsTopicStatus.prototype.setModestatus=function(a,b){if(this.modes[a].avail)this.modes[a].complete=b;else lmslog.addEntry(0,"setModestatus","","Invalid call of setModestatus")};
LmsTopicStatus.prototype.getModestatus=function(a){return this.modes[a].complete};LmsTopicStatus.prototype.setRequiredMode=function(a,b,c){this.requiredMode=GetTopLevelLmsMode()=="LMS"?c||this._getRequiredMode(a):this._getRequiredMode(b)};LmsTopicStatus.prototype._getRequiredMode=function(a){for(var b=0;b<6;b++)if(a["EKTSPD".charAt(b)])return"EKTSPD".charAt(b);return"None"};LmsTopicStatus.prototype.GetRequiredMode=function(){return this.requiredMode};
LmsTopicStatus.prototype.initTopicstat=function(a){lmslog.addEntry(0,"initTopicstat","","Start");lmslog.addEntry(0,"initTopicstat","s string",a);lmslog.addEntry(0,"initTopicstat","s.length",a.length);if(a.length!=0){var b=a.split(",");for(a=0;a<=b.length-1;a++){lmslog.addEntry(0,"initTopicstat","f["+a+"]",b[a]);if(b[a].charAt(1)=="=")this.modes[b[a].charAt(0)].complete=this.modeIscomplete(b[a].substr(2,1));else if(b[a].substr(0,5)=="PASS=")this.passed=b[a].substr(5,1)!=="0";else if(b[a].substr(0,
6)=="SCORE=")this.score=b[a].substr(6)}}};LmsTopicStatus.prototype.clearTopicstat=function(){this.score="";this.passed=false;for(var a in this.modes)this.modes[a].complete=false};
LmsTopicStatus.prototype.getStatusstring=function(){lmslog.addEntry(0,"get_statusstring","","Start");var a="";for(x in this.modes){if(a.length!=0)a+=",";a+=this.modes[x].id+"="+(this.modes[x].complete?"C":"I")}if(this.modes.E.complete)a+=",PASS="+(this.passed?"1":"0");else if(this.requiredMode==="K"&&this.modes.K.complete&&this.isScored)a+=",PASS="+(this.passed?"1":"0")+",SCORE="+this.score;lmslog.addEntry(0,"get_statusstring","dataString",a);return a};
LmsTopicStatus.prototype.getStatus=function(){var a="";if(this.isComplete())if(this.requiredMode==="K"&&this.isScored||this.requiredMode==="E")a=this.passed?LMS_PASSED:LMS_FAILED;else{a=LMS_COMPLETED;if(this.savedStatus=="P"||this.savedStatus=="F")a=this.savedStatus}else{a=LMS_INCOMPLETE;if(this.savedStatus=="P"||this.savedStatus=="F"||this.savedStatus=="C")a=Stat2Lms(this.savedStatus)}return a};
LmsTopicStatus.prototype.getLMSStatus=function(){if(this.isComplete()&&!this.anylaunched)return LMS_NOT_ATTEMPTED;return this.getStatus()};LmsTopicStatus.prototype.getScore=function(){return this.score};LmsTopicStatus.prototype.isComplete=function(){lmslog.addEntry(0,"is_complete","","Start");var a=false;if(this.requiredMode==="None"||this.modes[this.requiredMode].complete)a=true;lmslog.addEntry(0,"is_complete","iscomp",a);return a};
LmsTopicStatus.prototype.modeIscomplete=function(a){var b=false;lmslog.addEntry(0,"modeIscomplete","","Start");if(a=="C")b=true;else if(a=="I")b=false;lmslog.addEntry(0,"modeIscomplete","ret",b);return b};LmsTopicStatus.prototype.isRequired=function(a){return this.requiredMode===a};LmsTopicLaunchStatus.prototype=new LmsTopicStatus;LmsTopicLaunchStatus.prototype.constructor=LmsTopicStatus;LmsTopicLaunchStatus.prototype.BaseClass=LmsTopicStatus.prototype;
function LmsTopicLaunchStatus(a){this.mode=this.modes[a];this.score="";this.passed=false;this.anylaunched=true}LmsTopicLaunchStatus.prototype.Save=function(a){this.BaseClass.Save.call(this,a)};LmsTopicLaunchStatus.prototype._getRequiredMode=function(a){for(var b=0;b<6;b++)if(a.indexOf("EKTSPD".charAt(b))!=-1)return"EKTSPD".charAt(b);return"None"};LmsTopicLaunchStatus.prototype.getResult=function(){return this.passed?"correct":"incorrect"};LmsTopicLaunchStatus.prototype.getQuestionType=function(){return"other"};
LmsTopicLaunchStatus.prototype.getLearnerResponse=function(){return""};function Mode(a){this.complete=this.avail=false;this.id=a}LmsQuestionStatus.prototype=new LmsBasicStatus;LmsQuestionStatus.prototype.constructor=LmsQuestionStatus;LmsQuestionStatus.prototype.BaseClass=LmsBasicStatus.prototype;function LmsQuestionStatus(){this.result=this.learner_response=this.question_type=null}LmsQuestionStatus.prototype.Save=function(a){a.lesson_status=this.status;a.lesson_data=Lms2Stat(this.getStatus())};
LmsQuestionStatus.prototype.getStatus=function(){return this.status===LMS_NOT_ATTEMPTED?this.savedStatus:this.status};LmsQuestionStatus.prototype.getQuestionType=function(){return this.question_type};LmsQuestionStatus.prototype.setQuestionType=function(a){return this.question_type=a};LmsQuestionStatus.prototype.getLearnerResponse=function(){return this.learner_response};LmsQuestionStatus.prototype.setLearnerResponse=function(a){return this.learner_response=a};
LmsQuestionStatus.prototype.getResult=function(){return this.result};LmsQuestionStatus.prototype.setResult=function(a){return this.result=a};LmsAssessmentStatus.prototype=new LmsBasicStatus;LmsAssessmentStatus.prototype.constructor=LmsAssessmentStatus;LmsAssessmentStatus.prototype.BaseClass=LmsBasicStatus.prototype;function LmsAssessmentStatus(){this.score="";this.questionstatus=[];this.stateDiscarded=false}
LmsAssessmentStatus.prototype.Save=function(a){a.lesson_status=this.status;a.score=this.status!=LMS_INCOMPLETE&&this.status!=LMS_NOT_ATTEMPTED?this.score:"";var b="";if(!a.bigsco){b=this.hash.length+"@"+this.hash;var c=this.questionlimit.toString();b+=c.length+"@"+c}b+=this.status==LMS_NOT_ATTEMPTED?this.savedStatus:Lms2Stat(this.status);for(c=0;c<this.questionstatus.length;c++)b+=this.questionstatus[c];a.lesson_data=b};
LmsAssessmentStatus.prototype.getStatus=function(){return this.status===LMS_NOT_ATTEMPTED?Stat2Lms(this.savedStatus):this.status};LmsAssessmentStatus.prototype.getLMSStatus=function(){return this.status};LmsAssessmentStatus.prototype.getScore=function(){return this.score};LmsAssessmentStatus.prototype.setScore=function(a){return this.score=a};LmsTOCStatus.prototype=new LmsBasicStatus;LmsTOCStatus.prototype.constructor=LmsTOCStatus;LmsTOCStatus.prototype.BaseClass=LmsBasicStatus.prototype;
function LmsTOCStatus(){}LmsTOCStatus.prototype.getStatus=function(){return Stat2Lms(this.getTocState().GetStatus(0))};LmsTOCStatus.prototype.Save=function(a){a.lesson_status=this.getStatus();var b=this.getTocState();a.lesson_data=b.SerializeTOC()};LmsTOCStatus.prototype.getTocState=function(){return this.tocstate};LmsTOCStatus.prototype.setTocState=function(a){return this.tocstate=a};function NodeState(){this.Status="N";this.Score=null;this.ChildrenStatus=""}
function TOCState(a,b){this.NodeCounter=a;this.TocVersion=b;this.InitInLookupTable()}TOCState.prototype.SetStatus=function(a,b){this.LookUpTable[a]||(this.LookUpTable[a]=new NodeState);this.LookUpTable[a].Status=b};TOCState.prototype.GetStatus=function(a){return this.LookUpTable[a].Status};TOCState.prototype.SetScore=function(a,b){this.LookUpTable[a]||(this.LookUpTable[a]=new NodeState);this.LookUpTable[a].Score=b};TOCState.prototype.GetScore=function(a){return this.LookUpTable[a].Score};
TOCState.prototype.SetChildren=function(a,b){this.LookUpTable[a]||(this.LookUpTable[a]=new NodeState);this.LookUpTable[a].ChildrenStatus=b};TOCState.prototype.GetChildren=function(a){return this.LookUpTable[a].ChildrenStatus};
TOCState.prototype.DeserializeTOC=function(a){var b=0,c,e=a.indexOf("@");if(e>0){b=parseInt(a.substring(0,e));c=a.substring(e+1,e+b+1);if(c==this.TocVersion){a=a.substring(e+b+2);e=a.indexOf("@");if(e>0){b=parseInt(a.substring(0,e));a=a.substring(e+1,e+b+1);if(a.length==b){a=this.RLESDecode(a);this.DeserializeLookUpTable(a)}}}}};
TOCState.prototype.DeserializeLookUpTable=function(a){for(var b=0,c="",e=0;e<a.length;e++){c=a.charAt(e);this.SetStatus(b,c);for(c="";e<a.length-1&&a.charAt(e+1)>="0"&&a.charAt(e+1)<="9";){e++;c+=a.charAt(e)}c.length>0&&this.SetScore(b,parseInt(c));if(e<a.length-1&&a.charAt(e+1)=="{"){c=a.indexOf("}",e+2);this.SetChildren(b,a.substring(e+2,c));e=c}b++}};
TOCState.prototype.SerializeTOC=function(){var a=this.RLESEncode(this.SerializeLookupTable());return this.TocVersion.length+"@"+this.TocVersion+" "+a.length+"@"+a};TOCState.prototype.SerializeLookupTable=function(){for(var a="",b=0;b<this.NodeCounter;b++){var c=this.LookUpTable[b].Status,e=this.LookUpTable[b].ChildrenStatus;c||(c="N");a+=c;if(e)a+="{"+e+"}"}return a};
TOCState.prototype.InitInLookupTable=function(){this.LookUpTable=[];for(var a=0;a<this.NodeCounter;a++)this.LookUpTable[a]=new NodeState;this.SetStatus(0,"I")};TOCState.prototype.RLESEncode=function(a){var b="",c=0,e="";b=a.charAt(0);for(var f=c=1;f<a.length;f++)if(a.charAt(f)==b)c++;else{if(c>2){e+="#";e+=c;e+=b}else e+=a.substring(f-c,f);b=a.charAt(f);c=1}if(c>2){e+="#";e+=c;e+=b}else e+=a.substring(f-c,f);return e};
TOCState.prototype.RLESDecode=function(a){for(var b="",c="",e=0;e<a.length;e++)if(a.charAt(e)=="#"){c="";for(e++;a.charAt(e)>="0"&&a.charAt(e)<="9";){c+=a.charAt(e);e++}c=parseInt(c);for(var f=0;f<c;f++)b+=a.charAt(e)}else b+=a.charAt(e);return b};function Lms2Stat(a){return a.charAt(0).toUpperCase()}function Stat2Lms(a){return[LMS_PASSED,LMS_FAILED,LMS_COMPLETED,LMS_INCOMPLETE,LMS_NOT_ATTEMPTED]["PFCIN".indexOf(a)]}
function LogEntry(a,b,c,e,f){this.logType=b;this.funcName=c;this.varName=e;this.msgValue=f;this.dateTime=(new Date).getTime()-a}LogEntry.prototype.GetTableRow=function(){var a="#006600";if(this.logType===1)a="#000033";var b=this.varName;if(b==="")b="&nbsp;";var c=this.msgValue;if(c==="")c="&nbsp;";var e="<tr>";e+="<td align='right'>"+this.dateTime/1E3+"</td>";e+="<td style='color:"+a+";'>"+this.funcName+"</td>";e+="<td>"+b+"</td>";e+="<td>"+c+"</td>";e+="</tr>";return e};
function Log(a){this.traceWindow=null;this.logArray=[];this.enabled=a;this.startDateTime=new Date;this.changed=true;this.windowReady=false;this.startLog()}Log.prototype.startLog=function(){if(this.enabled){this.addEntry(0,"initLog","","Log Intialized");this.openTraceWindow()}};Log.prototype.addEntry=function(a,b,c,e){if(this.enabled){this.logArray.push(new LogEntry(this.startDateTime.getTime(),a,b,c,e));this.changed=true;this.traceWindow&&this.windowReady&&this.traceWindow.UpdateTraceStack()}};
Log.prototype.writeLog=function(a,b){var c=b;if(c>this.logArray.length||c==0)c=this.logArray.length;var e="<table width='600'>";e+="<tr>";e+="<th colspan=4>Session start: "+this.startDateTime+"</th>";e+="</tr>";e+="<tr>";e+="<th>time</th>";e+="<th>function</th>";e+="<th>variable</th>";e+="<th>message</th>";e+="</tr>";var f;if(a==0)for(var h=this.logArray.length-c;h<this.logArray.length;h++){f=this.logArray[h];e+=f.GetTableRow(h)}else for(h=this.logArray.length-1;h>=this.logArray.length-c;h--){f=this.logArray[h];
e+=f.GetTableRow(h)}e+="</table>";this.changed=false;this.windowReady=true;return e};Log.prototype.writeDetails=function(a){return this.logArray[a].GetDetails()};Log.prototype.openTraceWindow=function(){if(this.traceWindow==null){this.changed=true;this.traceWindow=window.open(lms_path+"html/lmsdebug.html","_blank")}};var _lmsMode=null,_lmsParser=null;
function InitLmsMode(a){if(_lmsParser==null){_lmsParser=new UrlParser;_lmsParser.Parse();if(IsTouchDevice()&&a=="player")if(parent==null||window.location==parent.location)if(_lmsParser.GetParameter("directlaunch")==null)_lmsParser.params.directlaunch=2;if(a=="player"){if(_lmsParser.GetParameter("directlaunch")!=null)_lmsMode=Kpath_launch==true?"KPT":"Cookie"}else if(a=="lmstart"){if(_lmsParser.GetParameter("toc")==null)_lmsMode=_lmsParser.GetParameter("dhtml")!=null?Kpath_launch==true?"KPT":"Cookie":
"LMS"}else if(a=="toc"){if(_lmsParser.GetParameter("sco")==null)_lmsMode=Kpath_launch==true?"KPT":"Cookie"}else alert(R_undefined_lms_source)}}function GetTopLevelLmsMode(){return _GetTopLevelLmsMode(this)}function _GetTopLevelLmsMode(a){var b=a._lmsMode;if(b==null)return _GetTopLevelLmsMode(a.lms_store.parentW);return b}var lms_initialized=false,lms_store,lmslog;
function lms_InitPage(a,b,c,e){if(lms_initialized==true)setTimeout(e,1);else{__Ialert("lms_InitPage called with parameters:"+a+","+b+","+c+","+e);var f=false;if(window.lmsModes)f=typeof window.lmsModes=="string"?window.lmsModes.indexOf("E")>-1:window.lmsModes.E===true;lms_store={window:window,childIndex:a,parentW:b,cguid:c,isTestIt:f,callbackfunction:e};if(!b||b.closed){lmslog=new Log(LmsConfig.DebugMode);InitializeLmsCom();InsertRuntimeAPI(lms_LoadRuntimeComplete)}else if(b.lms_initialized){lmslog=
b.lmslog;setTimeout(lms_LoadRuntimeComplete,1)}}}
function lms_LoadRuntimeComplete(){__Ialert("lms_LoadRuntimeComplete() called");if(lms_store.parentW&&!lms_store.parentW.closed)lms_store.parentW.GetChildLmsCom(lms_store);else if(!lms_store.parentW&&!lms_store.cguid&&!window.bigScoItemCount)document.LmsCom=PlayerConfig.EnableCookies?new LmsComCookie:new LmsComBase;else{CheckForLMSAPI();document.LmsCom=_GlobalLmsComFactory.CreateLmsCom()}var a=document.LmsCom;a.guid=lms_store.cguid;a.isTestIt=lms_store.isTestIt;a.owner=window;a.LoadAPIAdapter(lms_LoadAdapterComplete)}
function lms_UpdateUI(a){try{parent&&parent.updateUI&&parent.updateUI(a)}catch(b){}}var hasClosed=false;
function lms_ClosePage(a){__Ialert("lms_ClosePage() called");if(hasClosed!=true){hasClosed=true;var b=document.LmsCom;if(b&&b.session_active){var c=b.child;c&&c.session_active&&c.owner&&!c.owner.closed&&c.owner.lms_ClosePage(true);(c=b.ancillaryChild)&&c.session_active&&c.owner&&!c.owner.closed&&c.owner.lms_ClosePage(true);window._closePage&&_closePage();if(b.session_active){b.SaveStatus();b.End();b.NotifyParent()}a&&window.close()}}}
function lms_ConnectionLost(a){window.ConnectionLostEvent&&ConnectionLostEvent(a);lms_store.parentW&&!lms_store.parentW.closed&&lms_store.parentW.lms_ConnectionLost(a)}function lms_IsConnected(){var a=document.LmsCom;if(a)return a.IsConnected();return false}function lms_IsKPathLogoutAvailable(){return!!window.Kpath_logout_available}
function _logout(a){if(lms_store.parentW&&!lms_store.parentW.closed&&lms_store.parentW._logout)lms_store.parentW._logout(false);else if(window.Kpath_logout_URL)if(GetTopLevelLmsMode()=="LMS")window.parent.parent.location.replace(Kpath_logout_URL);else if(a)if(window.opener&&!window.opener.closed){window.opener.location.replace(Kpath_logout_URL);window.close()}else window.location.replace(Kpath_logout_URL);else window.location.replace(Kpath_logout_URL)}
function lms_IsUserProfileAvailable(){__alert("lms_IsUserProfileAvailable() called");if(GetTopLevelLmsMode()!=="KPT")return false;return document.LmsCom.doGetUPKValue("upk.anonymous")=="0"}function lms_GetUserProfileUrl(){__alert("lms_GetUserProfileUrl() called");if(Kpath_launch==false)return"";return Kpath_profile_URL+"?UPKLaunch=true"}function GetNoSound(){return lms_store.parentW&&!lms_store.parentW.closed?lms_store.parentW.GetNoSound():lms_store.noSound}
function SetNoSound(a){lms_store.noSound=a}var _lms_show_all_alert=false;function __alert(a){if(_lms_show_alert||_lms_show_all_alert)alert(a+"\nfile: "+_lms_module_name)}function __Ialert(a){if(_lms_show_alert||_lms_show_Ialert||_lms_show_all_alert)alert(a+"\nfile: "+_lms_module_name)}var doItplayerWindow=null;
function LaunchDoIt(a,b){var c=false,e=b,f=true;if(doItplayerWindow)doItplayerWindow.closed||(f=false);if(f){if(upk.browserInfo.isExplorer())try{if(!function(){var k=window.createPopup();k.show(1,1,1,1);var q=k.document.parentWindow.screenTop==1;k.hide();return!q}()&&!upk.browserInfo.isIE10Modern()){f=false;if(e.substr(0,3)=="su="){e=Escape.SafeUriUnEscape(e.substr(3));f=true}e+="&popup=true";if(f)e="su="+Escape.SafeUriEscape(e);c=true}}catch(h){}if(c){a+="topicgc.html";e=typeof urlParser=="undefined"?
a+"?"+e:urlParser.GetCorrectUrl(a+"?"+e);doItplayerWindow=window.open(e,"","toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,left=1500")}else{a+="topicgcx.html";if(upk.browserInfo.isExplorer()){c=navigator.appVersion.split(";")[1];c=c.substr(6);c=parseFloat(c)}c=upk.browserInfo.isSafari()?screen.availWidth-361:screen.availWidth-290;f=screen.availHeight-450;var j=upk.browserInfo.isSafari()?346:275,l=400;if(PlayerConfig.EnableCookies){GICookie=new Cookie(document,"GICookie",365,"/",
null,null);if(GICookie.Load())if(GICookie.Cleft>=0&&GICookie.Ctop>=0&&parseInt(GICookie.Cleft)+parseInt(GICookie.Cwidth)<screen.availWidth&&GICookie.Ctop<screen.availHeight){c=parseInt(GICookie.Cleft);f=parseInt(GICookie.Ctop);j=parseInt(GICookie.Cwidth);l=parseInt(GICookie.Cheight)}}e=typeof urlParser=="undefined"?a+"?"+e:urlParser.GetCorrectUrl(a+"?"+e);doItplayerWindow=window.open(e,"","toolbar=0,scrollbars=0,location=1,statusbar=0,menubar=0,resizable=1,left="+c+",top="+f+",width="+j+",height="+
l)}}else alert(R_toc_doit_err)}var requiredFlashVersion="9.0.124",_name="",_asyn=false,_fire=false,_knowpalyer=false,bPlayerIsAvailable=false,useAudioTag=false,useFlash=false,hasRequestedVersion,_fPlayerPath="",soundjs_initialized=false;
function SoundjsInit(){if(soundjs_initialized!=true){soundjs_initialized=true;var a=document.getElementById("fplayer");if(a)if(typeof assetType==="undefined")a.innerHTML="<audio id='upkaudio' onended='AudioEnded();' onerror='AudioError();' oncanplay='AudioLoaded()' style='display: none;'><Source type='audio/mpeg'></audio>";if(upk.browserInfo.isiOS5()&&typeof assetType==="undefined"){getAPlayer().addEventListener("loadstart",SoundPlayer_OnLoadStart);getAPlayer().addEventListener("durationchange",SoundPlayer_OnDurationChange)}hasRequestedVersion=
swfobject.hasFlashPlayerVersion(requiredFlashVersion);try{_fPlayerPath=_webpage_==true?"../../../../":"../../../"}catch(b){_fPlayerPath="../../../"}SupportAAC();CheckAndEnableSound()}}function SoundPlayer_OnLoadStart(){SoundPlayerObj.LoadStartTimer&&clearInterval(SoundPlayerObj.LoadStartTimer);if(getAPlayer().src)SoundPlayerObj.LoadStartTimer=setInterval("SoundPlayer_Started()",3E3)}
function SoundPlayer_OnDurationChange(){if(SoundPlayerObj.LoadStartTimer){clearInterval(SoundPlayerObj.LoadStartTimer);SoundPlayerObj.LoadStartTimer=0}}function SoundPlayer_Started(){getAPlayer().src=getAPlayer().src;getAPlayer().play()}function SupportAAC(){if(upk.browserInfo.isiOS()){bPlayerIsAvailable=useAudioTag=true;if(PlayerConfig.AACIsAvailable==true)return true}return false}
function CheckAndEnableSound(){var a=false;try{a=soundIsPublished()}catch(b){a=false}a==true&&hasRequestedVersion&&!IsTouchDevice()&&bPlayerIsAvailable==false&&UserPrefs.PlayAudio!="none"&&swfobject.embedSWF(_fPlayerPath+"audio/fplayer.swf","fplayer","1","1",requiredFlashVersion,null,null,null,null,onLoadFlash)}
function onLoadFlash(a){if(a.success==true)bPlayerIsAvailable=useFlash=true;document.getElementById("fplayer").style.position="absolute";document.getElementById("fplayer").style.top="0px";document.getElementById("fplayer").style.left="0px"}function AreCookiesEnabled(){if(PlayerConfig.EnableCookies==false)return false;chkcookie=(new Date).getTime()+"";document.cookie="chkcookie="+chkcookie+"; path=/";return document.cookie.indexOf(chkcookie,0)<0?false:true}
function Check_Flash(a,b){if(a==false)return true;if(SupportAAC()==true)return true;if(hasRequestedVersion==false)if(b!="none")return false;return true}function getFPlayer(){return document.getElementById("fplayer")}function getAPlayer(){return document.getElementById("upkaudio")}
function Sound_Init(a,b,c,e,f){SoundjsInit();if(Check_Flash(a,b)==true)return true;if(!SupportAAC()&&upk.browserInfo.isiOS())return true;a="../../../";if(f!=undefined)a=f;c!=null&&eval(c);sw=(screen.width-640)/2;sh=(screen.height-480)/2;if(e==null)e=true;KeepAlive_DoNotSendClose();if(e==true)window.open(a+"html/getflash.html?url="+Escape.MyEscape(this.location.href)+"&newwindow","","top="+sh+", left="+sw+", width=640, height=480, resizable=1,toolbar=1,scrollbars=1,location=1,statusbar=1,menubar=1");
else e=="parent"?setTimeout('parent.location.replace("'+a+"html/getflash.html?url="+Escape.MyEscape(parent.location.href)+'")',10):setTimeout('this.location.replace("'+a+"html/getflash.html?url="+Escape.MyEscape(this.location.href)+'")',10);return false}
function SoundPlayerClass(){for(this.TopicPath=unescape(window.location.href);this.TopicPath.indexOf("\\")!=-1;)this.TopicPath=this.TopicPath.replace("\\","/");var a=this.TopicPath.indexOf("?");if(a>=0)this.TopicPath=this.TopicPath.substr(0,a);a=this.TopicPath.lastIndexOf("/");this.RootPath=this.TopicPath=this.TopicPath.substr(0,a+1);for(var b=0;b<=3;b++){a=this.RootPath.lastIndexOf("/");if(a!=-1)this.RootPath=this.RootPath.substr(0,a)}this.RootPath+="/";this.SoundPath=this.TopicPath;this.AudioPath=
resolveUri(this.TopicPath,"../../../audio/");this.Volume=100;this.PlayCheckerTimer=this.LoadStartTimer=0}function resolveUri(a,b){return a+b}SoundPlayerClass.prototype.ChangeFileSuffix=function(a){if(a.lastIndexOf(".mp3")==a.length-4)return a;a=a.substr(0,a.length-4);if(PlayerConfig.AACIsAvailable||upk.browserInfo.isiOS())return a+".m4a";if(useFlash)return a+".flv";alert("sound - file extension error")};
SoundPlayerClass.prototype.Play=function(a,b,c,e){if(useFlash){var f=getFPlayer();if(f){f.style.top=getScrollTop()+"px";f.style.left=getScrollLeft()+"px"}}b||S_SetFrameState("S");f=S_GetFrameState();e||(e=false);if(bPlayerIsAvailable){c||(c=false);if(c==true)e==false&&OnEndPlaySound();else if(a.length==0){if(e==false){f!="D"&&S_SetFrameState("D");OnErrorPlaySound()}}else{if(a.substr(a.length-4)==".ASX"){c=sounds[a].duration.split(":");try{_lastAudioFileSize=parseInt(c[0])*3600+parseInt(c[1])*60+parseFloat(c[2])}catch(h){_lastAudioFileSize=
0}a=sounds[a].flist[0]}SoundPlayer_Stop();if(a.length==0){if(e==false){f!="D"&&S_SetFrameState("D");OnErrorPlaySound()}}else{fname=b?resolveUri(this.AudioPath,a):resolveUri(this.SoundPath,a);_name=this.ChangeFileSuffix(fname);_asyn=e;_fire=true;if(useFlash)_knowpalyer==true&&setTimeout('SoundPlayer_Open("'+_name+'",'+e+")",120);else useAudioTag&&setTimeout('SoundPlayer_Open("'+_name+'",'+e+")",120)}}}else if(e==false){f!="D"&&S_SetFrameState("D");OnErrorPlaySound()}};
SoundPlayerClass.prototype.Stop=function(a){if(bPlayerIsAvailable)a?SoundPlayer_Stop():setTimeout("SoundPlayer_Stop()",10)};SoundPlayerClass.prototype.Pause=function(){try{if(bPlayerIsAvailable){useFlash&&getFPlayer().SoundPause();useAudioTag&&getAPlayer().pause()}}catch(a){}};SoundPlayerClass.prototype.Resume=function(){if(!InWebpage())if(getLastSoundFileName()!=getActualSoundFileName())return;try{if(bPlayerIsAvailable){useFlash&&getFPlayer().SoundPlay();useAudioTag&&getAPlayer().play()}}catch(a){}};
SoundPlayerClass.prototype.InitAudioPlayer=function(){if(bPlayerIsAvailable)if(useAudioTag){getAPlayer().src=this.AudioPath+"empty.m4a";getAPlayer().play()}};SoundPlayerClass.prototype.IsAvailable=function(){return bPlayerIsAvailable};SoundPlayerClass.prototype.SetSoundPath=function(a){if(a.length>0)this.SoundPath=a};
SoundPlayerClass.prototype.SetVolume=function(a){if(a==null)a=this.Volume;else this.Volume=a;if(useFlash)try{getFPlayer().SetSoundVolume(a/100)}catch(b){}if(useAudioTag)try{getAPlayer().volume=a/100}catch(c){}};function InWebpage(){if(typeof _webpage_==="undefined")return false;return _webpage_}function SoundPlayer_EndCheck(){getAPlayer().ended&&SoundPlayerObj.PlayCheckerTimer&&setTimeout(function(){SoundPlayerObj.PlayCheckerTimer&&SoundComplete(false)},50)}
var _lastAsyncronFile=false,_lastAudioFile="",_lastFlashTime=-1,_lastAudioFileSize=0,_lastFileName="";function clearLastSoundFileName(){_lastFileName=""}function getLastSoundFileName(){return _lastFileName.substr(_lastFileName.lastIndexOf("/")+1)}function getActualSoundFileName(){try{return sounds[showActObj.id.substr(1)+".ASX"].flist[0]}catch(a){return""}}
function SoundPlayer_Open(a,b){if(a.length>0)_lastFileName=a;try{if(a.length>0&&b==true)_lastAsyncronFile=true;if(timelineDescriptor.valid&&timelineDescriptor.type!="narration")throw"";if(useFlash){audio_loading=true;_lastFlashTime=-1;getFPlayer().SetSoundFile(a);getFPlayer().SoundPlay();if(timelineDescriptor.valid&&timelineDescriptor.type=="narration"){SoundFPlayer_SetTime();return}audio_loading=false}if(useAudioTag){audio_loading=true;getAPlayer().pause();if(_lastAudioFile==a)AudioLoaded();else{getAPlayer().src=
a;CLog(a+" - "+_lastAudioFile+" play")}_lastAudioFile=a}SoundPlayerObj.SetVolume();if(upk.browserInfo.isiOS()){SoundPlayerObj.PlayCheckerTimer&&clearInterval(SoundPlayerObj.PlayCheckerTimer);SoundPlayerObj.PlayCheckerTimer=setInterval("SoundPlayer_EndCheck()",500)}}catch(c){S_SetFrameState("D");b==false&&OnErrorPlaySound()}}
function SoundFPlayer_SetTime(){getFPlayer().SoundPause();getFPlayer().SoundSeek(timelineDescriptor.resttime/1E3);if(Math.abs(timelineDescriptor.resttime/1E3-getFPlayer().Time())<0.3){getFPlayer().SoundPlay();audio_loading=false}else setTimeout("SoundFPlayer_SetTime()",300)}
function SoundAPlayer_SetTime(){if(audio_seeking!=false)if(audio_counter>100)setTimeout("AudioReload();",100);else{audio_counter++;var a=0;if(timelineDescriptor.valid==true&&timelineDescriptor.type=="narration"){a=timelineDescriptor.resttime/1E3;if(a>_lastAudioFileSize-1){getAPlayer().pause();SoundComplete();CLog("nextframe");return}if(a<0)a=0}try{getAPlayer().currentTime=a}catch(b){setTimeout("SoundAPlayer_SetTime()",300)}var c=getAPlayer().currentTime,e=Math.abs(c-a);try{CLog("d: "+e+" "+c+" "+
a+" "+_lastAudioFileSize+" "+showScreen)}catch(f){CLog("d: "+e+" "+c+" "+a+" "+_lastAudioFileSize)}if(e<0.3){audio_seeking=false;CLog("play...");getAPlayer().play()}else setTimeout("SoundAPlayer_SetTime()",300)}}function SoundIsLocked(){return audio_loading==true||audio_seeking==true}
function SoundPlayer_Stop(){try{if(SoundPlayerObj.PlayCheckerTimer){clearInterval(SoundPlayerObj.PlayCheckerTimer);SoundPlayerObj.PlayCheckerTimer=0}_lastAsyncronFile=false;useFlash&&getFPlayer().SoundStop();useAudioTag&&getAPlayer().pause()}catch(a){}}
function SoundPlayer_GetTime(){var a=getLastSoundFileName(),b=showActObj.id.substr(1);b=sounds[b+".ASX"].flist[0];if(a.length>0&&a!=b)return{s:a,t:NaN};b=0;if(useAudioTag)b=getAPlayer().currentTime*1E3;if(useFlash)b=getFPlayer().Time()*1E3;if(b==0&&_lastFlashTime>=0)b=_lastFlashTime;else _lastFlashTime=b;return{s:a,t:b}}function OnFlashLoad(){_fire==true&&setTimeout('SoundPlayer_Open("'+_name+'",'+_asyn+")",20);_fire_=false;_knowpalyer=true}
function SoundComplete(a){if(InWebpage())a?OnErrorPlaySound():OnEndPlaySound();else{if(SoundPlayerObj.PlayCheckerTimer){clearInterval(SoundPlayerObj.PlayCheckerTimer);SoundPlayerObj.PlayCheckerTimer=0}if(_lastAsyncronFile)_lastAsyncronFile=false;else{if(useAudioTag)if(a){S_SetFrameState("D");OnErrorPlaySound()}else{if(typeof animObject!="undefined")if(animObject)if(fusionmode==true&&animObject.timeout==DELAY_INFINITE*100){if(animObject.showbubble==false)animObject.timeout=0}else animObject.timeout=
0;OnEndPlaySound()}if(useFlash){s=getFPlayer().SoundState();if(s=="notfoundfile"){S_SetFrameState("D");OnErrorPlaySound()}else if(s=="complete"){if(typeof animObject!="undefined")if(animObject)if(fusionmode==true&&animObject.timeout==DELAY_INFINITE*100){if(animObject.showbubble==false)animObject.timeout=0}else animObject.timeout=0;OnEndPlaySound()}}}}}function AudioEnded(){var a=getAPlayer();CLog(a.src+" done...");a.src.indexOf("empty.m4a")>=0||SoundComplete(false)}
function AudioError(){var a=getAPlayer();if(a!=null)if(a.src!="")if(!(a.src.indexOf("empty.m4a")>=0)){CLog(a.src+" error...");SoundComplete(true)}}var audio_loading=false,audio_seeking=false,audio_counter=0;function AudioReload(){audio_loading=true;getAPlayer().pause();getAPlayer().src=_lastAudioFile;CLog(fname+" - "+_lastAudioFile+" replay")}
function AudioLoaded(){CLog("AudioLoaded");if(audio_loading==true){CLog("AudioLoaded true");audio_loading=false;audio_counter=0;getAPlayer().pause();audio_seeking=true;SoundAPlayer_SetTime()}}function S_GetFrameState(){try{return upk.Timeline.GetFrameState()}catch(a){return""}}function S_SetFrameState(a){try{upk.Timeline.SetFrameState(a)}catch(b){}}
function TimelineDescriptor(a,b,c,e,f,h){if(this.valid=a){this.frameid=b;this.timelineindex=c;this.narration=e;this.animation=f;this.resttime=h;this.type="narration";if(h>=e)this.type="animationstart";if(h>=e+f/2)this.type="nextframe"}}var timelineDescriptor=new TimelineDescriptor(false,"",0,0,0,0),SoundPlayerObj=new SoundPlayerClass,clog_enabled=false;function CLog(a,b){if(clog_enabled||b==true)console!==undefined&&console.log(a)}upk=upk||{};
$.extend(true,upk,{contextHelper:function(){var a=null,b,c;this.SetContext=function(f,h){if(a)a.SetContext(f,h);else{c=b;b={view:f,subview:h};ias.SetContext(b)}};this.SetNamespace=function(f){a||ias.SetNamespace(f)};this.AddDiscoveryCddUrl=function(f){a||ias.AddDiscoveryCddUrl(f)};this.SetPrevContext=function(){if(a)a.SetPrevContext();else{b=c;ias.SetContext(b)}};try{if(self!=top&&typeof parent.ctxHelper==="object")a=parent.ctxHelper}catch(e){}return this}});window.ctxHelper=new upk.contextHelper;
window.ias=function(a){function b(I){var A={};if(I!=l)for(var Q in I){var V=I[Q];if(V!=l)A[Q]=V}return A}function c(I){o=b(I);v.push(o);q=l}function e(I,A){if(A!=l)r[I]=A;else delete r[I];z=l}function f(I,A){return encodeURIComponent(I)+"="+encodeURIComponent(A)}function h(I,A){return encodeURIComponent(I)+(A==""?"":"="+encodeURIComponent(A))}function j(I,A){var Q=A?h:f,V=[],P;for(P in I){var O=I[P];if(O&&O.push&&O.sort)for(var J=0;J<O.length;++J)V.push(Q(P,O[J]));else O!=l&&V.push(Q(P,O))}return V.join(";")}
var l=null,k=l,q=l,o={},v=[o],r={},z=l,B=[],H=[],K=window.ias||{};K.SetNamespace=function(I){k=I};K.SetContext=function(I){o=b(I);v[v.length-1]=o;q=l};K.SetContextPart=function(I,A){if(A!=l)o[I]=A;else delete o[I];q=l};K.ResetContext=function(I){v=[];c(I)};K.SetTag=e;K.SetTags=function(I){for(var A in I)e(A,I[A])};K.ResetTags=function(I){r=b(I);z=l};K.PushContext=c;K.PopContext=function(){v.pop();v.length||v.push({});o=v[v.length-1];q=l};K.AddDiscoveryCddUrl=function(I){B.push(I)};K.AddApplicableCddUrl=
function(I){H.push(I)};a.UPK_GetNamespace=function(){return k};a.UPK_GetContext=function(){if(q==l)q=j(o);return q};a.UPK_GetTags=function(){if(z==l)z=j(r,true);return z};a.UPK_GetDiscoveryCddUrls=function(){return B.length?B:l};a.UPK_GetApplicableCddUrls=function(){return H.length?H:l};return K}(window);ias.SetTag("upk-trait-nohelp","");
var XdTransfer=function(){function a(d){if(d==null)return d===void 0?"undefined":"null";var g=typeof d;if(typeof d=="object"&&d.join!=void 0&&d.push!=void 0&&d.length!=void 0)return"object Array";if(g!="object"||d.constructor==null||d.constructor.toString==null)return g;d=/function\s+([^\(]*)\(/.exec(d.constructor.toString());return g+(d&&d.length>1&&d[1].length>0?" "+d[1]:"")}function b(d){return typeof d=="function"||d!=null&&d.constructor===Function}function c(d){return d!=null&&typeof d=="object"&&
d.constructor!==String&&d.constructor!==Number&&d.constructor!==Boolean&&d.constructor!==Array&&d.constructor!==Date}function e(){function d(D){D=D.toString(16);switch(D.length){case 1:return"\\u000"+D;case 2:return"\\u00"+D;case 3:return"\\u0"+D;case 4:return"\\u"+D}return"?"}function g(D){return'"'+String(D).replace(/(["\\])/g,"\\$1").replace(/([\x00-\x1F])/g,function(S){S=S.charCodeAt(0);var T=R.charAt(S);return T=="?"?d(S):"\\"+T})+'"'}function i(D){return D<10?"0"+D:D}function m(D,S){var T=typeof D;
if(T!="object"){if(T=="string")return g(D);if(T=="number")return isFinite(D)?String(D):"null";if(T=="boolean")return D?"true":"false"}else{if(D===null)return"null";if(D.constructor===String)return g(D);if(D.constructor===Number)return isFinite(D)?String(D):"null";if(D.constructor===Boolean)return D?"true":"false";if(D.constructor===Date)return"".concat(D.getUTCFullYear(),"-",i(D.getUTCMonth()),"-",i(D.getUTCDate()),"T",i(D.getUTCHours()),":",i(D.getUTCMinutes()),":",i(D.getUTCSeconds()),"Z");if(D.constructor!==
Function){if(N(S,D))throw L;T=[];S.push(D);if(D.constructor===Array){for(var X=0,ea=D.length;X<ea;++X){var la=D[X];la==null||M(la)?T.push("null"):T.push(m(la,S,String(X)))}S.pop();return"["+T.join()+"]"}for(X in D){ea=D[X];if(ea==null||M(ea))ea===null&&T.push(g(X)+":null");else if((ea=m(ea,S,X))!=null)T.push(g(X)+":"+ea)}S.pop();return"{"+T.join()+"}"}}}var t=/[^",:\{\}\[\] \t\r\n]|"""|"[ \t\r\n]+"]|[\}\]][ \t\r\n]*[:\{\[]|[\{\[][ \t\r\n]*[,:]|[,:][ \t\r\n]*[,:\}\]]/,E=/"(?:[^"\\\x00-\x1F]|\\["\\\/bnfrt]|\\u[0-9a-fA-F]{4})*"|null|true|false|-?(?:0|[1-9][0-9]*)(?:\.[0-9]+)?(?:[eE][+\-]?[0-9]+)?/g,
L=Error(""),M=b,N;(function(){try{if(typeof[].indexOf=="function"&&[1,2,3,4].indexOf(3)==2){N=function(S,T){return S.indexOf(T)!=-1};return}}catch(D){}N=function(S,T){for(var X=0,ea=S.length;X<ea;++X)if(S[X]===T)return true;return false}})();var R="????????btn?fr??????????????????";U.EncodeObject=function(D){if(D==null||M(D)){if(D===null)return"null"}else try{return m(D,[],"")}catch(S){if(S!==L)throw S;}};U.DecodeObject=function(D){try{if(D!=null&&!t.test(D.replace(E,'""')))return eval("("+D+")")}catch(S){}}}
function f(d,g,i){try{if(d&&i)d.addEventListener?d.addEventListener(g,i,false):d.attachEvent("on"+g,i)}catch(m){}}function h(){this.params=[];this.safemode=false}function j(){var d=document.title;if(!d)try{if(_sco==false)d=(UIComponents.TitlePrefix==true?R_toc_title+" - ":"")+moduleName.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}catch(g){}return d}function l(d){var g=a(d),i=g;if(d!=void 0&&g!="[function]"&&g!="[object Function]"){var m;try{m=U.EncodeObject(d)}catch(t){}i+=":"+
(m==void 0?"(complex object)":m)}return i}function k(d){if(d==null)return"(null)";var g=[],i;for(i in d)g.push(i+"="+l(d[i]));return g.join(", ")}function q(d){this.name="ApplicationError";this.message=d;this.toString=function(){return this.message}}function o(d,g){if(d!==g){if(g==null)return d===void 0?g:d;if(g.constructor===String||g.constructor===Number||g.constructor===Boolean||g.constructor===Function)return g;if(g.constructor===Date)return new Date(g.getTime());d=new g.constructor;v(d,g)}return d}
function v(d,g){for(var i in g)if(d[i]!==g[i])d[i]=o(d[i],g[i])}function r(d,g){if(d==void 0||!c(d))d={};for(var i=0,m=g.length,t;i<m;++i){t=g[i];if(c(t)&&d!==t)for(var E in t)d[E]=t[E]}return d}function z(d){if(d!==!!d)return r(arguments[0],[].slice.call(arguments,1));if(d){var g=arguments[1],i=[].slice.call(arguments,2);if(g==void 0||!c(g))g={};for(var m=0,t=i.length,E;m<t;++m){E=i[m];c(E)&&g!==E&&v(g,E)}return g}return r(arguments[1],[].slice.call(arguments,2))}function B(d,g){this.Node=d;this.Key=
g}function H(d,g){this.url=d;var i=g||{};this.options=i;this.method=i.method?i.method.toUpperCase():"GET";this.asynchronous=!!i.asynchronous;this.contentType=i.contentType||"application/x-www-form-urlencoded";this.parameters=ja.Extend({},i.parameters||{});if(i.forceGet)this.parameters._=(new Date).getTime();this.id=ha.Next("AjaxRequest");this.queryParams=H.$CreateQueryString(this.parameters);if(this.method!="POST"&&this.queryParams.length>0)this.url+=(this.url.indexOf("?")>=0?"&":"?")+this.queryParams;
this.body=this.method=="POST"?this.queryParams:null;this.request=null;this.$completed=this.aborted=false;if(window.XMLHttpRequest)this.request=new XMLHttpRequest;else if(window.ActiveXObject&&!(this.request=new ActiveXObject("Msxml2.XMLHTTP")))this.request=new ActiveXObject("Microsoft.XMLHTTP");if(!this.request)throw Error("AjaxRequest, no transport");this.$DoRequest()}function K(d){return d.replace(/^\s+|\s+$/g,"")}function I(d,g,i,m,t,E,L){g||(g=d);if(g&&/~$/.test(g)){L=1;g=g.replace(/~$/,"")}this.Name=
d;this.NsName=g;this.Version=i;this.Language=m;this.RawContext=t;this.RawTags=E;this.EnableSM=L?1:0}function A(d,g,i,m,t){this.Name=d;this.Caption=g;this.UseNameAsPrefix=i;this.Searchable=m;this.MultiPart=t}function Q(d,g,i,m,t,E,L,M){this.Key=d||null;this.Name=g||null;this.NsName=i||g||null;this.Version=m||null;this.Language=t||null;this.TagList=E||null;this.Parts=L||null;this.EnableSM=M||0}function V(){}function P(d,g){if(u)try{if(window.console)window.console.log(d+(g?":"+g:""))}catch(i){}}var O=
{Unknown:-1,MicrosoftInternetExplorer:1,MozillaFirefox:2,GoogleChrome:3,Safari:4},J={Type:0,_:void 0},W={IsIE:function(){return W.IsType(O.MicrosoftInternetExplorer)},IsFirefox:function(){return W.IsType(O.MozillaFirefox)},IsChrome:function(){return W.IsType(O.GoogleChrome)},IsSafari:function(){return W.IsType(O.Safari)},IsType:function(d){return J.Type?J.Type==d:W.Detect(d)},Detect:function(d){J.Type=/MSIE|Trident\//.test(navigator.userAgent)?O.MicrosoftInternetExplorer:navigator.userAgent.indexOf("Firefox")!=
-1?O.MozillaFirefox:navigator.userAgent.indexOf("Chrome")!=-1?O.GoogleChrome:/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?O.Safari:O.Unknown;return J.Type==d},GetVersion:function(){var d=parseInt,g=navigator.userAgent,i={},m=g.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];if(/trident/i.test(m[1])){g=/\brv[ :]+(\d+(\.\d+)?)/g.exec(g)||[];i.Browser="IE";i.Version=g[1]||""}else{m=m[2]?[m[1],m[2]]:[navigator.appName,navigator.appVersion,"-?"];
if((g=g.match(/version\/([\.\d]+)/i))!=null)m[2]=g[1];i.Browser=m[0];i.Version=m[1]}return d(i.Version)}},ca={Indent:"  "},U={EncodeObject:function(d,g){try{return JSON.stringify(d,null,g?ca.Indent:null)}catch(i){if(typeof TypeError=="undefined"||!i||i.constructor!==TypeError)throw i;}},DecodeObject:function(d){if(d!=null)try{return JSON.parse(d)}catch(g){}}};(function(){if(typeof window.JSON!="undefined"&&typeof(JSON.stringify&&JSON.parse)!="undefined")try{var d={a:"",b:0.1,c:null,d:true,e:false,
f:[[{},{g:function(){return 1},h:1},new Function("return 0;"),function(){return 1},1]]},g=JSON.stringify(d);if(g=='{"a":"","b":0.1,"c":null,"d":true,"e":false,"f":[[{},{"h":1},null,null,1]]}'&&g==JSON.stringify(JSON.parse('{"a":"","b":0.1,"c":null,"d":true,"e":false,"f":[[{},{"h":1},null,null,1]]}'))&&/2345-12-23T12:34:56(?:\.789[0]*)?Z/.test(JSON.stringify(new Date(Date.UTC(2345,11,23,12,34,56,789)))))return}catch(i){}e()})();var aa={DecodeMessage:function(d){if((d=U.DecodeObject(d))&&d.length==
2&&/^oraupk-/.test(d[0]))return d},ProxyPostMessage:function(d,g){if(aa.DecodeMessage(g.data))try{d&&d.postMessage(g.data,"*")}catch(i){}},MessageReceived:function(d,g){var i=aa.DecodeMessage(g.data);if(i){var m=i[0];i=i[1];var t=g.source,E=g.origin;try{d(m,i,t,E)}catch(L){}}}},ia={AddListener:function(d,g){function i(m){aa.MessageReceived(g,m)}f(d,"message",i);return i},RemoveListener:function(d,g){try{if(d&&g)d.removeEventListener?d.removeEventListener("message",g,false):d.detachEvent("onmessage",
g)}catch(i){}},PostMessage:function(d,g,i){if(i===void 0)i=null;g=U.EncodeObject([g,i]);try{d&&d.postMessage(g,"*")}catch(m){}},SetProxy:function(d,g,i){g!==i&&f(d,"message",function(m){var t;if(m.source===g){if(d!==i)t=i}else if(m.source===i)if(d!==g)t=g;t&&aa.ProxyPostMessage(t,m)})}},fa=function(){function d(t,E){for(var L="",M=0;M<t.length;M++){var N=t.substr(M,1),R;if(E==0)R=N>="0"&&N<="9"||N>="a"&&N<="z"||N>="A"&&N<="Z";else{a:{R=m.length;for(var D=0;D<R;D++)if(N==m[D]){R=true;break a}R=N==
i?true:false}R=!R}if(R)L+=N;else{N=t.charCodeAt(M);N="0000"+N.toString(16).toUpperCase();L+=(E==0?"$":i)+N.substr(N.length-4)}}return L}function g(t,E){for(var L="",M=false,N=0;N<t.length;N++){var R;if(M){R=t.substr(N,4);L+=String.fromCharCode(parseInt("0x"+R));N+=3;M=false}else{R=t.substr(N,1);if(R==(E==0?"$":i))M=true;else L+=R}}return L}var i="/",m=["<",">",'"',"'","%",";","(",")","&","+"];return{SafeUriEscape:function(t){return d(t,1)},SafeUriUnEscape:function(t){return g(t,1)},MyEscape:function(t){return d(t,
0)},MyUnEscape:function(t){return g(t,0)}}}();h.prototype.Clone=function(){var d=new h;d.params=[];d.safemode=this.safemode;for(var g in this.params)if(this.params[g]!=null)d.params[g]=this.params[g];return d};h.prototype.Parse=function(){var d,g;d=document.location.hash.substring(1);d=d.split("&");if(d.length==0||d[0]==""){d=document.location.search.substring(1);d=d.split("&")}if(d.length>0)if(d[0].toLowerCase().substr(0,3)=="su="){this.safemode=true;d=d[0].substr(3);d=fa.SafeUriUnEscape(d);d=d.split("&")}for(var i=
0;i<d.length;i++){g=d[i];if(g.length!=0){var m=g.split("=");if(m.length==2)this.params[m[0].toLowerCase()]=m[1];else if(m.length<2)this.params[m[0].toLowerCase()]="";else this.params[m[0].toLowerCase()]=g.substr(m[0].length+1)}}};h.prototype.GetSafeMode=function(){return this.safemode};h.prototype.SetSafeMode=function(d){this.safemode=d};h.prototype.GetParameter=function(d){return this.params[d.toLowerCase()]};h.prototype.AddParameter=function(d,g){this.params[d.toLowerCase()]=g};h.prototype.RemoveParameter=
function(d){this.params[d.toLowerCase()]=null};h.prototype.ClearParameterList=function(){this.params=null;this.params=[]};h.prototype.BuildParameterList=function(d){d="";var g=true,i;for(i in this.params){var m=this.params[i];if(m!=null){if(g==false)d+="&";g=false;d+=m.length==0?i:i+"="+this.params[i]}}if(this.safemode)d="su="+fa.MyEscape(d);return d};h.prototype.GetCorrectUrl=function(d,g){if(!this.safemode)return d;var i,m=d.indexOf("#");if(m==-1)m=d.indexOf("?");if(m>=0){var t=d.substring(m+1);
i=t.split("&");if(i[0].toLowerCase().substr(0,3)=="su=")return d;return d.substring(0,m+1)+"su="+fa.SafeUriEscape(t)}else return d+(g?"":"?su=")};ia.AddListener(window,function(d,g){if(d=="oraupk-gatewayinfo"){if(g.debug)if(window.Debug)window.Debug.is_ta_debug=true;ia.PostMessage(window.parent,"oraupk-playerinfo",{title:j(),diagnostics:window.UserPrefs.EnableShowDiagnostics||window.Debug&&window.Debug.is_ta_debug})}});var ba=function(d,g,i){throw new q((d?d+": ":"")+("Failed: "+(g?g:"")+(g&&i?", ":
"")+(i?i:"")));};ba.NotImplemented=function(d){ba(d,"Not implemented.",null,2)};ba.Exception=function(d,g){ba(d,"Exception: "+g.message,null,2)};B.FindPath=function(d,g){if(d){for(var i=0,m=g.length;i<m;++i)if((d=d[g[i]])===void 0)return;return d}};B.FindKey=function(d,g){return g&&g.length?B.FindPath(d,g.split("/")):d};B.CreatePath=function(d,g){for(var i=0,m=g.length;i<m;++i){var t=d[g[i]];if(t===void 0){for(;i<m;){d=d[g[i]]={};++i}break}d=t}return d};B.CreateKey=function(d,g){return B.CreatePath(d,
g.split("/"))};B.prototype={GetRoot:function(){return this.Node},CreateKey:function(d){return new B(B.CreateKey(this.Node,d),this.GetAbsoluteKey(d))},OpenKey:function(d){var g=B.FindKey(this.Node,d);return new B(g,this.GetAbsoluteKey(d))},TryOpenKey:function(d){var g=B.FindKey(this.Node,d);return g?new B(g,this.GetAbsoluteKey(d)):null},GetValue:function(d){return this.Node[d]},TryGetValue:function(d,g){var i=this.Node[d];return i===void 0?g:i},GetValueByKey:function(d){return B.FindKey(this.Node,
d)},TryGetValueByKey:function(d,g){var i=B.FindKey(this.Node,d);return i===void 0?g:i},GetAbsoluteKey:function(d){return this.Key?this.Key+(d?"/"+d:""):d},Extend:function(d){if(this.Node==null)this.Node={};z(true,this.Node,d)},Delete:function(d){delete this.Node[d]}};var ja={FromArray:function(d,g){if(g==void 0)g=true;for(var i={},m=0,t=d.length;m<t;++m)i[d[m]]=g;return i},AddNewItem:function(d,g,i){var m=d[g]===void 0;if(m)d[g]=i;return m},Extend:function(d,g){for(var i in g)d[i]=g[i];return d},
AddNewItems:function(d,g){for(var i in g)if(d[i]===void 0)d[i]=g[i]},GetKeys:function(d){var g=[],i;for(i in d)g.push(i);return g},GetValues:function(d){var g=[],i;for(i in d)g.push(d[i]);return g},FromKeys:function(d,g){if(g==void 0)g=true;var i={},m;for(m in d)i[m]=g;return i},Equals:function(d,g){if(d==null)return g==null;else if(g==null)return false;var i=0,m;for(m in d)++i;for(m in g){--i;if(d[m]!=g[m])return false}return i==0},FindMembers:function(d,g,i){if(i==void 0)i=g.length;for(var m=0,
t=g.length;m<t;++m)if(typeof d[g[m]]!="undefined")if(--i==0)return true;return false}},ha={_uid:{},Next:function(d){var g=d==void 0?"__uid__":d;g=ha._uid[g]===void 0?ha._uid[g]=1:++ha._uid[g];return d==void 0?g:d+g},Reset:function(d){var g=d==void 0?"__uid__":d,i=ha._uid[g]||0;ha._uid[g]=0;return d==void 0?i:d+i}};H.PingUrl=function(d,g){var i=g||{};i.method="HEAD";i.asynchronous=false;return(new H(d,i)).Success()};H.Load=function(d,g){var i=g||{};i.asynchronous=false;return new H(d,i)};H.LoadText=
function(d,g){return H.Load(d,g).GetResponseText()};H.LoadXml=function(d,g){return H.Load(d,g).GetResponseXML()};H.LoadJson=function(d,g){var i=H.Load(d,g).GetResponseText();return U.DecodeObject(i)};H.States=["Unsent","Opened","HeadersReceived","Loading","Done"];H.Nop=function(){};H.$CreateQueryString=function(d){if(d==void 0)d={};var g=[],i;for(i in d){var m=d[i];g.push(m==void 0?i:i+"="+encodeURIComponent(String(m)))}return g.join("&")};H.prototype.$OnReadyStateChange=function(){if(!this.$completed){var d=
this.request.readyState,g=H.States[d];if(d==4)this.$completed=true;try{var i=this.options["On"+g];i&&i(this)}catch(m){this.options.OnException?this.options.OnException(this,m):ba("AjaxRequest.$OnReadyStateChange",m)}if(this.$completed){this.request.onreadystatechange=function(){};try{var t=this.options["On"+(this.Success()?"Success":"Failure")];t&&t(this)}catch(E){this.options.OnException?this.options.OnException(this,E):ba("AjaxRequest.$OnReadyStateChange","IE memory leak code",E)}}}};H.prototype.$DoRequest=
function(){try{var d=this;this.request.onreadystatechange=function(){d.$OnReadyStateChange()};this.request.open(this.method,this.url,this.asynchronous);this.$SetHeaders();this.request.send(this.body);this.asynchronous||d.$OnReadyStateChange()}catch(g){this.options.OnException?this.options.OnException(this,g):ba("AjaxRequest.$DoRequest",g)}};H.prototype.$SetHeaders=function(){var d={Accept:"text/plain, text/javascript, text/html, text/xml, application/xml, */*"};if(this.method=="POST"){if(this.contentType)d["Content-type"]=
this.contentType+"; charset=UTF-8";if(this.request.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005)d.Connection="close"}if(this.options.header)for(var g in this.options.header)d[g]=this.options.header[g];for(g in d)this.request.setRequestHeader(g,d[g])};H.prototype.Abort=function(){this.$completed||this.request.abort()};H.prototype.Success=function(){var d=this.GetStatus();return!d||d>=200&&d<300};H.prototype.GetStatus=function(){try{return this.request.status||0}catch(d){return 0}};
H.prototype.GetResponseHeader=function(d){try{return this.request.getResponseHeader(d)||null}catch(g){return null}};H.prototype.GetResponseText=function(){return this.Success()?this.request.responseText:null};H.prototype.GetResponseXML=function(){return this.Success()?this.request.responseXML:null};var Y={Unwrap:function(d){return d},TryCall:function(d,g){d=Y.Unwrap(d);try{if(d[g])return d[g].call(d)}catch(i){}},TryCallWithArguments:function(d,g,i){d=Y.Unwrap(d);try{if(d[g])return d[g].apply(d,i)}catch(m){}},
TryGet:function(d,g){d=Y.Unwrap(d);try{return d[g]}catch(i){}},TryAccess:function(d){try{return d&&d.location&&d.location.href&&1}catch(g){}return 0},CloseWindow:function(d){if(W.IsIE())try{d.open("","_parent","")}catch(g){}d.close()},OpenWindow:function(d,g,i){return window.open(d,g,i)},Focus:function(d){d.focus()},GetOpener:function(d){try{if(d.opener&&Y.TryAccess(d.opener))return d.opener}catch(g){}},HasParent:function(d){return d.parent!==d},SD_OpenAndFocus:function(d,g,i){function m(M){var N;
try{N=d.open(M,i)}catch(R){}return N}var t=m(""),E;a:{try{if(t&&t.document.URL=="about:blank"){E=true;break a}}catch(L){}E=false}if(E)t.location.replace(g);else{d.focus();t&&Y.CloseWindow(t);t=m(g);setTimeout(function(){var M;a:{try{if(t&&t.document.URL){M=true;break a}}catch(N){}M=false}if(!M){t&&Y.CloseWindow(t);m(g)}},1E3)}}};I.ToObject=function(d){return d?[d.Name,d.NsName,d.Version,d.Language,d.RawContext,d.RawTags,d.EnableSM]:null};I.FromObject=function(d){return d?new I(d[0],d[1],d[2],d[3],
d[4],d[5],d[6]):null};var da={ApplicationNameFromNsName:function(d){if(!d)return d;d=d.replace(/~$/,"");var g=d.indexOf(".");return g!=-1?d.substr(0,g):d},CreateInfo:function(d,g,i){for(var m=d==null?[""]:d.split(";");m.length<3;)m.push(null);d=K(m[0]).toUpperCase();var t=/~$/.test(d);if(t)d=d.replace(/~$/,"");var E=da.ApplicationNameFromNsName(d);m.shift();var L=m[0]?K(m[0]):null;if(!L||/^[0-9@]/.test(L))m.shift();else L=null;m=m[0]?K(m[0]).replace("_","-").toLowerCase():null;return new I(E,d,L,
m,g||null,i||null,t)}},ga={ApplicationNameFromNsName:function(d){return da.ApplicationNameFromNsName(d)},ApplicationInfoFromParams:function(d){var g=d.namespace,i=d.context;d=d.tags;return g||i||d?da.CreateInfo(g,i,d):null},TokensFromWindow:function(d){var g=null,i=null,m=null;try{var t=!!Y.TryGet(d,"UPK_GetNamespace"),E=!!Y.TryGet(d,"UPK_GetTags"),L=!!Y.TryGet(d,"UPK_GetContext"),M=function(T){if(T==null)return null;return String(T)};g=t&&M(Y.TryCall(d,"UPK_GetNamespace"))||null;i=E&&M(Y.TryCall(d,
"UPK_GetTags"))||null;if(!g||!i||!L){var N=d.document.getElementsByTagName("meta");d=0;for(var R=N.length;d<R;++d){var D=N[d].name;if(/^upk-/.test(D))if(g==null&&D=="upk-namespace")g=N[d].content;else if(i==null&&D=="upk-tags")i=N[d].content;else if(m==null&&D=="upk-context")m=N[d].content}}}catch(S){}return g||i||m?[g,m,i]:null},ApplicationInfoFromWindow:function(d){d=ga.TokensFromWindow(d);if(!d)return null;return da.CreateInfo(d[0],d[1],d[2])},_DecodeDelimitedString:function(d){d=d.split(";");
for(var g=[],i=0,m=d.length;i<m;++i){var t=d[i];t&&g.push(decodeURIComponent(t))}return g},_DecodeAndSort:function(d){d=ga._DecodeDelimitedString(d);d.sort();return d},DecodeContext:function(d,g){if(d==null)return null;if(!g)return decodeURIComponent(d);return ga._DecodeAndSort(d)},DecodeTags:function(d){if(d==null)return null;return ga._DecodeAndSort(d)},DecodeSp:function(d){return d?d.toLowerCase().split(/\s*(?:;\s*)+/):[]}},Z={CreateValue:function(d,g,i,m,t){return[d,g,i==void 0?true:i,m==void 0?
true:m,t==void 0?false:t]},CreateMeta:function(d){return["MC."+d,d,false,false,false]},HasMultipleParts:function(d){return!!d[4]}},ka={NoContext:0,Absolute:1,TopRelative:2,SmartMatch:3,Hybrid:4};A.Create=function(d){return new A(d[0],d[1],d[2],d[3],d[4])};var ma={Escape:function(d){return String(d).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},EscapeAttribute:function(d){return String(d).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},Unescape:function(d){return String(d).replace(/&lt;/g,
"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},DecodeEntities:function(d){var g=document.createElement("div");g.innerHTML=String(d).replace(/</g,"&lt;").replace(/>/g,"&gt;");return g.firstChild.nodeValue}};Q.ClassId="OraUpk.ApplicationContext;3";Q.FromObject=function(d){return new Q(d.Key,d.Name,d.NsName,d.Version,d.Language,d.TagList,d.Parts,d.EnableSM)};Q.FromJson=function(d){return Q.FromObject(U.DecodeObject(d))};Q.prototype={AddPart:function(d,g){g&&g.length&&this.Parts.push([d,g])},ToObject:function(){return{ClassId:Q.ClassId,
Key:this.Key,Name:this.Name,NsName:this.NsName,Language:this.Language,Version:this.Version,TagList:this.TagList,Parts:this.Parts,EnableSM:this.EnableSM}},ToJson:function(){return U.EncodeObject(this.ToObject())},ToXml:function(d){function g(S,T,X,ea,la,na){S.push('<property name="'+T+'" caption="'+ea+'" usenameasprefix="'+la+'" searchable="'+na+'">');S.push("<prop_string>"+ma.Escape(X)+"</prop_string>");S.push("</property>")}var i=this.NsName,m=this.EnableSM,t=['<?xml version="1.0"?><propertyset>'],
E=this.Name;if(d){E+=m?";SM":"";E+=";V"+d.ContextVersion;E+=";R12.1.0.1";var L,M;if(d.ContextType==ka.Hybrid){L=d.A.PartMap;M=this.Parts&&this.Parts.length&&this.Parts[0][0]=="A"?this.Parts[0][1]:null}else{L=d.PartMap;M=this.Parts}if(M){d=0;for(m=M.length;d<m;++d){var N=M[d],R=N[0],D=L[R];if(/^MC\./.test(R))E+=";"+D.Caption+N[1];else g(t,N[0],N[1],D.Caption,D.UseNameAsPrefix,D.Searchable)}}}i!=null&&i.indexOf(".")!=-1&&g(t,"MA",i,"Application Name",true,true);g(t,"MC",E,"Context Info",true,false);
this.Version!=null&&g(t,"MV",this.Version,"Application Version",true,false);if(this.TagList!=null){i=this.TagList;d=0;for(m=i.length;d<m;++d)g(t,"MT",i[d],"Application Tag",true,true)}t.push("</propertyset>");return t.join("")}};V.prototype={Key:null,Name:"$UNKNOWN",ConfigDefaults:{ContentMap:[],GatewayTitle:"",GatewayLinksTitle:"Links",GatewayLinks:[],GatewayPages:[],GatewayRememberTab:1},SupportedFeatures:{ExactMatch:"X",SmartMatch:"S"}.ExactMatch,ContextType:ka.Absolute,ContextDiscovery:false,
ContextVersion:0,ContextParts:[Z.CreateValue("C","Context ID")],ContextStdPartsMap:{MA:Z.CreateValue("MA","Application Name"),MT:Z.CreateValue("MT","Application Tag",true,true,true)},PartMap:null,CombineExactAndSmart:1,CreatePartsFromValues:function(d){var g=this.ContextParts,i=[];if(d){var m,t;m=0;for(t=d.length;m<t;++m){var E=d[m];if(E!=null)if(Z.HasMultipleParts(g[m])){if(E.length!=0)for(var L=0;L<E.length;++L){var M=E[L];M!=""&&i.push([g[m][0],M])}}else E!=""&&i.push([g[m][0],E])}}return i},IntegrateParts:function(d){for(var g=
[],i={},m=0,t=d.length;m<t;++m){var E=d[m];if(E)for(var L=0,M=E.length;L<M;++L)ja.AddNewItem(i,E[L][0]+E[L][1],true)&&g.push(E[L])}return g.length?g:null},Initialize:function(){if(!this.HintOverrideName)this.HintOverrideName=this.Name;if(!this.Key)this.Key=this.Name+":"+this.SupportedFeatures;var d={},g,i,m;g=this.ContextStdPartsMap;for(i in g){m=g[i];d[m[0]]=A.Create(m)}var t=this.ContextParts;g=0;for(i=t.length;g<i;++g){m=t[g];d[m[0]]=A.Create(m)}this.PartMap=d}};var C={Keys:[],Names:[],AppByKey:{},
AppsByName:{},Register:function(d){d.Initialize();var g=d.Key;C.AppByKey[g]=d;C.Keys.push(g);g=d.Name;var i=C.AppsByName[g];if(i)i.push(d);else{C.Names.push(g);C.AppsByName[g]=[d]}},TryGetApplicationByKey:function(d){return C.AppByKey[d]||null},TryGetApplicationsByName:function(d){return C.AppsByName[d]||null},TryGetApplication:function(d){return(d=C.AppsByName[d]||null)?d[0]:null},GetApplication:function(d,g){var i;return i=g?(i=C.GetApplicationKey(d,g))?C.TryGetApplicationByKey(i):null:C.TryGetApplication(d)},
GetApplicationName:function(d){if(!d)return"";return d.split(":")[0]},GetApplicationKey:function(d,g){var i=C.TryGetApplicationsByName(d);if(!i)return null;if(!g)return i[0];for(var m=0;m<i.length;++m){var t=i[m],E,L=g.length;for(E=0;E<L;++E)if(t.SupportedFeatures.indexOf(g[E])==-1)break;if(E==L)return t.Key}return null}},n={ContentUrl:"../../",Root:null,RootLoaded:false,PublishDataLoaded:false,_Cache:null,Reset:function(){n.ContentUrl="../../";n.Root=new B({});n.RootLoaded=false;n.PublishDataLoaded=
false;n._Cache={}},Request:function(d){if(!d)return null;d=/^~\//.test(d)?d.substr(2):n.ContentUrl+d;return H.LoadJson(d)},Load:function(d){if(!d)return null;var g=n._Cache[d];if(g===void 0){g=n.Request(d);n._Cache[d]=g||null}return g}},p={GetPublishDataLocation:function(){return"publishdata.json.js"},GetApplicationConfigDataLocation:function(){return"~/configdata.json.js"},GetApplicationKey:function(d){return"Applications/"+d},SetContentUrl:function(d){n.Reset();n.ContentUrl=d},LoadPublishData:function(){return n.Load(p.GetPublishDataLocation())},
LoadApplicationConfigData:function(d){return n.Load(p.GetApplicationConfigDataLocation(d))},GetValueByKey:function(d){var g=n.Root.TryGetValueByKey(d);if(g===void 0)return(d=p.OpenKey(d))?d.Node:void 0;return g},OpenKey:function(d){return n.Root.TryOpenKey(d)||p._LoadKey(d)},GetApplicationConfig:function(d,g){return n.Root.TryOpenKey(p.GetApplicationKey(d))||p._LoadAndCacheApplicationConfig(d,g)},GetApplicationList:function(){var d=p.GetValueByKey("PublishData.Applications");if(d)return ja.GetKeys(d);
return[]},GetDisabledApplicationList:function(){var d=[],g=p.GetValueByKey("PublishData.Applications");if(g)for(var i in g){var m=g[i].Enabled;m!==void 0&&!m&&d.push(i)}return d},Reset:function(){n.Reset()},_LoadKey:function(d){if(/^Applications\//.test(d)){var g=d.split("/")[1];p._LoadAndCacheApplicationConfig(g)}else if(/^PublishData(?:\/.+)?$/.test(d))p._LoadAndCachePublishData();else return null;return n.Root.TryOpenKey(d)},_LoadAndCachePublishData:function(){n.PublishDataLoaded=true;var d=n.Load(p.GetPublishDataLocation());
d&&n.Root.CreateKey("PublishData").Extend(d)},_LoadAndCacheApplicationConfig:function(d,g){var i=p.GetApplicationKey(d),m=n.Root.CreateKey(i),t=ga.ApplicationNameFromNsName(d),E=C.TryGetApplication(t);m.Extend(E?E.ConfigDefaults:V.prototype.ConfigDefaults);g=g!=null?g+"configdata.json.js":p.GetApplicationConfigDataLocation(t);if(t=n.Load(g)){(i=B.FindKey(t,i))&&m.Extend(i);m.CreateKey("ConfigData").Extend(t)}return m}};if(!Function.prototype.bind)Function.prototype.bind=function(d){if(typeof this!==
"function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var g=Array.prototype.slice.call(arguments,1),i=this,m=function(){},t=function(){return i.apply(this instanceof m&&d?this:d,g.concat(Array.prototype.slice.call(arguments)))};m.prototype=this.prototype;t.prototype=new m;return t};var u=false,G={callBack:null,appName:"",appExtName:"",parts:[],originalResultSet:{rs:{}},currentResultSet:{},currentResultSetBeforeCutOff:{},indexMap:{},index:0,partNumber:0,
published:false,weight:100,StartSearch:function(d,g,i,m){if(m)this.callBack=m;this.appName=d;this.appExtName=g;p.SetContentUrl("../");this.published=p.GetValueByKey("PublishData/Applications/"+this.appExtName)?true:false;if(!this.published){P("SearchProcessor.StartSearch","not published: "+this.appName);return this._Finish()}this.parts=i;this.partNumber=this.parts.length;this.weight=Math.round(100/this.partNumber);this.index<this.partNumber&&this.ProcessPart()},_Finish:function(){this.currentResultSetBeforeCutOff.rs=
[];this.currentResultSet.rs=[];this.Finish()},ProcessPart:function(){var d=this.appName+"$"+fa.MyEscape(this.parts[this.index]);P("SearchProcessor.ProcessPart","parts["+this.index+"] = "+d);try{SearchDBs.g.Search(d,true,this.SearchEnded.bind(this))}catch(g){P("SearchProcessor.ProcessPart","SearchDBs['g'].Search exception = "+g.message?g.message:g)}},SearchEnded:function(d){P("SearchProcessor.SearchEnded","original result = "+k(d.rs));var g=o(void 0,d);P("SearchProcessor.SearchEnded","this.index = "+
this.index);if(!this.currentResultSet.rs)this.currentResultSet=g;if(this.currentResultSet.rs.length==0&&d.rs.length>0)for(var i=0;i<g.rs.length;i++)g.rs[i].weight=this.weight;P("SearchProcessor.SearchEnded","before combine = "+k(this.currentResultSet.rs));this.currentResultSet.Combine(g,this.weight);P("SearchProcessor.SearchEnded","after combine = "+k(this.currentResultSet.rs));this.originalResultSet.rs[this.parts[this.index]]=d.rs;P("SearchProcessor.SearchEnded","originalresultset = "+k(this.originalResultSet.rs));
this.index++;this.index<this.partNumber?this.ProcessPart():this.EndSearch()},EndSearch:function(){P("SearchProcessor.EndSearch","Final Result = "+k(this.currentResultSet.rs));this.currentResultSetBeforeCutOff=o(void 0,this.currentResultSet);var d=p.GetValueByKey("PublishData/Applications/"+this.appExtName+"/SmartMatch");P("SearchProcessor.EndSearch","appSection = "+k(d));this.MaxSearch=d.MaxSearch;this.Threshold=d.Threshold;this.MinScore=d.MinScore;P("SearchProcessor.EndSearch","maxSearch = "+this.MaxSearch+
" threshold = "+this.Threshold+" minScore = "+this.MinScore);this.HighScore=this.currentResultSet.GetMaxWeight();P("SearchProcessor.EndSearch","highScore = "+this.HighScore);this.CutOffLimit=Math.round(Math.max(this.MinScore,this.Threshold/100*this.HighScore));P("SearchProcessor.EndSearch","cutofflimit = "+this.CutOffLimit);this.currentResultSet.CutOffByLimit(this.CutOffLimit);P("SearchProcessor.EndSearch","Final Result after cutoff = "+k(this.currentResultSet.rs));P("SearchProcessor.EndSearch","Original Result = "+
k(this.originalResultSet.rs));this.Finish()},ShowTestResults:function(){var d={};d.Application=this.appName;d.MinScore=this.MinScore;d.MaxSearch=this.MaxSearch;d.Threshold=this.Threshold;d.CutOffLimit=this.CutOffLimit;d.currentResultSetBeforeCutOff=this.currentResultSetBeforeCutOff;d.partNumber=this.partNumber;d.parts=this.parts;d.published=this.published;d.originalResultSet=this.originalResultSet;ia.PostMessage(window.parent,"oraupk-debuginfo_searchresult",{data:d})},Finish:function(){F.CheckTestMode(this);
if(this.callBack){for(var d=0;d<this.currentResultSet.rs.length;d++)this.currentResultSet.rs[d].weight/=100;SearchProcess_Show(false);this.callBack(this.currentResultSet)}},__:void 0},F={_timer:null,loadCounter:0,searchproc:null,CheckTestMode:function(d){this.searchproc=d;this.loadCounter=0;F._timer=setInterval(function(){F.loadCounter++;if(F.loadCounter>100)clearInterval(F._timer);else if(window.UserPrefs)if(window.UserPrefs&&window.UserPrefs.EnableShowDiagnostics||window.Debug&&window.Debug.is_ta_debug){clearInterval(F._timer);
F.searchproc&&F.searchproc.ShowTestResults()}},100)},__:void 0};window.SearchSM=function(d,g){P("SearchSM","node = "+k(d));P("SearchSM","callBack = "+g);var i=d?d[0].App:null,m=d?d[0].AppExt||i:null,t=d?d.slice(1):null;if(!i&&!m){P("SearchSM","invalid data");return G._Finish()}P("SearchSM","appName = "+i+" appExtName = "+m);P("SearchSM","parts = "+k(t));G.StartSearch(i,m,t,g)};return ia}();
