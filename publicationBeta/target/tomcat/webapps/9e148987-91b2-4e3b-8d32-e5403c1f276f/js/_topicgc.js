/*
Copyright © 1998, 2014, Oracle and/or its affiliates.  All rights reserved.
*/
function filterHTML(c){c=replaceString("&","&amp;",c);c=replaceString("<","&lt;",c);return c=replaceString(">","&gt;",c)}function replaceString(c,d,e){if(e!=null)return e.replace(RegExp(c,"g"),d)}function PtToPx(c,d){return Math.floor(c*d/72)}function PxToPt(c,d){return c/d*72}function Bool(c){if(typeof c=="boolean")return c;if(typeof c=="string"){if(c.toLowerCase()=="false")return false;if(c.toLowerCase()=="true")return true}return null}
function getDPICookie(){var c=new Cookie(document,"UPKDpiDailyWarning","today","/",null,false);c.Load();if(c.DPIdailyWarning==1)return true;c.DPIdailyWarning=1;c.Store();return false}var KeepAlive_url_ping=null,KeepAlive_url_closeserver=null,KeepAlive_finished=false,KeepAlive_timer=null;
function KeepAlive_Init(c){if(KeepAlive_url_ping==null){KeepAlive_url_ping=c+"xml/ping.xml";KeepAlive_url_closeserver=c+"closeserver.xml";KeepAlive_finished=false;KeepAlive_timer=setInterval("KeepAlive_Ping()",2E3)}}function KeepAlive_DoNotSendClose(){KeepAlive_finished=true}
function KeepAlive_Close(){if(KeepAlive_url_ping!=null)if(KeepAlive_finished!=true){KeepAlive_Track("close...");KeepAlive_finished=true;clearTimeout(KeepAlive_timer);LoadXMLDoc(KeepAlive_url_closeserver,KeepAlive_Return_OK,KeepAlive_Return_OK,"PING",true)}}function KeepAlive_Ping(){KeepAlive_Track("ping...");KeepAlive_finished!=true&&LoadXMLDoc(KeepAlive_url_ping,KeepAlive_Return_OK,KeepAlive_Return_Error,"PING",false)}function KeepAlive_Return_OK(){KeepAlive_Track("ping returned")}
function KeepAlive_Return_Error(){KeepAlive_Track("error returned");if(KeepAlive_finished!=true){KeepAlive_finished=true;clearInterval(KeepAlive_timer);alert(R_playexe_comm_error)}}var _KeepAlive_window=null,_KeepAlive_track=false;function KeepAlive_Track(c){if(_KeepAlive_track!=false){if(_KeepAlive_window==null)_KeepAlive_window=window.open();_KeepAlive_window.document.writeln(c+"<br/>")}}
var Escape=function(){function c(g,l){for(var m="",j=0;j<g.length;j++){var p=g.substr(j,1),t;if(l==0)t=p>="0"&&p<="9"||p>="a"&&p<="z"||p>="A"&&p<="Z";else{a:{t=f.length;for(var r=0;r<t;r++)if(p==f[r]){t=true;break a}t=p==e?true:false}t=!t}if(t)m+=p;else{p=g.charCodeAt(j);p="0000"+p.toString(16).toUpperCase();m+=(l==0?"$":e)+p.substr(p.length-4)}}return m}function d(g,l){for(var m="",j=false,p=0;p<g.length;p++){var t;if(j){t=g.substr(p,4);m+=String.fromCharCode(parseInt("0x"+t));p+=3;j=false}else{t=
g.substr(p,1);if(t==(l==0?"$":e))j=true;else m+=t}}return m}var e="/",f=["<",">",'"',"'","%",";","(",")","&","+"];return{SafeUriEscape:function(g){return c(g,1)},SafeUriUnEscape:function(g){return d(g,1)},MyEscape:function(g){return c(g,0)},MyUnEscape:function(g){return d(g,0)}}}();function UrlParser(){this.params=[];this.safemode=false}
UrlParser.prototype.Clone=function(){var c=new UrlParser;c.params=[];c.safemode=this.safemode;for(var d in this.params)if(this.params[d]!=null)c.params[d]=this.params[d];return c};
UrlParser.prototype.Parse=function(){var c,d;c=document.location.hash.substring(1);c=c.split("&");if(c.length==0||c[0]==""){c=document.location.search.substring(1);c=c.split("&")}if(c.length>0)if(c[0].toLowerCase().substr(0,3)=="su="){this.safemode=true;c=c[0].substr(3);c=Escape.SafeUriUnEscape(c);c=c.split("&")}for(var e=0;e<c.length;e++){d=c[e];if(d.length!=0){var f=d.split("=");if(f.length==2)this.params[f[0].toLowerCase()]=f[1];else if(f.length<2)this.params[f[0].toLowerCase()]="";else this.params[f[0].toLowerCase()]=
d.substr(f[0].length+1)}}};UrlParser.prototype.GetSafeMode=function(){return this.safemode};UrlParser.prototype.SetSafeMode=function(c){this.safemode=c};UrlParser.prototype.GetParameter=function(c){return this.params[c.toLowerCase()]};UrlParser.prototype.AddParameter=function(c,d){this.params[c.toLowerCase()]=d};UrlParser.prototype.RemoveParameter=function(c){this.params[c.toLowerCase()]=null};UrlParser.prototype.ClearParameterList=function(){this.params=null;this.params=[]};
UrlParser.prototype.BuildParameterList=function(c){c="";var d=true,e;for(e in this.params){var f=this.params[e];if(f!=null){if(d==false)c+="&";d=false;c+=f.length==0?e:e+"="+this.params[e]}}if(this.safemode)c="su="+Escape.MyEscape(c);return c};
UrlParser.prototype.GetCorrectUrl=function(c,d){if(!this.safemode)return c;var e,f=c.indexOf("#");if(f==-1)f=c.indexOf("?");if(f>=0){var g=c.substring(f+1);e=g.split("&");if(e[0].toLowerCase().substr(0,3)=="su=")return c;return c.substring(0,f+1)+"su="+Escape.SafeUriEscape(g)}else return c+(d?"":"?su=")};function UnescapeQuotes(c){return c.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}
var swfobject=function(){function c(){if(!V){try{var n=B.getElementsByTagName("body")[0].appendChild(B.createElement("span"));n.parentNode.removeChild(n)}catch(o){return}V=true;n=aa.length;for(var q=0;q<n;q++)aa[q]()}}function d(n){if(V)n();else aa[aa.length]=n}function e(n){if(typeof K.addEventListener!=C)K.addEventListener("load",n,false);else if(typeof B.addEventListener!=C)B.addEventListener("load",n,false);else if(typeof K.attachEvent!=C)N(K,"onload",n);else if(typeof K.onload=="function"){var o=
K.onload;K.onload=function(){o();n()}}else K.onload=n}function f(){var n=B.getElementsByTagName("body")[0],o=B.createElement(M);o.setAttribute("type",O);var q=n.appendChild(o);if(q){var u=0;(function(){if(typeof q.GetVariable!=C){try{var v=q.GetVariable("$version")}catch(F){}if(v){v=v.split(" ")[1].split(",");z.pv=[parseInt(v[0],10),parseInt(v[1],10),parseInt(v[2],10)]}}else if(u<10){u++;setTimeout(arguments.callee,10);return}n.removeChild(o);q=null;g()})()}else g()}function g(){var n=S.length;if(n>
0)for(var o=0;o<n;o++){var q=S[o].id,u=S[o].callbackFn,v={success:false,id:q};if(z.pv[0]>0){var F=A(q);if(F)if(L(S[o].swfVersion)&&!(z.wk&&z.wk<312)){G(q,true);if(u){v.success=true;v.ref=l(q);u(v)}}else if(S[o].expressInstall&&m()){v={};v.data=S[o].expressInstall;v.width=F.getAttribute("width")||"0";v.height=F.getAttribute("height")||"0";if(F.getAttribute("class"))v.styleclass=F.getAttribute("class");if(F.getAttribute("align"))v.align=F.getAttribute("align");var D={};F=F.getElementsByTagName("param");
for(var I=F.length,J=0;J<I;J++)if(F[J].getAttribute("name").toLowerCase()!="movie")D[F[J].getAttribute("name")]=F[J].getAttribute("value");j(v,D,q,u)}else{p(F);u&&u(v)}}else{G(q,true);if(u){if((q=l(q))&&typeof q.SetVariable!=C){v.success=true;v.ref=q}u(v)}}}}function l(n){var o=null;if((n=A(n))&&n.nodeName=="OBJECT")if(typeof n.SetVariable!=C)o=n;else if(n=n.getElementsByTagName(M)[0])o=n;return o}function m(){return!ba&&L("6.0.65")&&(z.win||z.mac)&&!(z.wk&&z.wk<312)}function j(n,o,q,u){ba=true;ha=
u||null;ja={success:false,id:q};var v=A(q);if(v){if(v.nodeName=="OBJECT"){Y=t(v);ca=null}else{Y=v;ca=q}n.id=W;if(typeof n.width==C||!/%$/.test(n.width)&&parseInt(n.width,10)<310)n.width="310";if(typeof n.height==C||!/%$/.test(n.height)&&parseInt(n.height,10)<137)n.height="137";B.title=B.title.slice(0,47)+" - Flash Player Installation";u=z.ie&&z.win?"ActiveX":"PlugIn";u="MMredirectURL="+K.location.toString().replace(/&/g,"%26")+"&MMplayerType="+u+"&MMdoctitle="+B.title;if(typeof o.flashvars!=C)o.flashvars+=
"&"+u;else o.flashvars=u;if(z.ie&&z.win&&v.readyState!=4){u=B.createElement("div");q+="SWFObjectNew";u.setAttribute("id",q);v.parentNode.insertBefore(u,v);v.style.display="none";(function(){v.readyState==4?v.parentNode.removeChild(v):setTimeout(arguments.callee,10)})()}r(n,o,q)}}function p(n){if(z.ie&&z.win&&n.readyState!=4){var o=B.createElement("div");n.parentNode.insertBefore(o,n);o.parentNode.replaceChild(t(n),o);n.style.display="none";(function(){n.readyState==4?n.parentNode.removeChild(n):setTimeout(arguments.callee,
10)})()}else n.parentNode.replaceChild(t(n),n)}function t(n){var o=B.createElement("div");if(z.win&&z.ie)o.innerHTML=n.innerHTML;else if(n=n.getElementsByTagName(M)[0])if(n=n.childNodes)for(var q=n.length,u=0;u<q;u++)!(n[u].nodeType==1&&n[u].nodeName=="PARAM")&&n[u].nodeType!=8&&o.appendChild(n[u].cloneNode(true));return o}function r(n,o,q){var u,v=A(q);if(z.wk&&z.wk<312)return u;if(v){if(typeof n.id==C)n.id=q;if(z.ie&&z.win){var F="",D;for(D in n)if(n[D]!=Object.prototype[D])if(D.toLowerCase()==
"data")o.movie=n[D];else if(D.toLowerCase()=="styleclass")F+=' class="'+n[D]+'"';else if(D.toLowerCase()!="classid")F+=" "+D+'="'+n[D]+'"';D="";for(var I in o)if(o[I]!=Object.prototype[I])D+='<param name="'+I+'" value="'+o[I]+'" />';v.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+F+">"+D+"</object>";da[da.length]=n.id;u=A(n.id)}else{I=B.createElement(M);I.setAttribute("type",O);for(var J in n)if(n[J]!=Object.prototype[J])if(J.toLowerCase()=="styleclass")I.setAttribute("class",
n[J]);else J.toLowerCase()!="classid"&&I.setAttribute(J,n[J]);for(F in o)if(o[F]!=Object.prototype[F]&&F.toLowerCase()!="movie"){n=I;D=F;J=o[F];q=B.createElement("param");q.setAttribute("name",D);q.setAttribute("value",J);n.appendChild(q)}v.parentNode.replaceChild(I,v);u=I}}return u}function H(n){var o=A(n);if(o&&o.nodeName=="OBJECT")if(z.ie&&z.win){o.style.display="none";(function(){if(o.readyState==4){var q=A(n);if(q){for(var u in q)if(typeof q[u]=="function")q[u]=null;q.parentNode.removeChild(q)}}else setTimeout(arguments.callee,
10)})()}else o.parentNode.removeChild(o)}function A(n){var o=null;try{o=B.getElementById(n)}catch(q){}return o}function N(n,o,q){n.attachEvent(o,q);X[X.length]=[n,o,q]}function L(n){var o=z.pv;n=n.split(".");n[0]=parseInt(n[0],10);n[1]=parseInt(n[1],10)||0;n[2]=parseInt(n[2],10)||0;return o[0]>n[0]||o[0]==n[0]&&o[1]>n[1]||o[0]==n[0]&&o[1]==n[1]&&o[2]>=n[2]?true:false}function P(n,o,q,u){if(!(z.ie&&z.mac)){var v=B.getElementsByTagName("head")[0];if(v){q=q&&typeof q=="string"?q:"screen";if(u)ia=Q=null;
if(!Q||ia!=q){u=B.createElement("style");u.setAttribute("type","text/css");u.setAttribute("media",q);Q=v.appendChild(u);if(z.ie&&z.win&&typeof B.styleSheets!=C&&B.styleSheets.length>0)Q=B.styleSheets[B.styleSheets.length-1];ia=q}if(z.ie&&z.win)Q&&typeof Q.addRule==M&&Q.addRule(n,o);else Q&&typeof B.createTextNode!=C&&Q.appendChild(B.createTextNode(n+" {"+o+"}"))}}}function G(n,o){if(ka){var q=o?"visible":"hidden";if(V&&A(n))A(n).style.visibility=q;else P("#"+n,"visibility:"+q)}}function E(n){return/[\\\"<>\.;]/.exec(n)!=
null&&typeof encodeURIComponent!=C?encodeURIComponent(n):n}var C="undefined",M="object",O="application/x-shockwave-flash",W="SWFObjectExprInst",K=window,B=document,T=navigator,la=false,aa=[function(){la?f():g()}],S=[],da=[],X=[],Y,ca,ha,ja,V=false,ba=false,Q,ia,ka=true,z=function(){var n=typeof B.getElementById!=C&&typeof B.getElementsByTagName!=C&&typeof B.createElement!=C,o=T.userAgent.toLowerCase(),q=T.platform.toLowerCase(),u=q?/win/.test(q):/win/.test(o);q=q?/mac/.test(q):/mac/.test(o);o=/webkit/.test(o)?
parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false;var v=!+"\u000b1",F=[0,0,0],D=null;if(typeof T.plugins!=C&&typeof T.plugins["Shockwave Flash"]==M){if((D=T.plugins["Shockwave Flash"].description)&&!(typeof T.mimeTypes!=C&&T.mimeTypes[O]&&!T.mimeTypes[O].enabledPlugin)){la=true;v=false;D=D.replace(/^.*\s+(\S+\s+\S+$)/,"$1");F[0]=parseInt(D.replace(/^(.*)\..*$/,"$1"),10);F[1]=parseInt(D.replace(/^.*\.(.*)\s.*$/,"$1"),10);F[2]=/[a-zA-Z]/.test(D)?parseInt(D.replace(/^.*[a-zA-Z]+(.*)$/,
"$1"),10):0}}else if(typeof K.ActiveXObject!=C)try{var I=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(I)if(D=I.GetVariable("$version")){v=true;D=D.split(" ")[1].split(",");F=[parseInt(D[0],10),parseInt(D[1],10),parseInt(D[2],10)]}}catch(J){}return{w3:n,pv:F,wk:o,ie:v,win:u,mac:q}}();(function(){if(z.w3){if(typeof B.readyState!=C&&B.readyState=="complete"||typeof B.readyState==C&&(B.getElementsByTagName("body")[0]||B.body))c();if(!V){typeof B.addEventListener!=C&&B.addEventListener("DOMContentLoaded",
c,false);if(z.ie&&z.win){B.attachEvent("onreadystatechange",function(){if(B.readyState=="complete"){B.detachEvent("onreadystatechange",arguments.callee);c()}});K==top&&function(){if(!V){try{B.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,0);return}c()}}()}z.wk&&function(){V||(/loaded|complete/.test(B.readyState)?c():setTimeout(arguments.callee,0))}();e(c)}}})();(function(){z.ie&&z.win&&window.attachEvent("onunload",function(){for(var n=X.length,o=0;o<n;o++)X[o][0].detachEvent(X[o][1],
X[o][2]);n=da.length;for(o=0;o<n;o++)H(da[o]);for(var q in z)z[q]=null;z=null;for(var u in swfobject)swfobject[u]=null;swfobject=null})})();return{registerObject:function(n,o,q,u){if(z.w3&&n&&o){var v={};v.id=n;v.swfVersion=o;v.expressInstall=q;v.callbackFn=u;S[S.length]=v;G(n,false)}else u&&u({success:false,id:n})},getObjectById:function(n){if(z.w3)return l(n)},embedSWF:function(n,o,q,u,v,F,D,I,J,Z){var ea={success:false,id:o};if(z.w3&&!(z.wk&&z.wk<312)&&n&&o&&q&&u&&v){G(o,false);d(function(){q+=
"";u+="";var U={};if(J&&typeof J===M)for(var R in J)U[R]=J[R];U.data=n;U.width=q;U.height=u;R={};if(I&&typeof I===M)for(var fa in I)R[fa]=I[fa];if(D&&typeof D===M)for(var ga in D)if(typeof R.flashvars!=C)R.flashvars+="&"+ga+"="+D[ga];else R.flashvars=ga+"="+D[ga];if(L(v)){fa=r(U,R,o);U.id==o&&G(o,true);ea.success=true;ea.ref=fa}else if(F&&m()){U.data=F;j(U,R,o,Z);return}else G(o,true);Z&&Z(ea)})}else Z&&Z(ea)},switchOffAutoHideShow:function(){ka=false},ua:z,getFlashPlayerVersion:function(){return{major:z.pv[0],
minor:z.pv[1],release:z.pv[2]}},hasFlashPlayerVersion:L,createSWF:function(n,o,q){if(z.w3)return r(n,o,q)},showExpressInstall:function(n,o,q,u){z.w3&&m()&&j(n,o,q,u)},removeSWF:function(n){z.w3&&H(n)},createCSS:function(n,o,q,u){z.w3&&P(n,o,q,u)},addDomLoadEvent:d,addLoadEvent:e,getQueryParamValue:function(n){var o=B.location.search||B.location.hash;if(o){if(/\?/.test(o))o=o.split("?")[1];if(n==null)return E(o);o=o.split("&");for(var q=0;q<o.length;q++)if(o[q].substring(0,o[q].indexOf("="))==n)return E(o[q].substring(o[q].indexOf("=")+
1))}return""},expressInstallCallback:function(){if(ba){var n=A(W);if(n&&Y){n.parentNode.replaceChild(Y,n);if(ca){G(ca,true);if(z.ie&&z.win)Y.style.display="block"}ha&&ha(ja)}ba=false}}}}(),_simulate_120_dpi=false;function IsTouchDevice(){return upk.browserInfo.isTouchDevice()}var upk=upk||{};
(function(c){var d="",e,f=false,g,l=false,m=false;c.getAgentInfo=function(){return typeof document.documentMode!="undefined"?navigator.userAgent+" - "+document.documentMode:navigator.userAgent};c.isSupportedBrowser=function(){var r=false;if(d=="MSIE"&&(e>=8||f&&g>=4))r=true;if(d=="Firefox"&&(e==24||e>=27))r=true;if(d=="Safari"&&e>=6)r=true;if(d=="Chrome"&&e>=32)r=true;if(c.isiOS())r=true;return r};c.isHardStop=function(){return d=="MSIE"&&e<=6};c.isMacOs=function(){return l};c.isFF3=function(){return m};
c.isFF=function(){return d=="Firefox"};c.isFF4=function(){return d=="Firefox"&&e==4};c.checkFFVersion=function(r){return d=="Firefox"&&e==r};c.isSafari=function(){return d=="Safari"||d=="Chrome"};c.isChrome=function(){return d=="Chrome"};c.isExplorer=function(){return d=="MSIE"};c.isIEVersion=function(r){return d=="MSIE"&&e==r};c.isIEQuirks=function(){if(c.isExplorer()==false)return false;return document.compatMode!=="CSS1Compat"};c.isIE8=function(){if(d!="MSIE")return false;return e==8&&f&&g==4};
c.isIE9=function(){if(d!="MSIE")return false;if(e==9&&f&&g==5)return true;if(e==7&&f&&g==5)return true;return f&&g==6&&(e!=10||document.documentMode!=10)};c.isIE10=function(){if(d!="MSIE")return false;return e==10&&f&&g==6&&document.documentMode==10};c.isIE10Compatibility=function(){if(d!="MSIE")return false;return f&&g==6&&(e!=10||document.documentMode!=10)};c.isIE10orHigher=function(){if(d!="MSIE")return false;return e>=10&&f&&g>=6&&document.documentMode>=10};c.isIE11=function(){if(d!="MSIE")return false;
return e==11&&f&&g==7&&document.documentMode==11};c.isIE11Compatibility=function(){if(d!="MSIE")return false;return f&&g==7&&(e!=11||document.documentMode!=11)};c.isActiveXEnabled=function(){var r=null,H="";try{new ActiveXObject("")}catch(A){H=A.name}try{r=!!new ActiveXObject("htmlfile")}catch(N){r=false}return H!="ReferenceError"&&r==false?false:true};c.isIE10Modern=function(){if(c.isIE10()==false)return false;return!c.isActiveXEnabled()};c.isiOS=function(){var r=navigator.platform;if(r==="iPad"||
r==="iPad Simulator"||r==="iPhone"||r==="iPod")return true;if(c.isChrome()&&c.isTouchDevice())return true;return false};c.isiOS5=function(){return navigator.userAgent.indexOf("CPU OS 5_")>=0};c.isiOS6=function(){return navigator.userAgent.indexOf("CPU OS 6_")>=0};c.isiOS7=function(){return navigator.userAgent.indexOf("CPU OS 7_")>=0};c.isTouchDevice=function(){return"ontouchstart"in window?window:null};c.isSoundSupported=function(){if(c.isiOS())return true;if(window.location.href.substr(0,7).toLowerCase()==
"file://")return false;if(swfobject.getFlashPlayerVersion().major>0)return true;return false};var j=navigator.userAgent,p=-1;if(j.indexOf("OPR")>=0){d="Opera";p=j.indexOf("OPR")+4}else if(j.indexOf("Chrome")>=0){d="Chrome";p=j.indexOf("Chrome")+7}else if(j.indexOf("Opera")>=0){d="Opera";p=j.indexOf("Opera")+6}else if(j.indexOf("Firefox")>=0){d="Firefox";p=j.indexOf("Firefox")+8}else if(j.indexOf("Safari")>=0){d="Safari";p=j.indexOf("Version")+8}else if(j.indexOf("MSIE")>=0){d="MSIE";p=j.indexOf("MSIE")+
5;var t=j.indexOf("Trident/");if(t>=0){f=true;g=parseInt(j.substr(t+8))}}else if(j.indexOf(" rv:")>=0){d="MSIE";p=j.indexOf(" rv:")+3;t=j.indexOf("Trident/");if(t>=0){f=true;g=parseInt(j.substr(t+8))}}else{d="";e=0}if(d!=""){e=parseInt(j.substr(p));if(isNaN(e)){p++;e=parseInt(j.substr(p))}parseInt(j.substr(p+2,1))}if(d=="Safari"&&isNaN(e))e=5;l=j.indexOf("Macintosh")>=0;m=d=="Firefox"&&j.indexOf("Firefox/3")>0})(upk.browserInfo={});function getDIV(c){return document.getElementById(c)}
function getDIVstyle(c){try{return document.getElementById(c).style}catch(d){return null}}function shiftTo(c,d,e){c=getDIVstyle(c);c.left=d+"px";c.top=e+"px"}function getUniWidth(c){return c.offsetWidth}function getUniHeight(c){return c.offsetHeight}function getClientWidth(c){return c.offsetWidth}function getClientHeight(c){return c.offsetHeight}function getObjHeight(c){return getDIV(c).offsetHeight}function getObjWidth(c){return getDIV(c).offsetWidth}
function getObjLeft(c){try{var d=getDIVstyle(c);return d.pixelLeft?d.pixelLeft:d.left!=""?parseInt(d.left):document.getElementById(c).offsetLeft}catch(e){return parseInt(c.offsetLeft)}}function getObjTop(c){try{var d=getDIVstyle(c);return d.pixelTop?d.pixelTop:d.top!=""?parseInt(d.top):document.getElementById(c).offsetTop}catch(e){return parseInt(c.offsetTop)}}function getInsideWindowWidth(){return window.innerWidth?window.innerWidth:document.body.clientWidth}
function getInsideWindowHeight(){return window.innerHeight?window.innerHeight:document.body.clientHeight}function getScrollLeft(){return window.pageXOffset||window.pageXOffset==0?window.pageXOffset:document.body.scrollLeft}function getScrollTop(){return window.pageYOffset||window.pageYOffset==0?window.pageYOffset:document.body.scrollTop}
function show(c,d){getDIVstyle(c).visibility="visible";if(d&&upk.browserInfo.isiOS())try{playMode=="S"&&showActObj.type=="Input"&&$("#"+c+" input").attr("readonly",true)}catch(e){}}function hide(c){getDIVstyle(c).visibility="hidden"}var __DPIwidth=0;
function getDpiInfo(){var c=document.getElementById("DPIInfoDiv");if(c!=null){__DPIwidth=c.clientWidth;if(__DPIwidth==0)__DPIwidth=96;__DPIwidth!=0&&document.getElementsByTagName("body")[0].removeChild(c)}return _simulate_120_dpi==true?120:__DPIwidth}function initDpiInfo(){document.write('<div id="DPIInfoDiv" style="visibility:hidden; width: 72pt; height: 1pt;">DPIINFODIV</div>')}function checkIEDPI(){return true}function Get_Element(c){return document.getElementById(c)}
function touch(c){if(c.originalEvent.touches&&c.originalEvent.touches.length)return c.originalEvent.touches[0];else if(c.originalEvent.changedTouches&&c.originalEvent.changedTouches.length)return c.originalEvent.changedTouches[0]}function isNavBar(){return typeof navBar!=="undefined"}var dlg_parent,dialogh_ref,device_dpi,dialog2_html,modal_dialog,dlg_width,dlg_height,dlg_autosizeheight=false,callback_end="",isopened=false,dlg_context="",grayPosition,overflowValue="",resizefn="";
function setParent(c){dlg_parent=c}function Click1(){closeDialog();$("#graydiv").remove()}function getDPI(){return device_dpi}function setWidth(c,d){$(c).css("width",d)}function setHeight(c,d){$(c).css("height",d)}function setPadding(c,d,e){d="<div style='padding:"+d+"px'";if(e&&e!="")d+=" class='"+e+"'";d+=">"+c+"</div>";return d}
function getContentSize(c){var d={width:0,height:0};c=$("<div style='display:visible;position:absolute;top:0px;left:0px;' id='04A98DB973UPK'>"+c+"</div>");$("body").append(c);d.width=$("#04A98DB973UPK").outerWidth(true);d.height=$("#04A98DB973UPK").outerHeight(true);$("#04A98DB973UPK").remove();return d}function showDialog3(c,d,e,f,g,l,m,j,p){showDialog2(c,d,e,f,g,l,m,j);$("body").append("<div id='04A98DB974UPK'>"+p+"</div>")}
function showDialog2(c,d,e,f,g,l,m,j){dlg_autosizeheight=g==-1?true:false;dialog2_html=c;showDialog("",d,e,f,g,l,m,"",j)}
(function(c){c.fn.drags=function(d){d=c.extend({handle:"",cursor:"move"},d);var e=c("<div>",{id:"ehandler",css:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"none",cursor:d.cursor,"z-index":999,"background-color":"red",opacity:"0",filter:"alpha(opacity=0)"}}).appendTo(document.body);return this.addClass("draggable").each(function(){$drag=c(this);(d.handle===""?$drag:$drag.find(d.handle)).addClass("active-handle").on("mousedown",function(f){if(c(f.target).is(c(this))){$drag.css("cursor",
d.cursor);f.preventDefault();$drag.css("z-index");var g=$drag.outerHeight(),l=$drag.outerWidth(),m=$drag.offset().top+g-f.pageY,j=$drag.offset().left+l-f.pageX;e.show().on("mousemove",function(p){p.preventDefault();y=p.pageY+m-g;x=p.pageX+j-l;if(y<0)y=0;if(x<0)x=0;if(window.innerWidth>$drag.outerWidth())if(x>window.innerWidth-$drag.outerWidth())x=window.innerWidth-$drag.outerWidth();if(window.innerHeight>$drag.outerHeight())if(y>window.innerHeight-$drag.outerHeight())y=window.innerHeight-$drag.outerHeight();
c(".draggable").offset({top:y,left:x})}).add(document).on("mouseup",function(p){$drag.css("cursor","default");p.preventDefault();c(this).off("mousemove mouseup");e.hide()})}})})}})(jQuery);
function showDialog(c,d,e,f,g,l,m,j,p){isopened=true;m=96;if(d!=-1)d=PtToPx(d,m);if(e!=-1)e=PtToPx(e,m);f=PtToPx(f,m);g=PtToPx(g,m);dlg_width=f;dlg_height=g;device_dpi=m;dialogh_ref=c;modal_dialog=l;m=$(document.body).scrollLeft();var t=$(document.body).scrollTop();if(m==0&&t==0&&upk.browserInfo.isiOS()){m=parent.window.pageXOffset;t=parent.window.pageYOffset}if(d==-1||e==-1){e=d=0;if(window.innerWidth)if(upk.browserInfo.isiOS()){d=parent.window.innerWidth;e=parent.window.innerHeight}else{d=window.innerWidth;
e=window.innerHeight}else if(document.documentElement){d=document.documentElement.scrollWidth;e=document.documentElement.scrollHeight}d=Math.floor(d/2-f/2+m);e=Math.floor(e/2-g/2+t)}if(p)p=dialogh_ref;if(document.body.scrollHeight<g)e=0;if(typeof lmsMode!=="undefined")if(lmsMode&&lmsMode=="LMS"&&upk.browserInfo.isiOS())e=20;p="top:0;left:0;";if(upk.browserInfo.isIEQuirks()){grayPosition="absolute";p="top:"+t+"px;left:"+m+"px;";overflowValue=$(document.body).css("overflow");overflowValue==="auto"&&
$(document.body).css("overflow","hidden");document.body.scroll="no";resizefn=window.onresize;window.onresize=""}else grayPosition="fixed";l?$(document.body).append('<div id="graydiv" scrolling="no" class="pointerdiv" style="position:'+grayPosition+";display:none;z-index: 99;"+p+'bottom:0;right:0;"></div>'):$(document.body).append('<div id="graydiv" scrolling="no" class="pointerdiv2" style="position:'+grayPosition+";display:none;z-index: 99;"+p+'bottom:0;right:0;" onclick="Click1();"></div>');$("#graydiv").on("touchmove",
function(){return false});$("input").on("focus",function(){this.blur()});$("#graydiv").show();style="left:"+d+"px; top:"+e+"px; width: "+f+"px; height: "+g+"px;";wwpx=f-60;hhpx=g-60;if(upk.browserInfo.isIEQuirks()&&upk.browserInfo.isIE9()||upk.browserInfo.isIEQuirks()&&upk.browserInfo.isIE8()){wwpx-=20;hhpx-=20}innerstyle="width: "+wwpx+"px; height: "+hhpx+"px;";p="iossafefordesktop";if(IsTouchDevice())p="iossafe";m="../img/empty.gif";if(j)m=j+"img/empty.gif";if(l){$(document.body).append('<div class="desktopDialog" id="dialog" style="'+
style+'"><div id="closebtn" onclick="Click1();"><img id="closeimg" class="close_qualifier" src="'+m+'" alt="" width="16" /></div><div class="'+p+'" style="'+innerstyle+'"><iframe id="dialogBody" frameborder="0" scrolling="yes" src="'+c+'" style="width: 100%; height: 100%;margin:0px; padding:0px; position: absolute;top: 0px; left: 0px; background-color: white;"></iframe></div></div>');$("#dialog").drags();$("#dialog").on("touchmove",function(){return false})}else{innerstyle="width: "+f+"px; height: "+
g+"px;";p="../html/dialog2.html";$(document.body).append('<div class="noborderDialog" id="dialog" style="'+style+'"><div id="dialogBodyDiv" class="noBorderDialogDesktop" style="'+innerstyle+'"><iframe id="dialogBody" frameborder="0" scrolling="no" src="'+p+'" style="width: 100%; height: 100%;margin:0px; padding:0px; position: absolute;top: 0px; left: 0px; background-color: white;"></iframe></div></div>')}dlg_context!=""&&ctxHelper.SetContext(dlg_context)}function isOpenDialog(){return isopened}
function removeDiv(c){$(c).remove()}function appendDiv(c){$(document.body).append(c)}
function closeDialog(){$("#04A98DB974UPK").remove();$("#graydiv").remove();$("#dialog").remove();$("#ehandler").remove();if(dlg_context!=""){ctxHelper.SetPrevContext();dlg_context=""}if(upk.browserInfo.isIEQuirks()){if(overflowValue==="auto"){$(document.body).css("overflow",overflowValue);overflowValue=""}document.body.scroll="auto";window.onresize=resizefn;resizefn=""}isopened=false;if(dlg_parent)callback_end&&dlg_parent.eval(callback_end);else callback_end&&eval(callback_end);$("input").off("focus")}
function setOnCloseEvent(c){if(callback_end.indexOf(c)<0)callback_end=c+";"+callback_end}function getOnCloseEvent(){return callback_end}function getDialog2Content(){return dialog2_html}function setDlgCtx(c){dlg_context=c}var intPos=window.location.search.toLowerCase().indexOf("aicc_url"),intPos2=window.location.search.toLowerCase().indexOf("aicc_sid");function getOnlyPath(c){for(;c.indexOf("\\")!=-1;)c=c.replace("\\","/");return c.substr(0,c.lastIndexOf("/"))}
if(intPos>-1&&intPos2>-1){if(LmsConfig.AiccAppletPath==""){var currentPgPath=window.location.protocol+"//"+window.location.host+getOnlyPath(window.location.pathname);fullPath=currentPgPath+"/"+lms_path+"aicc"}else fullPath=LmsConfig.AiccAppletPath;document.write("<div style='position: absolute;'><applet NAME='GetHTTPPostData' codebase='"+fullPath+"' archive='gethttppostdata.jar' code='GetHTTPPostData' width='1' height='1' MAYSCRIPT><param name='permissions' value='sandbox' /></applet></div>")}
function InsertRuntimeAPI(c){if(Kpath_launch==false)setTimeout(c,1);else{var d=findKPathAPIFrame(window);if(d==null){d=document.createElement("iframe");d.id="KPATH_API_FRAME";d.style.display="none";document.body.appendChild(d);if(c)if(navigator.appName=="Microsoft Internet Explorer")d.attachEvent("onload",c);else d.onload=c;d.src=Kpath_Runtime_API}else setTimeout(c,1)}}
function findKPathAPIFrame(c){var d=null,e=0,f=c;try{for(;f!=null;){d=f.document.getElementById("KPATH_API_FRAME");if(d!=null)return d.contentWindow;e++;if(e>7)break;if(f===f.parent)break;f=f.parent}if(c.top.opener!=null)return findKPathAPIFrame(c.top.opener)}catch(g){}return null}var _GlobalLmsComFactory=null;function GetLmsComFactory(){_GlobalLmsComFactory==null&&alert(R_initializelmscom_not_called);return _GlobalLmsComFactory}
function CheckForLMSAPI(){if(_lmsMode=="LMS"&&!(_GlobalLmsComFactory.api_type=="scorm2004"||_GlobalLmsComFactory.api_type=="scorm12"||_GlobalLmsComFactory.api_type=="aicc"||_GlobalLmsComFactory.api_type=="kpath"&&findKPathAPIFrame(window)))alert(R_scorm_noapi);_lmsMode=="KPT"&&!findKPathAPIFrame(window)&&alert(R_scorm_noapi)}function InitializeLmsCom(){_GlobalLmsComFactory=new LmsComFactory(window.location.search)}
function LmsComFactory(c){this.api_type="none";this.launch_arg=c;this.aicc_sid=this.aicc_url="";this.scorm_api_2004=this.scorm_api_12=null;c=this.launch_arg.substring(1).split("&");lmslog.addEntry(0,"LmsComFactory","strArgs",c);for(var d=0;d<c.length;d++){strArg=c[d];var e;e=this.CheckParam(strArg,"aicc_url=");if(e!="")this.aicc_url=e.substr(0,4).toLowerCase()!="http"?LmsConfig.AiccUrlProtocol+e:e;else{e=this.CheckParam(strArg,"aicc_sid=");if(e!="")this.aicc_sid=e}}if(LmsConfig.ScormVersion!=="1.2")this.scorm_api_2004=
this.FindScorm2004API();if(this.scorm_api_2004==null&&LmsConfig.ScormVersion!=="2004")this.scorm_api_12=this.FindScorm12API();if(this.aicc_url!=""&&this.aicc_sid!="")this.api_type="aicc";else if(Kpath_launch==true)this.api_type="kpath";else if(this.scorm_api_2004!=null)this.api_type="scorm2004";else if(this.scorm_api_12!=null)this.api_type="scorm12"}
LmsComFactory.prototype.CreateLmsCom=function(){if(this.api_type=="aicc")return new LmsComAICC(this.aicc_url,this.aicc_sid);else if(this.api_type=="scorm2004")return new LmsComScorm2004;else if(this.api_type=="kpath"){var c=new LmsComKPath;c.API=this.scorm_api_2004;return c}else if(this.api_type=="scorm12")return new LmsComScorm12;return PlayerConfig.EnableCookies?new LmsComCookie:new LmsComBase};
LmsComFactory.prototype.FindScorm12API=function(){try{var c=this.FindWindowScorm12API(window);if(c==null&&top.window.opener!=null&&!top.window.opener.closed)c=this.FindWindowScorm12API(top.window.opener);return c}catch(d){return null}};LmsComFactory.prototype.FindWindowScorm12API=function(c){for(var d=0;c.API==null&&c.parent!=null&&c.parent!=c;){d++;if(d>500){lmslog.addEntry(0,"FindScorm12API","",R_scorm_apideep);return null}c=c.parent}return c.API};
LmsComFactory.prototype.FindScorm2004API=function(){try{var c=this.FindWindowScorm2004API(window);if(c==null&&top.window.opener!=null&&!top.window.opener.closed)c=this.FindWindowScorm2004API(top.window.opener);return c}catch(d){return null}};LmsComFactory.prototype.FindWindowScorm2004API=function(c){for(var d=0;c.API_1484_11==null&&c.parent!=null&&c.parent!=c;){d++;if(d>500){lmslog.addEntry(0,"FindScorm2004API","",R_scorm_apideep);return null}c=c.parent}return c.API_1484_11};
LmsComFactory.prototype.CheckParam=function(c,d){var e=d.length,f="";if(c.substr(0,e).toLowerCase()==d)f=c.substring(e);return f};var LMS_PASSED="passed",LMS_FAILED="failed",LMS_COMPLETED="completed",LMS_INCOMPLETE="incomplete",LMS_NOT_ATTEMPTED="not attempted";Date.prototype.toSCORM=function(){return this.getFullYear()+"-"+("0"+(this.getMonth()+1)).slice(-2)+"-"+("0"+this.getDate()).slice(-2)+"T"+("0"+this.getHours()).slice(-2)+":"+("0"+this.getMinutes()).slice(-2)+":"+("0"+this.getSeconds()).slice(-2)};
function LmsComBase(c){this.status_obj=null;this.ordinal_number=0;this.credit=this.student_name=this.student_id=this.end_date=this.start_date="";this.lesson_status=LMS_NOT_ATTEMPTED;this.time=this.score=this.core_vendor=this.original_lesson_data=this.lesson_data=this.lesson_location=this.lesson_flag="";this.doit_child_time=this.mode_idle_time=this.idle_time=0;this.guid=this.owner=null;this.isTestIt=this.bigsco=this.session_active=false;if(c!=null){this.Copy(c);this.ParentLmsCom=c}this.object_type_name=
"LmsComBase"}LmsComBase.prototype.GetOrdinalNumber=function(){return this.ordinal_number};LmsComBase.prototype.SetOrdinalNumber=function(c){this.ordinal_number=c};LmsComBase.prototype.Copy=function(c){this.student_id=c.student_id;this.student_name=c.student_name;this.credit=c.credit;this.lesson_status=c.lesson_status;this.bigsco=c.bigsco;this.lesson_data=c.lesson_data;this.lesson_location=c.lesson_location};
LmsComBase.prototype.Begin=function(){this.start_date=(new Date).getTime();this.session_active&&alert(R_lmscom_already_active);return this.session_active=true};LmsComBase.prototype.End=function(){this.session_active||alert(R_lmscom_inactive);this.end_date=(new Date).getTime();this.session_active=false;return true};LmsComBase.prototype.LoadAPIAdapter=function(c){c()};LmsComBase.prototype.SendCompletionInfo=function(){};
LmsComBase.prototype.NotifyParent=function(){var c=this.ParentLmsCom;c&&!c.owner.closed&&c.owner.ListenChildClose&&c.owner.ListenChildClose()};LmsComBase.prototype.getReportedLessonStatus=function(){return this.lesson_status===LMS_PASSED?LmsConfig.ReportOnPass:this.lesson_status===LMS_FAILED?LmsConfig.ReportOnFail:this.lesson_status};LmsComBase.prototype.computeTime=function(c,d){return this.convertTotalSeconds((d-c-this.idle_time)/1E3)};
LmsComBase.prototype.computeTime2=function(c,d){return""+(d.getTime()-c-this.doit_child_time)/1E3};LmsComBase.prototype.convertTotalSeconds=function(c){var d=c%60;c-=d;var e=c%3600;c-=e;d=Math.round(d*100)/100;var f=d=new String(d);if(d.indexOf(".")!=-1){f=d.substring(0,d.indexOf("."));d.substring(d.indexOf(".")+1,d.length)}if(f.length<2)f="0"+f;d=f;c=c%3600!=0?0:c/3600;e=e%60!=0?0:e/60;if((new String(c)).length<2)c="0"+c;if((new String(e)).length<2)e="0"+e;return c+":"+e+":"+d};
LmsComBase.prototype.doGetUPKValue=function(c){if(this.ParentLmsCom)return this.ParentLmsCom.doGetUPKValue(c);return""};LmsComBase.prototype.doSetUPKValue=function(c,d){this.ParentLmsCom&&this.ParentLmsCom.doSetUPKValue(c,d)};LmsComBase.prototype.doUPKCommit=function(){this.ParentLmsCom&&this.ParentLmsCom.doUPKCommit()};LmsComBase.prototype.setInteraction=function(c,d){if(this.ParentLmsCom)return this.ParentLmsCom.setInteraction(c,d)};
LmsComBase.prototype.getAnsweredQuestions=function(){if(this.ParentLmsCom)return this.ParentLmsCom.getAnsweredQuestions();return{}};LmsComBase.prototype.setObjective=function(c,d){this.ParentLmsCom&&this.ParentLmsCom.setObjective(c,d)};LmsComBase.prototype.requestContinue=function(){this.ParentLmsCom&&this.ParentLmsCom.requestContinue()};LmsComBase.prototype.IsConnected=function(){if(this.ParentLmsCom)return this.ParentLmsCom.IsConnected();return false};
LmsComBase.prototype.OpenBasicStatus=function(){this.status_obj=new LmsBasicStatus;this.status_obj.status=this.lesson_status;return this.status_obj};
LmsComBase.prototype.OpenTopicStatus=function(c,d,e){this.status_obj=new LmsTopicStatus;this.status_obj.setRequiredMode(c,d,e);lmslog.addEntry(0,"OpenTopicStatus","RequiredMode",this.status_obj.requiredMode);this.status_obj.isScored=!!c.K;c=GetTopLevelLmsMode()=="LMS"?c:d;this.status_obj.setModeavail("S",c.S);this.status_obj.setModeavail("T",c.T);this.status_obj.setModeavail("K",c.K);this.status_obj.setModeavail("D",c.D);this.status_obj.setModeavail("P",c.P);this.status_obj.setModeavail("E",c.E);
lmslog.addEntry(0,"OpenTopicStatus","SeeIt",this.status_obj.getModeavail("S"));lmslog.addEntry(0,"OpenTopicStatus","TryIt",this.status_obj.getModeavail("T"));lmslog.addEntry(0,"OpenTopicStatus","KnowIt",this.status_obj.getModeavail("K"));lmslog.addEntry(0,"OpenTopicStatus","DoIt",this.status_obj.getModeavail("D"));lmslog.addEntry(0,"OpenTopicStatus","PrintIt",this.status_obj.getModeavail("P"));lmslog.addEntry(0,"OpenTopicStatus","TestIt",this.status_obj.getModeavail("E"));if(this.bigsco){this.status_obj.savedStatus=
this.lesson_data.charAt(0);this.lesson_data=this.lesson_data.substring(1)}this.status_obj.initTopicstat(this.lesson_data);return this.status_obj};
LmsComBase.prototype.OpenTopicLaunchStatus=function(c,d,e,f){this.status_obj=new LmsTopicLaunchStatus(c);this.status_obj.setRequiredMode(d,e,f);lmslog.addEntry(0,"OpenTopicLaunchStatus","RequiredMode",this.status_obj.requiredMode);this.status_obj.isScored=d.indexOf("K")!=-1;c=GetTopLevelLmsMode()=="LMS"?d:e;this.status_obj.setModeavail("S",c.indexOf("S")!=-1);this.status_obj.setModeavail("T",c.indexOf("T")!=-1);this.status_obj.setModeavail("K",c.indexOf("K")!=-1);this.status_obj.setModeavail("D",
c.indexOf("D")!=-1);this.status_obj.setModeavail("P",c.indexOf("P")!=-1);this.status_obj.setModeavail("E",c.indexOf("E")!=-1);lmslog.addEntry(0,"OpenTopicLaunchStatus","SeeIt",this.status_obj.getModeavail("S"));lmslog.addEntry(0,"OpenTopicLaunchStatus","TryIt",this.status_obj.getModeavail("T"));lmslog.addEntry(0,"OpenTopicLaunchStatus","KnowIt",this.status_obj.getModeavail("K"));lmslog.addEntry(0,"OpenTopicLaunchStatus","DoIt",this.status_obj.getModeavail("D"));lmslog.addEntry(0,"OpenTopicLaunchStatus",
"PrintIt",this.status_obj.getModeavail("P"));lmslog.addEntry(0,"OpenTopicLaunchStatus","TestIt",this.status_obj.getModeavail("E"));this.status_obj.initTopicstat(this.lesson_data);return this.status_obj};LmsComBase.prototype.OpenQuestionStatus=function(){this.status_obj=new LmsQuestionStatus;this.status_obj.status=LMS_NOT_ATTEMPTED;this.status_obj.savedStatus=this.lesson_data?Stat2Lms(this.lesson_data):LMS_NOT_ATTEMPTED;return this.status_obj};
LmsComBase.prototype.OpenAssessmentStatus=function(c,d,e){this.status_obj=new LmsAssessmentStatus;this.status_obj.hash=d;this.status_obj.questionlimit=e;var f=this.lesson_data,g,l=null,m=-1;if(f)if(this.bigsco)l=d;else{var j=f.indexOf("@");if(j>0){g=parseInt(f.substring(0,j));l=f.substring(j+1,j+g+1).replace(/ /g,"+");f=f.substring(j+g+1);j=f.indexOf("@");if(j>0){g=parseInt(f.substring(0,j));m=parseInt(f.substring(j+1,j+g+1));f=f.substring(j+g+1)}}}if(d===l&&f.length===c+1&&e===m){this.status_obj.savedStatus=
f.charAt(0);this.status_obj.status=f.charAt(0)==="I"?LMS_INCOMPLETE:LMS_NOT_ATTEMPTED;for(d=0;d<c;d++)this.status_obj.questionstatus[d]=f.charAt(d+1)}else{if(f&&!this.bigsco){this.status_obj.stateDiscarded=true;this.status_obj.savedStatus=f.charAt(0)==="I"?"N":f.charAt(0)}else this.status_obj.savedStatus="N";this.status_obj.status=LMS_NOT_ATTEMPTED;for(d=0;d<c;d++)this.status_obj.questionstatus[d]="N"}return this.status_obj};
LmsComBase.prototype.OpenTOCStatus=function(c,d){var e=new LmsTOCStatus;this.status_obj=e;var f=new TOCState(c,d);e.setTocState(f);this.lesson_data!=null&&this.lesson_data.length>0&&f.DeserializeTOC(this.lesson_data);return e};LmsComBase.prototype.SaveStatus=function(){this.status_obj&&this.status_obj.Save(this)};LmsComBase.prototype.utGetModeIndex=function(){this.ParentLmsCom&&this.ParentLmsCom.utGetModeIndex()};LmsComBase.prototype.utPushModeIndex=function(){this.ParentLmsCom&&this.ParentLmsCom.utPushModeIndex()};
LmsComBase.prototype.utPopModeIndex=function(){this.ParentLmsCom&&this.ParentLmsCom.utPopModeIndex()};LmsComBase.prototype.utRecordType=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordType(c)};LmsComBase.prototype.utRecordStartTime=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordStartTime(c)};LmsComBase.prototype.utRecordTimespan=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordTimespan(c)};LmsComBase.prototype.utRecordEndTime=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordEndTime(c)};
LmsComBase.prototype.utRecordCompletionStatus=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordCompletionStatus(c)};LmsComBase.prototype.utRecordSuccessStatus=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordSuccessStatus(c)};LmsComBase.prototype.utRecordScoreScaled=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordScoreScaled(c)};LmsComBase.prototype.utRecordFrameViewed=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordFrameViewed(c)};
LmsComBase.prototype.utSendTestItResult=function(c){this.ParentLmsCom&&this.ParentLmsCom.utSendTestItResult(c)};function LmsComScorm12(){this.allow_launch=false;this.object_type_name="LmsComScorm12"}LmsComScorm12.prototype=new LmsComBase;LmsComScorm12.prototype.constructor=LmsComScorm12;LmsComScorm12.prototype.BaseClass=LmsComBase.prototype;
LmsComScorm12.prototype.Begin=function(){LmsComScorm12.prototype.BaseClass.Begin.call(this);lmslog.addEntry(0,"LmsComScorm12.Begin","","Start");if(this.API==null){this.allow_launch=true;return false}if(this.API.LMSInitialize("")=="false"){var c=this.API.LMSGetLastError(),d=this.API.LMSGetErrorString(c)+"\n"+this.API.LMSGetDiagnostic("");this.API=null;lms_ConnectionLost(c+" "+d);lmslog.addEntry(0,"LmsComScorm12.Begin","",d);return false}this.lesson_status=this.original_lesson_status=this.doLMSGetValue("cmi.core.lesson_status");
this.lesson_data=this.doLMSGetValue("cmi.suspend_data");this.lesson_location=this.doLMSGetValue("cmi.core.lesson_location");this.student_id=this.doLMSGetValue("cmi.core.student_id");this.student_name=this.doLMSGetValue("cmi.core.student_name");this.allow_launch=true;lmslog.addEntry(0,"LmsComScorm12.Begin","","LMS session started");return true};
LmsComScorm12.prototype.End=function(){LmsComScorm12.prototype.BaseClass.End.call(this);lmslog.addEntry(0,"LmsComScorm12.End","","Start");if(!this.allow_launch)return false;this.allow_launch=false;if(this.API==null)return false;this.lesson_status==LMS_INCOMPLETE?this.doLMSSetValue("cmi.core.exit","suspend"):this.doLMSSetValue("cmi.core.exit","");this.doLMSSetValue("cmi.core.session_time",this.computeTime(this.start_date,this.end_date));this.lesson_data&&this.doLMSSetValue("cmi.suspend_data",this.lesson_data);
this.lesson_location&&this.doLMSSetValue("cmi.core.lesson_location",this.lesson_location);this.SendCompletionInfo(true);if(this.API&&this.API.LMSFinish("")=="false"){var c=this.API.LMSGetLastError(),d=this.API.LMSGetErrorString(c)+"\n"+this.API.LMSGetDiagnostic("");this.API=null;lms_ConnectionLost(c+" "+d);lmslog.addEntry(0,"LmsComScorm12.End","",d);return false}this.API=null;lmslog.addEntry(0,"LmsComScorm12.End","","LMS session terminated");return true};
LmsComScorm12.prototype.SendCompletionInfo=function(c){if(this.lesson_status===LMS_NOT_ATTEMPTED)this.original_lesson_status===LMS_NOT_ATTEMPTED?this.doLMSSetValue("cmi.core.lesson_status",LMS_INCOMPLETE):this.doLMSSetValue("cmi.core.lesson_status",this.original_lesson_status);else this.doLMSSetValue("cmi.core.lesson_status",this.getReportedLessonStatus());if(this.score!==""){this.doLMSSetValue("cmi.core.score.raw",this.score);this.doLMSSetValue("cmi.core.score.min","0");this.doLMSSetValue("cmi.core.score.max",
"100")}c||this.doLMSCommit()};LmsComScorm12.prototype.LoadAPIAdapter=function(c){this.API=null;if(GetLmsComFactory())this.API=GetLmsComFactory().scorm_api_12;c()};LmsComScorm12.prototype.IsConnected=function(){return this.API!=null};LmsComScorm12.prototype.ErrorCodes={NoError:0,GeneralException:101,ElementCannotHaveChildren:202,ElementNotAnArray:203,NotInitialized:301,NotImplemented:401,InvalidSetValue:402,ElementIsReadOnly:403,ElementIsWriteOnly:404,IncorrectDataType:405};
LmsComScorm12.prototype.doLMSGetValue=function(c){if(this.API==null)return"";var d=this.API.LMSGetValue(c),e=this.API.LMSGetLastError();if(e!=this.ErrorCodes.NoError){d=this.API.LMSGetErrorString(e);lms_ConnectionLost(e+" "+d+", "+c);lmslog.addEntry(0,"doLMSGetValue","",R_scorm_getvalfail+c+" "+d);return""}lmslog.addEntry(1,"doLMSGetValue",c,d);return d};
LmsComScorm12.prototype.doLMSSetValue=function(c,d){if(this.API==null)return"false";if(this.API.LMSSetValue(c,d)=="false"){var e=this.API.LMSGetLastError();if(e!=this.ErrorCodes.NoError&&e!=this.ErrorCodes.NotImplemented){var f=this.API.LMSGetErrorString(e);lms_ConnectionLost(e+" "+f+", "+c+", "+d);lmslog.addEntry(0,"doLMSSetValue","",R_scorm_setvalfail+c+":"+d+" "+f);return"false"}}lmslog.addEntry(1,"doLMSSetValue",c,d);return"true"};
LmsComScorm12.prototype.doLMSCommit=function(){if(this.API==null)return"false";if(this.API.LMSCommit("")=="false"){var c=this.API.LMSGetLastError(),d=this.API.LMSGetErrorString(c);lms_ConnectionLost(c+" "+d);lmslog.addEntry(0,"doLMSCommit","",d);this.API=null;return"false"}lmslog.addEntry(1,"doLMSCommit","","");return"true"};function LmsComScorm2004(){this.allow_launch=false;this.object_type_name="LmsComScorm2004";this.lesson_data_location="cmi.suspend_data"}LmsComScorm2004.prototype=new LmsComBase;
LmsComScorm2004.prototype.constructor=LmsComScorm2004;LmsComScorm2004.prototype.BaseClass=LmsComBase.prototype;
LmsComScorm2004.prototype.Begin=function(){LmsComScorm2004.prototype.BaseClass.Begin.call(this);lmslog.addEntry(0,"LmsComScorm2004.Begin","","Start");if(this.API==null){this.allow_launch=true;return false}if(this.API.Initialize("")=="false"){var c=this.API.GetLastError(),d=this.API.GetErrorString(c)+"\n"+this.API.GetDiagnostic("");this.API=null;lms_ConnectionLost(c+" "+d);lmslog.addEntry(0,"LmsComScorm2004.Begin","",d);return false}this.lesson_status=this.doGetValue("cmi.completion_status");if(this.lesson_status===
"unknown")this.lesson_status=LMS_NOT_ATTEMPTED;else if(this.lesson_status===LMS_COMPLETED){c=this.doGetValue("cmi.success_status");if(c===LMS_PASSED||c===LMS_FAILED)this.lesson_status=c}this.original_lesson_status=this.lesson_status;this.lesson_data=this.doGetValue(this.lesson_data_location);this.lesson_location=this.doGetValue("cmi.location");this.student_id=this.doGetValue("cmi.learner_id");this.student_name=this.doGetValue("cmi.learner_name");this.allow_launch=true;lmslog.addEntry(0,"LmsComScorm2004.Begin",
"","LMS session started");return true};
LmsComScorm2004.prototype.End=function(){LmsComScorm2004.prototype.BaseClass.End.call(this);lmslog.addEntry(0,"LmsComScorm2004.End","","Start");if(!this.allow_launch)return false;this.allow_launch=false;if(this.API==null)return false;this.lesson_status==LMS_INCOMPLETE?this.doSetValue("cmi.exit","suspend"):this.doSetValue("cmi.exit","normal");this.doSetValue("cmi.session_time",this.computeTime(this.start_date,this.end_date));this.lesson_data&&this.doSetValue(this.lesson_data_location,this.lesson_data);
this.lesson_location&&this.doSetValue("cmi.location",this.lesson_location);this.SendCompletionInfo(true);if(this.API&&this.API.Terminate("")=="false"){var c=this.API.GetLastError(),d=this.API.GetErrorString(c)+"\n"+this.API.GetDiagnostic("");this.API=null;lms_ConnectionLost(c+" "+d);lmslog.addEntry(0,"LmsComScorm2004.End","",d);return false}this.API=null;lmslog.addEntry(0,"LmsComScorm2004.End","","LMS session terminated");return true};
LmsComScorm2004.prototype.LoadAPIAdapter=function(c){this.API=null;if(GetLmsComFactory())this.API=GetLmsComFactory().scorm_api_2004;c()};
LmsComScorm2004.prototype.SendCompletionInfo=function(c){var d=this.getReportedLessonStatus();if(d===LMS_NOT_ATTEMPTED)d=this.original_lesson_status;if(d==LMS_PASSED||d==LMS_FAILED){this.doSetValue("cmi.success_status",d);this.doSetValue("cmi.completion_status",LMS_COMPLETED)}else this.doSetValue("cmi.completion_status",d);if(this.score!==""){this.doSetValue("cmi.score.raw",this.score);this.doSetValue("cmi.score.scaled",this.score/100);this.doSetValue("cmi.score.min","0");this.doSetValue("cmi.score.max",
"100")}c||this.doCommit()};LmsComScorm2004.prototype.convertTotalSeconds=function(c){var d=c%60;c-=d;var e=c%3600;c-=e;d=Math.round(d*100)/100;var f=d=new String(d);if(d.indexOf(".")!=-1){f=d.substring(0,d.indexOf("."));d.substring(d.indexOf(".")+1,d.length)}if(f.length<2)f="0"+f;d=f;c=c%3600!=0?0:c/3600;e=e%60!=0?0:e/60;if((new String(c)).length<2)c="0"+c;if((new String(e)).length<2)e="0"+e;return"PT"+c+"H"+e+"M"+d+"S"};LmsComScorm2004.prototype.IsConnected=function(){return this.API!=null};
LmsComScorm2004.prototype.ErrorCodes={NoError:0,GeneralException:101,GeneralInitializationFailure:102,AlreadyInitialized:103,ContentInstanceTerminated:104,GeneralTerminationFailure:111,TerminationBeforeInitialization:112,TerminationAfterTermination:113,RetrieveDataBeforeInitialization:122,RetrieveDataAfterTermination:123,StoreDataBeforeInitialization:132,StoreDataAfterTermination:133,CommitBeforeInitialization:142,CommitAfterTermination:143,GeneralArgumentError:201,GeneralGetFailure:301,GeneralSetFailure:351,
GeneralCommitFailure:391,UndefinedDataModelElement:401,UnimplementedDataModelElement:402,DataModelElementValueNotInitialized:403,DataModelElementIsReadOnly:404,DataModelElementIsWriteOnly:405,DataModelElementTypeMismatch:406,DataModelElementValueOutOfRange:407,DataModelDependencyNotEstablished:408,KPathTimeout:1501,KPathConnect:1502,KPathBusy:1503};
LmsComScorm2004.prototype.doGetValue=function(c){if(this.API==null)return"";var d=this.API.GetValue(c),e=this.API.GetLastError();if(e!=this.ErrorCodes.NoError&&e!=this.ErrorCodes.DataModelElementValueNotInitialized)if(e==this.ErrorCodes.KPathTimeout&&this.object_type_name=="LmsComKPath"){lmslog.addEntry(0,"doGetValue","","KCenter timeout");e=this.API.GetValue("upk.idle_time");lmslog.addEntry(0,"doGetValue","upk.idle_time",e);this.idle_time+=e;this.mode_idle_time+=e;lmslog.addEntry(0,"doGetValue",
"idle_time",this.idle_time);return this.doGetValue(c)}else{d=this.API.GetErrorString(e);lms_ConnectionLost(e+" "+d+", "+c);lmslog.addEntry(0,"doGetValue","",R_scorm_getvalfail+c+" "+d);return""}lmslog.addEntry(1,"doGetValue",c,d);return d};
LmsComScorm2004.prototype.doSetValue=function(c,d){if(this.API==null)return"false";if(this.API.SetValue(c,d)=="false"){var e=this.API.GetLastError();if(e!=this.ErrorCodes.NoError&&e!=this.ErrorCodes.UnimplementedDataModelElement)if(e==this.ErrorCodes.KPathTimeout&&this.object_type_name=="LmsComKPath"){lmslog.addEntry(0,"doSetValue","","KCenter timeout");e=this.API.GetValue("upk.idle_time");lmslog.addEntry(0,"doSetValue","upk.idle_time",e);this.idle_time+=e;this.mode_idle_time+=e;lmslog.addEntry(0,
"doSetValue","idle_time",this.idle_time);return this.doSetValue(c,d)}else{var f=this.API.GetErrorString(e);lms_ConnectionLost(e+" "+f+", "+c+", "+d);lmslog.addEntry(0,"doSetValue","",R_scorm_setvalfail+c+":"+d+" "+f);return"false"}}lmslog.addEntry(1,"doSetValue",c,d);return"true"};
LmsComScorm2004.prototype.doCommit=function(){if(this.API==null)return"false";if(this.API.Commit("")=="false"){var c=this.API.GetLastError(),d=this.API.GetErrorString(c);this.API=null;lms_ConnectionLost(c+" "+d);lmslog.addEntry(0,"doCommit","",d);return"false"}lmslog.addEntry(1,"doCommit","","");return"true"};
function LmsComKPath(c){this.allow_launch=false;if(c!=null){this.Copy(c);this.ParentLmsCom=c}this.object_type_name="LmsComKPath";this.lesson_data_location="upk.sco_data";this.commitNeeded=this.commitActive=false}LmsComKPath.prototype=new LmsComScorm2004;LmsComKPath.prototype.constructor=LmsComKPath;LmsComKPath.prototype.BaseClass=LmsComScorm2004.prototype;
LmsComKPath.prototype.Begin=function(){lmslog.addEntry(0,"LmsComKPath.Begin","","Start");var c=LmsComKPath.prototype.BaseClass.Begin.call(this);this.doSetValue("upk.launch_from",GetTopLevelLmsMode());lmslog.addEntry(0,"LmsComKPath.Begin","","LMS session started");return c};
LmsComKPath.prototype.SendCompletionInfo=function(c){var d=this.getReportedLessonStatus();if(d===LMS_NOT_ATTEMPTED)this.doSetValue("cmi.completion_status",LMS_NOT_ATTEMPTED);else{if(d==LMS_PASSED||d==LMS_FAILED){this.doSetValue("cmi.success_status",d);this.doSetValue("cmi.completion_status",LMS_COMPLETED)}else this.doSetValue("cmi.completion_status",d);if(this.score!==""){this.doSetValue("cmi.score.raw",this.score);this.doSetValue("cmi.score.scaled",this.score/100);this.doSetValue("cmi.score.min",
"0");this.doSetValue("cmi.score.max","100")}c||this.doCommit()}};LmsComKPath.prototype.LoadAPIAdapter=function(c){if(this.API)c();else{var d=findKPathAPIFrame(window);if(d&&d.LoadRuntime&&this.guid){this.deferred_callback=c;var e=this;d.LoadRuntime(this.guid,0,0,0,function(f,g,l,m){e.LoadAPIAdapterCallback(f,g,l,m)},upk.browserInfo.isTouchDevice(),this.isTestIt)}else c()}};
LmsComKPath.prototype.LoadAPIAdapterCallback=function(c,d,e,f){if(c=="succeeded"&&d==this.guid){this.API=e.GetAPI();lmslog.addEntry(0,"LoadAPIAdapterCallback","","KPath adapter bound");try{this.deferred_callback()}catch(g){}}else{if(c=="no SCO")this.API=null;else alert(R_scorm_noapi+" "+f);lmslog.addEntry(0,"LoadAPIAdapterCallback","",f);this.deferred_callback()}};LmsComKPath.prototype.doGetUPKValue=function(c){c=this.doGetValue(c);if(c==="")c=-1;return c};
LmsComKPath.prototype.doSetUPKValue=function(c,d){this.doSetValue(c,d)};LmsComKPath.prototype.doUPKCommit=function(){this.doCommit()};
LmsComKPath.prototype.doCommit=function(){if(this.API==null)return"false";if(this.commitActive){lmslog.addEntry(0,"doCommit","commitActive==true","");this.commitNeeded=true;return"true"}lmslog.addEntry(1,"doCommit","","");if(upk.browserInfo.isTouchDevice())d=null;else{this.commitActive=true;var c=this,d=function(f,g){c.doCommitCallback(f,g)}}if(this.API.Commit("",d)=="false"){this.commitActive=false;d=this.API.GetLastError();var e=this.API.GetErrorString(d);if(d==this.ErrorCodes.KPathTimeout&&this.object_type_name==
"LmsComKPath"){lmslog.addEntry(0,"doCommit","","KCenter timeout");d=this.API.GetValue("upk.idle_time");lmslog.addEntry(0,"doCommit","upk.idle_time",d);this.idle_time+=d;this.mode_idle_time+=d;lmslog.addEntry(0,"doCommit","idle_time",this.idle_time);return this.doCommit()}else{this.API=null;lms_ConnectionLost(d+" "+e);lmslog.addEntry(0,"doCommit","",e);return"false"}}return"true"};
LmsComKPath.prototype.doCommitCallback=function(c,d){lmslog.addEntry(1,"doCommitCallback","","");this.commitActive=false;if(!c){this.API=null;lms_ConnectionLost(d);lmslog.addEntry(0,"doCommitCallback","",d)}if(this.commitNeeded){this.commitNeeded=false;this.doCommit()}};
LmsComKPath.prototype.setInteraction=function(c,d){if(this.API){var e=d.status_obj,f=this.doGetValue("cmi.interactions._count");if(c==-1)c=f;c>=f&&this.doSetValue("cmi.interactions."+c+".id",d.guid);this.doSetValue("cmi.interactions."+c+".type",e.getQuestionType());this.doSetValue("cmi.interactions."+c+".timestamp",(new Date).toSCORM());this.doSetValue("cmi.interactions."+c+".weighting","1");if(e.getResult()){this.doSetValue("cmi.interactions."+c+".learner_response",e.getLearnerResponse());this.doSetValue("cmi.interactions."+
c+".result",e.getResult())}this.doCommit();return c}};LmsComKPath.prototype.getAnsweredQuestions=function(){var c={};if(!this.API)return c;for(var d=this.doGetValue("cmi.interactions._count"),e=0;e<d;e++){var f=this.doGetValue("cmi.interactions."+e+".id");c[f]={index:e};c[f].weighting=this.doGetValue("cmi.interactions."+e+".weighting");c[f].result=this.doGetValue("cmi.interactions."+e+".result")}return c};
LmsComKPath.prototype.setObjective=function(c,d){if(this.API){this.doSetValue("cmi.objectives."+c+".id",d.objectiveGuid=="PRIMARYOBJ"?"PRIMARYOBJ":"OBJ_"+d.objectiveGuid);this.doSetValue("cmi.objectives."+c+".score.scaled",d.score/100);this.doSetValue("cmi.objectives."+c+".completion_status",d.completed?"completed":"incomplete");this.doSetValue("cmi.objectives."+c+".success_status",d.completed?"passed":"failed")}};
LmsComKPath.prototype.requestContinue=function(){this.doSetValue("adl.nav.request","continue")};LmsComKPath.prototype.utGetModeIndex=function(){this.mode_index=this.doGetValue("upk.modes._count")};LmsComKPath.prototype.utPushModeIndex=function(){this.saved_mode_index=this.mode_index;this.utGetModeIndex()};LmsComKPath.prototype.utPopModeIndex=function(){this.mode_index=this.saved_mode_index;delete this.saved_mode_index};
LmsComKPath.prototype.utRecordType=function(c){this.doSetValue("upk.modes."+this.mode_index+".type",c)};LmsComKPath.prototype.utRecordStartTime=function(c){this.doSetValue("upk.modes."+this.mode_index+".start_time",c.toSCORM());this.mode_idle_time=0};LmsComKPath.prototype.utRecordEndTime=function(c){this.doSetValue("upk.modes."+this.mode_index+".end_time",c.toSCORM())};
LmsComKPath.prototype.utRecordTimespan=function(c){this.doSetValue("upk.modes."+this.mode_index+".timespan",c-this.mode_idle_time/1E3)};LmsComKPath.prototype.utRecordCompletionStatus=function(c){this.doSetValue("upk.modes."+this.mode_index+".completion_status",c)};LmsComKPath.prototype.utRecordSuccessStatus=function(c){this.doSetValue("upk.modes."+this.mode_index+".success_status",c)};
LmsComKPath.prototype.utRecordScoreScaled=function(c){this.doSetValue("upk.modes."+this.mode_index+".score.scaled",c)};LmsComKPath.prototype.utRecordFrameViewed=function(c){this.doSetValue("upk.modes."+this.mode_index+".frame_viewed",c);this.doSetValue("cmi.session_time",this.computeTime(this.start_date,(new Date).getTime()));this.doCommit()};LmsComKPath.prototype.utSendTestItResult=function(c){this.doSetValue("upk.modes."+this.mode_index+".test_result",c);this.doCommit()};
function LmsComAICC(c,d){this.allow_launch=false;this.aicc_url=c;this.aicc_sid=d;this.app=document.applets.GetHTTPPostData;this.object_type_name="LmsComAICC"}LmsComAICC.prototype=new LmsComBase;LmsComAICC.prototype.constructor=LmsComScorm12;LmsComAICC.prototype.BaseClass=LmsComBase.prototype;LmsComAICC.prototype.Begin=function(){LmsComAICC.prototype.BaseClass.Begin.call(this);lmslog.addEntry(0,"LmsComAICC.Begin","","Start");this.hacpGetparam();lmslog.addEntry(0,"LmsComAICC.Begin","","about to log paramvalues")};
LmsComAICC.prototype.End=function(){LmsComAICC.prototype.BaseClass.End.call(this);lmslog.addEntry(0,"LmsComAICC.End","","Start");if(!this.allow_launch)return false;this.allow_launch=false;var c=this.hacpGetpostdata();c="command=putparam&version="+LmsConfig.AiccVersion+"&session_id="+this.aicc_sid+"&aicc_data="+escape(c)+"&";lmslog.addEntry(0,"LmsComAICC.End","params",c);c=this.app.GetData(unescape(this.aicc_url),c);lmslog.addEntry(0,"LmsComAICC.End","strData",c);c="version="+LmsConfig.AiccVersion+
"&command=ExitAU&session_id="+this.aicc_sid+"&";lmslog.addEntry(0,"LmsComAICC.End","params",c);c=this.app.GetData(unescape(this.aicc_url),c);lmslog.addEntry(0,"LmsComAICC.End","strData",c)};var closingAmp=true;
LmsComAICC.prototype.hacpGetparam=function(){lmslog.addEntry(0,"hacpGetparam","","Start");var c="";c="version="+LmsConfig.AiccVersion+"&command=GetParam&session_id="+this.aicc_sid;if(closingAmp)c+="&";lmslog.addEntry(0,"hacpGetparam","params",c);c=this.app.GetData(unescape(this.aicc_url),c);lmslog.addEntry(0,"hacpGetparam","strData",c);var d,e,f=false;c+=" ";for(var g=c.split("\r"),l=0;l<g.length;l++){var m=g[l],j=trimValue(m.substring(0,m.indexOf("="))),p=trimValue(m.substring(m.indexOf("=")+1));
if(j.toLowerCase()=="error"){d=p;f=true}if(j.toLowerCase()=="error_text")e=p;if(j.toLowerCase()=="aicc_data"){this.aicc_data=c.substring(c.indexOf(m.substring(0,m.indexOf("=")))+m.substring(0,m.indexOf("=")).length+1);f=true}}if(f)if(d==0){g=get_group_content("core",this.aicc_data).split("\r");for(l=0;l<g.length;l++){m=g[l];j=trimValue(m.substring(0,m.indexOf("=")));p=trimValue(m.substring(m.indexOf("=")+1));if(j.toLowerCase()=="student_id")this.student_id=p;if(j.toLowerCase()=="student_name")this.student_name=
p;if(j.toLowerCase()=="lesson_status"){this.lesson_status=p.toLowerCase().charAt(0);if(p.indexOf(",")!=-1)this.lesson_flag=trimValue(p.substring(p.indexOf(",")+1)).toLowerCase();if(this.lesson_status=="p")this.lesson_status=LMS_PASSED;if(this.lesson_status=="c")this.lesson_status=LMS_COMPLETED;if(this.lesson_status=="f")this.lesson_status=LMS_FAILED;if(this.lesson_status=="i")this.lesson_status=LMS_INCOMPLETE;if(this.lesson_status=="n")this.lesson_status=LMS_NOT_ATTEMPTED;this.original_lesson_status=
this.lesson_status}if(j.toLowerCase()=="lesson_location")this.lesson_location=p;if(j.toLowerCase()=="credit")this.credit=p;if(j.toLowerCase()=="score")this.score=p;if(j.toLowerCase()=="time")this.time=p}this.lesson_data=this.lesson_status==LMS_INCOMPLETE||this.lesson_status==LMS_COMPLETED||this.lesson_status==LMS_PASSED||this.lesson_status==LMS_FAILED?trimValue(get_group_content("core_lesson",this.aicc_data)):"";this.core_vendor=trimValue(get_group_content("core_vendor",this.aicc_data));this.allow_launch=
true}else{alert(R_error_unexp+e);lmslog.addEntry(0,"hacpGetparam","","Unable to continue because of the following error: "+e)}else{alert(R_error_svr+unescape(this.aicc_url)+"\r\r - "+c);lmslog.addEntry(0,"hacpGetparam","","Unable to post to server "+unescape(this.aicc_url)+" - "+c)}};
LmsComAICC.prototype.hacpGetpostdata=function(){lmslog.addEntry(0,"hacpGetpostdata","","Start");var c="";c="[CORE]\r\n";c+="Lesson_Location=\r\n";var d=this.getReportedLessonStatus();if(d===LMS_NOT_ATTEMPTED)d=this.original_lesson_status;c+=this.lesson_status===LMS_INCOMPLETE?"Lesson_Status="+d+", suspend\r\n":"Lesson_Status="+d+"\r\n";lmslog.addEntry(0,"hacpGetpostdata","is_assess",this.is_assess);c+=this.score!==""?"Score="+this.score+"\r\n":"Score=\r\n";c+="Time="+this.computeTime(this.start_date,
this.end_date)+"\r\n";c+="[CORE_LESSON]\r\n";c+=this.lesson_data+"\r\n";lmslog.addEntry(0,"hacpGetpostdata","NewAiccData",c);return c};function get_group_content(c,d){for(var e="",f=d.split("\r"),g=false,l=0;l<f.length;l++){var m=trimValue(f[l]);if(m.substr(0,1)=="[")g=m.toLowerCase().indexOf("["+c.toLowerCase()+"]")>=0?true:false;else if(g)e+=m+"\r\n"}return e}
function trimValue(c){for(var d=0,e=c.length,f=0;f<c.length;f++)if(c.substr(f,1)!=" "&&c.substr(f,1)!="\t"&&c.substr(f,1)!="\n"&&c.substr(f,1)!="\r"){d=f;break}if(f==c.length)return"";for(f=c.length-1;f>0;f--)if(c.substr(f,1)!=" "&&c.substr(f,1)!="\t"&&c.substr(f,1)!="\n"&&c.substr(f,1)!="\r"){e=f;break}if(f==0)e=0;return c.substring(d,e+1)}LmsComAICC.prototype.IsConnected=function(){return true};function LmsComCookie(){this.allow_launch=false;this.object_type_name="LmsComCookie"}
LmsComCookie.prototype=new LmsComBase;LmsComCookie.prototype.constructor=LmsComCookie;LmsComCookie.prototype.BaseClass=LmsComBase.prototype;LmsComCookie.prototype.Begin=function(){LmsComCookie.prototype.BaseClass.Begin.call(this)};LmsComCookie.prototype.End=function(){LmsComCookie.prototype.BaseClass.End.call(this)};function LmsBasicStatus(){this.status=LMS_NOT_ATTEMPTED}LmsBasicStatus.prototype.getStatus=function(){return this.status};LmsBasicStatus.prototype.setStatus=function(c){this.status=c};
LmsBasicStatus.prototype.Save=function(c){c.lesson_status=this.status};LmsTopicStatus.prototype=new LmsBasicStatus;LmsTopicStatus.prototype.constructor=LmsTopicStatus;LmsTopicStatus.prototype.BaseClass=LmsBasicStatus.prototype;function LmsTopicStatus(){this.score="";this.passed=false;this.modes=[];this.modes.S=new Mode("S");this.modes.T=new Mode("T");this.modes.K=new Mode("K");this.modes.D=new Mode("D");this.modes.P=new Mode("P");this.modes.E=new Mode("E");this.anylaunched=false}
LmsTopicStatus.prototype.Save=function(c){c.lesson_data=c.bigsco?"":this.getStatusstring();c.lesson_status=this.getLMSStatus();c.score=this.getScore()};LmsTopicStatus.prototype.setModeavail=function(c,d){this.modes[c].avail=d};LmsTopicStatus.prototype.getModeavail=function(c){return this.modes[c].avail};LmsTopicStatus.prototype.setModestatus=function(c,d){if(this.modes[c].avail)this.modes[c].complete=d;else lmslog.addEntry(0,"setModestatus","","Invalid call of setModestatus")};
LmsTopicStatus.prototype.getModestatus=function(c){return this.modes[c].complete};LmsTopicStatus.prototype.setRequiredMode=function(c,d,e){this.requiredMode=GetTopLevelLmsMode()=="LMS"?e||this._getRequiredMode(c):this._getRequiredMode(d)};LmsTopicStatus.prototype._getRequiredMode=function(c){for(var d=0;d<6;d++)if(c["EKTSPD".charAt(d)])return"EKTSPD".charAt(d);return"None"};LmsTopicStatus.prototype.GetRequiredMode=function(){return this.requiredMode};
LmsTopicStatus.prototype.initTopicstat=function(c){lmslog.addEntry(0,"initTopicstat","","Start");lmslog.addEntry(0,"initTopicstat","s string",c);lmslog.addEntry(0,"initTopicstat","s.length",c.length);if(c.length!=0){var d=c.split(",");for(c=0;c<=d.length-1;c++){lmslog.addEntry(0,"initTopicstat","f["+c+"]",d[c]);if(d[c].charAt(1)=="=")this.modes[d[c].charAt(0)].complete=this.modeIscomplete(d[c].substr(2,1));else if(d[c].substr(0,5)=="PASS=")this.passed=d[c].substr(5,1)!=="0";else if(d[c].substr(0,
6)=="SCORE=")this.score=d[c].substr(6)}}};LmsTopicStatus.prototype.clearTopicstat=function(){this.score="";this.passed=false;for(var c in this.modes)this.modes[c].complete=false};
LmsTopicStatus.prototype.getStatusstring=function(){lmslog.addEntry(0,"get_statusstring","","Start");var c="";for(x in this.modes){if(c.length!=0)c+=",";c+=this.modes[x].id+"="+(this.modes[x].complete?"C":"I")}if(this.modes.E.complete)c+=",PASS="+(this.passed?"1":"0");else if(this.requiredMode==="K"&&this.modes.K.complete&&this.isScored)c+=",PASS="+(this.passed?"1":"0")+",SCORE="+this.score;lmslog.addEntry(0,"get_statusstring","dataString",c);return c};
LmsTopicStatus.prototype.getStatus=function(){var c="";if(this.isComplete())if(this.requiredMode==="K"&&this.isScored||this.requiredMode==="E")c=this.passed?LMS_PASSED:LMS_FAILED;else{c=LMS_COMPLETED;if(this.savedStatus=="P"||this.savedStatus=="F")c=this.savedStatus}else{c=LMS_INCOMPLETE;if(this.savedStatus=="P"||this.savedStatus=="F"||this.savedStatus=="C")c=Stat2Lms(this.savedStatus)}return c};
LmsTopicStatus.prototype.getLMSStatus=function(){if(this.isComplete()&&!this.anylaunched)return LMS_NOT_ATTEMPTED;return this.getStatus()};LmsTopicStatus.prototype.getScore=function(){return this.score};LmsTopicStatus.prototype.isComplete=function(){lmslog.addEntry(0,"is_complete","","Start");var c=false;if(this.requiredMode==="None"||this.modes[this.requiredMode].complete)c=true;lmslog.addEntry(0,"is_complete","iscomp",c);return c};
LmsTopicStatus.prototype.modeIscomplete=function(c){var d=false;lmslog.addEntry(0,"modeIscomplete","","Start");if(c=="C")d=true;else if(c=="I")d=false;lmslog.addEntry(0,"modeIscomplete","ret",d);return d};LmsTopicStatus.prototype.isRequired=function(c){return this.requiredMode===c};LmsTopicLaunchStatus.prototype=new LmsTopicStatus;LmsTopicLaunchStatus.prototype.constructor=LmsTopicStatus;LmsTopicLaunchStatus.prototype.BaseClass=LmsTopicStatus.prototype;
function LmsTopicLaunchStatus(c){this.mode=this.modes[c];this.score="";this.passed=false;this.anylaunched=true}LmsTopicLaunchStatus.prototype.Save=function(c){this.BaseClass.Save.call(this,c)};LmsTopicLaunchStatus.prototype._getRequiredMode=function(c){for(var d=0;d<6;d++)if(c.indexOf("EKTSPD".charAt(d))!=-1)return"EKTSPD".charAt(d);return"None"};LmsTopicLaunchStatus.prototype.getResult=function(){return this.passed?"correct":"incorrect"};LmsTopicLaunchStatus.prototype.getQuestionType=function(){return"other"};
LmsTopicLaunchStatus.prototype.getLearnerResponse=function(){return""};function Mode(c){this.complete=this.avail=false;this.id=c}LmsQuestionStatus.prototype=new LmsBasicStatus;LmsQuestionStatus.prototype.constructor=LmsQuestionStatus;LmsQuestionStatus.prototype.BaseClass=LmsBasicStatus.prototype;function LmsQuestionStatus(){this.result=this.learner_response=this.question_type=null}LmsQuestionStatus.prototype.Save=function(c){c.lesson_status=this.status;c.lesson_data=Lms2Stat(this.getStatus())};
LmsQuestionStatus.prototype.getStatus=function(){return this.status===LMS_NOT_ATTEMPTED?this.savedStatus:this.status};LmsQuestionStatus.prototype.getQuestionType=function(){return this.question_type};LmsQuestionStatus.prototype.setQuestionType=function(c){return this.question_type=c};LmsQuestionStatus.prototype.getLearnerResponse=function(){return this.learner_response};LmsQuestionStatus.prototype.setLearnerResponse=function(c){return this.learner_response=c};
LmsQuestionStatus.prototype.getResult=function(){return this.result};LmsQuestionStatus.prototype.setResult=function(c){return this.result=c};LmsAssessmentStatus.prototype=new LmsBasicStatus;LmsAssessmentStatus.prototype.constructor=LmsAssessmentStatus;LmsAssessmentStatus.prototype.BaseClass=LmsBasicStatus.prototype;function LmsAssessmentStatus(){this.score="";this.questionstatus=[];this.stateDiscarded=false}
LmsAssessmentStatus.prototype.Save=function(c){c.lesson_status=this.status;c.score=this.status!=LMS_INCOMPLETE&&this.status!=LMS_NOT_ATTEMPTED?this.score:"";var d="";if(!c.bigsco){d=this.hash.length+"@"+this.hash;var e=this.questionlimit.toString();d+=e.length+"@"+e}d+=this.status==LMS_NOT_ATTEMPTED?this.savedStatus:Lms2Stat(this.status);for(e=0;e<this.questionstatus.length;e++)d+=this.questionstatus[e];c.lesson_data=d};
LmsAssessmentStatus.prototype.getStatus=function(){return this.status===LMS_NOT_ATTEMPTED?Stat2Lms(this.savedStatus):this.status};LmsAssessmentStatus.prototype.getLMSStatus=function(){return this.status};LmsAssessmentStatus.prototype.getScore=function(){return this.score};LmsAssessmentStatus.prototype.setScore=function(c){return this.score=c};LmsTOCStatus.prototype=new LmsBasicStatus;LmsTOCStatus.prototype.constructor=LmsTOCStatus;LmsTOCStatus.prototype.BaseClass=LmsBasicStatus.prototype;
function LmsTOCStatus(){}LmsTOCStatus.prototype.getStatus=function(){return Stat2Lms(this.getTocState().GetStatus(0))};LmsTOCStatus.prototype.Save=function(c){c.lesson_status=this.getStatus();var d=this.getTocState();c.lesson_data=d.SerializeTOC()};LmsTOCStatus.prototype.getTocState=function(){return this.tocstate};LmsTOCStatus.prototype.setTocState=function(c){return this.tocstate=c};function NodeState(){this.Status="N";this.Score=null;this.ChildrenStatus=""}
function TOCState(c,d){this.NodeCounter=c;this.TocVersion=d;this.InitInLookupTable()}TOCState.prototype.SetStatus=function(c,d){this.LookUpTable[c]||(this.LookUpTable[c]=new NodeState);this.LookUpTable[c].Status=d};TOCState.prototype.GetStatus=function(c){return this.LookUpTable[c].Status};TOCState.prototype.SetScore=function(c,d){this.LookUpTable[c]||(this.LookUpTable[c]=new NodeState);this.LookUpTable[c].Score=d};TOCState.prototype.GetScore=function(c){return this.LookUpTable[c].Score};
TOCState.prototype.SetChildren=function(c,d){this.LookUpTable[c]||(this.LookUpTable[c]=new NodeState);this.LookUpTable[c].ChildrenStatus=d};TOCState.prototype.GetChildren=function(c){return this.LookUpTable[c].ChildrenStatus};
TOCState.prototype.DeserializeTOC=function(c){var d=0,e,f=c.indexOf("@");if(f>0){d=parseInt(c.substring(0,f));e=c.substring(f+1,f+d+1);if(e==this.TocVersion){c=c.substring(f+d+2);f=c.indexOf("@");if(f>0){d=parseInt(c.substring(0,f));c=c.substring(f+1,f+d+1);if(c.length==d){c=this.RLESDecode(c);this.DeserializeLookUpTable(c)}}}}};
TOCState.prototype.DeserializeLookUpTable=function(c){for(var d=0,e="",f=0;f<c.length;f++){e=c.charAt(f);this.SetStatus(d,e);for(e="";f<c.length-1&&c.charAt(f+1)>="0"&&c.charAt(f+1)<="9";){f++;e+=c.charAt(f)}e.length>0&&this.SetScore(d,parseInt(e));if(f<c.length-1&&c.charAt(f+1)=="{"){e=c.indexOf("}",f+2);this.SetChildren(d,c.substring(f+2,e));f=e}d++}};
TOCState.prototype.SerializeTOC=function(){var c=this.RLESEncode(this.SerializeLookupTable());return this.TocVersion.length+"@"+this.TocVersion+" "+c.length+"@"+c};TOCState.prototype.SerializeLookupTable=function(){for(var c="",d=0;d<this.NodeCounter;d++){var e=this.LookUpTable[d].Status,f=this.LookUpTable[d].ChildrenStatus;e||(e="N");c+=e;if(f)c+="{"+f+"}"}return c};
TOCState.prototype.InitInLookupTable=function(){this.LookUpTable=[];for(var c=0;c<this.NodeCounter;c++)this.LookUpTable[c]=new NodeState;this.SetStatus(0,"I")};TOCState.prototype.RLESEncode=function(c){var d="",e=0,f="";d=c.charAt(0);for(var g=e=1;g<c.length;g++)if(c.charAt(g)==d)e++;else{if(e>2){f+="#";f+=e;f+=d}else f+=c.substring(g-e,g);d=c.charAt(g);e=1}if(e>2){f+="#";f+=e;f+=d}else f+=c.substring(g-e,g);return f};
TOCState.prototype.RLESDecode=function(c){for(var d="",e="",f=0;f<c.length;f++)if(c.charAt(f)=="#"){e="";for(f++;c.charAt(f)>="0"&&c.charAt(f)<="9";){e+=c.charAt(f);f++}e=parseInt(e);for(var g=0;g<e;g++)d+=c.charAt(f)}else d+=c.charAt(f);return d};function Lms2Stat(c){return c.charAt(0).toUpperCase()}function Stat2Lms(c){return[LMS_PASSED,LMS_FAILED,LMS_COMPLETED,LMS_INCOMPLETE,LMS_NOT_ATTEMPTED]["PFCIN".indexOf(c)]}
function LogEntry(c,d,e,f,g){this.logType=d;this.funcName=e;this.varName=f;this.msgValue=g;this.dateTime=(new Date).getTime()-c}LogEntry.prototype.GetTableRow=function(){var c="#006600";if(this.logType===1)c="#000033";var d=this.varName;if(d==="")d="&nbsp;";var e=this.msgValue;if(e==="")e="&nbsp;";var f="<tr>";f+="<td align='right'>"+this.dateTime/1E3+"</td>";f+="<td style='color:"+c+";'>"+this.funcName+"</td>";f+="<td>"+d+"</td>";f+="<td>"+e+"</td>";f+="</tr>";return f};
function Log(c){this.traceWindow=null;this.logArray=[];this.enabled=c;this.startDateTime=new Date;this.changed=true;this.windowReady=false;this.startLog()}Log.prototype.startLog=function(){if(this.enabled){this.addEntry(0,"initLog","","Log Intialized");this.openTraceWindow()}};Log.prototype.addEntry=function(c,d,e,f){if(this.enabled){this.logArray.push(new LogEntry(this.startDateTime.getTime(),c,d,e,f));this.changed=true;this.traceWindow&&this.windowReady&&this.traceWindow.UpdateTraceStack()}};
Log.prototype.writeLog=function(c,d){var e=d;if(e>this.logArray.length||e==0)e=this.logArray.length;var f="<table width='600'>";f+="<tr>";f+="<th colspan=4>Session start: "+this.startDateTime+"</th>";f+="</tr>";f+="<tr>";f+="<th>time</th>";f+="<th>function</th>";f+="<th>variable</th>";f+="<th>message</th>";f+="</tr>";var g;if(c==0)for(var l=this.logArray.length-e;l<this.logArray.length;l++){g=this.logArray[l];f+=g.GetTableRow(l)}else for(l=this.logArray.length-1;l>=this.logArray.length-e;l--){g=this.logArray[l];
f+=g.GetTableRow(l)}f+="</table>";this.changed=false;this.windowReady=true;return f};Log.prototype.writeDetails=function(c){return this.logArray[c].GetDetails()};Log.prototype.openTraceWindow=function(){if(this.traceWindow==null){this.changed=true;this.traceWindow=window.open(lms_path+"html/lmsdebug.html","_blank")}};var _lmsMode=null,_lmsParser=null;
function InitLmsMode(c){if(_lmsParser==null){_lmsParser=new UrlParser;_lmsParser.Parse();if(IsTouchDevice()&&c=="player")if(parent==null||window.location==parent.location)if(_lmsParser.GetParameter("directlaunch")==null)_lmsParser.params.directlaunch=2;if(c=="player"){if(_lmsParser.GetParameter("directlaunch")!=null)_lmsMode=Kpath_launch==true?"KPT":"Cookie"}else if(c=="lmstart"){if(_lmsParser.GetParameter("toc")==null)_lmsMode=_lmsParser.GetParameter("dhtml")!=null?Kpath_launch==true?"KPT":"Cookie":
"LMS"}else if(c=="toc"){if(_lmsParser.GetParameter("sco")==null)_lmsMode=Kpath_launch==true?"KPT":"Cookie"}else alert(R_undefined_lms_source)}}function GetTopLevelLmsMode(){return _GetTopLevelLmsMode(this)}function _GetTopLevelLmsMode(c){var d=c._lmsMode;if(d==null)return _GetTopLevelLmsMode(c.lms_store.parentW);return d}var lms_initialized=false,lms_store,lmslog;
function lms_InitPage(c,d,e,f){if(lms_initialized==true)setTimeout(f,1);else{__Ialert("lms_InitPage called with parameters:"+c+","+d+","+e+","+f);var g=false;if(window.lmsModes)g=typeof window.lmsModes=="string"?window.lmsModes.indexOf("E")>-1:window.lmsModes.E===true;lms_store={window:window,childIndex:c,parentW:d,cguid:e,isTestIt:g,callbackfunction:f};if(!d||d.closed){lmslog=new Log(LmsConfig.DebugMode);InitializeLmsCom();InsertRuntimeAPI(lms_LoadRuntimeComplete)}else if(d.lms_initialized){lmslog=
d.lmslog;setTimeout(lms_LoadRuntimeComplete,1)}}}
function lms_LoadRuntimeComplete(){__Ialert("lms_LoadRuntimeComplete() called");if(lms_store.parentW&&!lms_store.parentW.closed)lms_store.parentW.GetChildLmsCom(lms_store);else if(!lms_store.parentW&&!lms_store.cguid&&!window.bigScoItemCount)document.LmsCom=PlayerConfig.EnableCookies?new LmsComCookie:new LmsComBase;else{CheckForLMSAPI();document.LmsCom=_GlobalLmsComFactory.CreateLmsCom()}var c=document.LmsCom;c.guid=lms_store.cguid;c.isTestIt=lms_store.isTestIt;c.owner=window;c.LoadAPIAdapter(lms_LoadAdapterComplete)}
function lms_UpdateUI(c){try{parent&&parent.updateUI&&parent.updateUI(c)}catch(d){}}var hasClosed=false;
function lms_ClosePage(c){__Ialert("lms_ClosePage() called");if(hasClosed!=true){hasClosed=true;var d=document.LmsCom;if(d&&d.session_active){var e=d.child;e&&e.session_active&&e.owner&&!e.owner.closed&&e.owner.lms_ClosePage(true);(e=d.ancillaryChild)&&e.session_active&&e.owner&&!e.owner.closed&&e.owner.lms_ClosePage(true);window._closePage&&_closePage();if(d.session_active){d.SaveStatus();d.End();d.NotifyParent()}c&&window.close()}}}
function lms_ConnectionLost(c){window.ConnectionLostEvent&&ConnectionLostEvent(c);lms_store.parentW&&!lms_store.parentW.closed&&lms_store.parentW.lms_ConnectionLost(c)}function lms_IsConnected(){var c=document.LmsCom;if(c)return c.IsConnected();return false}function lms_IsKPathLogoutAvailable(){return!!window.Kpath_logout_available}
function _logout(c){if(lms_store.parentW&&!lms_store.parentW.closed&&lms_store.parentW._logout)lms_store.parentW._logout(false);else if(window.Kpath_logout_URL)if(GetTopLevelLmsMode()=="LMS")window.parent.parent.location.replace(Kpath_logout_URL);else if(c)if(window.opener&&!window.opener.closed){window.opener.location.replace(Kpath_logout_URL);window.close()}else window.location.replace(Kpath_logout_URL);else window.location.replace(Kpath_logout_URL)}
function lms_IsUserProfileAvailable(){__alert("lms_IsUserProfileAvailable() called");if(GetTopLevelLmsMode()!=="KPT")return false;return document.LmsCom.doGetUPKValue("upk.anonymous")=="0"}function lms_GetUserProfileUrl(){__alert("lms_GetUserProfileUrl() called");if(Kpath_launch==false)return"";return Kpath_profile_URL+"?UPKLaunch=true"}function GetNoSound(){return lms_store.parentW&&!lms_store.parentW.closed?lms_store.parentW.GetNoSound():lms_store.noSound}
function SetNoSound(c){lms_store.noSound=c}var _lms_show_all_alert=false;function __alert(c){if(_lms_show_alert||_lms_show_all_alert)alert(c+"\nfile: "+_lms_module_name)}function __Ialert(c){if(_lms_show_alert||_lms_show_Ialert||_lms_show_all_alert)alert(c+"\nfile: "+_lms_module_name)}var _modeLaunch="incomplete",_feedbackUrlArgs="";
function lms_LoadAdapterComplete(){__alert("lms_LoadAdapterComplete() called");var c=document.LmsCom;c.Begin();c.assessment_guid&&c.doSetUPKValue("upk.actual_guid",c.assessment_guid);c.utPushModeIndex();lms_initialized=true;setTimeout(lms_store.callbackfunction,1)}function GetChildLmsCom(c){__Ialert("lms_GetChildLmsCom() called");var d=document.LmsCom,e=c.window.document.LmsCom=new LmsComBase(d);e.owner=c.window;d.child=e}
function ListenChildClose(){__alert("lms_ListenChildClose() called");var c=document.LmsCom,d=c.child;if(d){c.status_obj.modes[d.status_obj.mode.id].complete=d.status_obj.mode.complete;c.utPopModeIndex();c.doit_child_time+=d.end_date-d.start_date}}function _closePage(){var c=document.LmsCom,d=new Date;c.utRecordEndTime(d);c.utRecordTimespan(c.computeTime2(c.start_date,d));c.utRecordCompletionStatus(_modeLaunch)}
function lms_LaunchTopic(c){__alert("lms_LaunchTopic("+c+") called");var d=document.LmsCom;if(c=="P"){d.utPushModeIndex();d.utRecordType("print_it");d.utRecordStartTime(new Date);d.utRecordEndTime(new Date);d.utRecordCompletionStatus(LMS_COMPLETED);d.utPopModeIndex();d.status_obj.setModestatus("P",true);d.SaveStatus()}}
function lms_topicStart(c,d){__alert("lms_topicStart() called with parameters: "+c+","+d);var e=document.LmsCom,f=lmsModes.indexOf("E")>-1||typeof lmsReqMode==="undefined"?null:lmsReqMode;e.assessment_guid?e.OpenTopicLaunchStatus(d,lmsModes+"K",playerModes+"K",f):e.OpenTopicLaunchStatus(d,lmsModes,playerModes,f);e.lesson_status===LMS_NOT_ATTEMPTED&&e.status_obj.isComplete()&&e.status_obj.clearTopicstat();f=["see_it","try_it","know_it","do_it","print_it","test_it"]["STKDPE".indexOf(d)];e.utRecordType(f);
e.utRecordStartTime(new Date)}function lms_topicFinish(c){__alert("lms_topicFinish() called with parameter: "+c);document.LmsCom.status_obj.mode.complete=true;_modeLaunch=LMS_COMPLETED}function lms_frameView(c,d,e){__alert("lms_frameView() called with parameter: "+c+","+d+","+e);document.LmsCom.utRecordFrameViewed(e);_feedbackUrlArgs="&FrameID="+e+"&UPKMode="+d}
function lms_knowitScore(c,d,e){__alert("lms_knowitScore called with parameter: "+c+","+d+","+e);c=document.LmsCom;c.status_obj.mode.complete=true;c.status_obj.score=d;c.status_obj.passed=e;c.utRecordSuccessStatus(e?"passed":"failed");c.utRecordScoreScaled(d/100)}function lms_getUserName(){return document.LmsCom.student_name}
function lms_sendTestItResult(c,d){__alert("lms_sendTestItResult called with parameter: "+d);var e=document.LmsCom;e.status_obj.passed=c==1;e.utRecordSuccessStatus(c==1?"passed":c==2?"failed":"unknown");e.utSendTestItResult(d)}function lms_KPathLogout(){_logout(true)}
var _lms_module_name="lms_topic.js",_lms_show_alert=false,_lms_show_Ialert=false,appOpened=true,oPopup,oPopBody,i=0,constPad=8,popHeight=400,popWidth=275,currentPos=0,MainTopPos,MainLeftPos,newwindow="",isIE=upk.browserInfo.isExplorer(),popupVersion=false,pss=document.location.hash.substring(1),pstrArgs=pss.split("&");if(pstrArgs.length==0||pstrArgs[0]==""){pss=document.location.search.substring(1);pstrArgs=pss.split("&")}
if(pstrArgs.length==1)if(pstrArgs[0].toLowerCase().substr(0,3)=="su="){safeUriMode=true;var ps=Escape.SafeUriUnEscape(pstrArgs[0].substr(3));pstrArgs=ps.split("&")}for(i=0;i<pstrArgs.length;i++)if(pstrArgs[i].substr(0,6).toLowerCase()=="popup=")popupVersion=true;var TopPos,LeftPos;
if(isIE&&popupVersion){TopPos=screen.availHeight-popHeight-constPad;LeftPos=screen.availWidth-popWidth-constPad}else{TopPos=window.screenTop!=undefined?window.screenTop:window.screenY;LeftPos=window.screenLeft!=undefined?window.screenLeft:window.screenX}var TaskBarHeight=0,idPostFix="",eventTarget=null;if(isIE&&popupVersion){var appVerArray=navigator.appVersion.split(";"),appVer=appVerArray[1];appVer=appVer.substr(6);appVer=parseFloat(appVer)}else{constPad=12;TaskBarHeight=25;TopPos-=TaskBarHeight}
oPopup=isIE&&popupVersion?window.createPopup():window;isIE&&popupVersion||(idPostFix="FF");function getID(c){return document.all?document.all(c):document.getElementById(c)}function oPopup_show(c,d,e,f,g){if(!popHidden&&isIE&&popupVersion){oPopup.show(c,d,e,f);if(!g){LeftPos=oPopup.document.parentWindow.screenLeft;TopPos=oPopup.document.parentWindow.screenTop}}}
function RePop(){window.screenLeft>=-1E3&&window.screenTop>=-1E3&&isIE&&popupVersion&&!popHidden&&!oPopup.isOpen&&appOpened&&oPopup_show(LeftPos,TopPos,popWidth,popHeight);if(window.screenLeft<=3E3&&isIE&&popupVersion&&!popHidden)try{window.moveTo(4E3,4E3)}catch(c){}}
function InitPopUp(){if(isIE&&popupVersion){oPopBody=oPopup.document.body;oPopBody.innerHTML=getID("oContextHTML0").innerHTML;oPopBody.ondragstart=EventCancel}else{oPopBody=document.body;document.getElementById("noPopupFF").style.display="inline";if(isIE){oPopBody.onmousedown=EventCancel;oPopBody.ondragstart=EventCancel;window.onresize=function(){GICloseAction();GIOnResize()}}else{oPopBody.addEventListener("mousedown",function(c){EventCancel(c)},false);window.addEventListener("resize",GICloseAction,
true);window.addEventListener("resize",GIOnResize,true)}window.onbeforeunload=closeAp}if(IsTouchDevice()){$("#camera"+idPostFix).css({overflow:"scroll","-webkit-overflow-scrolling":"touch"});$("#giSplitter").bind("touchstart",SplitStart);$("#giToggleFF").bind("touchstart",SplitStart)}else{$("#giSplitter").bind("mousedown",SplitStart);$("#camera"+idPostFix).bind("mousedown",SSPanStart)}oPopBody.oncontextmenu=EventCancel;oPopBody.style.backgroundColor=DoItConfig.DoItBackgroundColor!=""?DoItConfig.DoItBackgroundColor:
GIbgcolor?GIbgcolor:"#FEFECE";oPopBody.style.color="black";$("#giSplitter").css("background-color",DoItConfig.DoItBorderColor);$(oPopup.document).find("#splitterDiv").css("background-color",DoItConfig.DoItBorderColor);if(isIE&&popupVersion){oPopBody.style.border="solid 3px";oPopBody.style.borderColor=DoItConfig.DoItBorderColor;oPopBody.style.borderBottomWidth="2px"}oPopBody.aLink="blue";oPopBody.vLink="blue";if(isIE&&popupVersion){oPopBody.attachEvent("onmousemove",BodyMove);oPopBody.attachEvent("onmousedown",
GISizePopup)}oPopup_show(LeftPos,TopPos,popWidth,popHeight)}var PopIV=null,noStart=false;function Load(){GIPlayer=self;loadtemp();GINoCookieSave=false;InitPopUp();if(isIE&&popupVersion)PopIV=setInterval(RePop,250)}var resizdir=0,resizbdown=false;
function BodyMove(){var c=oPopBody.ownerDocument.parentWindow.event;if((c.srcElement.id=="movePopup"||c.srcElement.id=="movePopup2")&&!resizbdown)resizdir="move";else if((c.srcElement.id=="resizeSE"||c.clientX>=popWidth-3&&c.y>=popHeight-15||c.clientX>=popWidth-15&&c.y>=popHeight-3)&&!resizbdown){oPopBody.style.cursor="se-resize";resizdir="se"}else if((c.clientX<=3&&c.clientY<=15||c.clientY<=3&&c.clientX<=15)&&!resizbdown){oPopBody.style.cursor="nw-resize";resizdir="nw"}else if((c.clientX<=3&&c.clientY>=
popHeight-15||c.clientY>=popHeight-3&&c.clientX<=15)&&!resizbdown){oPopBody.style.cursor="sw-resize";resizdir="sw"}else if((c.clientX>=popWidth-15&&c.clientY<=3||c.clientY<=15&&c.clientX>=popWidth-3)&&!resizbdown){oPopBody.style.cursor="ne-resize";resizdir="ne"}else if(c.clientY>=popHeight-3&&!resizbdown){oPopBody.style.cursor="s-resize";resizdir="s"}else if(c.clientX>=popWidth-3&&!resizbdown){oPopBody.style.cursor="e-resize";resizdir="e"}else if(c.clientX<=3&&!resizbdown){oPopBody.style.cursor="w-resize";
resizdir="w"}else if(c.clientY<=3&&!resizbdown){oPopBody.style.cursor="n-resize";resizdir="n"}else{oPopBody.style.cursor="auto";resizbdown||(resizdir=0)}}var captobj=null,doresize=false,rIV=null;function GIResize(){doresize=true}
function GISizePopup(){if(resizdir){var c=oPopup.document.parentWindow.event;if(c.button==1){var d=c.type;if(d=="mousedown"&&c.button==1){captobj=c.srcElement;resizeStartPos={left:LeftPos-c.screenX,width:popWidth+c.screenX,width2:popWidth-c.screenX,right:LeftPos+popWidth,top:TopPos-c.screenY,height:popHeight+c.screenY,height2:popHeight-c.screenY,bottom:TopPos+popHeight};resizbdown=true;captobj.setCapture();rIV=setInterval(GIResize,15);captobj.attachEvent("onmousemove",GISizePopup);captobj.attachEvent("onmouseup",
GISizePopup)}else if(d=="mouseup"){if(PlayerConfig.EnableCookies&&GICookie&&GICookie!=null){GICookie.Cleft=LeftPos;GICookie.Ctop=TopPos;GICookie.Cwidth=popWidth;GICookie.Cheight=ScreenshotVisible?popHeight:popHeight+SavedSSHeight;GICookie.Csss=ScreenshotVisible+1;GICookie.Store()}resizbdown=false;clearInterval(rIV);captobj.detachEvent("onmousemove",GISizePopup);captobj.detachEvent("onmouseup",GISizePopup);captobj.releaseCapture();resizeStartPos=null}else if(resizeStartPos&&doresize){doresize=false;
switch(resizdir){case "move":LeftPos=resizeStartPos.left+c.screenX;TopPos=resizeStartPos.top+c.screenY;break;case "se":popHeight=resizeStartPos.height2+c.screenY;popWidth=resizeStartPos.width2+c.screenX;if(LeftPos+popWidth>screen.width)popWidth=screen.width-LeftPos;if(TopPos+popHeight>screen.height)popHeight=screen.height-TopPos;break;case "ne":popHeight=resizeStartPos.height-c.screenY;popWidth=resizeStartPos.width2+c.screenX;TopPos=resizeStartPos.top+c.screenY;if(TopPos<0)popHeight=resizeStartPos.bottom;
if(TopPos+200>resizeStartPos.bottom)TopPos=resizeStartPos.bottom-200;if(LeftPos+popWidth>screen.width)popWidth=screen.width-LeftPos;break;case "nw":popWidth=resizeStartPos.width-c.screenX;LeftPos=resizeStartPos.left+c.screenX;popHeight=resizeStartPos.height-c.screenY;TopPos=resizeStartPos.top+c.screenY;if(LeftPos<0)popWidth=resizeStartPos.right;if(TopPos<0)popHeight=resizeStartPos.bottom;if(LeftPos+150>resizeStartPos.right)LeftPos=resizeStartPos.right-150;if(TopPos+200>resizeStartPos.bottom)TopPos=
resizeStartPos.bottom-200;break;case "sw":popHeight=resizeStartPos.height2+c.screenY;popWidth=resizeStartPos.width-c.screenX;LeftPos=resizeStartPos.left+c.screenX;if(TopPos+popHeight>screen.height)popHeight=screen.height-TopPos;if(LeftPos+150>resizeStartPos.right)LeftPos=resizeStartPos.right-150;if(LeftPos<0)popWidth=resizeStartPos.right;break;case "w":popWidth=resizeStartPos.width-c.screenX;LeftPos=resizeStartPos.left+c.screenX;if(LeftPos+150>resizeStartPos.right)LeftPos=resizeStartPos.right-150;
if(LeftPos<0)popWidth=resizeStartPos.right;break;case "n":popHeight=resizeStartPos.height-c.screenY;TopPos=resizeStartPos.top+c.screenY;if(TopPos+200>resizeStartPos.bottom)TopPos=resizeStartPos.bottom-200;if(TopPos<0)popHeight=resizeStartPos.bottom;break;case "e":popWidth=resizeStartPos.width2+c.screenX;if(LeftPos+popWidth>screen.width)popWidth=screen.width-LeftPos;break;case "s":popHeight=resizeStartPos.height2+c.screenY;if(TopPos+popHeight>screen.height)popHeight=screen.height-TopPos}if(ScreenshotVisible){if(popHeight<
200)popHeight=200}else if(popHeight<129)popHeight=129;if(popWidth<150)popWidth=150;if(ScreenshotVisible){c=oPopup.document.getElementById("split1");d=oPopup.document.getElementById("split2");var e=c.clientHeight;if(e<78)e=78;e/=c.clientHeight+d.clientHeight;if(e<0.1)e=0.1;if(e>0.9)e=0.9;c.style.height=e*100+"%";d.style.height=(1-e)*100+"%"}oPopup_show(LeftPos,TopPos,popWidth,popHeight);GITextFrame.style.width=popWidth-29}}}}
function touch(c){if(c.originalEvent.touches&&c.originalEvent.touches.length)return c.originalEvent.touches[0];else if(c.originalEvent.changedTouches&&c.originalEvent.changedTouches.length)return c.originalEvent.changedTouches[0]}var splitState=0;
function SplitStart(c){var d=c;if(IsTouchDevice()){c.preventDefault();d=touch(c)}clearInterval(IV);IV=null;startPos={Y:$(this).scrollTop()+d.clientY,X:$(this).scrollLeft()+d.clientX};if(IsTouchDevice()){$(document).bind("touchend",SplitEnd);$(document).bind("touchmove",SplitMove)}else{$(document).bind("mouseup",SplitEnd);$(document).bind("mousemove",SplitMove)}$("#EventListenerDIV").css({cursor:"n-resize","z-index":"4"})}
function SplitMove(c){var d=c;if(IsTouchDevice()){c.preventDefault();d=touch(c)}c=d.clientY;d=$("#split1"+idPostFix);var e=$("#split2"+idPostFix),f=0;if(isIE&&popupVersion){f=d.getBoundingClientRect().top;c-=f+12}else c-=27;if(c<78)c=78;f=d.height()+e.height();c/=f;if(c<0.1)c=0.1;if(c>0.9)c=0.9;d.css({height:c*100+"%"});e.css({top:c*100+"%",height:(1-c)*100+"%"});GIOnResize()}
function SplitEnd(c){if(IsTouchDevice()){c.preventDefault();touch(c)}if(PlayerConfig.EnableCookies&&GICookie&&GICookie!=null){GICookie.Cleft=LeftPos;GICookie.Ctop=TopPos;GICookie.Cwidth=popWidth;GICookie.Cheight=ScreenshotVisible?popHeight:popHeight+SavedSSHeight;GICookie.Cs2=isIE&&popupVersion?oPopup.document.getElementById("split2"+idPostFix).clientHeight:oPopup.document.getElementById("split1"+idPostFix).style.height;GICookie.Csss=ScreenshotVisible+1;GICookie.Store()}$("#EventListenerDIV").css({cursor:"default",
"z-index":"-1"});$(document).unbind("mousemove",SplitMove);$(document).unbind("mouseup",SplitEnd);$(document).unbind("touchmove",SplitMove);$(document).unbind("touchend",SplitEnd)}
function GGGSplitD(c){var d=isIE?oPopBody.ownerDocument.parentWindow.event:c;if(isIE){if(!popupVersion){c.onmousemove=function(){GGGSplitM(c)};c.onmouseup=function(){GGGSplitU(c)}}c.setCapture()}else{eventTarget=d.currentTarget;d=Get_Element("EventListenerDIV");d.style.cursor="n-resize";d.style.zIndex=4;d.addEventListener("mousemove",function(e){GGGSplitM(e)},true);d.addEventListener("mouseup",function(e){GGGSplitU(e)},true)}splitState=1}
function GGGSplitM(c){c=isIE?oPopBody.ownerDocument.parentWindow.event:c;if(splitState){c=c.clientY;var d=oPopup.document.getElementById("split1"+idPostFix),e=oPopup.document.getElementById("split2"+idPostFix),f=0;if(isIE&&popupVersion){f=d.getBoundingClientRect().top;c-=f+12}else{f=oPopup.document.getElementById("giTitlebarFF").clientHeight;c-=isIE?f+27:f+21}if(c<78)c=78;f=d.clientHeight+e.clientHeight;c/=f;if(c<0.1)c=0.1;if(c>0.9)c=0.9;d.style.height=c*100+"%";e.style.top=c*100+"%";e.style.height=
(1-c)*100+"%";GIOnResize()}}
function GGGSplitU(c){if(PlayerConfig.EnableCookies&&GICookie&&GICookie!=null){GICookie.Cleft=LeftPos;GICookie.Ctop=TopPos;GICookie.Cwidth=popWidth;GICookie.Cheight=ScreenshotVisible?popHeight:popHeight+SavedSSHeight;GICookie.Cs2=isIE&&popupVersion?oPopup.document.getElementById("split2"+idPostFix).clientHeight:oPopup.document.getElementById("split1"+idPostFix).style.height;GICookie.Csss=ScreenshotVisible+1;GICookie.Store()}splitState=0;isIE&&c.releaseCapture();eventTarget=null;if(!(isIE&&popupVersion)){c=
Get_Element("EventListenerDIV");c.style.zIndex=-1;c.style.cursor="default";if(isIE){c.onmousemove=null;c.onmouseup=null;c.releaseCapture()}else{c.removeEventListener("mousemove",function(d){SSEH(d)},true);c.removeEventListener("mouseup",function(d){SSEH(d)},true)}}}var startPos=null;
function SSPanStart(c){clearInterval(IV);IV=null;startPos={Y:$(this).scrollTop()+c.clientY,X:$(this).scrollLeft()+c.clientX};if(c.which==3)if(hpos){GICamera.scrollLeft=hpos.left-GICamera.clientWidth/2;GICamera.scrollTop=hpos.top-GICamera.clientHeight/2}else{GICamera.scrollLeft=0;GICamera.scrollTop=0}else{$(document).bind("mousemove",SSPanMove);$(document).bind("mouseup",SSPanEnd);$("#EventListenerDIV").css({cursor:"move","z-index":"4"})}}
function SSPanMove(c){if(startPos){$("#camera"+idPostFix).scrollTop(startPos.Y-c.clientY);$("#camera"+idPostFix).scrollLeft(startPos.X-c.clientX)}}function SSPanEnd(){$("#EventListenerDIV").css({cursor:"default","z-index":"-1"});$(document).unbind("mousemove",SSPanMove);$(document).unbind("mouseup",SSPanEnd);$(document).unbind("touchmove",SSPanMove);$(document).unbind("touchend",SSPanEnd)}
function SSEH(c){var d=oPopBody.ownerDocument.parentWindow.event;if(d.type=="mousedown"&&d.button==2){clearInterval(IV);IV=null;if(hpos){GICamera.scrollLeft=hpos.left-GICamera.clientWidth/2;GICamera.scrollTop=hpos.top-GICamera.clientHeight/2}else{GICamera.scrollLeft=0;GICamera.scrollTop=0}}else if(d.type=="mousedown"&&d.button){clearInterval(IV);IV=null;startPos={top:c.scrollTop+d.screenY,left:c.scrollLeft+d.screenX};eventTarget=c;d=Get_Element("EventListenerDIV");d.style.cursor="move";d.style.zIndex=
4;d.onmousemove=SSEH;c.onmouseup=function(){SSEH(c)};c.setCapture()}else if(d.type=="mouseup"){startPos=null;isIE&&popupVersion&&c.releaseCapture();eventTarget=null;if(!(isIE&&popupVersion)){d=Get_Element("EventListenerDIV");d.style.zIndex=-1;d.style.cursor="default";d.onmousemove=null;c.onmouseup=null;c.releaseCapture()}}else if(startPos)if(isIE&&popupVersion){c.scrollTop=startPos.top-d.screenY;c.scrollLeft=startPos.left-d.screenX}else{eventTarget.scrollTop=startPos.top-d.screenY;eventTarget.scrollLeft=
startPos.left-d.screenX}}var popHidden=false;function HidePopup(){if(isIE&&popupVersion){oPopup_show(1,1,1,1,true);clearInterval(PopIV)}else if(!upk.browserInfo.isTouchDevice())document.title="_"+document.title;popHidden=true;GIStopCHL()}function ShowPopup(){popHidden=false;oPopup_show(LeftPos,TopPos,popWidth,popHeight);if(isIE&&popupVersion)PopIV=setInterval(RePop,250);else if(document.title.indexOf("_")==0)document.title=document.title.substr(1);contCHL&&top.GIPlayer.GIStartIV()}
function closeAp(){if(appOpened){!noStart&&GIEndFrame&&lms_topicFinish(getMyGuid());noStart||lms_ClosePage();closeAp2()}}
function closeAp2(){if(PlayerConfig.EnableCookies&&GICookie&&GICookie!=null){if(!(isIE&&popupVersion)){TopPos=window.screenTop!=undefined?window.screenTop:window.screenY;LeftPos=window.screenLeft!=undefined?window.screenLeft:window.screenX;popWidth=document.getElementById("noPopupFF").clientWidth;popHeight=document.getElementById("noPopupFF").clientHeight}if(!GINoCookieSave){GICookie.Cleft=LeftPos;GICookie.Ctop=TopPos;GICookie.Cwidth=popWidth;GICookie.Cheight=ScreenshotVisible||!(isIE&&popupVersion)?
popHeight:popHeight+SavedSSHeight;GICookie.Csss=ScreenshotVisible+1;GICookie.Store()}}clearInterval(IV);if(isIE&&popupVersion){clearInterval(PopIV);StopKeyHook();oPopup.hide()}appOpened=false;top.GIPlayer&&top.GIPlayer.GIClosePlayer();window.close()}
function SendEventToHemiFFButtonPlugin(){var c=document.getElementById("HTML2HemiFFButtonData");if(!c){c=document.createElement("HTML2HemiFFButtonData");c.setAttribute("id","HTML2HemiFFButtonData");document.documentElement.appendChild(c)}if("createEvent"in document){c.setAttribute("paramDomain",document.domain);c.setAttribute("paramTitle",document.title+" - Mozilla Firefox");var d=document.createEvent("Events");d.initEvent("StayOnTopEvent",true,false);c.dispatchEvent(d);c.removeAttribute("paramTitle");
c.removeAttribute("paramDomain")}}
var template_leadin="",template_leadout="",template_explanation="",template_pauselink="",template_knowit_leadin="",template_knowit_leadout="",template_knowit_nextstep="",template_knowit_explanation="",template_knowit_leadin_score="",template_knowit_warningL1="",template_knowit_warningL2="",template_knowit_warningL3_0="",template_knowit_warningL3_H="",template_knowit_warningL4="",template_scoring="",template_scoring_YES="",template_scoring_NO="",template_knowit_continue="",template_knowit_confirmdemo=
"",template_typingcomplete="",template_knowit_dragwarning="",template_knowit_finish_close="",template_knowit_finish_close_inassessment="",template_strinp_suppress_example=0,_template_arr=[],_template_retfv="",xmlDoc;
function LoadTemplates(c,d){_template_retfv=d;if(document.implementation&&document.implementation.createDocument){xmlDoc=document.implementation.createDocument("","",null);xmlDoc.onload=LoadTemplates_Returned0}else if(window.ActiveXObject){xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.onreadystatechange=function(){xmlDoc.readyState==4&&LoadTemplates_Returned0()}}else{LoadTemplates_Error();return}try{xmlDoc.load("../../template/"+c+"/template.xml")}catch(e){LoadXMLDocArray("../../template/"+
c+"/template.xml",LoadTemplates_Returned,LoadTemplates_Error,"Item",true)}}function LoadTemplates_Returned0(){_nodesArray=[];for(var c=xmlDoc.getElementsByTagName("Item"),d=0;d<c.length;d++){for(var e=c[d],f=e.attributes[0].value,g="",l=0;l<e.childNodes.length;l++)if(e.childNodes[l].xml)g+=e.childNodes[l].xml;else{var m=new XMLSerializer;g+=m.serializeToString(e.childNodes[l])}_nodesArray[_nodesArray.length]=f+"="+g}LoadTemplates_Returned(_nodesArray)}
function LoadTemplates_Error(){alert("Common template loading error ...")}function LoadTemplates_Returned(c){_template_arr=[];for(var d=0;d<c.length;d++){var e=c[d].indexOf("="),f=c[d].substr(0,e);e=c[d].substr(e+1);_template_arr[f]=e}LoadAll();setTimeout(_template_retfv,100)}function GetTemp(c){if(_template_arr[c])return _template_arr[c];return""}function Insert(c,d,e){return c.substr(0,e)+d+c.substr(e)}
function LoadAll(){template_leadin=GetTemp("leadin");template_leadout=GetTemp("leadout");template_explanation=GetTemp("continue");template_knowit_leadin=GetTemp("knowit_leadin");template_knowit_leadout=GetTemp("knowit_leadout");template_knowit_nextstep=GetTemp("knowit_nextstep");template_knowit_explanation=GetTemp("knowit_explanation");if(IsTouchDevice()){var c=' style="color:#0033cc;font-weight:bold;" href="javascript:HLink(0)"';template_leadin=R_swipe_start;var d=template_leadin.indexOf("<a");template_leadin=
Insert(template_leadin,c,d+2);c=' style="color:#0033cc;font-weight:bold;" href="javascript:HLink(1)"';template_explanation=R_swipe_continue;d=template_explanation.indexOf("<a");template_explanation=Insert(template_explanation,c,d+2);c=' style="color:#0033cc;font-weight:bold;" href="javascript:HLink(2)"';template_leadout=R_swipe_finish;d=template_leadout.indexOf("<a");template_leadout=Insert(template_leadout,c,d+2);template_knowit_leadin=template_leadin;template_knowit_leadout=template_knowit_explanation=
template_explanation}template_knowit_leadin_score=GetTemp("leadin_score");template_knowit_warningL1=GetTemp("knowit_warningL1");template_knowit_warningL2=GetTemp("knowit_warningL2");template_knowit_warningL3_0=GetTemp("knowit_warningL3_0");template_knowit_warningL3_H=GetTemp("knowit_warningL3_H");template_knowit_warningL4=GetTemp("knowit_warningL4");template_scoring=GetTemp("scoring");if(IsTouchDevice()){d=template_scoring.indexOf('align="right"');c=template_scoring.indexOf("<",d);d=template_scoring.indexOf("</td",
d);c=template_scoring.substr(0,c);d=template_scoring.substr(d);template_scoring=c+'<span class="InstructText">'+Template_Replace(template_leadout,"HLink(2)","HLink(20)")+"</span>"+d}template_scoring=template_scoring.substr(0,6)+' width="100%" '+template_scoring.substr(6);template_scoring_YES=GetTemp("scoring_YES");template_scoring_NO=GetTemp("scoring_NO");template_knowit_continue=GetTemp("knowit_continue");template_knowit_confirmdemo=GetTemp("knowit_confirmdemo");template_typingcomplete=GetTemp("typingcomplete");
template_knowit_dragwarning=GetTemp("knowit_dragwarning");template_knowit_finish_close=GetTemp("knowit_finish_close");template_knowit_finish_close_inassessment=GetTemp("knowit_finish_close_inassessment");template_strinp_suppress_example=GetTemp("strinp_suppress_example");GetTemplate_knowit_leadin_score("168")}function ReplaceAll(c,d,e){for(var f=c.indexOf(d);f>=0;){c=Template_Replace(c,d,e);f=c.indexOf(d)}return c}
function Template_Replace(c,d,e){var f=c.indexOf(d);if(f<0)return c;var g=c.substr(0,f);c=c.substr(f+d.length);return g+e+c}function GetTemplate_knowit_leadin_score(c){return Template_Replace(template_knowit_leadin_score,"$score$",c)}function GetTemplate_scoring(c,d,e){c=Replace(template_scoring,"$good$",c);d=Replace(c,"$needed$",d);return Replace(d,"$result$",e)}
function onHelp(c){if(c.charAt(c.length-1)=="/")c=c.substr(0,c.length-1);if(c.length>0)c+="/";var d=screen.availWidth/17,e=screen.availHeight-3*d;if(e>500)e=500;e=e*4.5/3;window.open(c+"../help/toc.html","odhelp","width=637,height=390,left="+d+",top="+d+",resizable=1,toolbar=1,scrollbars=1,location=0,menubar=0").focus()}
function Cookie(c,d,e,f,g,l){this.$document=c;this.$name=d;if(e=="today"){c=new Date;c.setHours(23);c.setMinutes(59);c.setSeconds(59);this.$exp=c}else this.$exp=e?new Date((new Date).getTime()+e*864E5):null;this.$path=f?f:null;this.$domain=g?g:null;this.$secure=l?true:false}
Cookie.prototype.Store=function(){if(PlayerConfig.EnableCookies){var c="",d;for(d in this)if(!(d.charAt(0)=="$"||typeof this[d]=="function")){if(c!="")c+="&";c+=d+":"+escape(this[d])}c=this.$name+"="+c;if(this.$exp)c+="; expires="+this.$exp.toGMTString();if(this.$path)c+="; path="+this.$path;if(this.$domain)c+="; domain="+this.$domain;if(this.$secure)c+="; secure=";this.$document.cookie=c}};
Cookie.prototype.Load=function(){if(!PlayerConfig.EnableCookies)return false;var c=this.$document.cookie;if(c=="")return false;var d=c.indexOf(this.$name+"=");if(d==-1)return false;d+=this.$name.length+1;var e=c.indexOf(";",d);if(e==-1)e=c.length;c=decodeURIComponent(c.substring(d,e)).split("&");for(d=0;d<c.length;d++){e=c[d].split(":");this[e[0]]=unescape(e[1])}return true};
Cookie.prototype.Remove=function(){if(PlayerConfig.EnableCookies){var c=this.$name+"=";if(this.$path)c+="; path="+this.$path;if(this.$domain)c+="; domain="+this.$domain;c+="; expires=Fri, 02-Jan-1970 00:00:00 GMT";this.$document.cookie=c}};
function UserPreferences(){this.EnablePreferences=true;this.TimeStamp="000000000000";this.ShowLeadIn=this.PlayAudio="all";this.MarqueeColor="red";this.TryIt={};this.TryIt.EnableSkipping=true;this.DoIt={};this.DoIt.HotKey={};this.DoIt.HotKey.Ctrl="L";this.DoIt.HotKey.Shift="N";this.DoIt.HotKey.Alt="L";this.DefaultPlayMode="S";this.WebPageAutoPlayback=true;this.ApplicableOutlineDisplay="L";this.NavbarVolume=100;this.EnableShowDiagnostics=false}
UserPreferences.prototype.Copy=function(c){this.TimeStamp=c.TimeStamp;this.PlayAudio=c.PlayAudio;this.ShowLeadIn=c.ShowLeadIn;this.MarqueeColor=c.MarqueeColor;this.TryIt.EnableSkipping=c.TryIt.EnableSkipping;this.DoIt.HotKey.Ctrl=c.DoIt.HotKey.Ctrl;this.DoIt.HotKey.Shift=c.DoIt.HotKey.Shift;this.DoIt.HotKey.Alt=c.DoIt.HotKey.Alt;this.DefaultPlayMode=c.DefaultPlayMode;this.WebPageAutoPlayback=c.WebPageAutoPlayback;this.ApplicableOutlineDisplay=c.ApplicableOutlineDisplay;this.NavbarVolume=c.NavbarVolume;
this.EnableShowDiagnostics=c.EnableShowDiagnostics};
UserPreferences.prototype.Compare=function(c){if(this.PlayAudio!=c.PlayAudio)return true;if(this.ShowLeadIn!=c.ShowLeadIn)return true;if(this.MarqueeColor!=c.MarqueeColor)return true;if(this.TryIt.EnableSkipping!=c.TryIt.EnableSkipping)return true;if(this.DoIt.HotKey.Ctrl!=c.DoIt.HotKey.Ctrl)return true;if(this.DoIt.HotKey.Shift!=c.DoIt.HotKey.Shift)return true;if(this.DoIt.HotKey.Alt!=c.DoIt.HotKey.Alt)return true;if(this.DefaultPlayMode!=c.DefaultPlayMode)return true;if(this.WebPageAutoPlayback!=
c.WebPageAutoPlayback)return true;if(this.ApplicableOutlineDisplay!=c.ApplicableOutlineDisplay)return true;if(this.NavbarVolume!=c.NavbarVolume)return true;if(this.EnableShowDiagnostics!=c.EnableShowDiagnostics)return true;return false};UserPreferences.prototype.GetCookie=function(){return new Cookie(document,"OnDemandPlayer",365,"/",null,false)};
UserPreferences.prototype.LoadCookie=function(){var c=this.GetCookie();c.Load();if(c.PlayAudio)this.PlayAudio=c.PlayAudio;UserPref_PlayAudio_Original=this.PlayAudio;if(upk.browserInfo.isSoundSupported()==false)this.PlayAudio="none";if(!(UserPrefs.TimeStamp!="000000000000"&&(!c.TimeStamp||UserPrefs.TimeStamp>c.TimeStamp))){if(c.ShowLeadIn)this.ShowLeadIn=c.ShowLeadIn;if(c.MarqueeColor)this.MarqueeColor=c.MarqueeColor;if(c.TryIt_EnableSkipping)this.TryIt.EnableSkipping=c.TryIt_EnableSkipping=="true";
if(c.DoIt_HotKey_Ctrl)this.DoIt.HotKey.Ctrl=c.DoIt_HotKey_Ctrl;if(c.DoIt_HotKey_Shift)this.DoIt.HotKey.Shift=c.DoIt_HotKey_Shift;if(c.DoIt_HotKey_Alt)this.DoIt.HotKey.Alt=c.DoIt_HotKey_Alt;if(c.DefaultPlayMode)this.DefaultPlayMode=c.DefaultPlayMode;if(c.WebPageAutoPlayback)this.WebPageAutoPlayback=c.WebPageAutoPlayback;if(c.ApplicableOutlineDisplay)this.ApplicableOutlineDisplay=c.ApplicableOutlineDisplay;if(c.NavbarVolume)this.NavbarVolume=c.NavbarVolume;if(c.EnableShowDiagnostics)this.EnableShowDiagnostics=
c.EnableShowDiagnostics=="true"}};
UserPreferences.prototype.StoreCookie=function(){var c=this.GetCookie();c.TimeStamp=this.TimeStamp;c.PlayAudio=this.PlayAudio;c.ShowLeadIn=this.ShowLeadIn;c.MarqueeColor=this.MarqueeColor;c.TryIt_EnableSkipping=this.TryIt.EnableSkipping;c.DoIt_HotKey_Ctrl=this.DoIt.HotKey.Ctrl;c.DoIt_HotKey_Shift=this.DoIt.HotKey.Shift;c.DoIt_HotKey_Alt=this.DoIt.HotKey.Alt;c.DefaultPlayMode=this.DefaultPlayMode;c.WebPageAutoPlayback=this.WebPageAutoPlayback;c.ApplicableOutlineDisplay=this.ApplicableOutlineDisplay;
c.NavbarVolume=this.NavbarVolume;c.EnableShowDiagnostics=this.EnableShowDiagnostics;c.Store()};UserPreferences.prototype.GetUrlParamString=function(){return"PP_SOUND="+this.PlayAudio+"&PP_LEADIN="+this.ShowLeadIn+"&PP_SKIP="+(this.TryIt.EnableSkipping?"true":"false")+"&PP_MARQUEE="+this.MarqueeColor+"&PP_ENABLE="+(this.EnablePreferences?"true":"false")+"&PP_HOTKEY="+this.DoIt.HotKey.Ctrl+this.DoIt.HotKey.Shift+this.DoIt.HotKey.Alt};
UserPreferences.prototype.ParseUrlParamString=function(c){c=c.split("&");for(var d=0;d<c.length;d++){var e=c[d].split("=");if(e[0].toUpperCase()=="PP_SOUND")this.PlayAudio=e[1];else if(e[0].toUpperCase()=="PP_LEADIN")this.ShowLeadIn=e[1];else if(e[0].toUpperCase()=="PP_MARQUEE")this.MarqueeColor=e[1];else if(e[0].toUpperCase()=="PP_SKIP")this.TryIt.EnableSkipping=e[1]=="true";else if(e[0].toUpperCase()=="PP_ENABLE")this.EnablePreferences=e[1]=="true";else if(e[0].toUpperCase()=="PP_HOTKEY"){this.DoIt.HotKey.Ctrl=
e[1].charAt(0);this.DoIt.HotKey.Shift=e[1].charAt(1);this.DoIt.HotKey.Alt=e[1].charAt(2)}}};var UserPrefs=new UserPreferences,UserPref_PlayAudio_Original="";typeof SetDefaultPreferences!=="undefined"&&SetDefaultPreferences();UserPrefs.EnablePreferences&&UserPrefs.LoadCookie();var paramstr=unescape(document.location.hash.substring(1));if(paramstr=="")paramstr=unescape(document.location.search.substring(1));UserPrefs.ParseUrlParamString(paramstr);
function OpenPreferencesDialog(c,d){if(UserPrefs.EnablePreferences){var e=c+"/html/preferences.html",f;f=upk.browserInfo.isChrome()?430:upk.browserInfo.isFF()?420:upk.browserInfo.isSafari()?350:412;var g=[];try{if(lms_IsUserProfileAvailable()){var l=lms_GetUserProfileUrl();if(l!="")g[g.length]="UserProfileUrl="+Escape.MyEscape(l)}}catch(m){}if(d)g[g.length]="nosound";for(l=0;l<g.length;l++){e+=l==0?"?":"&";e+=g[l]}if(IsTouchDevice()||upk.browserInfo.isIE10Modern()){f+=50;showDialog(e,-1,-1,400,f,
true,96,"../../../",false)}else window.open(e,"prefwin","width=500,height="+f+",resizable=1,scrollbars=0,top="+(screen.availHeight-290)/2+",left="+(screen.availWidth-500)/2)}else alert(R_preferences_disabled)}function SessionPreferences(){this.swipeInstructionShowed=false}SessionPreferences.prototype.GetCookie=function(){return new Cookie(document,"OnDemandPlayerSession",null,"/")};
SessionPreferences.prototype.LoadCookie=function(){var c=this.GetCookie();c.Load();if(c.swipeInstructionShowed)this.swipeInstructionShowed=c.swipeInstructionShowed};SessionPreferences.prototype.StoreCookie=function(){var c=this.GetCookie();c.swipeInstructionShowed=this.swipeInstructionShowed;c.Store()};var SessionPrefs=new SessionPreferences;
function GetContentPathName(){var c=window.location.pathname,d=c.indexOf("data/toc.html");if(d>0)return c.substr(0,d);d=c.indexOf("html/roles.html");if(d>0)return c.substr(0,d);d=c.indexOf("data/tpc/");if(d>0)return c.substr(0,d);d=c.indexOf("html/lmsui.html");if(d>0)return c.substr(0,d);return c}function UserRolesClass(){this.Filtering=false;this.Roles=[]}UserRolesClass.prototype.Copy=function(c){this.Filtering=c.Filtering;this.Roles=[];for(var d=0;d<c.Roles.length;d++)this.Roles[d]=c.Roles[d]};
UserRolesClass.prototype.Compare=function(c){if(this.Filtering!=c.Filtering)return true;if(this.Roles.length!=c.Roles.length)return true;for(var d=0;d<this.Roles.length;d++)if(this.Roles[d]!=c.Roles[d])return true;return false};UserRolesClass.prototype.GetCookie=function(){return new Cookie(document,"OnDemandPlayerRoles",90,GetContentPathName(),null,false)};
UserRolesClass.prototype.LoadCookie=function(){var c=this.GetCookie();c.Load();this.Filtering=false;if(c.Filtering)this.Filtering=c.Filtering=="true";this.Roles=[];if(c.Roles)this.Roles=c.Roles.split("+")};UserRolesClass.prototype.StoreCookie=function(){var c=this.GetCookie();c.Filtering=this.Filtering?"true":"false";c.Roles=this.Roles.join("+");c.Store()};UserRolesClass.prototype.GetUrlParamString=function(){return"PP_ROLEFILTERING="+(this.Filtering?"true":"false")+"&PP_ROLES="+encodeURIComponent(this.Roles.join("+"))};
UserRolesClass.prototype.ParseUrlParamString=function(c){c=c.split("&");for(var d=0;d<c.length;d++){var e=c[d].split("=");if(e[0].toUpperCase()=="PP_ROLEFILTERING")this.Filtering=e[1]=="true";else if(e[0].toUpperCase()=="PP_ROLES"){this.Roles=[];if(e[1])this.Roles=e[1].split("+")}}};var UserRoles=new UserRolesClass;UserRoles.LoadCookie();UserRoles.ParseUrlParamString(paramstr);
function OpenRolesDialog(c){window.open(c+"/html/roles.html","roleswin","width=500,height=318,resizable=1,scrollbars=0,top="+(screen.availHeight-286)/2+",left="+(screen.availWidth-500)/2)}var sounds=[];function SoundObj(c,d,e){c=d.split("+");d=c.length;this.flist=[];this.fct=0;this.duration=e;for(e=0;e<d;e++){var f=c[e];if(f.substr(0,5)!="TEMP:"){this.flist[this.fct]=f;this.fct++}}}function Sound(c,d,e){if(c.indexOf(".")<0)c+=".ASX";sounds[c.substr(1)]=new SoundObj(c,d,e)}var isOnLink=false;
function ShowInfoBlock(c,d){try{playMode!=null&&playMode!=""&&PlayStop(true)}catch(e){}var f=false,g=Escape.MyUnEscape(c);if(g.indexOf("odrel://")==0)g=resolve(g);for(var l=g;l.substr(0,3)=="../";)l=l.substr(3);var m=l.lastIndexOf("/");if(m>=0&&l.substr(m)=="/index.html")f=true;if(d==null||d.length==0)d="_blank";d=d.toLowerCase();if(d!="_blank")this.location.replace(g);else{if(f){m=screen.availWidth;m=(m-PlayerConfig.InfoWidth)/2;var j=screen.availHeight;j=(j-PlayerConfig.InfoHeight)/2;id=window.open(g,
"","top="+j+",left="+m+",width="+PlayerConfig.InfoWidth+",height="+PlayerConfig.InfoHeight+"toolbar=1,scrollbars=1,statusbar=1,resizable=1")}else{f=PlayerConfig.InfoWidth;l=PlayerConfig.InfoHeight;if(PlayerConfig.InfoWidth2)if(PlayerConfig.InfoWidth2>0)f=PlayerConfig.InfoWidth2;if(PlayerConfig.InfoHeight2)if(PlayerConfig.InfoHeight2>0)l=PlayerConfig.InfoHeight2;m=screen.availWidth;m=(m-f)/2;j=screen.availHeight;j=(j-l)/2;id=window.open(g,"","top="+j+",left="+m+",width="+f+",height="+l+"toolbar=1,scrollbars=1,location=1,statusbar=1,menubar=1,resizable=1")}setTimeout("Center("+
m+","+j+")",500)}}function OnLink(){isOnLink=true}function OffLink(){isOnLink=false}var globalloc="";function MakeAbsolute(c){if(c.toLowerCase().substr(0,7)=="mailto:")return c;var d="";if(globalloc.length==0)for(globalloc=location.href;globalloc.indexOf("\\")!=-1;)globalloc=globalloc.replace("\\","/");d=globalloc;var e=d.indexOf("#");if(e<0)e=d.indexOf("?");if(e>=0)d=d.substr(0,e);e=d.lastIndexOf("/");return e!=-1&&c.indexOf("//")==-1?d.substr(0,e+1)+c:c}var id;
function Center(c,d){try{id.focus();id.moveTo(c,d)}catch(e){}}var popupMenu=0,aPopBody=0,innerBody=0;function ActionMenu(){this.Open=_AOpen;this.Close=_AClose;this.Refresh=_ARefresh;this.IsOnScreen=_AIsOnScreen;this.created=this.onScreen=false}
function _AOpen(){if(upk.browserInfo.isExplorer()&&popupVersion){if(!popupMenu){popupMenu=oPopup.document.parentWindow.createPopup();popupMenuBody=popupMenu.document.body}aPopBody=popupMenu.document.body;aPopBody.style.borderStyle="solid";aPopBody.style.borderWidth="1px";aPopBody.style.borderColor="gray";aPopBody.style.backgroundColor="#f7f7e7";aPopBody.style.marginTop="8px";aPopBody.style.marginBottom="8px";aPopBody.style.marginLeft="8px";aPopBody.style.marginRight="8px";$(aPopBody).css(DoItConfig.DoItActionsColor);
$(aPopBody).css(DoItConfig.DoItActionsBorderColor);aPopBody.aLink="0000FF";aPopBody.link="0000FF";aPopBody.vLink="0000FF";aPopBody.text="black";aPopBody.ondragstart=EventCancel;aPopBody.oncontextmenu=EventCancel}else{if(this.created)aPopBody.style.display="block";else{popupMenu=window;aPopBody=document.createElement("div");aPopBody.id="actMenu";aPopBody.style.borderStyle="solid";aPopBody.style.borderWidth="1px";aPopBody.style.borderColor="gray";aPopBody.style.backgroundColor="#f7f7e7";aPopBody.aLink=
"0000FF";aPopBody.link="0000FF";aPopBody.vLink="0000FF";aPopBody.text="black";innerBody=document.createElement("div");aPopBody.appendChild(innerBody);innerBody.style.marginTop="8px";innerBody.style.marginBottom="8px";innerBody.style.marginLeft="8px";innerBody.style.marginRight="8px";aPopBody.style.position="absolute";aPopBody.style.display="block";aPopBody.style.zIndex=6;aPopBody.style.overflow="auto";document.body.appendChild(aPopBody);$("#actMenu").css(DoItConfig.DoItActionsColor);$("#actMenu").css(DoItConfig.DoItActionsBorderColor);
this.created=true}aPopBody.style.maxWidth=document.getElementById("noPopupFF").clientWidth-40+"px";aPopBody.style.maxHeight=document.getElementById("noPopupFF").clientHeight-50+"px"}this.onScreen=true}
function _AClose(){if(this.onScreen){if(upk.browserInfo.isExplorer()&&popupVersion)popupMenu.hide();else{aPopBody.style.display="none";var c=Get_Element("EventListenerDIV");c.style.zIndex=-1;if(upk.browserInfo.isExplorer())c.onmousedown=null;else c.removeEventListener("mousedown",GICloseAction,true)}this.onScreen=false}}
function OnActionSelection(c,d,e){PlayStop();upk.browserInfo.isExplorer()&&popupVersion&&popupMenu.hide();this.onScreen=false;c=="Alt"&&GIPlayer.GINextAlt();c=="Next"&&GIPlayer.GINextStep();c=="Pass"&&GIPlayer.GIPassStep();c=="Fail"&&GIPlayer.GIFailStep();c=="Skip"&&GIPlayer.GISkipStep();c=="Report"&&GIPlayer.GIGoToReport();c=="TestItNotes"&&GIPlayer.openTestNotes();c=="TestItSTR"&&GIPlayer.openSTR();c=="Prev"&&GIPlayer.GIPrevStep();c=="Restart"&&GIPlayer.GIRestart();c=="Conc"&&setTimeout(concepts[d].url,
20);c=="Info"&&setTimeout(GIFrames[e].infoblocks[d].url,20);c=="PlayT"&&GIPlayer.openTM();c=="PlayD"&&GIPlayer.openDM();c=="Prefs"&&GIPlayer.GIOpenPreferences();c=="Share"&&GIPlayer.GIShare();c=="Help"&&GIPlayer.GIOpenHelp();c=="LogOut"&&GIPlayer.LogOut();c=="CloseT"&&GIPlayer.GIClosePlayer();c=="ViewOutline"&&GIPlayer.GIClosePlayer(true);c=="CloseW"&&GIPlayer.GICloseAction();c=="Printit"&&GIPlayer.GIShowPrintit();c=="AskAnExpert"&&GIPlayer.AskAnExpert();c=="ProvideFeedback"&&GIPlayer.ProvideFeedback();
GICloseAction()}
function CorrectPopup(){upk.browserInfo.isExplorer()&&popupVersion&&popupMenu.show(0,0,0,0);sp=popupMenu.document.getElementById("actionspan");hsp=sp.offsetHeight;wsp=sp.offsetWidth+20;obj=oPopup.document.getElementById("pgiaction"+idPostFix);objh=obj.offsetHeight;if(upk.browserInfo.isExplorer()&&popupVersion){wsp=wsp>=250?250:wsp;popupMenu.show(-(wsp-20),objh,wsp+20,hsp+20,obj)}else{aPopBody.style.left=obj.offsetLeft+obj.offsetWidth-wsp-20+"px";aPopBody.style.top=obj.offsetTop+objh+6+"px"}ActMenu.onScreen=
true}function PopupToggle(c){if(popupMenu.document.getElementById(c).style.display=="none")popupMenu.document.getElementById(c).style.display="block";else popupMenu.document.getElementById(c).style.display="none";CorrectPopup()}var _topLevelLmsMode="";function ReducedTOCMode(){if(_inToc==false)return false;if(parent.parent._see_also==true)return true;if(parent.parent._sco==true)return true;if(parent.parent._associated_content==true)return true}
function CheckKPTMode(){if(_topLevelLmsMode=="")_topLevelLmsMode=GetTopLevelLmsMode();if(Kpath_launch==true&&_topLevelLmsMode=="LMS"&&ReducedTOCMode()==true)return true;return _topLevelLmsMode=="KPT"}function lms_IsKPathPortalAvailable(){__alert("lms_IsKPathPortalAvailable() called");if(CheckKPTMode()==false)return false;if(parent.urlParser.GetParameter("launchFromKPath")==null)return"";return lms_GetKPathPortalUrl().length>0}
function lms_GetKPathPortalUrl(){__alert("lms_GetKPathPortalUrl() called");if(Kpath_launch==false)return"";var c="";try{}catch(d){}return Kpath_home_URL}function AskAnExpert(){var c=lms_GetMentoringUrl(parent.topicID);h=530;w=window.open(c,"askanexpertwnd","width=550,height="+h+",resizable=1,scrollbars=0,top="+(screen.availHeight-530)/2+",left="+(screen.availWidth-550)/2);w.focus()}
function ProvideFeedback(){var c=lms_GetFeedbackUrl(parent.topicID);h=530;w=window.open(c,"providefeedbackwnd","width=550,height="+h+",resizable=1,scrollbars=0,top="+(screen.availHeight-530)/2+",left="+(screen.availWidth-550)/2);w.focus()}function lms_IsMentoringAvailable(){__alert("lms_IsMentoringAvailable() called");return document.LmsCom.doGetUPKValue("upk.mentoring_available")&&document.LmsCom.doGetUPKValue("upk.anonymous")=="0"}
function lms_GetMentoringUrl(){__alert("lms_GetMentoringUrl() called");return Kpath_base_URL+"/Mentoring/NewMentQuest.aspx?Path="+window.location.href.split("?")[0]+"&GUID="+lms_store.cguid+"&FeedbackType=1"+_feedbackUrlArgs}function lms_IsFeedbackAvailable(){__alert("lms_IsFeedbackAvailable() called");return document.LmsCom.doGetUPKValue("upk.feedback_available")&&document.LmsCom.doGetUPKValue("upk.anonymous")=="0"}
function lms_GetFeedbackUrl(){__alert("lms_GetFeedbackUrl() called");return Kpath_base_URL+"/Mentoring/NewMentQuest.aspx?Path="+window.location.href.split("?")[0]+"&GUID="+lms_store.cguid+"&FeedbackType=2"+_feedbackUrlArgs}
function _ARefresh(c,d,e,f,g,l,m,j,p,t){if(this.onScreen){j="";j=upk.browserInfo.isExplorer()&&popupVersion?"<div id='actionspan' style='font:8pt Arial;width:100'>":upk.browserInfo.isExplorer()?"<div id='actionspan' style='font:8pt Arial;min-width:100' nowrap='true'>":"<div id='actionspan' style='font:8pt Arial;width:100' nowrap='true'><ul style='padding-left:18px'>";if(e){j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"Alt\");return false;'>";j+=R_menu_alternatives;j+="</a></li>"}if(f){j+=
"<li><a href='#' onclick='parent.parent.OnActionSelection(\"Next\");return false;'>";j+=R_menu_nextstep;j+="</a></li>"}if(g){j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"Pass\");return false;'>";j+=R_testit_markpassed;j+="</a></li>";j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"Fail\");return false;'>";j+=R_testit_markfailed;j+="</a></li>";j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"Skip\");return false;'>";j+=R_testit_markskipped;j+="</a></li>";
j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"TestItNotes\");return false;'>";j+=R_testit_opennotes;j+="</a></li>";j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"TestItSTR\");return false;'>";j+=R_testit_openstr;j+="</a></li>";j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"Report\");return false;'>";j+=R_testit_gotoreport;j+="</a></li>"}if(d){j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"Prev\");return false;'>";j+=R_menu_prevstep;
j+="</a></li>";j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"Restart\");return false;'>";j+=R_menu_start;j+="</a></li>"}d=0;if(concepts.length>0){j+="<li>";j+="<a href='#' onclick='parent.parent.OnActionSelection(\"Conc\",\"0\");return false;'>";j+=R_menu_concepts;j+="</a></li>"}e=GIState;f=GIFrames[e].actions[GIAltIndex];for(var r=g=true;g;)if(GIFrames[e].infoblocks.length>0){g=false;j+="<li><a href='#' onclick='parent.parent.PopupToggle(\"infodiv\")'>";j+=R_menu_infoblocks;j+="</a></li>";
for(j+=upk.browserInfo.isExplorer()?"<div id='infodiv' style='display:none'>":"<div id='infodiv' style='display:none'><ul style='padding-left:18px'>";r;){for(d=0;d<GIFrames[e].infoblocks.length;d++){j+="<li style='list-style-type:circle;"+(upk.browserInfo.isExplorer()?"text-indent:18px":"")+"'>";j+="<a href='#' onclick='parent.parent.OnActionSelection(\"Info\",";j+=""+d;j+=',"'+e+"\");return false;'>";j+=GIFrames[e].infoblocks[d].tooltip;j+="</a></li>"}if(f.dn&&GIFrames[f.next].type!="decision"){e=
f.next;f=GIFrames[e].actions[0]}else r=false}j+=upk.browserInfo.isExplorer()?"</div>":"</ul></div>"}else if(f.dn&&GIFrames[f.next].type!="decision"){e=f.next;f=GIFrames[e].actions[0]}else g=false;if(l||m||p){j+="<li><a href='#' onclick='parent.parent.PopupToggle(\"playdiv\")'>";j+=R_menu_play;j+="</a></li>";j+=upk.browserInfo.isExplorer()?"<div id='playdiv' style='display:block'>":"<div id='playdiv' style='display:block'><ul style='padding-left:18px'>";if(m){j+="<li style='list-style-type:circle;"+
(upk.browserInfo.isExplorer()?"text-indent:18px":"")+"'>";j+="<a href='#' onclick='parent.parent.OnActionSelection(\"PlayD\"";j+=");return false;'>";j+=R_mode_seeit;j+="</a></li>"}if(l){j+="<li style='list-style-type:circle;"+(upk.browserInfo.isExplorer()?"text-indent:18px":"")+"'>";j+="<a href='#' onclick='parent.parent.OnActionSelection(\"PlayT\"";j+=");return false;'>";j+=R_mode_tryit;j+="</a></li>"}if(p){j+="<li style='list-style-type:circle;"+(upk.browserInfo.isExplorer()?"text-indent:18px":
"")+"'>";j+="<a href='#' onclick='parent.parent.OnActionSelection(\"Printit\"";j+=");return false;'>";j+=R_interface_printit;j+="</a></li>"}j+=upk.browserInfo.isExplorer()?"</div>":"</ul></div>"}if(lms_IsMentoringAvailable()==true){j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"AskAnExpert\");return false;'>";j+=R_interface_askexpert;j+="</a></li>"}if(lms_IsFeedbackAvailable()==true){j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"ProvideFeedback\");return false;'>";
j+=R_interface_providefeedback;j+="</a></li>"}if(c){j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"Prefs\");return false;'>";j+=R_menu_preferences;j+="</a></li>"}c=""+parent.location;c=c.indexOf("localhost")>-1||c.indexOf("127.0.0.1")>-1;if(UIComponents.ShareLink&&!c&&GetTopLevelLmsMode()!="LMS"){j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"Share\");return false;'>";j+=R_menu_share;j+="</a></li>"}if(UIComponents.TopicHelp==true){j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"Help\");return false;'>";
j+=R_menu_help;j+="</a></li>"}try{if((GetTopLevelLmsMode()=="KPT"||Kpath_launch==true)&&lms_IsKPathLogoutAvailable()){j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"LogOut\");return false;'>";j+=R_toctooltip_kpathlogout;j+="</a></li>"}}catch(H){}if(t){j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"ViewOutline\");return false;'>";j+=R_menu_viewoutline;j+="</a></li>"}j+="<li><a href='#' onclick='parent.parent.OnActionSelection(\"CloseT\");return false;'>";j+=R_menu_Close;
j+="</a></li>";j+=upk.browserInfo.isExplorer()?"</div>":"</ul></div>";if(upk.browserInfo.isExplorer()&&popupVersion)aPopBody.innerHTML=j;else innerBody.innerHTML=j;CorrectPopup();this.onScreen=true}}function _AIsOnScreen(){return this.onScreen}var GICookie=null,GIS2=null,GISSS=null;
function setWindow(){if(upk.browserInfo.isExplorer()&&popupVersion){window.resizeTo(1,1);window.moveTo(4E3,4E3)}if(PlayerConfig.EnableCookies){GICookie=new Cookie(document,"GICookie",365,"/",null,null);if(GICookie.Load()){GIS2=GICookie.Cs2;GISSS=GICookie.Csss;if(upk.browserInfo.isExplorer()&&popupVersion&&GICookie.Cwidth>40&&GICookie.Cleft>=0&&GICookie.Ctop>=0&&parseInt(GICookie.Cleft)+parseInt(GICookie.Cwidth)<screen.availWidth&&GICookie.Ctop<screen.availHeight){LeftPos=parseInt(GICookie.Cleft);
TopPos=parseInt(GICookie.Ctop);popWidth=parseInt(GICookie.Cwidth);popHeight=parseInt(GICookie.Cheight)}}}}setWindow();var logger_enabled_query=false;function log(c){logger_enabled_query&&window.top.console&&window.top.console.log(c)}var datasourceroot="querydb/",ConvertDbSelector={t:"text",u:"ctxod",e:"ctxex",r:"role",g:"genctx"},q_search_and=" and ",q_search_or=" or ";
function ToHalfWidth(c){for(var d="",e=0;e<c.length;e++){var f="\u30f2\u30a1\u30a3\u30a5\u30a7\u30a9\u30e3\u30e5\u30e7\u30c3\u30fc\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f3".indexOf(c.charAt(e));d+=f!==-1?"\uff66\uff67\uff68\uff69\uff6a\uff6b\uff6c\uff6d\uff6e\uff6f\uff70\uff71\uff72\uff73\uff74\uff75\uff76\uff77\uff78\uff79\uff7a\uff7b\uff7c\uff7d\uff7e\uff7f\uff80\uff81\uff82\uff83\uff84\uff85\uff86\uff87\uff88\uff89\uff8a\uff8b\uff8c\uff8d\uff8e\uff8f\uff90\uff91\uff92\uff93\uff94\uff95\uff96\uff97\uff98\uff99\uff9a\uff9b\uff9c\uff9d".charAt(f):
c.charCodeAt(e)>=65281&&c.charCodeAt(e)<=65375?String.fromCharCode(c.charCodeAt(e)-65248):c.charAt(e)}return d}
var QueryParser=function(){function c(g){var l=[];switch(g[0].Op){case "&":case "|":l=c(g[1]);for(var m=2;m<g.length;m++){l=l.concat(c(g[m]));l.push({a:"o",p:g[0].Op})}return l;case "EM":l[0]={a:"s",d:"e",p:g[0].App+"$"+Escape.MyEscape(g[1])};for(m=2;m<g.length;m++){l.push({a:"s",d:"e",p:g[0].App+"$"+Escape.MyEscape(g[m])});l.push({a:"o",p:"&"})}return l;case "SM":return[{a:"s",d:"g",p:g}];default:console.log("Error: Unknown operator "+g[0].Op)}return null}function d(g,l){for(log("QueryProcessor.SM "+
g+" "+l);;){var m=f[e[e.length-1].st][g];if(m===10)return false;if(m===0)return true;if(m>0){e.push({st:m,se:l});return false}if(m<0){var j,p=e.length,t=e[p-1],r=e[p-2];p=e[p-3];switch(-m){case 1:j={ev:"{a:'s', d:'"+t.se.charAt(0)+"', p:'"+t.se.slice(1)+"'}",pr:t.se.slice(1)};break;case 2:if(t.se==="!")j={ev:"{a:'s', d:'"+r.se.charAt(0)+"', p:'"+r.se.slice(1)+"', m:'"+t.se+"'}"};else{j=r.se.slice(1,parseInt(t.se)+1)+"$002A";j={ev:"{a:'s', d:'"+r.se.charAt(0)+"', p:'"+r.se.slice(1)+"'}, {a:'s', d:'"+
r.se.charAt(0)+"', p:'"+j+"'}, {a:'o', p:'|'}"}}j.pr=r.se.slice(1);break;case 3:j={ev:p.se.ev+", "+t.se.ev+", {a:'o', p:'"+r.se+"'}",pr:p.se.pr+(r.se==="|"?" or ":" ")+t.se.pr};break;case 4:j={ev:r.se.ev,pr:"("+r.se.pr+")"};m=-3}if(m===-1||m===-2){j.pr=decodeURIComponent(j.pr);if(j.pr.search(/\s/)!==-1)j.pr='"'+j.pr+'"'}e.length+=m;e.push({st:f[e[e.length-1].st][6],se:j})}}}var e,f=[0,[2,3,0,0,0,0,4],[-1,-1,-1,-1,5,-1,0],[2,3,0,0,0,0,6],[0,0,0,7,0,10,0],[-2,-2,-2,-2,-2,-2,0],[0,0,8,7,0,0,0],[2,3,
0,0,0,0,9],[-4,-4,-4,-4,-4,-4,0],[-3,-3,-3,-3,-3,-3,0]];return{Parse:function(g,l){log("QueryProcessor.Parse");if(g==="XDT"){var m=c(l);return JSON.stringify(m)}q_search_and=" "+R_search_AND.toLowerCase()+" ";q_search_or=" "+R_search_OR.toLowerCase()+" ";var j;if("URI"===g){m=/\(|\)|\+|-|[u,e,k,r,g]|!|\d|'[^']+'/g;j=["(",")","+","-","u","e","t","r","g","!","0","1","2","3","4","5","6","7","8","9"]}else{m=RegExp("\\(|\\)|"+q_search_and+"|"+q_search_or+'|"[^"]+"|[^ \\(\\)]+(?=\\(|\\)|\\s|$)',"gi");j=
["(",")",q_search_and,q_search_or]}var p=[1,2,3,3,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4],t=[0,0,"&","|",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];if(g!=="URI"){l=ToHalfWidth(l);l=l.toLowerCase()}var r=null,H=null;e=[];e.push({st:1,se:0});for(var A,N,L=0,P="t";(A=m.exec(l))!=null;){A=A[0];var G=0;for(N in j)if(A===j[N]){G=p[N];if(t[N])A=t[N];break}if(G===5)P=A;else{if(G===3)L=0;if((G===0||G===1)&&L){if(d(3,"&"))return;L=0}if(G===0){if(A.charAt(0)==='"'||A.charAt(0)==="'")A=A.slice(1,A.length-1);if("URI"!==g){if(A.length>
1){L=A[A.length-1];if(L==="%"||L==="*")A=A.slice(0,-1)}A=Escape.MyEscape(A.toLowerCase())}A=P+A;L=1}if(d(G,A)){log("QueryProcessor.Parse return");return}}}if(!d(5,"$")){r=e[1].se.ev;H=e[1].se.pr}log("QueryProcessor.Parse "+r+" "+H);return r}}}(),QueryProcessor={rr:null,Start:function(c,d){log("QueryProcessor.Start");this.rr=d;if(c.slice(0,1)==="["&&c.slice(-1)==="]")this.qa=eval(c);else eval("this.qa = ["+c+"]");this.qp=0;this.Eval()},Eval:function(){var c=this.qa[this.qp];if(c.a==="s")if(c.d==="g")SearchSM(c.p,
function(e){QueryProcessor.ReportResult(e)});else{var d=c.d==="t"?false:true;if(c.m==="!")d=!d;SearchDBs[c.d].Search(c.p,d)}else if(c.a==="o"){c.p==="&"?this.qa[this.qp-2].And(this.qa[this.qp-1]):this.qa[this.qp-2].Or(this.qa[this.qp-1]);this.qp-=2;this.qa.splice(this.qp+1,2);this.Next()}},Next:function(){if(this.qa.length===1)this.rr(this.qa[0].rs);else{this.qp++;this.Eval()}},ReportResult:function(c){log("QueryProcessor.ReportResult r = "+c);log("QueryProcessor.ReportResult this.qa = "+this.qa+
" this.qp = "+this.qp+" "+this.qa[this.qp]);this.qa[this.qp]=c;this.Next()}};function ReadBase64_6(c){if(c===43)return 62;if(c===45)return 63;if(c<58)return c-48;return c<91?c-55:c-61}function ReadBase64_32(c){var d,e;e=0;for(d=32;d&32;){d=ReadBase64_6(c.s.charCodeAt(c.p));e<<=5;e|=d&31;c.p++}return e}function ReadBase64_ITP(c,d){for(var e=[],f,g,l=0;c.p<c.s.length;){g=ReadBase64_32(c);for(f=1===g?ReadBase64_32(c):1;f;){l+=g;e.push(new d(l));f--}}return e}
function SearchDB(c){log("SearchDB dbid = "+c);this.db_id=c;this.ResetIndex();this.request_count=this.request_total=0}SearchDB.prototype.ResetIndex=function(){this.index=[];this.index.push({key:null,node:"1"})};
SearchDB.prototype.k=function(c){log("SearchDB.k() args.length = "+c.length);for(var d="",e=0;e<c.length;e++){var f={s:c[e],p:0},g,l="";g=ReadBase64_32(f);var m;m=e===c.length-1?this.index[this.index_insert_position]:{};m.node=g>0?f.s.slice(f.p,f.p+g):0;f.p+=g;g=ReadBase64_32(f);l+=d.slice(0,g);g=ReadBase64_32(f);l+=f.s.slice(f.p,f.p+g);f.p+=g;if(l.length>0)m.key=l;for(d=l;f.p<f.s.length;){m.values=[];g=ReadBase64_32(f);m.values.push(f.s.slice(f.p,f.p+g));f.p+=g}if(e<c.length-1){this.index.splice(this.index_insert_position,
0,m);this.index_insert_position++}}this.d()};SearchDB.prototype.LoadScript=function(c){CDB=this;LoadXMLDocArray(datasourceroot+ConvertDbSelector[this.db_id]+"/"+c+".xml",function(d){return function(e){d.LoadScript_Callback(e)}}(SearchDBs[this.db_id]),null,"N",false);this.request_total++;this.request_count++};SearchDB.prototype.LoadScript_Callback=function(c){CDB=this;CDB.k(c)};
SearchDB.prototype.Search=function(c,d,e){log("SearchDB.Search() = "+c);this.Search_CallBack=e?e:QueryProcessor.ReportResult;this.RequestCount=0;this.search=c;this.exact_match=d;this.results=new SearchResultSet(null);if(this.search.length!==0){this.index_match=0;this.d=this.d1;this.d()}};
SearchDB.prototype.IndexSearch=function(){log("SearchDB.IndexSearch() this.index.length = "+this.index.length);var c;for(c=this.index_match;c<this.index.length;c++)if(null==this.index[c].key||this.search<=this.index[c].key)break;this.index_match=c;log("SearchDB.IndexSearch() this.index_match = "+this.index_match)};
SearchDB.prototype.d1=function(){log("SearchDB.d1()");this.IndexSearch();if(null!=this.index[this.index_match].key&&this.search===this.index[this.index_match].key)if(!this.exact_match&&this.index[this.index_match].values.length<2){this.results.Or(new SearchResultSet(this.index[this.index_match].values[0]));this.index_match++;this.d=this.d2;this.d()}else{var c=this.index[this.index_match].values,d;for(d in c){this.results.Or(new SearchResultSet(c[d]));if(this.exact_match)break}this.ReportResult(this.results)}else if(this.index[this.index_match].node!=
0){this.index_insert_position=this.index_match;this.LoadScript(this.index[this.index_match].node)}else if(this.exact_match)this.ReportResult(this.results);else{this.d=this.d2;this.d()}};
SearchDB.prototype.d2=function(){log("SearchDB.d2()");if(this.index[this.index_match].node!==0){this.index_insert_position=this.index_match;this.LoadScript(this.index[this.index_match].node)}else if(null!==this.index[this.index_match].key&&this.index[this.index_match].key.substring(0,this.search.length)===this.search){this.results.Or(new SearchResultSet(this.index[this.index_match].values[0]));this.index_match++;this.d2()}else{log("SearchDB.d2() this.results = "+this.results);this.ReportResult(this.results)}};
SearchDB.prototype.ReportResult=function(c){log("SearchDB.ReportResult() r = "+c);this.db_id!=="g"?QueryProcessor.ReportResult(c):this.Search_CallBack(c)};var SearchDBs={t:new SearchDB("t"),u:new SearchDB("u"),e:new SearchDB("e"),r:new SearchDB("r"),g:new SearchDB("g")},CDB=null;function SearchResult(c){this.index=c;this.weight=1}function SearchResultSet(c){this.rs=c?ReadBase64_ITP({s:c,p:0},SearchResult):[]}SearchResultSet.prototype.Or=function(c){this.AOR(c,true)};
SearchResultSet.prototype.AOR=function(c,d,e){var f,g;for(g=f=0;f<c.rs.length;f++){for(;g<this.rs.length&&this.rs[g].index<c.rs[f].index;)g++;if(g===this.rs.length||this.rs[g].index!==c.rs[f].index)this.rs.splice(g,0,c.rs[f]);else{var l=this.rs[g].weight,m=c.rs[f].weight;this.rs[g].weight=d?Math.max(l,m):l+m*e}}};SearchResultSet.prototype.Combine=function(c,d){this.AOR(c,false,d)};
SearchResultSet.prototype.GetMaxWeight=function(){for(var c=0,d=0;d<this.rs.length;d++)if(this.rs[d].weight>c)c=this.rs[d].weight;return c};SearchResultSet.prototype.CutOffByLimit=function(c){for(var d=0;d<this.rs.length;d++)if(this.rs[d].weight<c){this.rs.splice(d,1);d--}};
SearchResultSet.prototype.And=function(c){var d,e;for(e=d=0;d<c.rs.length&&e<this.rs.length;d++){for(;e<this.rs.length&&this.rs[e].index<c.rs[d].index;)this.rs.splice(e,1);if(e<this.rs.length&&c.rs[d].index===this.rs[e].index){this.rs[e].weight=Math.min(this.rs[e].weight,c.rs[d].weight);e++}}this.rs.splice(e,this.rs.length-e)};
var EcidComparer={expstr:"",Init:function(c){var d=null;if(c&&c.length>0){if(d=QueryParser.Parse("URI",c))this.expstr=d}else this.expstr=""},Compare:function(c){if(this.expstr.length==0)return false;if(!c)return false;eval("exparray = ["+this.expstr+"]");for(var d=0;d<exparray.length;d++){exparray[d].l=false;if(exparray[d].a.toLowerCase()=="s")for(var e=0;e<c.length;e++)if(matchString(c[e],exparray[d].p))exparray[d].l=true}EcidCompareStack.Init();for(d=0;d<exparray.length;d++)if(exparray[d].a.toLowerCase()==
"s")EcidCompareStack.Push(exparray[d]);else{c=EcidCompareStack.Pop();e=EcidCompareStack.Pop();c.l=exparray[d].p=="|"?c.l||e.l:c.l&&e.l;EcidCompareStack.Push(c)}return EcidCompareStack.Pop().l}};function StackItem(c,d,e){this.a=c;this.p=d;this.l=e}
var EcidCompareStack={Init:function(){this.stArray=[];this.pTop=-1},Push:function(c){if(this.stArray.length-this.pTop==1){this.stArray[this.stArray.length]=new StackItem(c.a,c.p,c.l);this.pTop++}else{this.pTop++;this.stArray[this.pTop]=new StackItem(c.a,c.p,c.l)}},Pop:function(){if(this.pTop!=-1)return this.stArray[this.pTop--]}};function matchCharacter(c,d){return ToHalfWidth(c)==ToHalfWidth(d)}
function replaceDotAndCircle(c){var d=null;d=c.replace(RegExp("\uff9e","g"),"#");d=d.replace(RegExp("\uff9f","g"),"*");for(c=0;c<20;c++)d=d.replace(RegExp("\u30ac\u30ae\u30b0\u30b2\u30b4\u30b6\u30b8\u30ba\u30bc\u30be\u30c0\u30c2\u30c5\u30c7\u30c9\u30d0\u30d3\u30d6\u30d9\u30dc".charAt(c),"g"),"\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30cf\u30d2\u30d5\u30d8\u30db".charAt(c)+"#");for(c=0;c<5;c++)d=d.replace(RegExp("\u30d1\u30d4\u30d7\u30da\u30dd".charAt(c),
"g"),"\u30cf\u30d2\u30d5\u30d8\u30db".charAt(c)+"*");return d}function matchString(c,d,e){if(!c)return false;e||(e=false);var f=c.length,g=d.length;if(f==0&&g==0)return true;if(f==0&&g!=0)return false;if(f!=0&&g==0)return false;if(f!=g)return false;c=e?c:c.toLowerCase();e=e?d:d.toLowerCase();d=replaceDotAndCircle(c);e=replaceDotAndCircle(e);if(d.length!=e.length)return false;for(c=0;c<d.length;c++)if(!matchCharacter(d.substr(c,1),e.substr(c,1)))return false;return true}
var GIFrames={},GIState=null,GIChainState=null,GIFrameCC=null,GIActionCC=null,GIAdvText=null,GIScreenshot=null,GIHighlight=null,GICamera=null,GITextFrame=null,GIInfoFrame=null,GIFirstFrame=null,GIPlayer=null,GIActAction=null,GIPrevType=null,GINextState=null,GIAltIndex=0,GIChainAltIndex=0,GIOnLoad=false,GIEndFrame=false,GINoCookieSave=true,ActMenu=null,concepts=[],GIHistory=[],PlaySound=false,SoundAvail=false,AudioAction=null,P_GIRESOURCES="",GITMEnabled=false,GIDMEnabled=false,GITemplateSet=null,
GIbgcolor=null,playMode="D",testIt=false,strWindow,testNotesWindow,testReportWindow=null,testItPassed=true,gotoReport=false,startTime=(new Date).getTime(),timeSpent=0,fatSSPath="",fatTSPath="",param_ctx="",param_ctxlist="",param_guid="",param_printitname="",param_fastdoit=false,param_nosound=false,gicontextID=null,screenNames=[],safeUriMode=false,mViewOutline=false,showFrameIDToggle=false;P_GIRESOURCES="../../../img/";var SM_CYCAPTION=19,SM_CYFRAME=4;
function GIFrame(c,d,e,f){if(f)f=f.replace(/&amp;/g,"&");GIFrameCC={actions:[],infoblocks:[],sspath:d,type:e,header:f};screenNames[screenNames.length]=c;GIFrames[c]=GIFrameCC}function StartsWith(c,d){if(c.length<d.length)return false;var e=d.toLowerCase();if(c.substr(0,d.length).toLowerCase()==e)return true;return false}
function RemoveNbsp(c){for(var d=0,e="",f=0;f<c.length;){snext=c.substr(f);switch(d){case 0:if(StartsWith(snext,"<font")){e+=snext.substr(0,5);f+=5;d=1}else{e+=snext.substr(0,1);f++}break;case 1:if(StartsWith(snext,">")){e+=snext.substr(0,1);f+=1;d=2}else{e+=snext.substr(0,1);f++}break;case 2:if(StartsWith(snext,"&nbsp;&nbsp;")){e+=snext.substr(0,6);f+=6;d=2}else if(StartsWith(snext,"&nbsp; ")){e+=snext.substr(0,7);f+=7;d=2}else if(StartsWith(snext,"&nbsp;")){e+=" ";f+=6;d=2}else if(StartsWith(snext,
">")){e+=snext.substr(0,1);f+=1;d=0}else{e+=snext.substr(0,1);f++}}}return e}function TemplateTextCorrection(c){var d=$("<div>"+c+"</div>"),e=d.find("span[face]");if(e.length==0)return c;c="";for(var f=0;f<e[0].attributes.length;f++){var g=e[0].attributes[f];if(g.name=="face")c=g.value}e.find("span").css("font-family",c);return d[0].innerHTML}
function GIAction(c,d,e,f,g,l,m,j,p,t){GIActionCC={id:c,next:d,matchedcontext:e,ctx:f,ecidarray:g,text:TemplateTextCorrection(RemoveNbsp(l)),dn:m,icon:j,bcolor:p,input:fixInputString(t),hotspots:[]};GIActionCC.ecidarray=null;GIFrameCC.actions.push(GIActionCC)}
function InfoBlock(c,d,e,f,g){if(e){e=e.replace(/"/g,"&quot;");e=e.replace(/&amp;/g,"&")}else e="undefined";_buttonfile=c;_img="infobitmapimage.gif";_sb=c.toLowerCase();if(_sb.substr(_sb.length-_img.length)==_img)_buttonfile=c.substr(0,_sb.length-_img.length)+_img;GIFrameCC.infoblocks.push({buttonfile:_buttonfile,url:d,tooltip:e,infotype:f,infokey:g})}function GIInfoBlock(c,d,e){GIFrameCC.infoblocks.push({src:c,icon:d,alt:e})}
function GIHotspot(c,d,e,f,g){c-=3;d-=3;GIActionCC.hotspots.push({left:c,top:d,width:e-c-3,height:f-d-3,explanation:g})}function ConceptInfo(c,d,e,f,g){concepts[concepts.length]=Object({buttonfile:c,url:d,tooltip:e,infotype:f,infokey:g})}function MyEscape(c){for(var d="",e=0;e<c.length;e++){ss=c.substr(e,1);if(ss>="0"&&ss<="9"||ss>="a"&&ss<="z"||ss>="A"&&ss<="Z")d+=ss;else{ss=c.charCodeAt(e);a="0000"+ss.toString(16).toUpperCase();d+="$"+a.substr(a.length-4)}}return d}
function EventCancel(c){!upk.browserInfo.isExplorer()&&!IsTouchDevice()&&c.preventDefault();return false}function TeacherModeEnabled(){GITMEnabled=true}function DemoModeEnabled(){GIDMEnabled=true}function SetScreenshotPath(c){if(c!=""){fatSSPath=c+"/";SoundPlayerObj.SetSoundPath(c)}else{for(fatSSPath=document.location.href;fatSSPath.indexOf("\\")!=-1;)fatSSPath=fatSSPath.replace("\\","/");fatSSPath=fatSSPath.substr(0,fatSSPath.lastIndexOf("/")+1)}}
function startTopic(){if(noStart)this.close();else{if(window.opener)try{upk.browserInfo.isFF()||window.opener.blur()}catch(c){}var d=document.location.hash.substring(1),e=d.split("&");if(e.length==0||e[0]=="")d=document.location.search.substring(1);e=d.split("&");if(e.length==1)if(e[0].toLowerCase().substr(0,3)=="su="){safeUriMode=true;e=Escape.SafeUriUnEscape(e[0].substr(3)).split("&")}for(d=0;d<e.length;d++){if(e[d].substr(0,7).toLowerCase()=="nosound")param_nosound=true;if(e[d].substr(0,6).toLowerCase()==
"testit")testIt=true}Init();InitLmsMode("player");if(_lmsMode!=null)if(param_nosound==false)if(Sound_Init(PlaySound,UserPref_PlayAudio_Original,"GIClosePlayer()")==false)return;ctxHelper.SetContext("topicPlayer");lms_InitPage(_lmsMode==null?0:-1,_lmsMode==null?window.opener:null,"T_"+document.getElementById("TopicId").getAttribute("topicid"),"FirstScreen()")}}function FirstScreen(){startTopic2()}
function startTopic2(){if(GIOnLoad){BuildBackActions();GIChainState=GIState=GIFirstFrame;lms_topicStart(getMyGuid(),testIt?"E":"D");if(GIS2){var c=GIS2/(popHeight-60);if(c<0.1)c=0.1;if(c>0.9)c=0.9;if(upk.browserInfo.isExplorer()&&popupVersion&&GIS2.indexOf("%")==-1){oPopup.document.getElementById("split1").style.height=(1-c)*100+"%";oPopup.document.getElementById("split2").style.height=c*100+"%"}else if(GIS2.indexOf("%")>=0){oPopup.document.getElementById("split1"+idPostFix).style.height=GIS2;oPopup.document.getElementById("split2"+
idPostFix).style.top=GIS2;oPopup.document.getElementById("split2"+idPostFix).style.height=100-Number(GIS2.substring(0,GIS2.indexOf("%")))+"%"}}GISSS==1&&toggleScreenshot(true);var d=document.location.hash.substring(1);c=d.split("&");if(c.length==0||c[0]=="")d=document.location.search.substring(1);c=d.split("&");if(c.length==1)if(c[0].toLowerCase().substr(0,3)=="su="){safeUriMode=true;c=Escape.SafeUriUnEscape(c[0].substr(3)).split("&")}for(var e=d=false,f=0;f<c.length;f++){if(c[f].substr(0,6).toLowerCase()==
"frame=")GIChainState=GIState=c[f].substr(6);if(c[f].substr(0,4).toLowerCase()=="Ctx=")param_ctx=c[f].substr(4);if(c[f].substr(0,5).toLowerCase()=="guid=")param_guid=c[f].substr(5);if(c[f].substr(0,12).toLowerCase()=="contextlist=")param_ctxlist=c[f].substr(12);if(c[f].substr(0,9).toLowerCase()=="fastdoit=")param_fastdoit=true;if(c[f].substr(0,12).toLowerCase()=="printitname=")param_printitname=c[f].substr(12);if(c[f].substr(0,12).toLowerCase()=="directlaunch")d=true;if(c[f].substr(0,16).toLowerCase()==
"keep-alive-timer")e=true}d==true&&e==true&&KeepAlive_Init("../../../");if(SoundPlayerObj)SoundAvail=SoundPlayerObj.IsAvailable();param_nosound==true&&SetNoSound(true);if(GetNoSound())SoundAvail=false;SetStartMatchedContext(param_ctxlist,param_guid);if(testIt&&GIState==GIFirstFrame)GIChainState=GIState="teststart";oPopup.document.getElementById("frameidtext"+idPostFix).innerHTML=R_frameid;switch(PlayerConfig.ShowFrameID.toLowerCase()){case "on":oPopup.document.getElementById("frameiddiv"+idPostFix).style.display=
"block";break;case "off":oPopup.document.getElementById("frameiddiv"+idPostFix).style.display="none";break;case "shiftf1":showFrameIDToggle=112;break;case "shiftf2":showFrameIDToggle=113;break;case "shiftf3":showFrameIDToggle=114;break;case "shiftf4":showFrameIDToggle=115;break;case "shiftf5":showFrameIDToggle=116;break;case "shiftf6":showFrameIDToggle=117;break;case "shiftf7":showFrameIDToggle=118;break;case "shiftf8":showFrameIDToggle=119;break;case "shiftf9":showFrameIDToggle=120;break;case "shiftf10":showFrameIDToggle=
121;break;case "shiftf11":showFrameIDToggle=122;break;case "shiftf12":showFrameIDToggle=123}if(showFrameIDToggle)document.onkeydown=CheckFrameIDKeys;document.title=giTitle;IsTouchDevice()?ShowPlayButton():RefreshStep()}else setTimeout(startTopic2,50)}var swipe=new Swipe;
function ShowPlayButton(){var c=$("<div>",{"class":"grayoverlay",html:$("<img/>",{"class":"startcenter",src:"../../../img/ipad_playbutton.png"}).add("<div>",{"class":"startplayfont",text:R_swipe_instruction_doit}),click:function(){onStartClick()}});$(document.body).append(c);c.bind("touchstart",function(d){d.stopPropagation();swipe.Init($("#noPopupFF").width())});c.bind("touchmove",function(d){d.stopPropagation();try{if(d.originalEvent.touches[1]||d.originalEvent.changedTouches[1])swipe.DetectedMulti();
else swipe.IsNotZoomed()&&d.preventDefault()}catch(e){}d=d.originalEvent.touches[0]||d.originalEvent.changedTouches[0];swipe.Add(d.pageY,d.pageX)});c.bind("touchend",function(){if(!swipe.IsMulti())if(swipe.IsNotZoomed()!=false){var d=swipe.GetX(),e=swipe.GetY();Math.abs(d)>Math.abs(e)||e<-30&&onStartClick()}})}function onStartClick(){$(".grayoverlay").remove();SoundPlayerObj.InitAudioPlayer();RefreshStep()}function Swipe(){}
Swipe.prototype.Init=function(c){this.dny=this.dnx=this.dy=this.dx=this.y=this.x=0;this.width=c;this.multi=false};Swipe.prototype.Add=function(c,d){if(this.x==0&&this.y==0){this.x=this.dx=this.dnx=c;this.y=this.dy=this.dny=d}else{this.dnx=this.dx;this.dny=this.dy;this.dx=c;this.dy=d}};Swipe.prototype.IsNotZoomed=function(){if(window.innerWidth>this.width)return true;return Math.abs(window.innerWidth-this.width)<5};Swipe.prototype.DetectedMulti=function(){this.multi=true};Swipe.prototype.IsMulti=function(){return this.multi};
Swipe.prototype.Result=function(){return""+(this.dx-this.x)+" "+(this.dy-this.y)};Swipe.prototype.GetSpeedX=function(){return this.dx-this.dnx};Swipe.prototype.GetSpeedY=function(){return this.dy-this.dny};Swipe.prototype.GetX=function(){return this.dx-this.x};Swipe.prototype.GetY=function(){return this.dy-this.y};Swipe.prototype.GetPoint=function(){return""+this.dx+","+this.dy};function ecidStr(c){return replaceString("%27","'",c)}
var ecidMatchingFrames=[],ecidStartDecisions={},ecidDecisionStart=false;
function SearchPathForEcid(c,d){for(var e=c,f=true;f;){var g=GIFrames[e];if(g!=null){if(g.type=="end")f=false;if(g.type=="decision"){f=false;ecidStartDecisions[e]={id:e,display:false,pathstoignore:[]};for(var l=0;l<g.actions.length;l++)if(SearchPathForEcid(g.actions[l].next,d)){if(f)ecidStartDecisions[e].display=true;f=true}else ecidStartDecisions[e].pathstoignore.push(g.actions[l].id);return f}var m=d.split("C");for(l=0;l<m.length;l++){ctxItem="C"+m[l];if(ctxItem!="C")for(var j=0;j<g.actions.length;j++)if(g.actions[j].matchedcontext==
ctxItem){ecidMatchingFrames.push({frameid:e,altindex:j});return true}}e=g.actions[0].next}}return false}
function FindEcidStartNextFrame(c){var d=GIFrames[c];if(d.type=="decision")if(ecidStartDecisions[c].display){GIChainState=GIState=c;return}for(var e=0;e<ecidMatchingFrames.length;e++)if(c==ecidMatchingFrames[e].frameid){GIChainState=GIState=c;GIChainAltIndex=GIAltIndex=ecidMatchingFrames[e].altindex;ecidDecisionStart=false;return}for(c=0;c<d.actions.length;c++)d.actions[c].next&&FindEcidStartNextFrame(d.actions[c].next)}
function SetStartMatchedContext(c,d){if(!(c==""||GIState!=GIFirstFrame||d!=getMyGuid())){SearchPathForEcid(GIFirstFrame,c);if(ecidMatchingFrames.length==1){SetStartFrame(ecidMatchingFrames[0].frameid);GIChainAltIndex=GIAltIndex=ecidMatchingFrames[0].altindex;StartFrameCorrection(GIState)}else if(ecidMatchingFrames.length>=2){ecidDecisionStart=true;FindEcidStartNextFrame(GIFirstFrame);StartFrameCorrection(GIState)}}}function SetParamCtx(c){gicontextID=c;SetStartContext()}var bBackActionsBuilded=false;
function BuildBackActions(){if(!bBackActionsBuilded){for(var c=null,d=0;d<screenNames.length;d++){c=GIFrames[screenNames[d]];c.backActions=[]}for(d=0;d<screenNames.length;d++){c=GIFrames[screenNames[d]];for(var e=0;e<c.actions.length;e++){c.actions[e].prevFrame=screenNames[d];if(s=c.actions[e].next)if(GIFrames[s].type!="end")GIFrames[s].backActions[GIFrames[s].backActions.length]=c.actions[e]}}}bBackActionsBuilded=true}
function StartFrameCorrection(c){var d;if(GIFrames[c].backActions.length==0)StartScreen="start";else{d="";for(var e=0;e<GIFrames[c].backActions.length;e++)if(e==0)d=GIFrames[c].backActions[0].prevFrame;else if(d!=GIFrames[c].backActions[0].prevFrame){GIChainState=GIState=c;return}for(d=GIFrames[c].backActions[0].prevFrame;;){if(GIFrames[d].backActions.length==0){GIChainState=GIState="start";break}if(GIFrames[d].type=="decision"){GIChainState=GIState=d;break}GIChainState=GIState=c;break}}}
function SetStartFrame(c){if(c.length!=0)if(GIFrames[c])GIChainState=GIState=c}function SetStartContext(){if(gicontextID.length!=0){var c=[];c=gicontextID.split("+");for(var d=0;d<c.length;d++){ctxItem=c[d];for(var e=0;e<screenNames.length;e++){scrName=screenNames[e];scr=GIFrames[scrName];for(var f=0;f<scr.actions.length;f++){act=scr.actions[f];if(act.ctx==ctxItem){SetStartFrame(scrName);StartFrameCorrection(GIState);return}}}}}}function OnClose(){top.GIPlayer.closeAp()}
function SetSound(c){if(c&&soundModes.indexOf("D")>0)PlaySound=c}function soundIsPublished(){return true}var KeyHookUp=1,KeyHookTimer=0;function StartKeyHook(){StopKeyHook();PGIKeyHook.onclick=KeyHookHandler;KeyHookTimer=setInterval(KeyHookCallback,50)}function StopKeyHook(){clearInterval(KeyHookTimer)}function KeyHookCallback(){PGIKeyHook.click()}
function KeyHookHandler(){if(!(UserPrefs.DoIt.HotKey.Ctrl=="N"&&UserPrefs.DoIt.HotKey.Shift=="N"&&UserPrefs.DoIt.HotKey.Alt=="N")){var c=false;c=0;if(UserPrefs.DoIt.HotKey.Ctrl=="L")c|=3;if(UserPrefs.DoIt.HotKey.Ctrl=="R")c|=1;if(UserPrefs.DoIt.HotKey.Shift=="L")c|=54;if(UserPrefs.DoIt.HotKey.Shift=="R")c|=22;if(UserPrefs.DoIt.HotKey.Alt=="L")c|=12;if(UserPrefs.DoIt.HotKey.Alt=="R")c|=4;var d=0;if(event.ctrlLeft)d|=2;if(event.ctrlKey)d|=1;if(event.shiftLeft)d|=50;if(event.shiftKey)d|=22;if(event.altLeft)d|=
8;if(event.altKey)d|=4;if(d==c){if(KeyHookUp){KeyHookUp=0;if(GIFrames[GIState].type=="end"||GIFrames[GIState].type=="testend")GIFrames[GIState].type=="end"&&testIt?GINextStep():closeAp();else testIt&&GIFrames[GIState].type=="normal"?GIPassStep():GINextStep()}}else KeyHookUp=1}}
function ToggleShowFrameID(){if(oPopup.document.getElementById("frameiddiv"+idPostFix).style.display=="none")oPopup.document.getElementById("frameiddiv"+idPostFix).style.display="block";else oPopup.document.getElementById("frameiddiv"+idPostFix).style.display="none";return false}function CheckFrameIDKeys(c){if(c==null)c=window.event;if(c!=undefined)if(c.type=="keydown")if(c.keyCode==showFrameIDToggle)if(c.shiftKey==true){ToggleShowFrameID();return false}}
function GIHilite(c){GIHighlight.innerHTML="";if(c){for(var d=UserPrefs.MarqueeColor,e=0;e<SSAList[c].a.hotspots.length;e++)GIHighlight.innerHTML+='<DIV id="gihotspot" style="position:absolute;left:'+SSAList[c].a.hotspots[e].left+"px;top:"+SSAList[c].a.hotspots[e].top+'px;z-index:2"><img id="gihotspotimg" src="'+P_GIRESOURCES+'spacer.gif" width="'+SSAList[c].a.hotspots[e].width+'" height="'+SSAList[c].a.hotspots[e].height+'" class="Area" border="3" style="border-color:'+d+'"/></DIV>';GIHighlight.style.display=
"inline"}else GIHighlight.style.display="none"}var hpos=null,GICameraSL=0,GICameraST=0;
function GICenterHL(){if(hpos){var c=GICamera.clientHeight/2,d=hpos.left-GICamera.clientWidth/2;if(d<0)d=0;d-=GICameraSL;c=hpos.top-c;if(c<0)c=0;c-=GICameraST;vl=Math.sqrt(d*d+c*c);if(vl<5){clearInterval(IV);IV=null;GICamera.scrollLeft=hpos.left-GICamera.clientWidth/2;GICamera.scrollTop=hpos.top-GICamera.clientHeight/2}else{GICameraSL+=d*3/vl;GICameraST+=c*3/vl;GICamera.scrollLeft=GICameraSL;GICamera.scrollTop=GICameraST}}}var contCHL=false;function GIStopCHL(){}var SSAList=null,IV=null;
function GILoadSS(c){hpos=null;GIHighlight.innerHTML="";if(c){GIScreenshot.src=fatSSPath+SSAList[c].sspath;if(SSAList[c].imgid){for(var d in SSAList)oPopup.document.getElementById(SSAList[d].imgid).src="../../../img/stepdispl0.gif";oPopup.document.getElementById(SSAList[c].imgid).src="../../../img/stepdispl1.gif"}if(SSAList[c].a.hotspots.length>0){hpos={left:SSAList[c].a.hotspots[0].left,top:SSAList[c].a.hotspots[0].top};SSAList[c].a.hotspots[0].explanation||GIHilite(c);setTimeout(GIStartIV,500)}}}
function GIStartIV(){GICameraSL=GICamera.scrollLeft;GICameraST=GICamera.scrollTop;IV||(IV=setInterval(GICenterHL,10))}function OnUpdatePreferences(c){UserPrefs.Copy(c);setTimeout("RefreshStep()",100)}function RefreshStep(){GITextFrame.style.overflow="visible";GIState&&GIStep(GIState);GITextFrame.style.overflow="auto"}
function GIStep(c){if(upk.browserInfo.isExplorer()){GITextFrame.style.overflow="visible";StopKeyHook()}GIEndFrame=false;GIHighlight.innerHTML="";GIAdvText.innerHTML="";hpos=SSAList=AudioAction=null;var d="";if(c==null)GIClosePlayer();else{if(upk.browserInfo.isExplorer()&&popupVersion)GICamera.style.width=popWidth-18;GIChainState=GIState=c;oPopup.document.getElementById("frameidvalue"+idPostFix).innerHTML=GIFrames[GIState].type=="start"||GIFrames[GIState].type=="teststart"?"Start":GIState.substr(1);
c="";if(upk.browserInfo.isExplorer()){switch(UserPrefs.DoIt.HotKey.Ctrl){case "L":c+="["+R_interface_left+R_interface_ctrl+"]";break;case "R":c+="["+R_interface_right+R_interface_ctrl+"]"}switch(UserPrefs.DoIt.HotKey.Shift){case "L":if(c!="")c+=" + ";c+="["+R_interface_left+R_interface_shift+"]";break;case "R":if(c!="")c+=" + ";c+="["+R_interface_right+R_interface_shift+"]"}switch(UserPrefs.DoIt.HotKey.Alt){case "L":if(c!="")c+=" + ";c+="["+R_interface_left+R_interface_alt+"]";break;case "R":if(c!=
"")c+=" + ";c+="["+R_interface_right+R_interface_alt+"]"}}c=c?formatStr(R_interface_nextstep,c):R_interface_nextstep_nokey;if(GIState=="teststart"||GIState=="testend"){GIClearAll();GIAltIndex||(GIChainAltIndex=GIAltIndex=0);if(GIState=="teststart"){GIActAction=GIFrames[GIState].actions[GIAltIndex];GINextState=GIActAction.next;lms_frameView(getMyGuid(),"D",GIState);GIAdvText.innerHTML='<span style="cursor:pointer" onclick="top.GIPlayer.GINextStep(); return false"><img src="../../../img/empty.gif" style="'+
DIMG_nextstep+'" border="0" title="'+c+'"/></span>'}else{GIEndFrame=true;if(GIHistory.length>0)GIAdvText.innerHTML='<span style="cursor:pointer" onclick="top.GIPlayer.GIPrevStep(); return false"><img src="../../../img/empty.gif" style="'+DIMG_prevstep+'" border="0" title="'+R_menu_prevstep+'"/></span><img SRC="'+P_GIRESOURCES+'spacer.gif" style="border:0;width:3px;height:1px"/>';GIAdvText.innerHTML+='<span style="cursor:pointer" onclick="top.GIPlayer.closeAp(); return false"><img src="../../../img/empty.gif" style="'+
DIMG_nextstepclose+'" border="0" title="'+R_bubble_closeondemand+'"/></span>'}GIgetActionText(GIActAction);GIState=="testend"&&GIGetTestResults();GITextFrame.innerHTML=GIState=="teststart"?$("#TestItIntro").html().replace(/__my_new_line__/g,"<br>"):$("#TestItEnd").html().replace(/__my_new_line__/g,"<br>");if(ScreenshotVisible){if(GIState=="teststart"){SSAList[GIActAction.id].a=GIActAction;SSAList[GIActAction.id].sspath=GIFrames[GIState].sspath;GILoadSS(GIActAction.id)}GIHilite(null)}upk.browserInfo.isExplorer()&&
StartKeyHook()}if(GIFrames[GIState].type=="start"||GIFrames[GIState].type=="end"){GIClearAll();GIAltIndex||(GIChainAltIndex=GIAltIndex=0);GIActAction=GIFrames[GIState].actions[GIAltIndex];if(GIFrames[GIState].type=="start"){lms_frameView(getMyGuid(),"D",GIState);if(UserPrefs.ShowLeadIn!="all"){GINextState=GIActAction.next;GINextStep();return false}if(GIHistory.length>0)GIAdvText.innerHTML='<span style="cursor:pointer" onclick="top.GIPlayer.GIPrevStep(); return false"><img src="../../../img/empty.gif" style="'+
DIMG_prevstep+'" border="0" title="'+R_menu_prevstep+'"/></span><img SRC="'+P_GIRESOURCES+'spacer.gif" style="border:0;width:3px;height:1px"/>';GIAdvText.innerHTML+='<span style="cursor:pointer" onclick="top.GIPlayer.GINextStep(); return false"><img src="../../../img/empty.gif" style="'+DIMG_nextstep+'" border="0" title="'+c+'"/></span>'}else{GIEndFrame=true;gotoReport=false;if(GIHistory.length>0)GIAdvText.innerHTML='<span style="cursor:pointer" onclick="top.GIPlayer.GIPrevStep(); return false"><img src="../../../img/empty.gif" style="'+
DIMG_prevstep+'" border="0" title="'+R_menu_prevstep+'"/></span><img SRC="'+P_GIRESOURCES+'spacer.gif" style="border:0;width:3px;height:1px"/>';if(testIt){GIActAction.next="testend";GIAdvText.innerHTML+='<span style="cursor:pointer" onclick="top.GIPlayer.GINextStep(); return false"><img src="../../../img/empty.gif" style="'+DIMG_nextstep+'" border="0" title="'+c+'"/></span>'}else GIAdvText.innerHTML+='<span style="cursor:pointer" onclick="top.GIPlayer.closeAp(); return false"><img src="../../../img/empty.gif" style="'+
DIMG_nextstepclose+'" border="0" title="'+R_bubble_closeondemand+'"/></span>'}GILoadInfoBlocks(GIInfoFrame);d+=GIgetActionText(GIActAction);GITextFrame.innerHTML=d;if(ScreenshotVisible){if(GIState=="start"){SSAList[GIActAction.id].a=GIActAction;SSAList[GIActAction.id].sspath=GIFrames[GIState].sspath;GILoadSS(GIActAction.id)}else GIScreenshot.src=fatSSPath+GIState.substr(1,GIState.length-1)+"g.png";GIHilite(null)}upk.browserInfo.isExplorer()&&StartKeyHook()}if(GIFrames[GIState].type=="decision"){if(ecidStartDecisions[GIState])if(ecidStartDecisions[GIState].display)ecidDecisionStart=
true;GIChainAltIndex=GIAltIndex=0;GIActAction=GIFrames[GIState].actions[GIAltIndex];GIClearAll();if(GIHistory.length>0)GIAdvText.innerHTML='<span style="cursor:pointer" onclick="top.GIPlayer.GIPrevStep(); return false"><img src="../../../img/empty.gif"style="'+DIMG_prevstep+'" border="0" title="'+R_menu_prevstep+'"/></span><img SRC="'+P_GIRESOURCES+'spacer.gif" style="border:0;width:3px;height:1px"/><img src="../../../img/giftrk1.gif" style="border:0;width:22;height:22"/>';GILoadInfoBlocks(GIInfoFrame);
d+=GIGetDecisionText(GIState);GITextFrame.innerHTML=d;if(ScreenshotVisible){GIScreenshot.src=fatSSPath+GIState.substr(1,GIState.length-1)+"g.png";GIHilite(null)}}if(GIFrames[GIState].type=="normal"){GIAltIndex||(GIChainAltIndex=GIAltIndex=0);GIClearAll();if(GIHistory.length>0)GIAdvText.innerHTML='<span style="cursor:pointer" onclick="top.GIPlayer.GIPrevStep(); return false"><img src="../../../img/empty.gif"style="'+DIMG_prevstep+'" border="0" title="'+R_menu_prevstep+'"/></span><img SRC="'+P_GIRESOURCES+
'spacer.gif" style="border:0;width:3px;height:1px">';if(testIt){GIAdvText.innerHTML+='<IMG SRC="'+P_GIRESOURCES+'spacer.gif" border="0" style="background-color:black; width:1px; height:20px"/><img SRC="'+P_GIRESOURCES+'spacer.gif" style="border:0;width:3px;height:1px"><span style="cursor:pointer" onclick="top.GIPlayer.GIPassStep(); return false"><img id="testpass" src="../../../img/empty.gif"  style="'+(GIFrames[GIState].actions[GIAltIndex].teststatus=="passed"?DIMG_steppassed:DIMG_steppassed1)+'" border="0" title="'+
(GIFrames[GIState].actions[GIAltIndex].teststatus=="passed"?R_testit_passedmarked:R_testit_markpassed)+'"/></span><img SRC="'+P_GIRESOURCES+'spacer.gif" style="border:0;width:3px;height:1px">';GIAdvText.innerHTML+='<span style="cursor:pointer" onclick="top.GIPlayer.GIFailStep(); return false"><img id="testfail" src="../../../img/empty.gif" style="'+(GIFrames[GIState].actions[GIAltIndex].teststatus=="failed"?DIMG_stepfailed:DIMG_stepfailed1)+'" border="0" title="'+(GIFrames[GIState].actions[GIAltIndex].teststatus==
"failed"?R_testit_failedmarked:R_testit_markfailed)+'"/></span><img SRC="'+P_GIRESOURCES+'spacer.gif" style="border:0;width:3px;height:1px">';GIAdvText.innerHTML+='<span style="cursor:pointer" onclick="top.GIPlayer.GISkipStep(); return false"><img id="testskip" src="../../../img/empty.gif" style="'+(GIFrames[GIState].actions[GIAltIndex].teststatus=="skipped"?DIMG_stepskipped:DIMG_stepskipped1)+'" border="0" title="'+(GIFrames[GIState].actions[GIAltIndex].teststatus=="skipped"?R_testit_skippedmarked:
R_testit_markskipped)+'"/></span>';GIAdvText.innerHTML+='<img SRC="'+P_GIRESOURCES+'spacer.gif" style="border:0;width:3px;height:1px"><IMG SRC="'+P_GIRESOURCES+'spacer.gif" border="0" style="background-color:black; width:1px; height:20px"/><img SRC="'+P_GIRESOURCES+'spacer.gif" style="border:0;width:3px;height:1px">';GIAdvText.innerHTML+='<span style="cursor:pointer" onclick="top.GIPlayer.openTestNotes(); return false"><img src="../../../img/empty.gif" style="'+DIMG_addnotes+'" border="0" title="'+
R_testit_opennotes+'"/></span><img SRC="'+P_GIRESOURCES+'spacer.gif" style="border:0;width:3px;height:1px">';GIAdvText.innerHTML+='<span style="cursor:pointer" onclick="top.GIPlayer.openSTR(); return false"><img src="../../../img/empty.gif" style="'+DIMG_steps2recreate+'" border="0" title="'+R_testit_openstr+'"/></span><img SRC="'+P_GIRESOURCES+'spacer.gif" style="border:0;width:3px;height:1px">';GIAdvText.innerHTML+='<IMG SRC="'+P_GIRESOURCES+'spacer.gif" border="0" style="background-color:black; width:1px; height:20px"/><img SRC="'+
P_GIRESOURCES+'spacer.gif" style="border:0;width:3px;height:1px">';GIAdvText.innerHTML+='<span style="cursor:pointer" onclick="top.GIPlayer.GIGoToReport(); return false"><img src="../../../img/empty.gif" style="'+DIMG_gotoreport+'" border="0" title="'+R_testit_gotoreport+'"/></span>';switch(GIFrames[GIState].actions[GIAltIndex].teststatus){case "passed":GITestStatus.innerHTML=R_testit_passed.toUpperCase();break;case "failed":GITestStatus.innerHTML=R_testit_failed.toUpperCase();break;case "skipped":GITestStatus.innerHTML=
R_testit_skipped.toUpperCase()}}else GIAdvText.innerHTML+='<span style="cursor:pointer" onclick="top.GIPlayer.GINextStep(); return false"><img src="../../../img/empty.gif" style="'+DIMG_nextstep+'" border="0" title="'+c+'"/></span>';if(GIFrames[GIState].actions.length>1)for(c=1;c<GIFrames[GIState].actions.length;c++)GetTextWT(GIFrames[GIState].actions[c].text)!=""&&GIShowAltsPic();GIActAction=GIFrames[GIState].actions[GIAltIndex];GILoadInfoBlocks(GIInfoFrame);d+=GIgetActionText(GIActAction);GITextFrame.innerHTML=
d;if(ScreenshotVisible){d=GIActAction;SSAList[d.id].a=GIActAction;for(SSAList[d.id].sspath=GIFrames[GIState].sspath;d.dn&&GIFrames[d.next].type!="decision";){SSAList[GIFrames[d.next].actions[0].id].a=GIFrames[d.next].actions[0];SSAList[GIFrames[d.next].actions[0].id].sspath=GIFrames[d.next].sspath;d=GIFrames[d.next].actions[0]}GILoadSS(GIActAction.id)}upk.browserInfo.isExplorer()&&StartKeyHook()}GIRefreshActionMenu();bubbc=GIActAction.bcolor;for(GIbgcolor=bubbc.toString(16);GIbgcolor.length<6;)GIbgcolor=
"0"+GIbgcolor;GIbgcolor="#"+GIbgcolor;oPopBody.style.backgroundColor=DoItConfig.DoItBackgroundColor!=""?DoItConfig.DoItBackgroundColor:GIbgcolor?GIbgcolor:"#FEFECE";AudioAction=GIActAction;GIState!="teststart"&&GIState!="testend"&&SoundAvail&&PlaySound&&UserPrefs.PlayAudio=="all"&&PlayAudio();if(upk.browserInfo.isExplorer()&&popupVersion)GITextFrame.style.width=popWidth-29;if(!popupVersion){GIInfoFrame.style.right=GIAdvText.clientWidth+10+"px";GIInfoFrame.style.left="0px"}if(upk.browserInfo.isExplorer())GITextFrame.style.overflow=
"auto";$(".giTitle").css(DoItConfig.DoItTopicTitleFont);GIOnResize();setTimeout(GIOnResize,500)}}function GIGoToReport(){gotoReport=true;GINextStep("testend")}function GITMClosed(){ShowPopup()}function IsPrimaryDisplay(){primarydisplay=true;var c=window.open("","","width=10,height=10");if(c.screenLeft<0||c.screenLeft>this.screen.width)primarydisplay=false;if(c.screenTop<0||c.screenTop>this.screen.height)primarydisplay=false;c.close();return primarydisplay}
function openSTR(){if(isTestItOnTouchDevice())openEmbeddedDialog("../../../html/testitstr.html");else{HidePopup();strWindow=top.window.open("../../../html/testitstr.html?","teststr","scrollbars=yes,left=150,top=150,width=500,height=300,resizable=yes")}}function closeSTR(){strWindow!=null&&strWindow.close();ShowPopup()}function OnClosingChildWindow(){ShowPopup()}
function fillSTRBox(c){var d=1,e="",f=null;e+=jQuery.trim($("#TopicName").text())+"\n";e+="\n"+jQuery.trim(R_testit_str)+":\n";for(var g=0;g<GIHistory.length;g++)if(GIHistory[g].type!="decision"&&GIHistory[g].type!="start"&&GIHistory[g].type!="end"&&GIHistory[g].type!="teststart"&&GIHistory[g].type!="testend"){f=GIFrames[GIHistory[g].frame].actions[GIHistory[g].altindex];if(f.teststatus!="skipped"){e+=d+". "+jQuery.trim($(f.text.replace(/(<br>|<\/p>)/gi," ")).text().replace(/[\s\xA0]+/g," "))+"\n";
d++}for(;f.dn&&GIFrames[f.next].type!="decision"&&GIFrames[f.next].type!="end";){f=GIFrames[f.next].actions[0];if(f.teststatus!="skipped"){e+=d+". "+jQuery.trim($(f.text.replace(/(<br>|<\/p>)/gi," ")).text().replace(/[\s\xA0]+/g," "))+"\n";d++}}}f=GIFrames[GIState].actions[GIAltIndex];e+=d+". "+jQuery.trim($(f.text.replace(/(<br>|<\/p>)/gi," ")).text().replace(/[\s\xA0]+/g," "))+"\n";for(d++;f.dn&&GIFrames[f.next].type!="decision"&&GIFrames[f.next].type!="end";){f=GIFrames[f.next].actions[0];e+=d+
". "+jQuery.trim($(f.text.replace(/(<br>|<\/p>)/gi," ")).text().replace(/[\s\xA0]+/g," "))+"\n";d++}c.fillText(e)}function openTestNotes(){if(testNotesWindow==null||testNotesWindow.closed)if(isTestItOnTouchDevice())openEmbeddedDialog("../../../html/testitnotes.html");else{HidePopup();testNotesWindow=top.window.open("../../../html/testitnotes.html?","testnotes","scrollbars=yes,left=150,top=150,width=500,height=300,resizable=yes")}else testNotesWindow.focus()}
function fillTestNotesBox(c){c.fillText(GIFrames[GIState].actions[GIAltIndex].testnotes)}function saveTestNotes(c){GIFrames[GIState].actions[GIAltIndex].testnotes=c}function closeTestNotes(){testNotesWindow!=null&&testNotesWindow.close();ShowPopup()}function isTestItOnTouchDevice(){return IsTouchDevice()||upk.browserInfo.isIE10Modern()}function openEmbeddedDialog(c){$("<iframe/>",{src:c}).appendTo($("#embedded_dialog"));$("#embedded_dialog").show();$("#noPopupFF").hide()}
function removeEmbeddedDialog(){$("#embedded_dialog iframe").remove();$("#embedded_dialog").hide();$("#noPopupFF").show()}
function openTM(){SoundPlayerObj&&SoundAvail&&PlaySound&&SoundPlayerObj.Stop();HidePopup();var c=window.location.href;c.substring(0,c.lastIndexOf("/")+1);c="mode=T&frame="+GIState;if(safeUriMode)c="su="+Escape.SafeUriEscape(c);top.window.open("topic.html?"+c,"tplayer","toolbar=0,location=0,statusbar=0,menubar=0,scrollbars=1,resizable=0,fullscreen=1,left=0,top=0,width="+screen.width+",height="+screen.height)}
function openDM(){SoundPlayerObj&&SoundAvail&&PlaySound&&SoundPlayerObj.Stop();HidePopup();var c=window.location.href;c.substring(0,c.lastIndexOf("/")+1);c="mode=S&frame="+GIState;if(safeUriMode)c="su="+Escape.SafeUriEscape(c);top.window.open("topic.html?"+c,"dplayer","toolbar=0,location=0,statusbar=0,menubar=0,scrollbars=1,resizable=0,fullscreen=1,left=0,top=0,width="+screen.width+",height="+screen.height)}function LogOut(){lms_KPathLogout()}
function PlayAudio(){SoundPlayerObj&&SoundPlayerObj.Play(AudioAction.id.substring(1)+".ASX")}function PlayStop(c){SoundPlayerObj&&SoundPlayerObj.Stop(c)}function OnEndPlaySound(){SoundPlayerObj&&SoundPlayerObj.Stop();if(AudioAction.dn&&GIFrames[AudioAction.next].type!="decision"){AudioAction=GIFrames[AudioAction.next].actions[0];setTimeout(PlayAudio,300)}}
function OnErrorPlaySound(){SoundPlayerObj&&SoundPlayerObj.Stop();if(AudioAction.dn&&GIFrames[AudioAction.next].type!="decision"){AudioAction=GIFrames[AudioAction.next].actions[0];setTimeout(PlayAudio,300)}}
function GIGetDecisionText(c){var d="<span style='font: 9pt Arial'>"+GIFrames[GIState].header+"<BR><BR>";popupVersion||(d+="<ul style='padding: 0 0 0 18px; margin: 0;'>");for(var e=0;e<GIFrames[c].actions.length;e++){var f=GIFrames[c].actions[e],g=false;if(ecidStartDecisions[c])if(ecidStartDecisions[c].display)for(var l=0;l<ecidStartDecisions[c].pathstoignore.length;l++)if(ecidStartDecisions[c].pathstoignore[l]==f.id)g=true;if(!g){g=f.text.replace(/&amp;/g,"&");d+=popupVersion?"<li style='padding: 0 0 0 18px; margin: 0;list-style-position:outside'>":
"<li>";d+="<a href='#' onclick='top.GIPlayer.GINextStep(\""+f.next+"\"); return false'>";d+=g;d+="</a><BR></li>"}}popupVersion||(d+="</ul>");d+="</span>";return d}function Replace(c,d,e){var f=c.indexOf(d);if(f<0)return c;d=c.substr(0,f);c=c.substr(f+6);return d+e+c}function GIShowFrameID(c){oPopup.document.getElementById("frameidvalue"+idPostFix).innerHTML=c}
function GIgetActionText(c){var d="";SSAList=[];SSAList[c.id]={fid:null,a:null,imgid:null};if(c.icon)d+='<img style="float:left;margin-right:5px;margin-bottom:5px" align="left" border="0" src="'+P_GIRESOURCES+c.icon+'"/> ';if(c.text==null)d+="";else{if(c.input)c.text=BuildInputText(c.input,c.text);if(c.dn&&GIFrames[c.next].type!="decision")if(ScreenshotVisible){d+="<img id='lss"+c.id+"' title='"+R_interface_filmstrip+"' style='cursor:pointer' align='right' src='../../../img/stepdispl1.gif' onclick='parent.GIShowFrameInChain(\""+
GIState+'","'+c.id+'","'+GIAltIndex+"\");'/>";var e="lss"+c.id;SSAList[c.id].imgid=e}d+="<span>"+c.text+"</span>";if(testIt&&GIFrames[GIState].type!="start"&&GIFrames[GIState].type!="end"&&jQuery.trim($("#ExpectedTestResults_"+GIState).html())!=""){d+="<span style='font-family:Arial; font-size:10pt;'><br><span style='font-weight:bold'>"+R_testit_expectedresults+":</span><br>";d+=$("#ExpectedTestResults_"+GIState).html().replace(/__my_new_line__/g,"<br>");d+="<br></span>"}}for(;c.dn&&GIFrames[c.next].type!=
"decision";){var f=c.next;c=GIFrames[c.next].actions[0];if(c.input)c.text=BuildInputText(c.input,c.text);d+='<br/><div style="clear:both"></div><B style="font-family:Arial;font-size:9pt"/>'+R_bubletext_then+"</B><BR>";if(c.icon)d+='<img  style="float:left;margin-right:5px;margin-bottom:5px" align="left" border="0" src="'+P_GIRESOURCES+c.icon+'"/> ';if(ScreenshotVisible){d+="<img id='lss"+c.id+"' title='"+R_interface_filmstrip+"' style='margin-top:-12px;cursor:pointer' align='right' src='../../../img/stepdispl0.gif' onclick='parent.GIShowFrameInChain(\""+
f+'","'+c.id+"\"); '/>";e="lss"+c.id;SSAList[c.id]={fid:null,a:null,imgid:e}}d+="<span>"+c.text+"</span>";if(testIt&&GIFrames[f].type!="start"&&GIFrames[f].type!="end"&&jQuery.trim($("#ExpectedTestResults_"+f).html())!=""){d+="<span style='font-family:Arial; font-size:10pt;'><br><span style='font-weight:bold'>"+R_testit_expectedresults+":</span><br>";d+=$("#ExpectedTestResults_"+f).html().replace(/__my_new_line__/g,"<br>");d+="<br></span>"}}GINextState=c.next;return d}
function GIGetTestResults(){testItPassed=true;for(var c=0,d=0,e=0,f=0;f<GIHistory.length;f++)if(GIHistory[f].type!="decision"&&GIHistory[f].type!="start"&&GIHistory[f].type!="end"&&GIHistory[f].type!="teststart"&&GIHistory[f].type!="testend"){var g=GIFrames[GIHistory[f].frame].actions[GIHistory[f].altindex];switch(g.teststatus){case "passed":c++;break;case "failed":d++;break;case "skipped":e++}}if(d||gotoReport)testItPassed=false;$("#TestResults").html("");var l="";l+="<span style='font-weight:bold'>"+
R_testit_summary+":</span><br>";l+='<div style="margin-bottom:3px; margin-top:3px"><img src="../../../img/empty.gif" style="'+DIMG_sum_passed+' float:left; margin-left:20px" border="0" /><div style="float:left; margin-left:5px;"> '+R_testit_passed+': <span style="font-weight:bold;">'+c+'</span></div><div style="clear:both"></div></div>';l+='<div style="margin-bottom:3px; margin-top:3px"><img src="../../../img/empty.gif" style="'+DIMG_sum_failed+' float:left; margin-left:20px" border="0" /><div style="float:left; margin-left:5px;"> '+
R_testit_failed+': <span style="font-weight:bold;">'+d+'</span></div><div style="clear:both"></div></div>';l+='<div style="margin-bottom:3px; margin-top:3px"><img src="../../../img/empty.gif" style="'+DIMG_sum_skipped+' float:left; margin-left:20px" border="0" /><div style="float:left; margin-left:5px;"> '+R_testit_skipped+': <span style="font-weight:bold;">'+e+'</span></div><div style="clear:both"></div></div>';l+="<span>"+R_testit_stepnum+': <span style="font-weight:bold">'+(c+d+e)+"</span></span><br>";
l+="<span>"+R_testit_result+': <span style="font-weight:bold">'+(testItPassed?R_testit_passed.toUpperCase():R_testit_failed.toUpperCase())+"</span></span><br><br>";l+='<a href="#" onclick="top.GIPlayer.GITestItReport()">'+R_testit_viewreport+"</a>";$("#TestResults").append(l);timeSpent=(new Date).getTime()-startTime;l=Math.floor(timeSpent/1E3);var m="<bookmarks>",j={passed:1,failed:2,skipped:3};for(f in GIFrames)for(var p=GIFrames[f],t=0;t<p.actions.length;t++){g=p.actions[t];m+='<bookmark name="TestResultFrameID'+
f+"_"+g.id+'"><value>'+(j[g.teststatus]||0)+"</value></bookmark>";if(g.testnotes)m+='<bookmark name="TestNotesFrameID'+f+"_"+g.id+'"><value><![CDATA['+g.testnotes+"]]\></value></bookmark>"}m+="</bookmarks>";f=testItPassed?1:2;c="<result><testdate>"+function(r){function H(A){A=A.toString();return A.length<2?"0"+A:A}return r.getFullYear()+"-"+H(r.getMonth()+1)+"-"+H(r.getDate())+"T"+H(r.getHours())+":"+H(r.getMinutes())+":"+H(r.getSeconds())}(new Date)+"</testdate><result>"+f+"</result><estimatedtime>"+
testItEstimate+"</estimatedtime><actualtime>"+l+"</actualtime><passedsteps>"+c+"</passedsteps><failedsteps>"+d+"</failedsteps><skippedsteps>"+e+"</skippedsteps><totalsteps>"+(c+d+e)+"</totalsteps><testdocrevision>"+testItDocRevision+"</testdocrevision>"+m+"</result>";lms_sendTestItResult(f,c)}function GIShowFrameInChain(c,d,e){GIChainState=c;GIChainAltIndex=e||0;parent.GILoadSS(d);parent.GIShowFrameID(c.substr(1))}
function DisplayInputTextPart(c,d,e){var f="<DIV id="+d+' style="DISPLAY: inline">',g=c.indexOf(f);if(g<0){f='<div id="'+d+'" style="display: inline;">';g=c.indexOf(f);if(g<0){f='<div id="'+d+'" style="display:inline">';g=c.indexOf(f);if(g<0){f='<DIV style="DISPLAY: inline" id='+d+">";g=c.indexOf(f);if(g<0)return c}}}d=c.substr(g+f.length);f=d.indexOf("</DIV>");if(f<0)f=d.indexOf("</div>");if(e==true)return c.substr(0,g)+d.substr(0,f)+d.substr(f+6);return c.substr(0,g)+d.substr(f+6)}
function BuildInputText(c,d){var e=false,f=false,g=false,l=false,m=false;if(c[0]=="S"){e=true;if(template_strinp_suppress_example=="<span>0</span>")g=f=true}else if(c[0]=="A"){m=e=true;if(template_strinp_suppress_example=="<span>0</span>")g=f=true}else if(c[0]=="N")m=l=g=true;else l=g=true;e=DisplayInputTextPart(d,"anything",e);e=DisplayInputTextPart(e,"example",f);e=DisplayInputTextPart(e,"inputtext",g);e=DisplayInputTextPart(e,"inputalt",l);e=DisplayInputTextPart(e,"blank",m);e=e.replace(RegExp("<SPAN></SPAN>",
"g"),"<SPAN> </SPAN>");e=e.replace(RegExp("\r","g"),"");return e=e.replace(RegExp("\n","g"),"")}function GIClearAll(){GITextFrame.innerHTML="";GIInfoFrame.innerHTML="";GIInfoFrame.innerHTML+='<span id="GIST"></span>';GIInfoFrame.innerHTML+='<span id="GIAlts'+idPostFix+'"></span>';GITestStatus.innerHTML=""}function GIRestart(){var c=GIHistory[0].frame;GIHistory=null;GIHistory=[];GINextStep(c,true)}
function GIPrevStep(){var c=GIHistory[GIHistory.length-1];GIRHist(GIHistory.length-1);GINextStep(c.frame,true,c.altindex)}
function GINextStep(c,d,e){try{if(testNotesWindow)if(testNotesWindow.saveNotes){testNotesWindow.saveNotes();testNotesWindow=null}}catch(f){}strWindow&&strWindow.close();if(c){if(GIFrames[c].type=="decision"&&GIFrames[c].actions.length==1){GINextStep(GIFrames[c].actions[0].next);return false}d||GIHistory.push({frame:GIState,type:GIFrames[GIState].type,altindex:GIAltIndex});if(ecidDecisionStart){FindEcidStartNextFrame(c);c=GIState;e=null}GIFrames[c].type=="end"?lms_frameView(getMyGuid(),"D","end"):
lms_frameView(getMyGuid(),"D",c);if(e)GIChainAltIndex=GIAltIndex=e;else GIAltIndex=null;GIClearAll();GIStep(c)}else{GIFrames[GINextState].type=="end"?lms_frameView(getMyGuid(),"D","end"):lms_frameView(getMyGuid(),"D",GINextState);if(GIFrames[GINextState].type=="decision"&&GIFrames[GINextState].actions.length==1){GINextStep(GIFrames[GINextState].actions[0].next);return false}d||GIHistory.push({frame:GIState,type:GIFrames[GIState].type,altindex:GIAltIndex});if(e)GIChainAltIndex=GIAltIndex=e;else GIAltIndex=
null;GIClearAll();GIStep(GINextState)}}function GetTextWT(c){for(var d,e;c.indexOf("<")!=-1;){d=c.indexOf("<");var f=c.substring(0,d);e=c.indexOf(">",d);d=c.substring(d+1,e);if(d=="/P"||d=="/p"||d.substr(0,1)=="p"||d.substr(0,1)=="P"||d=="BR"||d=="br")f+="&nbsp";c=c.substring(e+1);c=f+c}return c}
function GILoadInfoBlocks(c){for(var d=GIState,e=GIFrames[d].actions[GIAltIndex],f=true,g=true;f;)if(GIFrames[d].infoblocks.length>0){f=false;var l="";if(GIFrames[GIState].actions.length>1&&GIFrames[GIState].type!="decision")l='<img SRC="'+P_GIRESOURCES+'spacer.gif" style="border:0;width:3px;height:1px"><IMG SRC="'+P_GIRESOURCES+'spacer.gif" border="0" style="background-color:black; width:1px; height:20px"/>';var m=oPopup.document.createElement("span");c.appendChild(m);for(m.innerHTML=l;g;){for(m=
0;m<GIFrames[d].infoblocks.length;m++){l=GIFrames[d].infoblocks[m];l="<img SRC='"+P_GIRESOURCES+"spacer.gif' style='border:0;width:3px;height:1px'><span style='cursor:pointer' onclick=\""+l.url+'"/><IMG SRC="'+P_GIRESOURCES+l.buttonfile+'" border="0" title="'+l.tooltip+'"/></span>';var j=oPopup.document.createElement("span");c.appendChild(j);j.innerHTML=l}if(e.dn&&GIFrames[e.next].type!="decision"){d=e.next;e=GIFrames[d].actions[0]}else g=false}}else if(e.dn&&GIFrames[e.next].type!="decision"){d=
e.next;e=GIFrames[d].actions[0]}else f=false}function GINextAlt(){try{if(testNotesWindow)if(testNotesWindow.saveNotes){testNotesWindow.saveNotes();testNotesWindow=null}}catch(c){}strWindow&&strWindow.close();GIAltIndex+=1;GIChainAltIndex=GIAltIndex;if(GIAltIndex>=GIFrames[GIState].actions.length)GIChainAltIndex=GIAltIndex=0;if(GetTextWT(GIFrames[GIState].actions[GIAltIndex].text)==""){GINextAlt();return false}RefreshStep()}
function GIShowAltsPic(){oPopup.document.getElementById("GIAlts"+idPostFix).innerHTML='<span style="cursor:pointer" onclick="top.GIPlayer.GINextAlt(); return false"><IMG SRC="'+P_GIRESOURCES+'alternatives.gif" border="0" title="'+R_menu_alternatives+'"/></span>'}
function GIPassStep(){GIFrames[GIState].actions[GIAltIndex].teststatus="passed";for(a=GIFrames[GIState].actions[GIAltIndex];a.dn&&GIFrames[a.next].type!="decision"&&GIFrames[a.next].type!="end";){a=GIFrames[a.next].actions[0];a.teststatus="passed"}GINextStep()}
function GIFailStep(){GIFrames[GIState].actions[GIAltIndex].teststatus="failed";for(a=GIFrames[GIState].actions[GIAltIndex];a.dn&&GIFrames[a.next].type!="decision"&&GIFrames[a.next].type!="end";){a=GIFrames[a.next].actions[0];a.teststatus="failed"}GINextStep()}
function GISkipStep(){if(GIFrames[GIState].actions[GIAltIndex].teststatus!="passed"&&GIFrames[GIState].actions[GIAltIndex].teststatus!="failed"){GIFrames[GIState].actions[GIAltIndex].teststatus="skipped";for(a=GIFrames[GIState].actions[GIAltIndex];a.dn&&GIFrames[a.next].type!="decision"&&GIFrames[a.next].type!="end";){a=GIFrames[a.next].actions[0];a.teststatus="skipped"}}GINextStep()}
function GetBasePathTestIt(){base=this.location.href;k=base.indexOf("?");if(k<0)k=base.indexOf("#");if(k>=0)base=base.substr(0,k);k=base.lastIndexOf("/");return b=base.substr(0,k)}var testScriptLoaded=false,testItLoadI;
function GITestItReport(){testReportWindow&&testReportWindow.close();var c="../../testitsummary/"+UnescapeQuotes(testItReportName);if(isTestItOnTouchDevice()){c=GetBasePathTestIt()+"/"+c;var d=PxToPt($("#noPopupFF").width()-20,96),e=PxToPt($("#noPopupFF").height()-20,96);showDialog(c,0,0,d,e,true,96,"../../../",false)}else testReportWindow=top.window.open(c,"testreport","toolbar=1,location=1,statusbar=1,menubar=1,scrollbars=1,resizable=1");testScriptLoaded=false;testItLoadI=setInterval(function(){GITestScript()},
1500)}
function GITestScript(){if(!testScriptLoaded)try{if(isTestItOnTouchDevice()){var c=$("#dialogBody").contents().find("head"),d=document.createElement("script");d.type="text/javascript";d.src=GetBasePathTestIt()+"/../../../js/jquery.min.js";c[0].appendChild(d);d=document.createElement("script");d.type="text/javascript";d.src=GetBasePathTestIt()+"/../../../js/testitreportload.js";c[0].appendChild(d)}else{var e=testReportWindow.document.getElementsByTagName("HEAD").item(0),f=testReportWindow.document.createElement("script"),g=
testReportWindow.document.createElement("script");f.type="text/javascript";g.type="text/javascript";f.src="../../js/jquery.min.js";g.src="../../js/testitreportload.js";e.appendChild(f);setTimeout(function(){e.appendChild(g)},1E3)}}catch(l){}}function GITestItReportLoad(){if(!testScriptLoaded){testScriptLoaded=true;clearInterval(testItLoadI);GILoadTestItScripts()}}
function GILoadTestItScripts(){if(isTestItOnTouchDevice()){var c=$("#dialogBody").contents().find("HEAD"),d=document.createElement("script");d.type="text/javascript";d.src=GetBasePathTestIt()+"/../../../js/resource.js";c[0].appendChild(d);d=document.createElement("script");d.type="text/javascript";d.src=GetBasePathTestIt()+"/../../../js/testitreport.js";c[0].appendChild(d);$("<link/>",{type:"text/css",href:GetBasePathTestIt()+"/../../../css/playerimages.css",rel:"stylesheet"}).appendTo(c)}else{c=
testReportWindow.document.getElementsByTagName("HEAD").item(0);d=testReportWindow.document.createElement("link");d.type="text/css";d.href="../../css/playerimages.css";d.rel="stylesheet";var e=testReportWindow.document.createElement("script"),f=testReportWindow.document.createElement("script");e.type="text/javascript";f.type="text/javascript";e.src="../../js/resource.js";f.src="../../js/testitreport.js";c.appendChild(d);c.appendChild(e);c.appendChild(f)}}
function GITestItReportReady(){var c=isTestItOnTouchDevice()?document.getElementById("dialogBody").contentWindow:testReportWindow;c.setEditable(!Kpath_launch);for(var d in GIFrames){for(var e=GIFrames[d],f=0;f<e.actions.length;f++){var g=e.actions[f],l="";if(g.testnotes){l=g.testnotes.replace(/([^>]?)\n/g,"__my_new_line__");var m=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/"/g,"&quot;"]],j;for(j in m)l=l.replace(m[j][0],m[j][1]);l=l.replace(/__my_new_line__/g,"<br>")}if(l=="")l="<br>";c.fillActionTesterNotes(d,
g.id,l);c.fillActionTestResult(d,g.id,g.teststatus);c.fillTestResults(testItPassed)}e=(new Date).getTime();timeSpent||(timeSpent=e-startTime);seconds=Math.floor(timeSpent/1E3%60);seconds=(seconds<10?"0":"")+seconds;minutes=Math.floor(timeSpent/6E4%60);minutes=(minutes<10?"0":"")+minutes;hours=Math.floor(timeSpent/36E5);hours=(hours<10?"0":"")+hours;c.fillActualTime(hours+":"+minutes+":"+seconds);(e=lms_getUserName())&&e!=""&&c.fillTestName(e)}}
function GIOpenAction(){if(upk.browserInfo.isExplorer()&&popupVersion)for(var c=0;c<oPopup.document.all.length;c++)oPopup.document.all[c].detachEvent("onclick",GICloseAction);else $("#EventListenerDIV").css({cursor:"default",zIndex:-1}).unbind("mousedown");var d=c=100;c=LeftPos+popWidth-234;d=TopPos+30;ActMenu&&ActMenu.Open(c,d);GIRefreshActionMenu();setTimeout(GIAttachEvent,100)}
function GIAttachEvent(){if(upk.browserInfo.isExplorer()&&popupVersion)for(var c=0;c<oPopup.document.all.length;c++)oPopup.document.all[c].attachEvent("onclick",GICloseAction);else $("#EventListenerDIV").css({cursor:"default",zIndex:4}).bind("mousedown",function(){GICloseAction()})}function GICloseAction(){ActMenu&&ActMenu.Close()}function GIRHist(c){for(var d=[],e=0;e<c;e++)d[e]=GIHistory[e];GIHistory=[];for(e=0;e<d.length;e++)GIHistory[e]=d[e]}
function GIRefreshActionMenu(){if(ActMenu){var c=false;if(GIHistory.length>0)c=true;var d=false;if(GIFrames[GIState].actions.length>1&&GIFrames[GIState].type!="decision")d=true;var e=false,f=false;if(GIFrames[GIState].type!="decision"&&(GIFrames[GIState].type!="end"||testIt)&&GIState!="testend")if(testIt&&GIFrames[GIState].type!="start"&&GIFrames[GIState].type!="end"&&GIState!="teststart")f=true;else e=true;var g=UserPrefs.EnablePreferences;PlayerConfig.EnableCookies||(g=false);ActMenu.Refresh(g,
c,d,e,f,GITMEnabled,GIDMEnabled,true,param_printitname.length>0,param_fastdoit)}}function GIShowPrintit(){if(param_printitname.length>0){lms_LaunchTopic("P");upk.browserInfo.isIE10()&&param_printitname.indexOf(".pdf",param_printitname.length-4)!==-1?window.open("../../../html/pdfgateway.html?printit/"+param_printitname):window.open("../../printit/"+param_printitname)}}function GIOpenHelp(){onHelp("../../")}
function GIClosePlayer(c){if(PlayerConfig.EnableCookies&&GICookie&&GICookie!=null){if(!(upk.browserInfo.isExplorer()&&popupVersion)){TopPos=window.screenTop!=undefined?window.screenTop:window.screenY;LeftPos=window.screenLeft!=undefined?window.screenLeft:window.screenX;popWidth=document.getElementById("noPopupFF").clientWidth;popHeight=document.getElementById("noPopupFF").clientHeight}if(!GINoCookieSave){GICookie.Cleft=LeftPos;GICookie.Ctop=TopPos;GICookie.Cwidth=popWidth;GICookie.Cheight=ScreenshotVisible||
!(upk.browserInfo.isExplorer()&&popupVersion)?popHeight:popHeight+SavedSSHeight;GICookie.Csss=ScreenshotVisible+1;GICookie.Store()}}GICloseAction();GIPlayer&&GIPlayer.close();testNotesWindow&&testNotesWindow.close();strWindow&&strWindow.close();KeepAlive_Close();if(window.opener)try{if(c||mViewOutline){mViewOutline=true;window.opener.DoItFinished(false)}else window.opener.DoItFinished(param_fastdoit)}catch(d){}}function OnClosingPreferences(){ShowPopup();setTimeout("RefreshStep()",100)}
function GIOpenPreferences(){HidePopup();OpenPreferencesDialog(GetBasePathTestIt()+"/../../..",!SoundAvail)}var sharedUrl1="",sharedUrl2="",sharedUrl3="";
function GIShare(){var c=window.location.href.indexOf("/data/tpc/"),d=window.location.href.substr(0,c)+"/",e=document.getElementById("TopicId").getAttribute("topicid");sharedUrl1=d+"index.html?"+("bypasstoc=0&guid="+e);c="mode="+(testIt?"E":playMode)+"&guid="+e;sharedUrl2=d+"index.html?"+c;c="mode="+(testIt?"E":playMode)+"&guid="+e;if(GIState!="start"&&GIActAction.next!=null)c+="&frame="+GIState.substr(1);sharedUrl3=d+"index.html?"+c;d=GetBasePathTestIt()+"/../../../html/sharecontent.html";c="type=player";
c+="&src=D";e=IsTouchDevice()||upk.browserInfo.isIE10Modern();c+="&touch="+(e?"1":"0");d+="?su="+Escape.SafeUriEscape(c);c=PxToPt(650,96);var f=PxToPt(260,96);if(e){setDlgCtx("shareIt");showDialog(d,-1,-1,c,f,true,96,"../../../",false)}else window.open(d,"sharewin","width=600,height="+f+",resizable=1,scrollbars=0,top="+(screen.availHeight-290)/2+",left="+(screen.availWidth-600)/2)}
function GetSharedUrl(c){switch(c){case 1:return sharedUrl1;case 2:return sharedUrl2;case 3:return sharedUrl3}return""}function GIOnResize(){if(!popupVersion){var c=GIAdvText.clientHeight;if(GIInfoFrame.clientHeight>GIAdvText.clientHeight)c=GIInfoFrame.clientHeight;GITextFrame.style.bottom=c+(testIt?30:16)+"px"}}function Init(){ActMenu=new ActionMenu;Init2()}var giTitle;
function Init2(){oPopup.document.getElementById("GITwisty"+idPostFix).title=R_interface_graphic;oPopup.document.getElementById("gititle"+idPostFix).innerHTML="&nbsp "+(testIt?R_mode_testit:R_mode_doit);if(closebtn=oPopup.document.getElementById("gicloseod"+idPostFix))closebtn.title=R_bubble_closeondemand;GITestStatus=oPopup.document.getElementById("PGITestStatus"+idPostFix);GIInfoFrame=oPopup.document.getElementById("PGIInfoFrame"+idPostFix);GITextFrame=oPopup.document.getElementById("PGITextFrame"+
idPostFix);GITextFrameJ=$("#PGITextFrame"+idPostFix);oPopup.document.getElementById("pgiaction"+idPostFix).innerHTML='<span title="'+R_interface_action_alt+'" style="CURSOR:pointer;TEXT-DECORATION:underline;FONT-SIZE:9pt;COLOR:'+DoItConfig.DoItActionsLinkColor+';FONT-WEIGHT:normal;FONT-FAMILY:Arial,Helvetica,sans-serif" onclick="top.GIPlayer.GIOpenAction(this);">'+R_interface_action+"</span>";GIAdvText=oPopup.document.getElementById("PGIAdvText"+idPostFix);GIScreenshot=oPopup.document.getElementById("PGIScreenshot"+
idPostFix);GIScreenshot.title=R_interface_graphic_alt;GIHighlight=oPopup.document.getElementById("PGIHighlight"+idPostFix);GICamera=oPopup.document.getElementById("camera"+idPostFix);$("#esttime").text(R_testit_estimate+": ");$("#testsetup").text(R_testit_setup+": ");if(testIt)if(popupVersion){oPopup.document.getElementById("PGITestStatusRow").style.display="block";$(oPopup.document).find("#PGITestStatusRow").css(DoItConfig.TestItStatusFont)}else{$("#PGITextFrame"+idPostFix).css("bottom","52px");
$("#PGIAdvText"+idPostFix).css("bottom","24px");$("#PGIInfoFrame"+idPostFix).css("bottom","24px");$("#PGITestStatus"+idPostFix).css("display","block");$("#PGITestStatus"+idPostFix).css(DoItConfig.TestItStatusFont)}$(oPopup.document).find("#GITwisty"+idPostFix).attr("style",DIMG_twistyup0).css({display:"block",cursor:"pointer"}).hover(function(){$(oPopup.document).find("#GITwisty"+idPostFix).attr("style",DIMG_twistyup1).css({display:"block",cursor:"pointer"})},function(){$(oPopup.document).find("#GITwisty"+
idPostFix).attr("style",DIMG_twistyup0).css({display:"block",cursor:"pointer"})});$(oPopup.document).find("#gicloseod").attr("style",DIMG_bubexit0sq).css({display:"block",cursor:"pointer"}).hover(function(){$(oPopup.document).find("#gicloseod").attr("style",DIMG_bubexit1sq).css({display:"block",cursor:"pointer"})},function(){$(oPopup.document).find("#gicloseod").attr("style",DIMG_bubexit0sq).css({display:"block",cursor:"pointer"})});IsTouchDevice()&&$(".iosonly").show();$("#giTitlebarContFF").css(DoItConfig.DoItFont);
$("#giTitlebarContFF").css(DoItConfig.DoItHeaderColor);$(oPopup.document).find("#gititle").css(DoItConfig.DoItFont);$(oPopup.document).find("#movePopup, #movePopup2").css(DoItConfig.DoItHeaderColor);if(!jQuery.isEmptyObject(DoItConfig.DoItHeaderImage)){$("#giTitlebarContFF").css("background-color","");$("#giTitlebarFF").css(DoItConfig.DoItHeaderImage);$(oPopup.document).find("#movePopup, #movePopup2").css("background-color","");$(oPopup.document).find("#TitleContainer").css(DoItConfig.DoItHeaderImage)}jQuery.isEmptyObject(DoItConfig.DoItBackground)||
$("#split1FF").css(DoItConfig.DoItBackground);var c=Math.random().toString();c=c.substr(c.length-8);giTitle=(testIt?R_mode_testit:R_mode_doit)+" "+jQuery.trim($("#TopicName").text())+(upk.browserInfo.isFF()?" ("+c+")":"");document.title=giTitle;SendEventToHemiFFButtonPlugin();GIOnLoad=true}var ScreenshotVisible=1,SavedSSHeight=0,SavedSSHeight2=0;
function toggleScreenshot(){if(ScreenshotVisible){if(IsTouchDevice()){$("#giSplitter"+idPostFix).unbind("touchstart",SplitStart);$("#giToggleFF").unbind("touchstart",SplitStart)}$(oPopup.document).find("#GITwisty"+idPostFix).attr("style",DIMG_twistydown0).css({display:"block",cursor:"pointer"}).hover(function(){$(oPopup.document).find("#GITwisty"+idPostFix).attr("style",DIMG_twistydown1).css({display:"block",cursor:"pointer"})},function(){$(oPopup.document).find("#GITwisty"+idPostFix).attr("style",
DIMG_twistydown0).css({display:"block",cursor:"pointer"})});if(upk.browserInfo.isExplorer()&&popupVersion){var c=oPopup.document.getElementById("split2"),d=c.getBoundingClientRect().top;SavedSSHeight=popHeight-d;SavedSSHeight2=c.clientHeight;popHeight=d;oPopup.document.getElementById("sstoggle1").style.display="none";oPopup.document.getElementById("sstoggle2").style.display="none";oPopup.document.getElementById("sstoggle3").style.display="none"}else{SavedSSHeight=oPopup.document.getElementById("split1"+
idPostFix).style.height;oPopup.document.getElementById("split2"+idPostFix).style.display="none"}oPopup.document.getElementById("split1"+idPostFix).style.height="100%";ScreenshotVisible=0;oPopup_show(LeftPos,TopPos,popWidth,popHeight)}else{if(IsTouchDevice()){$("#giSplitter"+idPostFix).bind("touchstart",SplitStart);$("#giToggleFF").bind("touchstart",SplitStart)}$(oPopup.document).find("#GITwisty"+idPostFix).attr("style",DIMG_twistyup0).css({display:"block",cursor:"pointer"}).hover(function(){$(oPopup.document).find("#GITwisty"+
idPostFix).attr("style",DIMG_twistyup1).css({display:"block",cursor:"pointer"})},function(){$(oPopup.document).find("#GITwisty"+idPostFix).attr("style",DIMG_twistyup0).css({display:"block",cursor:"pointer"})});if(upk.browserInfo.isExplorer()&&popupVersion){SavedSSHeight2||(SavedSSHeight2=100);popHeight+=SavedSSHeight;oPopup.document.getElementById("sstoggle1").style.display="inline";oPopup.document.getElementById("sstoggle2").style.display="inline";oPopup.document.getElementById("sstoggle3").style.display=
"inline";c=SavedSSHeight2/(popHeight-60);if(c<0.1)c=0.1;if(c>0.9)c=0.9;oPopup.document.getElementById("split1").style.height=(1-c)*100+"%";oPopup.document.getElementById("split2").style.height=c*100+"%";if(popHeight>screen.height)popHeight=screen.height;oPopup_show(LeftPos,TopPos,popWidth,popHeight);LeftPos=oPopup.document.parentWindow.screenLeft;TopPos=oPopup.document.parentWindow.screenTop}else{oPopup.document.getElementById("split1"+idPostFix).style.height=SavedSSHeight;oPopup.document.getElementById("split2"+
idPostFix).style.top=SavedSSHeight;oPopup.document.getElementById("split2"+idPostFix).style.height=100-Number(SavedSSHeight.substring(0,SavedSSHeight.indexOf("%")))+"%";oPopup.document.getElementById("split2"+idPostFix).style.display="block"}ScreenshotVisible=1}if(PlayerConfig.EnableCookies&&GICookie&&GICookie!=null){GICookie.Cleft=LeftPos;GICookie.Ctop=TopPos;GICookie.Cwidth=popWidth;GICookie.Cheight=ScreenshotVisible?popHeight:popHeight+SavedSSHeight;GICookie.Csss=ScreenshotVisible+1;GICookie.Cs2=
upk.browserInfo.isExplorer()&&popupVersion?SavedSSHeight2:SavedSSHeight;GICookie.Store()}RefreshStep()}function DecodeInputString(c){return c=replaceString("&lt;","<",c)}function replaceString(c,d,e){for(var f=0;f<e.length;f++)if(e.substring(f,f+c.length)==c)e=e.substring(0,f)+d+e.substring(f+c.length,e.length);return e}function fixInputString(c){if(c)for(var d=0;d<c.length;d++){c[d]=replaceString("<","&lt;",c[d]);c[d]=replaceString(">","&gt;",c[d])}return c}
function getMyGuid(){var c=this.location.href,d=c.indexOf("?");if(d>=0)c=c.substr(0,d);d=c.lastIndexOf("/");return c.substr(d-36,36)}function formatStr(c){for(var d=arguments,e=1;e<d.length;e++){var f="{"+(e-1)+"}",g=c.indexOf(f);if(g>=0)c=c.substr(0,g)+d[e]+c.substr(g+f.length)}return c}if(Array.prototype.push==null)Array.prototype.push=function(c){return this[this.length]=c};
if(typeof HTMLElement!="undefined"&&!HTMLElement.prototype.insertAdjacentElement){HTMLElement.prototype.insertAdjacentElement=function(c,d){switch(c){case "beforeBegin":this.parentNode.insertBefore(d,this);break;case "afterBegin":this.insertBefore(d,this.firstChild);break;case "beforeEnd":this.appendChild(d);break;case "afterEnd":this.nextSibling?this.parentNode.insertBefore(d,this.nextSibling):this.parentNode.appendChild(d)}};HTMLElement.prototype.insertAdjacentHTML=function(c,d){var e=this.ownerDocument.createRange();
e.setStartBefore(this);e=e.createContextualFragment(d);this.insertAdjacentElement(c,e)};HTMLElement.prototype.insertAdjacentText=function(c,d){var e=document.createTextNode(d);this.insertAdjacentElement(c,e)}}function AbsUrl(c){return c}
function LoadXMLDoc(c,d,e,f,g){var l=AbsUrl(c);if(g==undefined)g=false;var m=null;try{if(window.location.href.substr(0,7).toLowerCase()=="http://"||window.location.href.substr(0,8).toLowerCase()=="https://")m=new XMLHttpRequest;if(window.location.href.substr(0,7).toLowerCase()=="file://"&&IsTouchDevice())m=new XMLHttpRequest}catch(j){}finally{if(m==null)m=new ActiveXObject("Microsoft.XMLHTTP")}m.onreadystatechange=function(){state_Change(l,m,d,e,f)};m.open("GET",l,!g);f=="PING"&&m.setRequestHeader("If-Modified-Since",
"Sat, 1 Jan 2005 00:00:00 GMT");m.send(null)}
function state_Change(c,d,e,f,g){if(d.readyState==4)if(d.status==200||d.status==0&&g!="PING"){if(d.responseXML==null||d.responseXML.documentElement==null){c=null;try{c=new ActiveXObject("Microsoft.XMLDOM");c.async=false;c.loadXML(d.responseText)}catch(l){c=(new window.DOMParser).parseFromString(d.responseText,"application/xml")}f=d.responseText;d={};d.responseXML=c;d.responseText=f}e(d,g)}else if(f){g!="PING"&&alert(c+" not found. Logged...");f(g)}else alert("Problem retrieving data: "+d.statusText)}
function LoadXMLDocArray(c,d,e,f,g){LoadXMLDoc(c,g?XMLDocArrayWorker2:XMLDocArrayWorker,e,{nodeName:f,returnFunction:d},false)}function XMLDocArrayWorker(c,d){for(var e=[],f=c.responseXML.getElementsByTagName(d.nodeName),g=0;g<f.length;g++){var l=f[g];(l=l.textContent?l.textContent:l.text)||(l="");var m=l.length;if(m>=2)if(l.substr(0,1)=='"'&&l.substr(m-1,1)=='"')l=l.substr(1,m-2);e[e.length]=l}d.returnFunction(e)}
function XMLDocArrayWorker2(c,d){for(var e=[],f=c.responseXML.getElementsByTagName(d.nodeName),g=0;g<f.length;g++){for(var l=f[g],m=l.attributes[0].value,j="",p=0;p<l.childNodes.length;p++)if(l.childNodes[p].xml)j+=l.childNodes[p].xml;else{var t=new XMLSerializer;j+=t.serializeToString(l.childNodes[p])}e[e.length]=m+"="+j}d.returnFunction(e)}
var requiredFlashVersion="9.0.124",_name="",_asyn=false,_fire=false,_knowpalyer=false,bPlayerIsAvailable=false,useAudioTag=false,useFlash=false,hasRequestedVersion,_fPlayerPath="",soundjs_initialized=false;
function SoundjsInit(){if(soundjs_initialized!=true){soundjs_initialized=true;var c=document.getElementById("fplayer");if(c)if(typeof assetType==="undefined")c.innerHTML="<audio id='upkaudio' onended='AudioEnded();' onerror='AudioError();' oncanplay='AudioLoaded()' style='display: none;'><Source type='audio/mpeg'></audio>";if(upk.browserInfo.isiOS5()&&typeof assetType==="undefined"){getAPlayer().addEventListener("loadstart",SoundPlayer_OnLoadStart);getAPlayer().addEventListener("durationchange",SoundPlayer_OnDurationChange)}hasRequestedVersion=
swfobject.hasFlashPlayerVersion(requiredFlashVersion);try{_fPlayerPath=_webpage_==true?"../../../../":"../../../"}catch(d){_fPlayerPath="../../../"}SupportAAC();CheckAndEnableSound()}}function SoundPlayer_OnLoadStart(){SoundPlayerObj.LoadStartTimer&&clearInterval(SoundPlayerObj.LoadStartTimer);if(getAPlayer().src)SoundPlayerObj.LoadStartTimer=setInterval("SoundPlayer_Started()",3E3)}
function SoundPlayer_OnDurationChange(){if(SoundPlayerObj.LoadStartTimer){clearInterval(SoundPlayerObj.LoadStartTimer);SoundPlayerObj.LoadStartTimer=0}}function SoundPlayer_Started(){getAPlayer().src=getAPlayer().src;getAPlayer().play()}function SupportAAC(){if(upk.browserInfo.isiOS()){bPlayerIsAvailable=useAudioTag=true;if(PlayerConfig.AACIsAvailable==true)return true}return false}
function CheckAndEnableSound(){var c=false;try{c=soundIsPublished()}catch(d){c=false}c==true&&hasRequestedVersion&&!IsTouchDevice()&&bPlayerIsAvailable==false&&UserPrefs.PlayAudio!="none"&&swfobject.embedSWF(_fPlayerPath+"audio/fplayer.swf","fplayer","1","1",requiredFlashVersion,null,null,null,null,onLoadFlash)}
function onLoadFlash(c){if(c.success==true)bPlayerIsAvailable=useFlash=true;document.getElementById("fplayer").style.position="absolute";document.getElementById("fplayer").style.top="0px";document.getElementById("fplayer").style.left="0px"}function AreCookiesEnabled(){if(PlayerConfig.EnableCookies==false)return false;chkcookie=(new Date).getTime()+"";document.cookie="chkcookie="+chkcookie+"; path=/";return document.cookie.indexOf(chkcookie,0)<0?false:true}
function Check_Flash(c,d){if(c==false)return true;if(SupportAAC()==true)return true;if(hasRequestedVersion==false)if(d!="none")return false;return true}function getFPlayer(){return document.getElementById("fplayer")}function getAPlayer(){return document.getElementById("upkaudio")}
function Sound_Init(c,d,e,f,g){SoundjsInit();if(Check_Flash(c,d)==true)return true;if(!SupportAAC()&&upk.browserInfo.isiOS())return true;c="../../../";if(g!=undefined)c=g;e!=null&&eval(e);sw=(screen.width-640)/2;sh=(screen.height-480)/2;if(f==null)f=true;KeepAlive_DoNotSendClose();if(f==true)window.open(c+"html/getflash.html?url="+Escape.MyEscape(this.location.href)+"&newwindow","","top="+sh+", left="+sw+", width=640, height=480, resizable=1,toolbar=1,scrollbars=1,location=1,statusbar=1,menubar=1");
else f=="parent"?setTimeout('parent.location.replace("'+c+"html/getflash.html?url="+Escape.MyEscape(parent.location.href)+'")',10):setTimeout('this.location.replace("'+c+"html/getflash.html?url="+Escape.MyEscape(this.location.href)+'")',10);return false}
function SoundPlayerClass(){for(this.TopicPath=unescape(window.location.href);this.TopicPath.indexOf("\\")!=-1;)this.TopicPath=this.TopicPath.replace("\\","/");var c=this.TopicPath.indexOf("?");if(c>=0)this.TopicPath=this.TopicPath.substr(0,c);c=this.TopicPath.lastIndexOf("/");this.RootPath=this.TopicPath=this.TopicPath.substr(0,c+1);for(var d=0;d<=3;d++){c=this.RootPath.lastIndexOf("/");if(c!=-1)this.RootPath=this.RootPath.substr(0,c)}this.RootPath+="/";this.SoundPath=this.TopicPath;this.AudioPath=
resolveUri(this.TopicPath,"../../../audio/");this.Volume=100;this.PlayCheckerTimer=this.LoadStartTimer=0}function resolveUri(c,d){return c+d}SoundPlayerClass.prototype.ChangeFileSuffix=function(c){if(c.lastIndexOf(".mp3")==c.length-4)return c;c=c.substr(0,c.length-4);if(PlayerConfig.AACIsAvailable||upk.browserInfo.isiOS())return c+".m4a";if(useFlash)return c+".flv";alert("sound - file extension error")};
SoundPlayerClass.prototype.Play=function(c,d,e,f){if(useFlash){var g=getFPlayer();if(g){g.style.top=getScrollTop()+"px";g.style.left=getScrollLeft()+"px"}}d||S_SetFrameState("S");g=S_GetFrameState();f||(f=false);if(bPlayerIsAvailable){e||(e=false);if(e==true)f==false&&OnEndPlaySound();else if(c.length==0){if(f==false){g!="D"&&S_SetFrameState("D");OnErrorPlaySound()}}else{if(c.substr(c.length-4)==".ASX"){e=sounds[c].duration.split(":");try{_lastAudioFileSize=parseInt(e[0])*3600+parseInt(e[1])*60+parseFloat(e[2])}catch(l){_lastAudioFileSize=
0}c=sounds[c].flist[0]}SoundPlayer_Stop();if(c.length==0){if(f==false){g!="D"&&S_SetFrameState("D");OnErrorPlaySound()}}else{fname=d?resolveUri(this.AudioPath,c):resolveUri(this.SoundPath,c);_name=this.ChangeFileSuffix(fname);_asyn=f;_fire=true;if(useFlash)_knowpalyer==true&&setTimeout('SoundPlayer_Open("'+_name+'",'+f+")",120);else useAudioTag&&setTimeout('SoundPlayer_Open("'+_name+'",'+f+")",120)}}}else if(f==false){g!="D"&&S_SetFrameState("D");OnErrorPlaySound()}};
SoundPlayerClass.prototype.Stop=function(c){if(bPlayerIsAvailable)c?SoundPlayer_Stop():setTimeout("SoundPlayer_Stop()",10)};SoundPlayerClass.prototype.Pause=function(){try{if(bPlayerIsAvailable){useFlash&&getFPlayer().SoundPause();useAudioTag&&getAPlayer().pause()}}catch(c){}};SoundPlayerClass.prototype.Resume=function(){if(!InWebpage())if(getLastSoundFileName()!=getActualSoundFileName())return;try{if(bPlayerIsAvailable){useFlash&&getFPlayer().SoundPlay();useAudioTag&&getAPlayer().play()}}catch(c){}};
SoundPlayerClass.prototype.InitAudioPlayer=function(){if(bPlayerIsAvailable)if(useAudioTag){getAPlayer().src=this.AudioPath+"empty.m4a";getAPlayer().play()}};SoundPlayerClass.prototype.IsAvailable=function(){return bPlayerIsAvailable};SoundPlayerClass.prototype.SetSoundPath=function(c){if(c.length>0)this.SoundPath=c};
SoundPlayerClass.prototype.SetVolume=function(c){if(c==null)c=this.Volume;else this.Volume=c;if(useFlash)try{getFPlayer().SetSoundVolume(c/100)}catch(d){}if(useAudioTag)try{getAPlayer().volume=c/100}catch(e){}};function InWebpage(){if(typeof _webpage_==="undefined")return false;return _webpage_}function SoundPlayer_EndCheck(){getAPlayer().ended&&SoundPlayerObj.PlayCheckerTimer&&setTimeout(function(){SoundPlayerObj.PlayCheckerTimer&&SoundComplete(false)},50)}
var _lastAsyncronFile=false,_lastAudioFile="",_lastFlashTime=-1,_lastAudioFileSize=0,_lastFileName="";function clearLastSoundFileName(){_lastFileName=""}function getLastSoundFileName(){return _lastFileName.substr(_lastFileName.lastIndexOf("/")+1)}function getActualSoundFileName(){try{return sounds[showActObj.id.substr(1)+".ASX"].flist[0]}catch(c){return""}}
function SoundPlayer_Open(c,d){if(c.length>0)_lastFileName=c;try{if(c.length>0&&d==true)_lastAsyncronFile=true;if(timelineDescriptor.valid&&timelineDescriptor.type!="narration")throw"";if(useFlash){audio_loading=true;_lastFlashTime=-1;getFPlayer().SetSoundFile(c);getFPlayer().SoundPlay();if(timelineDescriptor.valid&&timelineDescriptor.type=="narration"){SoundFPlayer_SetTime();return}audio_loading=false}if(useAudioTag){audio_loading=true;getAPlayer().pause();if(_lastAudioFile==c)AudioLoaded();else{getAPlayer().src=
c;CLog(c+" - "+_lastAudioFile+" play")}_lastAudioFile=c}SoundPlayerObj.SetVolume();if(upk.browserInfo.isiOS()){SoundPlayerObj.PlayCheckerTimer&&clearInterval(SoundPlayerObj.PlayCheckerTimer);SoundPlayerObj.PlayCheckerTimer=setInterval("SoundPlayer_EndCheck()",500)}}catch(e){S_SetFrameState("D");d==false&&OnErrorPlaySound()}}
function SoundFPlayer_SetTime(){getFPlayer().SoundPause();getFPlayer().SoundSeek(timelineDescriptor.resttime/1E3);if(Math.abs(timelineDescriptor.resttime/1E3-getFPlayer().Time())<0.3){getFPlayer().SoundPlay();audio_loading=false}else setTimeout("SoundFPlayer_SetTime()",300)}
function SoundAPlayer_SetTime(){if(audio_seeking!=false)if(audio_counter>100)setTimeout("AudioReload();",100);else{audio_counter++;var c=0;if(timelineDescriptor.valid==true&&timelineDescriptor.type=="narration"){c=timelineDescriptor.resttime/1E3;if(c>_lastAudioFileSize-1){getAPlayer().pause();SoundComplete();CLog("nextframe");return}if(c<0)c=0}try{getAPlayer().currentTime=c}catch(d){setTimeout("SoundAPlayer_SetTime()",300)}var e=getAPlayer().currentTime,f=Math.abs(e-c);try{CLog("d: "+f+" "+e+" "+
c+" "+_lastAudioFileSize+" "+showScreen)}catch(g){CLog("d: "+f+" "+e+" "+c+" "+_lastAudioFileSize)}if(f<0.3){audio_seeking=false;CLog("play...");getAPlayer().play()}else setTimeout("SoundAPlayer_SetTime()",300)}}function SoundIsLocked(){return audio_loading==true||audio_seeking==true}
function SoundPlayer_Stop(){try{if(SoundPlayerObj.PlayCheckerTimer){clearInterval(SoundPlayerObj.PlayCheckerTimer);SoundPlayerObj.PlayCheckerTimer=0}_lastAsyncronFile=false;useFlash&&getFPlayer().SoundStop();useAudioTag&&getAPlayer().pause()}catch(c){}}
function SoundPlayer_GetTime(){var c=getLastSoundFileName(),d=showActObj.id.substr(1);d=sounds[d+".ASX"].flist[0];if(c.length>0&&c!=d)return{s:c,t:NaN};d=0;if(useAudioTag)d=getAPlayer().currentTime*1E3;if(useFlash)d=getFPlayer().Time()*1E3;if(d==0&&_lastFlashTime>=0)d=_lastFlashTime;else _lastFlashTime=d;return{s:c,t:d}}function OnFlashLoad(){_fire==true&&setTimeout('SoundPlayer_Open("'+_name+'",'+_asyn+")",20);_fire_=false;_knowpalyer=true}
function SoundComplete(c){if(InWebpage())c?OnErrorPlaySound():OnEndPlaySound();else{if(SoundPlayerObj.PlayCheckerTimer){clearInterval(SoundPlayerObj.PlayCheckerTimer);SoundPlayerObj.PlayCheckerTimer=0}if(_lastAsyncronFile)_lastAsyncronFile=false;else{if(useAudioTag)if(c){S_SetFrameState("D");OnErrorPlaySound()}else{if(typeof animObject!="undefined")if(animObject)if(fusionmode==true&&animObject.timeout==DELAY_INFINITE*100){if(animObject.showbubble==false)animObject.timeout=0}else animObject.timeout=
0;OnEndPlaySound()}if(useFlash){s=getFPlayer().SoundState();if(s=="notfoundfile"){S_SetFrameState("D");OnErrorPlaySound()}else if(s=="complete"){if(typeof animObject!="undefined")if(animObject)if(fusionmode==true&&animObject.timeout==DELAY_INFINITE*100){if(animObject.showbubble==false)animObject.timeout=0}else animObject.timeout=0;OnEndPlaySound()}}}}}function AudioEnded(){var c=getAPlayer();CLog(c.src+" done...");c.src.indexOf("empty.m4a")>=0||SoundComplete(false)}
function AudioError(){var c=getAPlayer();if(c!=null)if(c.src!="")if(!(c.src.indexOf("empty.m4a")>=0)){CLog(c.src+" error...");SoundComplete(true)}}var audio_loading=false,audio_seeking=false,audio_counter=0;function AudioReload(){audio_loading=true;getAPlayer().pause();getAPlayer().src=_lastAudioFile;CLog(fname+" - "+_lastAudioFile+" replay")}
function AudioLoaded(){CLog("AudioLoaded");if(audio_loading==true){CLog("AudioLoaded true");audio_loading=false;audio_counter=0;getAPlayer().pause();audio_seeking=true;SoundAPlayer_SetTime()}}function S_GetFrameState(){try{return upk.Timeline.GetFrameState()}catch(c){return""}}function S_SetFrameState(c){try{upk.Timeline.SetFrameState(c)}catch(d){}}
function TimelineDescriptor(c,d,e,f,g,l){if(this.valid=c){this.frameid=d;this.timelineindex=e;this.narration=f;this.animation=g;this.resttime=l;this.type="narration";if(l>=f)this.type="animationstart";if(l>=f+g/2)this.type="nextframe"}}var timelineDescriptor=new TimelineDescriptor(false,"",0,0,0,0),SoundPlayerObj=new SoundPlayerClass,clog_enabled=false;function CLog(c,d){if(clog_enabled||d==true)console!==undefined&&console.log(c)}upk=upk||{};
$.extend(true,upk,{contextHelper:function(){var c=null,d,e;this.SetContext=function(g,l){if(c)c.SetContext(g,l);else{e=d;d={view:g,subview:l};ias.SetContext(d)}};this.SetNamespace=function(g){c||ias.SetNamespace(g)};this.AddDiscoveryCddUrl=function(g){c||ias.AddDiscoveryCddUrl(g)};this.SetPrevContext=function(){if(c)c.SetPrevContext();else{d=e;ias.SetContext(d)}};try{if(self!=top&&typeof parent.ctxHelper==="object")c=parent.ctxHelper}catch(f){}return this}});window.ctxHelper=new upk.contextHelper;
window.ias=function(c){function d(E){var C={};if(E!=j)for(var M in E){var O=E[M];if(O!=j)C[M]=O}return C}function e(E){r=d(E);H.push(r);t=j}function f(E,C){if(C!=j)A[E]=C;else delete A[E];N=j}function g(E,C){return encodeURIComponent(E)+"="+encodeURIComponent(C)}function l(E,C){return encodeURIComponent(E)+(C==""?"":"="+encodeURIComponent(C))}function m(E,C){var M=C?l:g,O=[],W;for(W in E){var K=E[W];if(K&&K.push&&K.sort)for(var B=0;B<K.length;++B)O.push(M(W,K[B]));else K!=j&&O.push(M(W,K))}return O.join(";")}
var j=null,p=j,t=j,r={},H=[r],A={},N=j,L=[],P=[],G=window.ias||{};G.SetNamespace=function(E){p=E};G.SetContext=function(E){r=d(E);H[H.length-1]=r;t=j};G.SetContextPart=function(E,C){if(C!=j)r[E]=C;else delete r[E];t=j};G.ResetContext=function(E){H=[];e(E)};G.SetTag=f;G.SetTags=function(E){for(var C in E)f(C,E[C])};G.ResetTags=function(E){A=d(E);N=j};G.PushContext=e;G.PopContext=function(){H.pop();H.length||H.push({});r=H[H.length-1];t=j};G.AddDiscoveryCddUrl=function(E){L.push(E)};G.AddApplicableCddUrl=
function(E){P.push(E)};c.UPK_GetNamespace=function(){return p};c.UPK_GetContext=function(){if(t==j)t=m(r);return t};c.UPK_GetTags=function(){if(N==j)N=m(A,true);return N};c.UPK_GetDiscoveryCddUrls=function(){return L.length?L:j};c.UPK_GetApplicableCddUrls=function(){return P.length?P:j};return G}(window);ias.SetTag("upk-trait-nohelp","");
