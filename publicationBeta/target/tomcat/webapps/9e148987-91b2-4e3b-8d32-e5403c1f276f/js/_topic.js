/*
Copyright © 1998, 2014, Oracle and/or its affiliates.  All rights reserved.
*/
function filterHTML(c){c=replaceString("&","&amp;",c);c=replaceString("<","&lt;",c);return c=replaceString(">","&gt;",c)}function replaceString(c,d,e){if(e!=null)return e.replace(RegExp(c,"g"),d)}function PtToPx(c,d){return Math.floor(c*d/72)}function PxToPt(c,d){return c/d*72}function Bool(c){if(typeof c=="boolean")return c;if(typeof c=="string"){if(c.toLowerCase()=="false")return false;if(c.toLowerCase()=="true")return true}return null}
function getDPICookie(){var c=new Cookie(document,"UPKDpiDailyWarning","today","/",null,false);c.Load();if(c.DPIdailyWarning==1)return true;c.DPIdailyWarning=1;c.Store();return false}var KeepAlive_url_ping=null,KeepAlive_url_closeserver=null,KeepAlive_finished=false,KeepAlive_timer=null;
function KeepAlive_Init(c){if(KeepAlive_url_ping==null){KeepAlive_url_ping=c+"xml/ping.xml";KeepAlive_url_closeserver=c+"closeserver.xml";KeepAlive_finished=false;KeepAlive_timer=setInterval("KeepAlive_Ping()",2E3)}}function KeepAlive_DoNotSendClose(){KeepAlive_finished=true}
function KeepAlive_Close(){if(KeepAlive_url_ping!=null)if(KeepAlive_finished!=true){KeepAlive_Track("close...");KeepAlive_finished=true;clearTimeout(KeepAlive_timer);LoadXMLDoc(KeepAlive_url_closeserver,KeepAlive_Return_OK,KeepAlive_Return_OK,"PING",true)}}function KeepAlive_Ping(){KeepAlive_Track("ping...");KeepAlive_finished!=true&&LoadXMLDoc(KeepAlive_url_ping,KeepAlive_Return_OK,KeepAlive_Return_Error,"PING",false)}function KeepAlive_Return_OK(){KeepAlive_Track("ping returned")}
function KeepAlive_Return_Error(){KeepAlive_Track("error returned");if(KeepAlive_finished!=true){KeepAlive_finished=true;clearInterval(KeepAlive_timer);alert(R_playexe_comm_error)}}var _KeepAlive_window=null,_KeepAlive_track=false;function KeepAlive_Track(c){if(_KeepAlive_track!=false){if(_KeepAlive_window==null)_KeepAlive_window=window.open();_KeepAlive_window.document.writeln(c+"<br/>")}}
var dlg_parent,dialogh_ref,device_dpi,dialog2_html,modal_dialog,dlg_width,dlg_height,dlg_autosizeheight=false,callback_end="",isopened=false,dlg_context="",grayPosition,overflowValue="",resizefn="";function setParent(c){dlg_parent=c}function Click1(){closeDialog();$("#graydiv").remove()}function getDPI(){return device_dpi}function setWidth(c,d){$(c).css("width",d)}function setHeight(c,d){$(c).css("height",d)}
function setPadding(c,d,e){d="<div style='padding:"+d+"px'";if(e&&e!="")d+=" class='"+e+"'";d+=">"+c+"</div>";return d}function getContentSize(c){var d={width:0,height:0};c=$("<div style='display:visible;position:absolute;top:0px;left:0px;' id='04A98DB973UPK'>"+c+"</div>");$("body").append(c);d.width=$("#04A98DB973UPK").outerWidth(true);d.height=$("#04A98DB973UPK").outerHeight(true);$("#04A98DB973UPK").remove();return d}
function showDialog3(c,d,e,g,j,n,m,o,p){showDialog2(c,d,e,g,j,n,m,o);$("body").append("<div id='04A98DB974UPK'>"+p+"</div>")}function showDialog2(c,d,e,g,j,n,m,o){dlg_autosizeheight=j==-1?true:false;dialog2_html=c;showDialog("",d,e,g,j,n,m,"",o)}
(function(c){c.fn.drags=function(d){d=c.extend({handle:"",cursor:"move"},d);var e=c("<div>",{id:"ehandler",css:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"none",cursor:d.cursor,"z-index":999,"background-color":"red",opacity:"0",filter:"alpha(opacity=0)"}}).appendTo(document.body);return this.addClass("draggable").each(function(){$drag=c(this);(d.handle===""?$drag:$drag.find(d.handle)).addClass("active-handle").on("mousedown",function(g){if(c(g.target).is(c(this))){$drag.css("cursor",
d.cursor);g.preventDefault();$drag.css("z-index");var j=$drag.outerHeight(),n=$drag.outerWidth(),m=$drag.offset().top+j-g.pageY,o=$drag.offset().left+n-g.pageX;e.show().on("mousemove",function(p){p.preventDefault();y=p.pageY+m-j;x=p.pageX+o-n;if(y<0)y=0;if(x<0)x=0;if(window.innerWidth>$drag.outerWidth())if(x>window.innerWidth-$drag.outerWidth())x=window.innerWidth-$drag.outerWidth();if(window.innerHeight>$drag.outerHeight())if(y>window.innerHeight-$drag.outerHeight())y=window.innerHeight-$drag.outerHeight();
c(".draggable").offset({top:y,left:x})}).add(document).on("mouseup",function(p){$drag.css("cursor","default");p.preventDefault();c(this).off("mousemove mouseup");e.hide()})}})})}})(jQuery);
function showDialog(c,d,e,g,j,n,m,o,p){isopened=true;m=96;if(d!=-1)d=PtToPx(d,m);if(e!=-1)e=PtToPx(e,m);g=PtToPx(g,m);j=PtToPx(j,m);dlg_width=g;dlg_height=j;device_dpi=m;dialogh_ref=c;modal_dialog=n;m=$(document.body).scrollLeft();var B=$(document.body).scrollTop();if(m==0&&B==0&&upk.browserInfo.isiOS()){m=parent.window.pageXOffset;B=parent.window.pageYOffset}if(d==-1||e==-1){e=d=0;if(window.innerWidth)if(upk.browserInfo.isiOS()){d=parent.window.innerWidth;e=parent.window.innerHeight}else{d=window.innerWidth;
e=window.innerHeight}else if(document.documentElement){d=document.documentElement.scrollWidth;e=document.documentElement.scrollHeight}d=Math.floor(d/2-g/2+m);e=Math.floor(e/2-j/2+B)}if(p)p=dialogh_ref;if(document.body.scrollHeight<j)e=0;if(typeof lmsMode!=="undefined")if(lmsMode&&lmsMode=="LMS"&&upk.browserInfo.isiOS())e=20;p="top:0;left:0;";if(upk.browserInfo.isIEQuirks()){grayPosition="absolute";p="top:"+B+"px;left:"+m+"px;";overflowValue=$(document.body).css("overflow");overflowValue==="auto"&&
$(document.body).css("overflow","hidden");document.body.scroll="no";resizefn=window.onresize;window.onresize=""}else grayPosition="fixed";n?$(document.body).append('<div id="graydiv" scrolling="no" class="pointerdiv" style="position:'+grayPosition+";display:none;z-index: 99;"+p+'bottom:0;right:0;"></div>'):$(document.body).append('<div id="graydiv" scrolling="no" class="pointerdiv2" style="position:'+grayPosition+";display:none;z-index: 99;"+p+'bottom:0;right:0;" onclick="Click1();"></div>');$("#graydiv").on("touchmove",
function(){return false});$("input").on("focus",function(){this.blur()});$("#graydiv").show();style="left:"+d+"px; top:"+e+"px; width: "+g+"px; height: "+j+"px;";wwpx=g-60;hhpx=j-60;if(upk.browserInfo.isIEQuirks()&&upk.browserInfo.isIE9()||upk.browserInfo.isIEQuirks()&&upk.browserInfo.isIE8()){wwpx-=20;hhpx-=20}innerstyle="width: "+wwpx+"px; height: "+hhpx+"px;";p="iossafefordesktop";if(IsTouchDevice())p="iossafe";m="../img/empty.gif";if(o)m=o+"img/empty.gif";if(n){$(document.body).append('<div class="desktopDialog" id="dialog" style="'+
style+'"><div id="closebtn" onclick="Click1();"><img id="closeimg" class="close_qualifier" src="'+m+'" alt="" width="16" /></div><div class="'+p+'" style="'+innerstyle+'"><iframe id="dialogBody" frameborder="0" scrolling="yes" src="'+c+'" style="width: 100%; height: 100%;margin:0px; padding:0px; position: absolute;top: 0px; left: 0px; background-color: white;"></iframe></div></div>');$("#dialog").drags();$("#dialog").on("touchmove",function(){return false})}else{innerstyle="width: "+g+"px; height: "+
j+"px;";p="../html/dialog2.html";$(document.body).append('<div class="noborderDialog" id="dialog" style="'+style+'"><div id="dialogBodyDiv" class="noBorderDialogDesktop" style="'+innerstyle+'"><iframe id="dialogBody" frameborder="0" scrolling="no" src="'+p+'" style="width: 100%; height: 100%;margin:0px; padding:0px; position: absolute;top: 0px; left: 0px; background-color: white;"></iframe></div></div>')}dlg_context!=""&&ctxHelper.SetContext(dlg_context)}function isOpenDialog(){return isopened}
function removeDiv(c){$(c).remove()}function appendDiv(c){$(document.body).append(c)}
function closeDialog(){$("#04A98DB974UPK").remove();$("#graydiv").remove();$("#dialog").remove();$("#ehandler").remove();if(dlg_context!=""){ctxHelper.SetPrevContext();dlg_context=""}if(upk.browserInfo.isIEQuirks()){if(overflowValue==="auto"){$(document.body).css("overflow",overflowValue);overflowValue=""}document.body.scroll="auto";window.onresize=resizefn;resizefn=""}isopened=false;if(dlg_parent)callback_end&&dlg_parent.eval(callback_end);else callback_end&&eval(callback_end);$("input").off("focus")}
function setOnCloseEvent(c){if(callback_end.indexOf(c)<0)callback_end=c+";"+callback_end}function getOnCloseEvent(){return callback_end}function getDialog2Content(){return dialog2_html}function setDlgCtx(c){dlg_context=c}var loader_dontclose=false;function EscEvent(){loader_dontclose==false&&top.close()}document.onstop=EscEvent;
function Cookie(c,d,e,g,j,n){this.$document=c;this.$name=d;if(e=="today"){c=new Date;c.setHours(23);c.setMinutes(59);c.setSeconds(59);this.$exp=c}else this.$exp=e?new Date((new Date).getTime()+e*864E5):null;this.$path=g?g:null;this.$domain=j?j:null;this.$secure=n?true:false}
Cookie.prototype.Store=function(){if(PlayerConfig.EnableCookies){var c="",d;for(d in this)if(!(d.charAt(0)=="$"||typeof this[d]=="function")){if(c!="")c+="&";c+=d+":"+escape(this[d])}c=this.$name+"="+c;if(this.$exp)c+="; expires="+this.$exp.toGMTString();if(this.$path)c+="; path="+this.$path;if(this.$domain)c+="; domain="+this.$domain;if(this.$secure)c+="; secure=";this.$document.cookie=c}};
Cookie.prototype.Load=function(){if(!PlayerConfig.EnableCookies)return false;var c=this.$document.cookie;if(c=="")return false;var d=c.indexOf(this.$name+"=");if(d==-1)return false;d+=this.$name.length+1;var e=c.indexOf(";",d);if(e==-1)e=c.length;c=decodeURIComponent(c.substring(d,e)).split("&");for(d=0;d<c.length;d++){e=c[d].split(":");this[e[0]]=unescape(e[1])}return true};
Cookie.prototype.Remove=function(){if(PlayerConfig.EnableCookies){var c=this.$name+"=";if(this.$path)c+="; path="+this.$path;if(this.$domain)c+="; domain="+this.$domain;c+="; expires=Fri, 02-Jan-1970 00:00:00 GMT";this.$document.cookie=c}};
var swfobject=function(){function c(){if(!ha){try{var u=J.getElementsByTagName("body")[0].appendChild(J.createElement("span"));u.parentNode.removeChild(u)}catch(z){return}ha=true;u=da.length;for(var C=0;C<u;C++)da[C]()}}function d(u){if(ha)u();else da[da.length]=u}function e(u){if(typeof P.addEventListener!=K)P.addEventListener("load",u,false);else if(typeof J.addEventListener!=K)J.addEventListener("load",u,false);else if(typeof P.attachEvent!=K)H(P,"onload",u);else if(typeof P.onload=="function"){var z=
P.onload;P.onload=function(){z();u()}}else P.onload=u}function g(){var u=J.getElementsByTagName("body")[0],z=J.createElement(v);z.setAttribute("type",R);var C=u.appendChild(z);if(C){var L=0;(function(){if(typeof C.GetVariable!=K){try{var M=C.GetVariable("$version")}catch(V){}if(M){M=M.split(" ")[1].split(",");O.pv=[parseInt(M[0],10),parseInt(M[1],10),parseInt(M[2],10)]}}else if(L<10){L++;setTimeout(arguments.callee,10);return}u.removeChild(z);C=null;j()})()}else j()}function j(){var u=A.length;if(u>
0)for(var z=0;z<u;z++){var C=A[z].id,L=A[z].callbackFn,M={success:false,id:C};if(O.pv[0]>0){var V=E(C);if(V)if(T(A[z].swfVersion)&&!(O.wk&&O.wk<312)){S(C,true);if(L){M.success=true;M.ref=n(C);L(M)}}else if(A[z].expressInstall&&m()){M={};M.data=A[z].expressInstall;M.width=V.getAttribute("width")||"0";M.height=V.getAttribute("height")||"0";if(V.getAttribute("class"))M.styleclass=V.getAttribute("class");if(V.getAttribute("align"))M.align=V.getAttribute("align");var U={};V=V.getElementsByTagName("param");
for(var ea=V.length,fa=0;fa<ea;fa++)if(V[fa].getAttribute("name").toLowerCase()!="movie")U[V[fa].getAttribute("name")]=V[fa].getAttribute("value");o(M,U,C,L)}else{p(V);L&&L(M)}}else{S(C,true);if(L){if((C=n(C))&&typeof C.SetVariable!=K){M.success=true;M.ref=C}L(M)}}}}function n(u){var z=null;if((u=E(u))&&u.nodeName=="OBJECT")if(typeof u.SetVariable!=K)z=u;else if(u=u.getElementsByTagName(v)[0])z=u;return z}function m(){return!ja&&T("6.0.65")&&(O.win||O.mac)&&!(O.wk&&O.wk<312)}function o(u,z,C,L){ja=
true;aa=L||null;ka={success:false,id:C};var M=E(C);if(M){if(M.nodeName=="OBJECT"){G=B(M);I=null}else{G=M;I=C}u.id=W;if(typeof u.width==K||!/%$/.test(u.width)&&parseInt(u.width,10)<310)u.width="310";if(typeof u.height==K||!/%$/.test(u.height)&&parseInt(u.height,10)<137)u.height="137";J.title=J.title.slice(0,47)+" - Flash Player Installation";L=O.ie&&O.win?"ActiveX":"PlugIn";L="MMredirectURL="+P.location.toString().replace(/&/g,"%26")+"&MMplayerType="+L+"&MMdoctitle="+J.title;if(typeof z.flashvars!=
K)z.flashvars+="&"+L;else z.flashvars=L;if(O.ie&&O.win&&M.readyState!=4){L=J.createElement("div");C+="SWFObjectNew";L.setAttribute("id",C);M.parentNode.insertBefore(L,M);M.style.display="none";(function(){M.readyState==4?M.parentNode.removeChild(M):setTimeout(arguments.callee,10)})()}D(u,z,C)}}function p(u){if(O.ie&&O.win&&u.readyState!=4){var z=J.createElement("div");u.parentNode.insertBefore(z,u);z.parentNode.replaceChild(B(u),z);u.style.display="none";(function(){u.readyState==4?u.parentNode.removeChild(u):
setTimeout(arguments.callee,10)})()}else u.parentNode.replaceChild(B(u),u)}function B(u){var z=J.createElement("div");if(O.win&&O.ie)z.innerHTML=u.innerHTML;else if(u=u.getElementsByTagName(v)[0])if(u=u.childNodes)for(var C=u.length,L=0;L<C;L++)!(u[L].nodeType==1&&u[L].nodeName=="PARAM")&&u[L].nodeType!=8&&z.appendChild(u[L].cloneNode(true));return z}function D(u,z,C){var L,M=E(C);if(O.wk&&O.wk<312)return L;if(M){if(typeof u.id==K)u.id=C;if(O.ie&&O.win){var V="",U;for(U in u)if(u[U]!=Object.prototype[U])if(U.toLowerCase()==
"data")z.movie=u[U];else if(U.toLowerCase()=="styleclass")V+=' class="'+u[U]+'"';else if(U.toLowerCase()!="classid")V+=" "+U+'="'+u[U]+'"';U="";for(var ea in z)if(z[ea]!=Object.prototype[ea])U+='<param name="'+ea+'" value="'+z[ea]+'" />';M.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+V+">"+U+"</object>";Q[Q.length]=u.id;L=E(u.id)}else{ea=J.createElement(v);ea.setAttribute("type",R);for(var fa in u)if(u[fa]!=Object.prototype[fa])if(fa.toLowerCase()=="styleclass")ea.setAttribute("class",
u[fa]);else fa.toLowerCase()!="classid"&&ea.setAttribute(fa,u[fa]);for(V in z)if(z[V]!=Object.prototype[V]&&V.toLowerCase()!="movie"){u=ea;U=V;fa=z[V];C=J.createElement("param");C.setAttribute("name",U);C.setAttribute("value",fa);u.appendChild(C)}M.parentNode.replaceChild(ea,M);L=ea}}return L}function Z(u){var z=E(u);if(z&&z.nodeName=="OBJECT")if(O.ie&&O.win){z.style.display="none";(function(){if(z.readyState==4){var C=E(u);if(C){for(var L in C)if(typeof C[L]=="function")C[L]=null;C.parentNode.removeChild(C)}}else setTimeout(arguments.callee,
10)})()}else z.parentNode.removeChild(z)}function E(u){var z=null;try{z=J.getElementById(u)}catch(C){}return z}function H(u,z,C){u.attachEvent(z,C);q[q.length]=[u,z,C]}function T(u){var z=O.pv;u=u.split(".");u[0]=parseInt(u[0],10);u[1]=parseInt(u[1],10)||0;u[2]=parseInt(u[2],10)||0;return z[0]>u[0]||z[0]==u[0]&&z[1]>u[1]||z[0]==u[0]&&z[1]==u[1]&&z[2]>=u[2]?true:false}function ca(u,z,C,L){if(!(O.ie&&O.mac)){var M=J.getElementsByTagName("head")[0];if(M){C=C&&typeof C=="string"?C:"screen";if(L)ra=ga=
null;if(!ga||ra!=C){L=J.createElement("style");L.setAttribute("type","text/css");L.setAttribute("media",C);ga=M.appendChild(L);if(O.ie&&O.win&&typeof J.styleSheets!=K&&J.styleSheets.length>0)ga=J.styleSheets[J.styleSheets.length-1];ra=C}if(O.ie&&O.win)ga&&typeof ga.addRule==v&&ga.addRule(u,z);else ga&&typeof J.createTextNode!=K&&ga.appendChild(J.createTextNode(u+" {"+z+"}"))}}}function S(u,z){if(sa){var C=z?"visible":"hidden";if(ha&&E(u))E(u).style.visibility=C;else ca("#"+u,"visibility:"+C)}}function F(u){return/[\\\"<>\.;]/.exec(u)!=
null&&typeof encodeURIComponent!=K?encodeURIComponent(u):u}var K="undefined",v="object",R="application/x-shockwave-flash",W="SWFObjectExprInst",P=window,J=document,ba=navigator,ia=false,da=[function(){ia?g():j()}],A=[],Q=[],q=[],G,I,aa,ka,ha=false,ja=false,ga,ra,sa=true,O=function(){var u=typeof J.getElementById!=K&&typeof J.getElementsByTagName!=K&&typeof J.createElement!=K,z=ba.userAgent.toLowerCase(),C=ba.platform.toLowerCase(),L=C?/win/.test(C):/win/.test(z);C=C?/mac/.test(C):/mac/.test(z);z=
/webkit/.test(z)?parseFloat(z.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false;var M=!+"\u000b1",V=[0,0,0],U=null;if(typeof ba.plugins!=K&&typeof ba.plugins["Shockwave Flash"]==v){if((U=ba.plugins["Shockwave Flash"].description)&&!(typeof ba.mimeTypes!=K&&ba.mimeTypes[R]&&!ba.mimeTypes[R].enabledPlugin)){ia=true;M=false;U=U.replace(/^.*\s+(\S+\s+\S+$)/,"$1");V[0]=parseInt(U.replace(/^(.*)\..*$/,"$1"),10);V[1]=parseInt(U.replace(/^.*\.(.*)\s.*$/,"$1"),10);V[2]=/[a-zA-Z]/.test(U)?parseInt(U.replace(/^.*[a-zA-Z]+(.*)$/,
"$1"),10):0}}else if(typeof P.ActiveXObject!=K)try{var ea=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(ea)if(U=ea.GetVariable("$version")){M=true;U=U.split(" ")[1].split(",");V=[parseInt(U[0],10),parseInt(U[1],10),parseInt(U[2],10)]}}catch(fa){}return{w3:u,pv:V,wk:z,ie:M,win:L,mac:C}}();(function(){if(O.w3){if(typeof J.readyState!=K&&J.readyState=="complete"||typeof J.readyState==K&&(J.getElementsByTagName("body")[0]||J.body))c();if(!ha){typeof J.addEventListener!=K&&J.addEventListener("DOMContentLoaded",
c,false);if(O.ie&&O.win){J.attachEvent("onreadystatechange",function(){if(J.readyState=="complete"){J.detachEvent("onreadystatechange",arguments.callee);c()}});P==top&&function(){if(!ha){try{J.documentElement.doScroll("left")}catch(u){setTimeout(arguments.callee,0);return}c()}}()}O.wk&&function(){ha||(/loaded|complete/.test(J.readyState)?c():setTimeout(arguments.callee,0))}();e(c)}}})();(function(){O.ie&&O.win&&window.attachEvent("onunload",function(){for(var u=q.length,z=0;z<u;z++)q[z][0].detachEvent(q[z][1],
q[z][2]);u=Q.length;for(z=0;z<u;z++)Z(Q[z]);for(var C in O)O[C]=null;O=null;for(var L in swfobject)swfobject[L]=null;swfobject=null})})();return{registerObject:function(u,z,C,L){if(O.w3&&u&&z){var M={};M.id=u;M.swfVersion=z;M.expressInstall=C;M.callbackFn=L;A[A.length]=M;S(u,false)}else L&&L({success:false,id:u})},getObjectById:function(u){if(O.w3)return n(u)},embedSWF:function(u,z,C,L,M,V,U,ea,fa,na){var oa={success:false,id:z};if(O.w3&&!(O.wk&&O.wk<312)&&u&&z&&C&&L&&M){S(z,false);d(function(){C+=
"";L+="";var ma={};if(fa&&typeof fa===v)for(var la in fa)ma[la]=fa[la];ma.data=u;ma.width=C;ma.height=L;la={};if(ea&&typeof ea===v)for(var pa in ea)la[pa]=ea[pa];if(U&&typeof U===v)for(var qa in U)if(typeof la.flashvars!=K)la.flashvars+="&"+qa+"="+U[qa];else la.flashvars=qa+"="+U[qa];if(T(M)){pa=D(ma,la,z);ma.id==z&&S(z,true);oa.success=true;oa.ref=pa}else if(V&&m()){ma.data=V;o(ma,la,z,na);return}else S(z,true);na&&na(oa)})}else na&&na(oa)},switchOffAutoHideShow:function(){sa=false},ua:O,getFlashPlayerVersion:function(){return{major:O.pv[0],
minor:O.pv[1],release:O.pv[2]}},hasFlashPlayerVersion:T,createSWF:function(u,z,C){if(O.w3)return D(u,z,C)},showExpressInstall:function(u,z,C,L){O.w3&&m()&&o(u,z,C,L)},removeSWF:function(u){O.w3&&Z(u)},createCSS:function(u,z,C,L){O.w3&&ca(u,z,C,L)},addDomLoadEvent:d,addLoadEvent:e,getQueryParamValue:function(u){var z=J.location.search||J.location.hash;if(z){if(/\?/.test(z))z=z.split("?")[1];if(u==null)return F(z);z=z.split("&");for(var C=0;C<z.length;C++)if(z[C].substring(0,z[C].indexOf("="))==u)return F(z[C].substring(z[C].indexOf("=")+
1))}return""},expressInstallCallback:function(){if(ja){var u=E(W);if(u&&G){u.parentNode.replaceChild(G,u);if(I){S(I,true);if(O.ie&&O.win)G.style.display="block"}aa&&aa(ka)}ja=false}}}}(),_simulate_120_dpi=false;function IsTouchDevice(){return upk.browserInfo.isTouchDevice()}var upk=upk||{};
(function(c){var d="",e,g=false,j,n=false,m=false;c.getAgentInfo=function(){return typeof document.documentMode!="undefined"?navigator.userAgent+" - "+document.documentMode:navigator.userAgent};c.isSupportedBrowser=function(){var D=false;if(d=="MSIE"&&(e>=8||g&&j>=4))D=true;if(d=="Firefox"&&(e==24||e>=27))D=true;if(d=="Safari"&&e>=6)D=true;if(d=="Chrome"&&e>=32)D=true;if(c.isiOS())D=true;return D};c.isHardStop=function(){return d=="MSIE"&&e<=6};c.isMacOs=function(){return n};c.isFF3=function(){return m};
c.isFF=function(){return d=="Firefox"};c.isFF4=function(){return d=="Firefox"&&e==4};c.checkFFVersion=function(D){return d=="Firefox"&&e==D};c.isSafari=function(){return d=="Safari"||d=="Chrome"};c.isChrome=function(){return d=="Chrome"};c.isExplorer=function(){return d=="MSIE"};c.isIEVersion=function(D){return d=="MSIE"&&e==D};c.isIEQuirks=function(){if(c.isExplorer()==false)return false;return document.compatMode!=="CSS1Compat"};c.isIE8=function(){if(d!="MSIE")return false;return e==8&&g&&j==4};
c.isIE9=function(){if(d!="MSIE")return false;if(e==9&&g&&j==5)return true;if(e==7&&g&&j==5)return true;return g&&j==6&&(e!=10||document.documentMode!=10)};c.isIE10=function(){if(d!="MSIE")return false;return e==10&&g&&j==6&&document.documentMode==10};c.isIE10Compatibility=function(){if(d!="MSIE")return false;return g&&j==6&&(e!=10||document.documentMode!=10)};c.isIE10orHigher=function(){if(d!="MSIE")return false;return e>=10&&g&&j>=6&&document.documentMode>=10};c.isIE11=function(){if(d!="MSIE")return false;
return e==11&&g&&j==7&&document.documentMode==11};c.isIE11Compatibility=function(){if(d!="MSIE")return false;return g&&j==7&&(e!=11||document.documentMode!=11)};c.isActiveXEnabled=function(){var D=null,Z="";try{new ActiveXObject("")}catch(E){Z=E.name}try{D=!!new ActiveXObject("htmlfile")}catch(H){D=false}return Z!="ReferenceError"&&D==false?false:true};c.isIE10Modern=function(){if(c.isIE10()==false)return false;return!c.isActiveXEnabled()};c.isiOS=function(){var D=navigator.platform;if(D==="iPad"||
D==="iPad Simulator"||D==="iPhone"||D==="iPod")return true;if(c.isChrome()&&c.isTouchDevice())return true;return false};c.isiOS5=function(){return navigator.userAgent.indexOf("CPU OS 5_")>=0};c.isiOS6=function(){return navigator.userAgent.indexOf("CPU OS 6_")>=0};c.isiOS7=function(){return navigator.userAgent.indexOf("CPU OS 7_")>=0};c.isTouchDevice=function(){return"ontouchstart"in window?window:null};c.isSoundSupported=function(){if(c.isiOS())return true;if(window.location.href.substr(0,7).toLowerCase()==
"file://")return false;if(swfobject.getFlashPlayerVersion().major>0)return true;return false};var o=navigator.userAgent,p=-1;if(o.indexOf("OPR")>=0){d="Opera";p=o.indexOf("OPR")+4}else if(o.indexOf("Chrome")>=0){d="Chrome";p=o.indexOf("Chrome")+7}else if(o.indexOf("Opera")>=0){d="Opera";p=o.indexOf("Opera")+6}else if(o.indexOf("Firefox")>=0){d="Firefox";p=o.indexOf("Firefox")+8}else if(o.indexOf("Safari")>=0){d="Safari";p=o.indexOf("Version")+8}else if(o.indexOf("MSIE")>=0){d="MSIE";p=o.indexOf("MSIE")+
5;var B=o.indexOf("Trident/");if(B>=0){g=true;j=parseInt(o.substr(B+8))}}else if(o.indexOf(" rv:")>=0){d="MSIE";p=o.indexOf(" rv:")+3;B=o.indexOf("Trident/");if(B>=0){g=true;j=parseInt(o.substr(B+8))}}else{d="";e=0}if(d!=""){e=parseInt(o.substr(p));if(isNaN(e)){p++;e=parseInt(o.substr(p))}parseInt(o.substr(p+2,1))}if(d=="Safari"&&isNaN(e))e=5;n=o.indexOf("Macintosh")>=0;m=d=="Firefox"&&o.indexOf("Firefox/3")>0})(upk.browserInfo={});function getDIV(c){return document.getElementById(c)}
function getDIVstyle(c){try{return document.getElementById(c).style}catch(d){return null}}function shiftTo(c,d,e){c=getDIVstyle(c);c.left=d+"px";c.top=e+"px"}function getUniWidth(c){return c.offsetWidth}function getUniHeight(c){return c.offsetHeight}function getClientWidth(c){return c.offsetWidth}function getClientHeight(c){return c.offsetHeight}function getObjHeight(c){return getDIV(c).offsetHeight}function getObjWidth(c){return getDIV(c).offsetWidth}
function getObjLeft(c){try{var d=getDIVstyle(c);return d.pixelLeft?d.pixelLeft:d.left!=""?parseInt(d.left):document.getElementById(c).offsetLeft}catch(e){return parseInt(c.offsetLeft)}}function getObjTop(c){try{var d=getDIVstyle(c);return d.pixelTop?d.pixelTop:d.top!=""?parseInt(d.top):document.getElementById(c).offsetTop}catch(e){return parseInt(c.offsetTop)}}function getInsideWindowWidth(){return window.innerWidth?window.innerWidth:document.body.clientWidth}
function getInsideWindowHeight(){return window.innerHeight?window.innerHeight:document.body.clientHeight}function getScrollLeft(){return window.pageXOffset||window.pageXOffset==0?window.pageXOffset:document.body.scrollLeft}function getScrollTop(){return window.pageYOffset||window.pageYOffset==0?window.pageYOffset:document.body.scrollTop}
function show(c,d){getDIVstyle(c).visibility="visible";if(d&&upk.browserInfo.isiOS())try{playMode=="S"&&showActObj.type=="Input"&&$("#"+c+" input").attr("readonly",true)}catch(e){}}function hide(c){getDIVstyle(c).visibility="hidden"}var __DPIwidth=0;
function getDpiInfo(){var c=document.getElementById("DPIInfoDiv");if(c!=null){__DPIwidth=c.clientWidth;if(__DPIwidth==0)__DPIwidth=96;__DPIwidth!=0&&document.getElementsByTagName("body")[0].removeChild(c)}return _simulate_120_dpi==true?120:__DPIwidth}function initDpiInfo(){document.write('<div id="DPIInfoDiv" style="visibility:hidden; width: 72pt; height: 1pt;">DPIINFODIV</div>')}function checkIEDPI(){return true}function Get_Element(c){return document.getElementById(c)}
function touch(c){if(c.originalEvent.touches&&c.originalEvent.touches.length)return c.originalEvent.touches[0];else if(c.originalEvent.changedTouches&&c.originalEvent.changedTouches.length)return c.originalEvent.changedTouches[0]}function isNavBar(){return typeof navBar!=="undefined"}
function UserPreferences(){this.EnablePreferences=true;this.TimeStamp="000000000000";this.ShowLeadIn=this.PlayAudio="all";this.MarqueeColor="red";this.TryIt={};this.TryIt.EnableSkipping=true;this.DoIt={};this.DoIt.HotKey={};this.DoIt.HotKey.Ctrl="L";this.DoIt.HotKey.Shift="N";this.DoIt.HotKey.Alt="L";this.DefaultPlayMode="S";this.WebPageAutoPlayback=true;this.ApplicableOutlineDisplay="L";this.NavbarVolume=100;this.EnableShowDiagnostics=false}
UserPreferences.prototype.Copy=function(c){this.TimeStamp=c.TimeStamp;this.PlayAudio=c.PlayAudio;this.ShowLeadIn=c.ShowLeadIn;this.MarqueeColor=c.MarqueeColor;this.TryIt.EnableSkipping=c.TryIt.EnableSkipping;this.DoIt.HotKey.Ctrl=c.DoIt.HotKey.Ctrl;this.DoIt.HotKey.Shift=c.DoIt.HotKey.Shift;this.DoIt.HotKey.Alt=c.DoIt.HotKey.Alt;this.DefaultPlayMode=c.DefaultPlayMode;this.WebPageAutoPlayback=c.WebPageAutoPlayback;this.ApplicableOutlineDisplay=c.ApplicableOutlineDisplay;this.NavbarVolume=c.NavbarVolume;
this.EnableShowDiagnostics=c.EnableShowDiagnostics};
UserPreferences.prototype.Compare=function(c){if(this.PlayAudio!=c.PlayAudio)return true;if(this.ShowLeadIn!=c.ShowLeadIn)return true;if(this.MarqueeColor!=c.MarqueeColor)return true;if(this.TryIt.EnableSkipping!=c.TryIt.EnableSkipping)return true;if(this.DoIt.HotKey.Ctrl!=c.DoIt.HotKey.Ctrl)return true;if(this.DoIt.HotKey.Shift!=c.DoIt.HotKey.Shift)return true;if(this.DoIt.HotKey.Alt!=c.DoIt.HotKey.Alt)return true;if(this.DefaultPlayMode!=c.DefaultPlayMode)return true;if(this.WebPageAutoPlayback!=
c.WebPageAutoPlayback)return true;if(this.ApplicableOutlineDisplay!=c.ApplicableOutlineDisplay)return true;if(this.NavbarVolume!=c.NavbarVolume)return true;if(this.EnableShowDiagnostics!=c.EnableShowDiagnostics)return true;return false};UserPreferences.prototype.GetCookie=function(){return new Cookie(document,"OnDemandPlayer",365,"/",null,false)};
UserPreferences.prototype.LoadCookie=function(){var c=this.GetCookie();c.Load();if(c.PlayAudio)this.PlayAudio=c.PlayAudio;UserPref_PlayAudio_Original=this.PlayAudio;if(upk.browserInfo.isSoundSupported()==false)this.PlayAudio="none";if(!(UserPrefs.TimeStamp!="000000000000"&&(!c.TimeStamp||UserPrefs.TimeStamp>c.TimeStamp))){if(c.ShowLeadIn)this.ShowLeadIn=c.ShowLeadIn;if(c.MarqueeColor)this.MarqueeColor=c.MarqueeColor;if(c.TryIt_EnableSkipping)this.TryIt.EnableSkipping=c.TryIt_EnableSkipping=="true";
if(c.DoIt_HotKey_Ctrl)this.DoIt.HotKey.Ctrl=c.DoIt_HotKey_Ctrl;if(c.DoIt_HotKey_Shift)this.DoIt.HotKey.Shift=c.DoIt_HotKey_Shift;if(c.DoIt_HotKey_Alt)this.DoIt.HotKey.Alt=c.DoIt_HotKey_Alt;if(c.DefaultPlayMode)this.DefaultPlayMode=c.DefaultPlayMode;if(c.WebPageAutoPlayback)this.WebPageAutoPlayback=c.WebPageAutoPlayback;if(c.ApplicableOutlineDisplay)this.ApplicableOutlineDisplay=c.ApplicableOutlineDisplay;if(c.NavbarVolume)this.NavbarVolume=c.NavbarVolume;if(c.EnableShowDiagnostics)this.EnableShowDiagnostics=
c.EnableShowDiagnostics=="true"}};
UserPreferences.prototype.StoreCookie=function(){var c=this.GetCookie();c.TimeStamp=this.TimeStamp;c.PlayAudio=this.PlayAudio;c.ShowLeadIn=this.ShowLeadIn;c.MarqueeColor=this.MarqueeColor;c.TryIt_EnableSkipping=this.TryIt.EnableSkipping;c.DoIt_HotKey_Ctrl=this.DoIt.HotKey.Ctrl;c.DoIt_HotKey_Shift=this.DoIt.HotKey.Shift;c.DoIt_HotKey_Alt=this.DoIt.HotKey.Alt;c.DefaultPlayMode=this.DefaultPlayMode;c.WebPageAutoPlayback=this.WebPageAutoPlayback;c.ApplicableOutlineDisplay=this.ApplicableOutlineDisplay;
c.NavbarVolume=this.NavbarVolume;c.EnableShowDiagnostics=this.EnableShowDiagnostics;c.Store()};UserPreferences.prototype.GetUrlParamString=function(){return"PP_SOUND="+this.PlayAudio+"&PP_LEADIN="+this.ShowLeadIn+"&PP_SKIP="+(this.TryIt.EnableSkipping?"true":"false")+"&PP_MARQUEE="+this.MarqueeColor+"&PP_ENABLE="+(this.EnablePreferences?"true":"false")+"&PP_HOTKEY="+this.DoIt.HotKey.Ctrl+this.DoIt.HotKey.Shift+this.DoIt.HotKey.Alt};
UserPreferences.prototype.ParseUrlParamString=function(c){c=c.split("&");for(var d=0;d<c.length;d++){var e=c[d].split("=");if(e[0].toUpperCase()=="PP_SOUND")this.PlayAudio=e[1];else if(e[0].toUpperCase()=="PP_LEADIN")this.ShowLeadIn=e[1];else if(e[0].toUpperCase()=="PP_MARQUEE")this.MarqueeColor=e[1];else if(e[0].toUpperCase()=="PP_SKIP")this.TryIt.EnableSkipping=e[1]=="true";else if(e[0].toUpperCase()=="PP_ENABLE")this.EnablePreferences=e[1]=="true";else if(e[0].toUpperCase()=="PP_HOTKEY"){this.DoIt.HotKey.Ctrl=
e[1].charAt(0);this.DoIt.HotKey.Shift=e[1].charAt(1);this.DoIt.HotKey.Alt=e[1].charAt(2)}}};var UserPrefs=new UserPreferences,UserPref_PlayAudio_Original="";typeof SetDefaultPreferences!=="undefined"&&SetDefaultPreferences();UserPrefs.EnablePreferences&&UserPrefs.LoadCookie();var paramstr=unescape(document.location.hash.substring(1));if(paramstr=="")paramstr=unescape(document.location.search.substring(1));UserPrefs.ParseUrlParamString(paramstr);
function OpenPreferencesDialog(c,d){if(UserPrefs.EnablePreferences){var e=c+"/html/preferences.html",g;g=upk.browserInfo.isChrome()?430:upk.browserInfo.isFF()?420:upk.browserInfo.isSafari()?350:412;var j=[];try{if(lms_IsUserProfileAvailable()){var n=lms_GetUserProfileUrl();if(n!="")j[j.length]="UserProfileUrl="+Escape.MyEscape(n)}}catch(m){}if(d)j[j.length]="nosound";for(n=0;n<j.length;n++){e+=n==0?"?":"&";e+=j[n]}if(IsTouchDevice()||upk.browserInfo.isIE10Modern()){g+=50;showDialog(e,-1,-1,400,g,
true,96,"../../../",false)}else window.open(e,"prefwin","width=500,height="+g+",resizable=1,scrollbars=0,top="+(screen.availHeight-290)/2+",left="+(screen.availWidth-500)/2)}else alert(R_preferences_disabled)}function SessionPreferences(){this.swipeInstructionShowed=false}SessionPreferences.prototype.GetCookie=function(){return new Cookie(document,"OnDemandPlayerSession",null,"/")};
SessionPreferences.prototype.LoadCookie=function(){var c=this.GetCookie();c.Load();if(c.swipeInstructionShowed)this.swipeInstructionShowed=c.swipeInstructionShowed};SessionPreferences.prototype.StoreCookie=function(){var c=this.GetCookie();c.swipeInstructionShowed=this.swipeInstructionShowed;c.Store()};var SessionPrefs=new SessionPreferences;
function GetContentPathName(){var c=window.location.pathname,d=c.indexOf("data/toc.html");if(d>0)return c.substr(0,d);d=c.indexOf("html/roles.html");if(d>0)return c.substr(0,d);d=c.indexOf("data/tpc/");if(d>0)return c.substr(0,d);d=c.indexOf("html/lmsui.html");if(d>0)return c.substr(0,d);return c}function UserRolesClass(){this.Filtering=false;this.Roles=[]}UserRolesClass.prototype.Copy=function(c){this.Filtering=c.Filtering;this.Roles=[];for(var d=0;d<c.Roles.length;d++)this.Roles[d]=c.Roles[d]};
UserRolesClass.prototype.Compare=function(c){if(this.Filtering!=c.Filtering)return true;if(this.Roles.length!=c.Roles.length)return true;for(var d=0;d<this.Roles.length;d++)if(this.Roles[d]!=c.Roles[d])return true;return false};UserRolesClass.prototype.GetCookie=function(){return new Cookie(document,"OnDemandPlayerRoles",90,GetContentPathName(),null,false)};
UserRolesClass.prototype.LoadCookie=function(){var c=this.GetCookie();c.Load();this.Filtering=false;if(c.Filtering)this.Filtering=c.Filtering=="true";this.Roles=[];if(c.Roles)this.Roles=c.Roles.split("+")};UserRolesClass.prototype.StoreCookie=function(){var c=this.GetCookie();c.Filtering=this.Filtering?"true":"false";c.Roles=this.Roles.join("+");c.Store()};UserRolesClass.prototype.GetUrlParamString=function(){return"PP_ROLEFILTERING="+(this.Filtering?"true":"false")+"&PP_ROLES="+encodeURIComponent(this.Roles.join("+"))};
UserRolesClass.prototype.ParseUrlParamString=function(c){c=c.split("&");for(var d=0;d<c.length;d++){var e=c[d].split("=");if(e[0].toUpperCase()=="PP_ROLEFILTERING")this.Filtering=e[1]=="true";else if(e[0].toUpperCase()=="PP_ROLES"){this.Roles=[];if(e[1])this.Roles=e[1].split("+")}}};var UserRoles=new UserRolesClass;UserRoles.LoadCookie();UserRoles.ParseUrlParamString(paramstr);
function OpenRolesDialog(c){window.open(c+"/html/roles.html","roleswin","width=500,height=318,resizable=1,scrollbars=0,top="+(screen.availHeight-286)/2+",left="+(screen.availWidth-500)/2)}var sounds=[];function SoundObj(c,d,e){c=d.split("+");d=c.length;this.flist=[];this.fct=0;this.duration=e;for(e=0;e<d;e++){var g=c[e];if(g.substr(0,5)!="TEMP:"){this.flist[this.fct]=g;this.fct++}}}function Sound(c,d,e){if(c.indexOf(".")<0)c+=".ASX";sounds[c.substr(1)]=new SoundObj(c,d,e)}
function onHelp(c){if(c.charAt(c.length-1)=="/")c=c.substr(0,c.length-1);if(c.length>0)c+="/";var d=screen.availWidth/17,e=screen.availHeight-3*d;if(e>500)e=500;e=e*4.5/3;window.open(c+"../help/toc.html","odhelp","width=637,height=390,left="+d+",top="+d+",resizable=1,toolbar=1,scrollbars=1,location=0,menubar=0").focus()}
var template_leadin="",template_leadout="",template_explanation="",template_pauselink="",template_knowit_leadin="",template_knowit_leadout="",template_knowit_nextstep="",template_knowit_explanation="",template_knowit_leadin_score="",template_knowit_warningL1="",template_knowit_warningL2="",template_knowit_warningL3_0="",template_knowit_warningL3_H="",template_knowit_warningL4="",template_scoring="",template_scoring_YES="",template_scoring_NO="",template_knowit_continue="",template_knowit_confirmdemo=
"",template_typingcomplete="",template_knowit_dragwarning="",template_knowit_finish_close="",template_knowit_finish_close_inassessment="",template_strinp_suppress_example=0,_template_arr=[],_template_retfv="",xmlDoc;
function LoadTemplates(c,d){_template_retfv=d;if(document.implementation&&document.implementation.createDocument){xmlDoc=document.implementation.createDocument("","",null);xmlDoc.onload=LoadTemplates_Returned0}else if(window.ActiveXObject){xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.onreadystatechange=function(){xmlDoc.readyState==4&&LoadTemplates_Returned0()}}else{LoadTemplates_Error();return}try{xmlDoc.load("../../template/"+c+"/template.xml")}catch(e){LoadXMLDocArray("../../template/"+
c+"/template.xml",LoadTemplates_Returned,LoadTemplates_Error,"Item",true)}}function LoadTemplates_Returned0(){_nodesArray=[];for(var c=xmlDoc.getElementsByTagName("Item"),d=0;d<c.length;d++){for(var e=c[d],g=e.attributes[0].value,j="",n=0;n<e.childNodes.length;n++)if(e.childNodes[n].xml)j+=e.childNodes[n].xml;else{var m=new XMLSerializer;j+=m.serializeToString(e.childNodes[n])}_nodesArray[_nodesArray.length]=g+"="+j}LoadTemplates_Returned(_nodesArray)}
function LoadTemplates_Error(){alert("Common template loading error ...")}function LoadTemplates_Returned(c){_template_arr=[];for(var d=0;d<c.length;d++){var e=c[d].indexOf("="),g=c[d].substr(0,e);e=c[d].substr(e+1);_template_arr[g]=e}LoadAll();setTimeout(_template_retfv,100)}function GetTemp(c){if(_template_arr[c])return _template_arr[c];return""}function Insert(c,d,e){return c.substr(0,e)+d+c.substr(e)}
function LoadAll(){template_leadin=GetTemp("leadin");template_leadout=GetTemp("leadout");template_explanation=GetTemp("continue");template_knowit_leadin=GetTemp("knowit_leadin");template_knowit_leadout=GetTemp("knowit_leadout");template_knowit_nextstep=GetTemp("knowit_nextstep");template_knowit_explanation=GetTemp("knowit_explanation");if(IsTouchDevice()){var c=' style="color:#0033cc;font-weight:bold;" href="javascript:HLink(0)"';template_leadin=R_swipe_start;var d=template_leadin.indexOf("<a");template_leadin=
Insert(template_leadin,c,d+2);c=' style="color:#0033cc;font-weight:bold;" href="javascript:HLink(1)"';template_explanation=R_swipe_continue;d=template_explanation.indexOf("<a");template_explanation=Insert(template_explanation,c,d+2);c=' style="color:#0033cc;font-weight:bold;" href="javascript:HLink(2)"';template_leadout=R_swipe_finish;d=template_leadout.indexOf("<a");template_leadout=Insert(template_leadout,c,d+2);template_knowit_leadin=template_leadin;template_knowit_leadout=template_knowit_explanation=
template_explanation}template_knowit_leadin_score=GetTemp("leadin_score");template_knowit_warningL1=GetTemp("knowit_warningL1");template_knowit_warningL2=GetTemp("knowit_warningL2");template_knowit_warningL3_0=GetTemp("knowit_warningL3_0");template_knowit_warningL3_H=GetTemp("knowit_warningL3_H");template_knowit_warningL4=GetTemp("knowit_warningL4");template_scoring=GetTemp("scoring");if(IsTouchDevice()){d=template_scoring.indexOf('align="right"');c=template_scoring.indexOf("<",d);d=template_scoring.indexOf("</td",
d);c=template_scoring.substr(0,c);d=template_scoring.substr(d);template_scoring=c+'<span class="InstructText">'+Template_Replace(template_leadout,"HLink(2)","HLink(20)")+"</span>"+d}template_scoring=template_scoring.substr(0,6)+' width="100%" '+template_scoring.substr(6);template_scoring_YES=GetTemp("scoring_YES");template_scoring_NO=GetTemp("scoring_NO");template_knowit_continue=GetTemp("knowit_continue");template_knowit_confirmdemo=GetTemp("knowit_confirmdemo");template_typingcomplete=GetTemp("typingcomplete");
template_knowit_dragwarning=GetTemp("knowit_dragwarning");template_knowit_finish_close=GetTemp("knowit_finish_close");template_knowit_finish_close_inassessment=GetTemp("knowit_finish_close_inassessment");template_strinp_suppress_example=GetTemp("strinp_suppress_example");GetTemplate_knowit_leadin_score("168")}function ReplaceAll(c,d,e){for(var g=c.indexOf(d);g>=0;){c=Template_Replace(c,d,e);g=c.indexOf(d)}return c}
function Template_Replace(c,d,e){var g=c.indexOf(d);if(g<0)return c;var j=c.substr(0,g);c=c.substr(g+d.length);return j+e+c}function GetTemplate_knowit_leadin_score(c){return Template_Replace(template_knowit_leadin_score,"$score$",c)}function GetTemplate_scoring(c,d,e){c=Replace(template_scoring,"$good$",c);d=Replace(c,"$needed$",d);return Replace(d,"$result$",e)}var isOnLink=false;
function ShowInfoBlock(c,d){try{playMode!=null&&playMode!=""&&PlayStop(true)}catch(e){}var g=false,j=Escape.MyUnEscape(c);if(j.indexOf("odrel://")==0)j=resolve(j);for(var n=j;n.substr(0,3)=="../";)n=n.substr(3);var m=n.lastIndexOf("/");if(m>=0&&n.substr(m)=="/index.html")g=true;if(d==null||d.length==0)d="_blank";d=d.toLowerCase();if(d!="_blank")this.location.replace(j);else{if(g){m=screen.availWidth;m=(m-PlayerConfig.InfoWidth)/2;var o=screen.availHeight;o=(o-PlayerConfig.InfoHeight)/2;id=window.open(j,
"","top="+o+",left="+m+",width="+PlayerConfig.InfoWidth+",height="+PlayerConfig.InfoHeight+"toolbar=1,scrollbars=1,statusbar=1,resizable=1")}else{g=PlayerConfig.InfoWidth;n=PlayerConfig.InfoHeight;if(PlayerConfig.InfoWidth2)if(PlayerConfig.InfoWidth2>0)g=PlayerConfig.InfoWidth2;if(PlayerConfig.InfoHeight2)if(PlayerConfig.InfoHeight2>0)n=PlayerConfig.InfoHeight2;m=screen.availWidth;m=(m-g)/2;o=screen.availHeight;o=(o-n)/2;id=window.open(j,"","top="+o+",left="+m+",width="+g+",height="+n+"toolbar=1,scrollbars=1,location=1,statusbar=1,menubar=1,resizable=1")}setTimeout("Center("+
m+","+o+")",500)}}function OnLink(){isOnLink=true}function OffLink(){isOnLink=false}var globalloc="";function MakeAbsolute(c){if(c.toLowerCase().substr(0,7)=="mailto:")return c;var d="";if(globalloc.length==0)for(globalloc=location.href;globalloc.indexOf("\\")!=-1;)globalloc=globalloc.replace("\\","/");d=globalloc;var e=d.indexOf("#");if(e<0)e=d.indexOf("?");if(e>=0)d=d.substr(0,e);e=d.lastIndexOf("/");return e!=-1&&c.indexOf("//")==-1?d.substr(0,e+1)+c:c}var id;
function Center(c,d){try{id.focus();id.moveTo(c,d)}catch(e){}}
var Escape=function(){function c(j,n){for(var m="",o=0;o<j.length;o++){var p=j.substr(o,1),B;if(n==0)B=p>="0"&&p<="9"||p>="a"&&p<="z"||p>="A"&&p<="Z";else{a:{B=g.length;for(var D=0;D<B;D++)if(p==g[D]){B=true;break a}B=p==e?true:false}B=!B}if(B)m+=p;else{p=j.charCodeAt(o);p="0000"+p.toString(16).toUpperCase();m+=(n==0?"$":e)+p.substr(p.length-4)}}return m}function d(j,n){for(var m="",o=false,p=0;p<j.length;p++){var B;if(o){B=j.substr(p,4);m+=String.fromCharCode(parseInt("0x"+B));p+=3;o=false}else{B=
j.substr(p,1);if(B==(n==0?"$":e))o=true;else m+=B}}return m}var e="/",g=["<",">",'"',"'","%",";","(",")","&","+"];return{SafeUriEscape:function(j){return c(j,1)},SafeUriUnEscape:function(j){return d(j,1)},MyEscape:function(j){return c(j,0)},MyUnEscape:function(j){return d(j,0)}}}();function UrlParser(){this.params=[];this.safemode=false}
UrlParser.prototype.Clone=function(){var c=new UrlParser;c.params=[];c.safemode=this.safemode;for(var d in this.params)if(this.params[d]!=null)c.params[d]=this.params[d];return c};
UrlParser.prototype.Parse=function(){var c,d;c=document.location.hash.substring(1);c=c.split("&");if(c.length==0||c[0]==""){c=document.location.search.substring(1);c=c.split("&")}if(c.length>0)if(c[0].toLowerCase().substr(0,3)=="su="){this.safemode=true;c=c[0].substr(3);c=Escape.SafeUriUnEscape(c);c=c.split("&")}for(var e=0;e<c.length;e++){d=c[e];if(d.length!=0){var g=d.split("=");if(g.length==2)this.params[g[0].toLowerCase()]=g[1];else if(g.length<2)this.params[g[0].toLowerCase()]="";else this.params[g[0].toLowerCase()]=
d.substr(g[0].length+1)}}};UrlParser.prototype.GetSafeMode=function(){return this.safemode};UrlParser.prototype.SetSafeMode=function(c){this.safemode=c};UrlParser.prototype.GetParameter=function(c){return this.params[c.toLowerCase()]};UrlParser.prototype.AddParameter=function(c,d){this.params[c.toLowerCase()]=d};UrlParser.prototype.RemoveParameter=function(c){this.params[c.toLowerCase()]=null};UrlParser.prototype.ClearParameterList=function(){this.params=null;this.params=[]};
UrlParser.prototype.BuildParameterList=function(c){c="";var d=true,e;for(e in this.params){var g=this.params[e];if(g!=null){if(d==false)c+="&";d=false;c+=g.length==0?e:e+"="+this.params[e]}}if(this.safemode)c="su="+Escape.MyEscape(c);return c};
UrlParser.prototype.GetCorrectUrl=function(c,d){if(!this.safemode)return c;var e,g=c.indexOf("#");if(g==-1)g=c.indexOf("?");if(g>=0){var j=c.substring(g+1);e=j.split("&");if(e[0].toLowerCase().substr(0,3)=="su=")return c;return c.substring(0,g+1)+"su="+Escape.SafeUriEscape(j)}else return c+(d?"":"?su=")};function UnescapeQuotes(c){return c.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}
function SplashWindow(){var c=document.documentElement.offsetWidth,d=document.documentElement.offsetHeight;document.open();document.writeln("<script>var splash_hidden=false;");document.writeln("function ShowSplash()");document.writeln("{if (splash_hidden==false)");document.writeln("document.getElementById('splash').style.display='block';}");document.writeln("function HideSplash()");document.writeln("{splash_hidden=true; document.getElementById('splash').style.display='none';}");document.writeln("<\/script>");
document.writeln("<DIV id='splash' style='display:none;position:absolute;left:0;top:"+(d/2-50)+";width:"+c+";height:200'>");document.writeln("<p align='center'><font color='#FF0000' face='Arial' style='font-size:11pt'>");document.writeln(R_splashtext);document.writeln("</font></p>");document.writeln("</DIV>");document.writeln("<script>setTimeout('ShowSplash()',2000);<\/script>");document.close()}SplashWindow();
function getElementsByAttribute(c,d){var e=[],g=[];if(c=="id"&&document.all&&!upk.browserInfo.isFF3()){e=document.all.item(d);if(e!=null)if(e.length!=null)for(j=0;j<e.length;j++)g[g.length]=e(j);else g[g.length]=e;return g}e=document.all&&!upk.browserInfo.isFF3()?document.all:document.getElementsByTagName("*");for(var j=0;j<e.length;j++)if(c=="class"){if(RegExp("(^| )"+d+"( |$)").test(e[j].className))g[g.length]=e[j]}else if(c=="for"){if(e[j].getAttribute("htmlFor")||e[j].getAttribute("for"))if(e[j].htmlFor==
d)g[g.length]=e[j]}else if(e[j].getAttribute(c)==d)g[g.length]=e[j];return g}function getElementOfObject(c,d){var e="",g=getElementsByAttribute("id",c),j;for(j in g)for(e=g[j];e.parentNode!=null;){if(e.parentNode==d)return g[j];e=e.parentNode}return false}
var objIcon02Img,objYesImg0,objNoImg0,objDoneTypingImg0,objYesImg1,objNoImg1,objDoneTypingImg1,spanE,spanEYes,spanENo,mobjBubble=0,mobjContent=0,mobjPointer=0,mblnShowPointer=false,mAct,topPadding=38,leftPadding=14,rightPadding=14,bottomPadding=3,m_Pointed,m_PointerXpos=0,m_PointerYpos=0,m_PointerDirection=BUBB07_NOPOINTER,m_bWidth=0,m_bHeight=0,BUBB07_NULL=0,BUBB07_NOPOINTER=0,BUBB07_TOPLEFT=3,BUBB07_TOPRIGHT=4,BUBB07_BOTTOMLEFT=1,BUBB07_BOTTOMRIGHT=2,BUBB07_LEFTTOP=7,BUBB07_RIGHTTOP=8,BUBB07_LEFTBOTTOM=
5,BUBB07_RIGHTBOTTOM=6,BUBB07_DEFAULTWIDTH=200-leftPadding-rightPadding,BUBB07_LEFTAREA=37,m_BubblePath="../../../img/",ash=false,abubbv02_bubbcolor=0,tID=0,setpos=true,img2on,img2off,imagesArr=[],imagesXref=[];
function cached_image(c){var d;for(d=convert(String(c),10,16);d.length<6;)d="0"+d;d=d.toLowerCase();this.imageNames=d=[m_BubblePath+"giftrk1.gif",m_BubblePath+"b"+d+"_03.png",m_BubblePath+"b"+d+"_03over.png",m_BubblePath+"b"+d+"_01.png",m_BubblePath+"b"+d+"_02.png",m_BubblePath+"b"+d+"_04.png",m_BubblePath+"b"+d+"_06.png",m_BubblePath+"b"+d+"_07.png",m_BubblePath+"b"+d+"_08.png",m_BubblePath+"b"+d+"_09.png",m_BubblePath+"b"+d+"_anch_tl.png",m_BubblePath+"b"+d+"_anch_tr.png",m_BubblePath+"b"+d+"_anch_lthigh.png",
m_BubblePath+"b"+d+"_anch_ltlow.png",m_BubblePath+"b"+d+"_anch_rthigh.png",m_BubblePath+"b"+d+"_anch_rtlow.png",m_BubblePath+"b"+d+"_anch_bl.png",m_BubblePath+"b"+d+"_anch_br.png",m_BubblePath+"b"+d+"_03disab.png",m_BubblePath+"b"+d+"_03empty.png"];this.color=c;c=document.createElement("img");c.width=23;c.height=21;c.src=d[2];var e=document.createElement("img");e.width=23;e.height=21;e.src=d[1];this.imgon=c;this.imgoff=e}
function cached_images(c){abubbv02_bubbcolor=c;if(!imagesArr["c_"+c]){imagesArr["c_"+c]=new cached_image(c);imagesXref[imagesXref.length]="c_"+c}}function load_buttons(){if(document.images){img2on=imagesArr["c_"+abubbv02_bubbcolor].imgon;img2off=imagesArr["c_"+abubbv02_bubbcolor].imgoff}}function GetScrName(c){var d=c.lastIndexOf("/");return"../../img/"+c.substr(d+1)}
function BubbleimgOn(c,d){if(d){getElementOfObject(c,mobjBubble).style.display="none";getElementOfObject(d,mobjBubble).style.display="block"}else if(document.images)mobjBubble.all[c].src=event.offsetX>=3&&event.offsetX<=26&&event.offsetY>=7&&event.offsetX<=27?GetScrName(eval(c+"on.src")):GetScrName(eval(c+"off.src"))}
function BubbleimgOff(c,d){if(d){getElementOfObject(c,mobjBubble).style.display="block";getElementOfObject(d,mobjBubble).style.display="none"}else if(document.images)mobjBubble.all[c].src=GetScrName(eval(c+"off.src"))}function BubbleClose(){OnClose()}
function InAnchor(c){var d=false,e=c.offsetX;c=c.offsetY;switch(abubbv02_Pointer){case BUBB07_TOPLEFT:if(e>=3&&c<=38)if(37/14*(18-e)+c>38)d=true;break;case BUBB07_TOPRIGHT:if(e<=15&&c<=38)if(-34/12*(13-e)+c>1)d=true;break;case BUBB07_BOTTOMLEFT:if(e>=3)if(-3*(5-e)+c<41)d=true;break;case BUBB07_BOTTOMRIGHT:if(e<=15)if(37/13*(14-e)+c<41)d=true;break;case BUBB07_LEFTTOP:if(c>=3)if(12/37*(38-e)+c<15)d=true;break;case BUBB07_LEFTBOTTOM:if(c<=15)if(-12/37*(38-e)+c>3)d=true;break;case BUBB07_RIGHTTOP:if(c>=
3)if(12/-37*(1-e)+c<15)d=true;break;case BUBB07_RIGHTBOTTOM:if(c>=3)if(-12/-37*(1-e)+c>3)d=true}return d}function AnchorMouseDown(){InAnchor(event)||EventMouseDown(event)}function AnchorMouseUp(){InAnchor(event)||EventMouseUp(event)}
function convert(c,d,e){var g,j,n,m;g=0;j="";for(n=1;n<=c.length;n++){m="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(c.substring(n-1,n));m*=Math.pow(d,c.length-n);g+=m}for(c=100;g<Math.pow(e,c);)c--;for(;c>-1;){d=Math.pow(e,c);c--;n=(g-g%d)/d+1;g%=d;d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".substring(n-1,n);j+=d}return j}N=document.all&&!upk.browserInfo.isFF3()?0:1;var ob=false,xi,yi,X,Y,global_moveable=true;
function bubb07_global_MD(c){OnBubbleClicked&&OnBubbleClicked();if(global_moveable)if(N){ob=c.target;if(c.target.id=="blink"||c.target.id=="m_Caption"||c.target.id=="m_StaticCaption"){xi=c.target.id=="blink"||c.target.id=="m_StaticCaption"?document.getElementById("bubb_cap").offsetWidth:0;ob=true;X=c.pageX-getObjLeft(mobjBubble);Y=c.pageY-getObjTop(mobjBubble)}return false}else if(event.srcElement.id=="blink"||event.srcElement.id=="m_Caption"||event.srcElement.id=="m_StaticCaption"){xi=event.srcElement.id==
"blink"||event.srcElement.id=="m_StaticCaption"?mobjBubble.all.bubb_cap.clientWidth:0;ob=true;X=window.event.clientX-getObjLeft(mobjBubble);Y=window.event.clientY-getObjTop(mobjBubble)}}
function bubb07_global_MM(c){if(ob)if(IsTouchDevice()){if(ob==true){rightarea=leftarea=0;var d=c.clientX-X,e=c.clientY-Y;d=getObjLeft(mobjBubble)+d;e=getObjTop(mobjBubble)+e;X=c.clientX;Y=c.clientY;mobjBubble.style.left=d+"px";mobjBubble.style.top=e+"px";mobjContent.style.left=Number(d+leftPadding)+"px";mobjContent.style.top=Number(e+topPadding)+"px"}}else if(N){if(ob==true){rightarea=leftarea=0;d=c.pageX-X;e=c.pageY-Y;mobjBubble.style.left=d+"px";mobjBubble.style.top=e+"px";mobjContent.style.left=
Number(d+leftPadding)+"px";mobjContent.style.top=Number(e+topPadding)+"px";document.getElementById("blink").focus();return false}}else{if(ob==true){rightarea=leftarea=0;d=event.clientX-X;e=event.clientY-Y;mobjBubble.style.left=d+"px";mobjBubble.style.top=e+"px";mobjContent.style.left=Number(d+leftPadding)+"px";mobjContent.style.top=Number(e+topPadding)+"px"}return false}}function bubb07_global_MU(){ob&&OnBubbleMoved();ob=false}N&&document.captureEvents(Event.MOUSEDOWN|Event.MOUSEMOVE|Event.MOUSEUP);
if(!IsTouchDevice())if(document.attachEvent){document.attachEvent("onmousedown",bubb07_global_MD);document.attachEvent("onmousemove",bubb07_global_MM);document.attachEvent("onmouseup",bubb07_global_MU)}else{document.addEventListener("mousedown",bubb07_global_MD,true);document.addEventListener("mousemove",bubb07_global_MM,true);document.addEventListener("mouseup",bubb07_global_MU,true)}function JSRect(c,d,e,g){this.m_Left=c;this.m_Top=d;this.m_Right=e;this.m_Bottom=g}
function JSBubbleInterface(c){abubbv02_bVisible=false;abubbv02_show=true;abubbv02_IconName=abubbv02_ActionText=abubbv02_CaptionText=abubbv02_Text="";abubbv02_Pointer=BUBB07_NULL;abubbv02_infos="";abubbv02_enableclose=1;m_Pointed=true;_ay=_ax=0;m_rect=new JSRect(-1,-1,-1,-1);this.m_knrect=new JSRect(-1,-1,-1,-1);this.m_bFFClearHeight=false;this.m_Name=c;this.lastbubbstyle=this.m_Caption=this.m_Text="";this.m_bMoveDefPos=this.EnabledAction=this.m_ShowAction=false;this.savedPos=null}
JSBubbleInterface.prototype.SetMode=function(c){abubbv02_CaptionText=c};JSBubbleInterface.prototype.ShowMode=function(){if(abubbv02_show==true)if(document.all&&!upk.browserInfo.isFF3())mobjBubble.all.m_Caption.innerText=abubbv02_CaptionText;else{var c=getElementsByAttribute("id","m_Caption"),d;for(d in c)c[d].textContent=abubbv02_CaptionText}};JSBubbleInterface.prototype.StartBlink=function(){BlinkTxt()};
JSBubbleInterface.prototype.EndBlink=function(){clearTimeout(tID);document.getElementById("prdiv").style.color="blue"};JSBubbleInterface.prototype.SetColor=function(c){abubbv02_bubbcolor=c};function BlinkTxt(){if(mobjContent){var c=getElementOfObject("prdiv",mobjContent);if(c)c.style.color=c.style.color=="#ccffff"||c.style.color=="rgb(204, 255, 255)"||c.style.color=="#7dc1db"||c.style.color=="rgb(125, 193, 219)"?"#003366":grayBubbles?"#7dc1db":"#ccffff"}tID=setTimeout("BlinkTxt()",750)}
JSBubbleInterface.prototype.SetEnableCloseButton=function(c){if(abubbv02_show==true){var d=document.getElementById("closebtn_"+abubbv02_bubbcolor);str="";str=c==1?"<div id='closebtn_"+abubbv02_bubbcolor+"' style='position:relative'><div><img id='img2' name='img2' src='"+imagesArr["c_"+abubbv02_bubbcolor].imageNames[1]+"' style='display:block' width='32' height='27' border='0'><img id='img2o' name='img2o' src='"+imagesArr["c_"+abubbv02_bubbcolor].imageNames[2]+"' style='display:none' width='32' height='27' border='0'></div><div style='position:absolute; left:3px; top:7px'><a href='#' onclick='BubbleClose();return false'"+
(IsTouchDevice()?"":' onMouseMove=\'BubbleimgOn("img2","img2o")\' onMouseOut=\'BubbleimgOff("img2","img2o")\'')+"><img alt='"+R_bubble_closeondemand+"' id='imghandler' name='imghandler' src='"+imagesArr["c_"+abubbv02_bubbcolor].imageNames[0]+"' style='display:block' width='23' height='20' border='0'></a></div></div></td>":c==0?'<a id="closebtn_'+abubbv02_bubbcolor+'" onclick=""><img name="img2" src="'+imagesArr["c_"+abubbv02_bubbcolor].imageNames[18]+'" width="32" height="27" border="0" alt="'+R_bubble_closeondemand+
'"></td>':'<a id="closebtn_'+abubbv02_bubbcolor+'" onclick=""><img name="img2" src="'+imagesArr["c_"+abubbv02_bubbcolor].imageNames[19]+'" width="32" height="27" border="0" alt=""></td>';if(document.all&&!upk.browserInfo.isFF3())d.outerHTML=str;else{var e=d.ownerDocument.createRange();e.setStartBefore(d);e=e.createContextualFragment(str);d.parentNode.replaceChild(e,d)}}abubbv02_enableclose=c};JSBubbleInterface.prototype.GetActionLink=function(){return getElementOfObject("m_ActionText",mobjBubble)};
JSBubbleInterface.prototype.SetPRText=function(c){if(mobjContent){var d=document.getElementById("prdiv");if(d!=null)if(document.all&&!upk.browserInfo.isFF3())d.innerText=c;else d.textContent=c}};var noactionstitle=false;JSBubbleInterface.prototype.SetActionText=function(c,d){abubbv02_ActionText=c;noactionstitle=d;this.ShowActionText()};
JSBubbleInterface.prototype.ShowActionText=function(){if(mobjBubble)if(abubbv02_show==true)if(document.all&&!upk.browserInfo.isFF3()){if(!noactionstitle)mobjBubble.all.m_ActionText.title=R_interface_action_alt;mobjBubble.all.m_ActionText.innerText=abubbv02_ActionText}else{mAct=getElementOfObject("m_ActionText",mobjBubble);if(!noactionstitle)mAct.title=R_interface_action_alt;mAct.textContent=abubbv02_ActionText}};
JSBubbleInterface.prototype.Show=function(){this.ShowActionText();abubbv02_bVisible=true;if(mobjBubble){mobjBubble.style.visibility="visible";mobjBubble.style.zIndex=2;mobjBubble.style.left=Math.abs(getObjLeft(mobjBubble))+"px";mobjContent.style.visibility="visible";mobjContent.style.zIndex=3;if(mblnShowPointer){mobjPointer.style.visibility="visible";mobjPointer.style.zIndex=4}mAct=getElementOfObject("m_ActionText",mobjBubble);mAct.style.visibility="visible"}};
JSBubbleInterface.prototype.Hide=function(){if(mobjBubble){abubbv02_bVisible=false;_ax=getObjLeft(mobjContent);_ay=getObjTop(mobjContent);mobjBubble.style.visibility="hidden";mobjBubble.style.left="-"+Math.abs(getObjLeft(mobjBubble))+"px";mobjContent.style.visibility="hidden";if(mblnShowPointer)mobjPointer.style.visibility="hidden";mAct=getElementOfObject("m_ActionText",mobjBubble);mAct.style.visibility="hidden"}};
JSBubbleInterface.prototype.IsVisible=function(){if(mobjBubble)return abubbv02_bVisible;return false};
JSBubbleInterface.prototype.SetErrorMessage=function(c){this.m_bFFClearHeight=true;var d;d=getElementOfObject("errortext",mobjContent);if(abubbv02_show==true)if(c==""){this.Hide();this.ShowText();kmbdefpos=false;RepositionBubble(this);this.Show()}else{this.SetEnableCloseButton(true);if(!d){this.Hide();this.ShowText();d=mobjContent;var e=document.createElement("span");e.ID="errortext";var g=document.createElement("b"),j=document.createElement("font");j.color="#FF0000";j.face="Arial";j.size="2";j.setAttribute("style",
"font-family:Arial; font-size:10pt;");if(document.all&&!upk.browserInfo.isFF3())j.innerText=c;else j.textContent=c;g.appendChild(j);e.appendChild(g);c=document.createElement("hr");e.appendChild(c);document.all&&!upk.browserInfo.isFF3()?d.insertBefore(e,d.children(0)):d.insertBefore(e,d.firstChild);this.RefreshBubble();kmbdefpos=false;RepositionBubble(this);this.Show()}}};JSBubbleInterface.prototype.SetIcon=function(c){if(c!="")abubbv02_IconName=c};
JSBubbleInterface.prototype.SetMoveable=function(c){global_moveable=c};JSBubbleInterface.prototype.RefreshBubble=function(){mobjContent.style.pixelWidth=BUBB07_DEFAULTWIDTH;mobjContent.style.width=BUBB07_DEFAULTWIDTH+"px"};JSBubbleInterface.prototype.SetText=function(c){abubbv02_Text=c};JSBubbleInterface.prototype.ResetContent=function(){abubbv02_IconName="";m_ShowAction="false";abubbv02_infos=""};
JSBubbleInterface.prototype.ShowText=function(){text=abubbv02_Text;if(abubbv02_show==true){var c=mobjContent;if(text=="")text='<DIV style="visibility: hidden">longtextlongtextlongtext</DIV>';c.innerHTML=text;if(abubbv02_IconName!=""){var d=document.createElement("img");d.width=32;d.height=32;d.border=0;d.align="left";d.src=m_BubblePath+abubbv02_IconName;document.all&&!upk.browserInfo.isFF3()?c.insertBefore(d,c.children(0)):c.firstChild.insertBefore(d,c.firstChild.firstChild)}var e=document.createElement("table");
e.cellspacing=0;e.cellpadding=0;e.style.marginBottom="8px";var g=document.createElement("tbody"),j=document.createElement("tr"),n=document.createElement("td");n.height=5;j.appendChild(n);g.appendChild(j);if(this.m_ShowAction||abubbv02_infos){j=document.createElement("tr");if(this.m_ShowAction){n=document.createElement("td");n.align="right";var m=document.createElement("a");m.href="javascript:OnAlternative();";d=document.createElement("img");d.width=22;d.height=22;d.border=0;d.alt=R_menu_alternatives;
d.src=m_BubblePath+"alternatives.gif";m.appendChild(d);n.appendChild(m);if(screens[showScreen].infoblocks.length>0){m=document.createElement("img");m.width=16;m.height=19;m.border=0;m.src=m_BubblePath+"icondivide.gif";n.appendChild(m)}j.appendChild(n)}if(screens[showScreen].infoblocks.length>0)for(d=0;d<screens[showScreen].infoblocks.length;d++){n=screens[showScreen].infoblocks[d];var o=document.createElement("td");o.width=25;o.border=0;m=document.createElement("a");m.href=n.url;m.title=n.tooltip;
var p=document.createElement("img");p.src=n.buttonfile;p.width=22;p.height=22;p.border=0;p.alt=n.tooltip;m.appendChild(p);o.appendChild(m);j.appendChild(o)}g.appendChild(j)}e.appendChild(g);c.appendChild(e);if(playMode=="K"){if(c=document.getElementById("img_icon02")){d=objIcon02Img.cloneNode(null);c.appendChild(d)}UpdateYesNo(false,false)}UpdateDoneTyping(false)}};
function UpdateDoneTyping(){for(var c=getElementsByAttribute("id","img_DoneTyping"),d=0;d<c.length;d++)if(objDoneTyping=c[d])if(document.all&&!upk.browserInfo.isFF3()&&objDoneTyping.childNodes.length==0||!document.all&&objDoneTyping.nodeType==1){spanE.innerHTML=R_tcbutton_title;objDoneTyping.appendChild(objDoneTypingA);objDoneTypingA.appendChild(objDoneTypingImg0);objDoneTypingImg0.appendChild(spanE);if(playMode=="K"){br=document.createElement("P");br.innerHTML="&nbsp;";br2=document.createElement("P");
br2.innerHTML="&nbsp;";objDoneTyping.appendChild(br);objDoneTyping.appendChild(br2);objDoneTypingImg0.style.marginTop="0px"}else{br=document.createElement("p");br.style.height="42px";objDoneTyping.appendChild(br);objDoneTypingImg0.style.marginTop="10px";objDoneTypingImg0.style.marginBottom="15px"}}}
function UpdateYesNo(){var c=document.getElementById("img_YesNo");if(c)if(c.childNodes.length==0||!mobjContent.all){spanENo.innerHTML=R_nobutton_title;objNoA.appendChild(spanENo);c.appendChild(objNoA);var d=document.createTextNode("  ");c.appendChild(d);spanEYes.innerHTML=R_yesbutton_title;objYesA.appendChild(spanEYes);c.appendChild(objYesA);yesnobr=document.createElement("P");yesnobr.innerHTML="&nbsp;";c.appendChild(yesnobr)}}function YesOnClick(){HLink(11)}function YesOnMouseOver(){HLink(111)}
function YesOnMouseOut(){HLink(110)}function NoOnClick(){HLink(12)}function NoOnMouseOver(){HLink(121)}function NoOnMouseOut(){HLink(120)}function DTOnClick(){HLink(13)}function DTOnMouseOver(){HLink(131)}function DTOnMouseOut(){HLink(130)}JSBubbleInterface.prototype.SetAlternative=function(c,d){this.m_ShowAction=c;this.EnabledAction=d};
JSBubbleInterface.prototype.AddInfoBlock=function(c,d,e){e=fixHTMLString(e);abubbv02_infos+="<td width='25' border='0'><a target='_blank' href='"+d+"'><img src='"+c+"' width='22' height='22' border='0' alt='"+e+"'></img></a></td>"};var kmbdefpos=false,FirstBubble=true;JSBubbleInterface.prototype.GetBubbleLeft=function(c){if(!c)return getObjLeft(mobjBubble);switch(m_PointerDirection){case BUBB07_LEFTTOP:case BUBB07_LEFTBOTTOM:return getObjLeft(mobjPointer);default:return getObjLeft(mobjBubble)}};
JSBubbleInterface.prototype.GetBubbleTop=function(c){if(!c)return getObjTop(mobjBubble);switch(m_PointerDirection){case BUBB07_TOPLEFT:case BUBB07_TOPRIGHT:return getObjTop(mobjPointer);default:return getObjTop(mobjBubble)}};JSBubbleInterface.prototype.GetBubbleWidth=function(c){if(!c)return getClientWidth(mobjBubble);switch(m_PointerDirection){case BUBB07_LEFTTOP:case BUBB07_RIGHTTOP:case BUBB07_LEFTBOTTOM:case BUBB07_RIGHTBOTTOM:return getClientWidth(mobjBubble)+getClientWidth(mobjPointer);default:return getClientWidth(mobjBubble)}};
JSBubbleInterface.prototype.GetBubbleHeight=function(c){if(!c)return getClientHeight(mobjBubble);switch(m_PointerDirection){case BUBB07_TOPLEFT:case BUBB07_TOPRIGHT:case BUBB07_BOTTOMLEFT:case BUBB07_BOTTOMRIGHT:return getClientHeight(mobjBubble)+getClientHeight(mobjPointer);default:return getClientHeight(mobjBubble)}};JSBubbleInterface.prototype.GetBubblePointer=function(){return m_PointerDirection};
function SavedPosition(c,d,e,g,j,n,m,o,p,B){this.left=c;this.top=d;this.right=e;this.bottom=g;this.pointed=j;this.pointerDirection=n;this.pointerXpos=m;this.pointerYpos=o;this.bwidth=p;this.bheight=B}
JSBubbleInterface.prototype.RefreshPosition=function(){if(this.savedPos!=null)if(this.IsVisible()!=false){this.SetPosition(this.savedPos.left,this.savedPos.top,this.savedPos.right,this.savedPos.bottom,this.savedPos.pointed,this.savedPos.pointerDirection,this.savedPos.pointerXpos,this.savedPos.pointerYpos,this.savedPos.bwidth,this.savedPos.bheight);this.Show()}};
JSBubbleInterface.prototype.SetPosition=function(c,d,e,g,j,n,m,o,p,B){this.savedPos=new SavedPosition(c,d,e,g,j,n,m,o,p,B);mobjContent=document.getElementById("content");this.Hide();this.ShowText();this.RefreshBubble();if(m_rect.m_Left==-1&&this.m_bMoveDefPos)kmbdefpos=true;if(FirstBubble){this.m_bMoveDefPos=true;FirstBubble=false}m_rect.m_Left=c;m_rect.m_Top=d;m_rect.m_Right=e;m_rect.m_Bottom=g;m_Pointed=j;m_PointerDirection=n;m_PointerXpos=m;m_PointerYpos=o;m_bWidth=p;m_bHeight=B;mblnShowPointer=
m_Pointed;RepositionBubble(this);this.ShowMode()};
function RepositionBubble(c){c.SetEnableCloseButton(abubbv02_enableclose);var d=m_rect.m_Right,e=m_rect.m_Left,g=m_rect.m_Bottom,j=m_rect.m_Top,n=m_Pointed,m=0,o=0,p=getDIV("screen");if(m_bWidth>p.style.pixelWidth)m_bWidth=p.style.pixelWidth;if(abubbv02_show==true){var B=getObjWidth("screen"),D=getObjHeight("screen"),Z=mobjContent.clientWidth,E=mobjContent.clientHeight;if(setpos){c.m_knrect.left=getObjLeft(mobjContent);c.m_knrect.top=getObjTop(mobjContent)}if(e==-1&&n&&m_PointerDirection==0)setpos=
false;if(!n){setpos=m_bWidth?false:true;if(c.m_knrect.left){mobjContent.style.left=c.m_knrect.left+"px";mobjContent.style.top=c.m_knrect.top+"px"}}if(n){setpos=false;if(mobjContent&&m_PointerDirection>0){abubbv02_Pointer=m_PointerDirection;mobjContent.style.pixelWidth=m_bWidth-28;mobjContent.style.pixelHeight=m_bHeight-41;if(m_bWidth)mobjContent.style.width=m_bWidth-28+"px";mobjContent.style.height="";if(!c.m_bFFClearHeight&&mobjContent.clientHeight<m_bHeight-41)mobjContent.style.height=m_bHeight-
41+"px";var H=0;for(m=false;!m;){if(abubbv02_Pointer==BUBB07_TOPLEFT){GetBubble("bubbTLp",abubbv02_bubbcolor);m=m_PointerXpos-4;o=m_PointerYpos;mobjPointer.style.left=m+"px";mobjPointer.style.top=o+"px";mobjBubble.style.left=Number(m-leftPadding)+"px";mobjBubble.style.top=Number(o+38)+"px";mobjContent.style.left=m+"px";mobjContent.style.top=Number(o+37+topPadding)+"px";mobjBubble.style.zIndex=2;mobjContent.style.zIndex=3;mobjPointer.style.zIndex=4}if(abubbv02_Pointer==BUBB07_TOPRIGHT){GetBubble("bubbTRp",
abubbv02_bubbcolor);m=m_PointerXpos-10;o=m_PointerYpos;mobjPointer.style.left=Number(m-5)+"px";mobjPointer.style.top=o+"px";mobjBubble.style.left=Number(m+leftPadding+rightPadding-mobjBubble.clientWidth)+"px";mobjBubble.style.top=Number(o+38)+"px";mobjContent.style.left=Number(m+leftPadding+rightPadding-mobjBubble.clientWidth+leftPadding)+"px";mobjContent.style.top=Number(o+37+topPadding)+"px";mobjBubble.style.zIndex=2;mobjContent.style.zIndex=3;mobjPointer.style.zIndex=4}if(abubbv02_Pointer==BUBB07_BOTTOMRIGHT){GetBubble("bubbBRp",
abubbv02_bubbcolor);m=m_PointerXpos-10;o=m_PointerYpos-41;mobjPointer.style.left=Number(m-5)+"px";mobjPointer.style.top=o+"px";mobjBubble.style.left=Number(m+leftPadding+rightPadding-mobjBubble.clientWidth)+"px";mobjBubble.style.top=Number(o-mobjBubble.clientHeight+3)+"px";mobjContent.style.left=Number(m+leftPadding+rightPadding-mobjBubble.clientWidth+leftPadding)+"px";mobjContent.style.top=Number(o-mobjBubble.clientHeight+2+topPadding)+"px";mobjBubble.style.zIndex=2;mobjContent.style.zIndex=3;mobjPointer.style.zIndex=
4}if(abubbv02_Pointer==BUBB07_BOTTOMLEFT){GetBubble("bubbBLp",abubbv02_bubbcolor);m=m_PointerXpos-4;o=m_PointerYpos-41;mobjPointer.style.left=m+"px";mobjPointer.style.top=o+"px";mobjBubble.style.left=Number(m-leftPadding)+"px";mobjBubble.style.top=Number(o-mobjBubble.clientHeight+3)+"px";mobjContent.style.left=m+"px";mobjContent.style.top=Number(o-mobjBubble.clientHeight+2+topPadding)+"px";mobjBubble.style.zIndex=2;mobjContent.style.zIndex=3;mobjPointer.style.zIndex=4}if(abubbv02_Pointer==BUBB07_LEFTTOP){GetBubble("bubbLTp",
abubbv02_bubbcolor);m=m_PointerXpos;o=m_PointerYpos-3;mobjPointer.style.left=m+"px";mobjPointer.style.top=o+"px";mobjBubble.style.left=Number(m-leftPadding+52)+"px";mobjBubble.style.top=Number(o-15)+"px";mobjContent.style.left=Number(m+52)+"px";mobjContent.style.top=Number(o+topPadding-16)+"px";mobjBubble.style.zIndex=2;mobjContent.style.zIndex=3;mobjPointer.style.zIndex=4}if(abubbv02_Pointer==BUBB07_RIGHTTOP){GetBubble("bubbRTp",abubbv02_bubbcolor);m=m_PointerXpos-41;o=m_PointerYpos-3;mobjPointer.style.left=
m+"px";mobjPointer.style.top=o+"px";mobjBubble.style.left=Number(m-leftPadding-mobjBubble.clientWidth+17)+"px";mobjBubble.style.top=Number(o-15)+"px";mobjContent.style.left=Number(m-leftPadding-mobjBubble.clientWidth+leftPadding+17)+"px";mobjContent.style.top=Number(o+topPadding-16)+"px";mobjBubble.style.zIndex=2;mobjContent.style.zIndex=3;mobjPointer.style.zIndex=4}if(abubbv02_Pointer==BUBB07_RIGHTBOTTOM){GetBubble("bubbRBp",abubbv02_bubbcolor);m=m_PointerXpos-41;o=m_PointerYpos-15;mobjPointer.style.left=
m+"px";mobjPointer.style.top=o+"px";mobjBubble.style.left=Number(m-leftPadding-mobjBubble.clientWidth+17)+"px";mobjBubble.style.top=Number(o-mobjBubble.clientHeight+33)+"px";mobjContent.style.left=Number(m-leftPadding-mobjBubble.clientWidth+leftPadding+17)+"px";mobjContent.style.top=Number(o-mobjBubble.clientHeight+32+topPadding)+"px";mobjBubble.style.zIndex=2;mobjContent.style.zIndex=3;mobjPointer.style.zIndex=4}if(abubbv02_Pointer==BUBB07_LEFTBOTTOM){GetBubble("bubbLBp",abubbv02_bubbcolor);m=m_PointerXpos;
o=m_PointerYpos-15;mobjPointer.style.left=m+"px";mobjPointer.style.top=o+"px";mobjBubble.style.left=Number(m-leftPadding+52)+"px";mobjBubble.style.top=Number(o-mobjBubble.clientHeight+33)+"px";mobjContent.style.left=Number(m+52)+"px";mobjContent.style.top=Number(o-mobjBubble.clientHeight+32+topPadding)+"px";mobjBubble.style.zIndex=2;mobjContent.style.zIndex=3;mobjPointer.style.zIndex=4}if(abubbv02_Pointer==9){GetBubble("bubbLBp",abubbv02_bubbcolor);m_PointerXpos=getUniWidth(p)/2;m_PointerYpos=getUniHeight(p)/
2;m=m_PointerXpos;o=m_PointerYpos-15;mobjPointer.style.left=m+"px";mobjPointer.style.top=o+"px";mobjBubble.style.left=Number(m-leftPadding+52)+"px";mobjBubble.style.top=Number(o-mobjBubble.clientHeight+33)+"px";mobjContent.style.left=Number(m+52)+"px";mobjContent.style.top=Number(o-mobjBubble.clientHeight+32+topPadding)+"px";mobjBubble.style.zIndex=2;mobjContent.style.zIndex=3;mobjPointer.style.zIndex=4;n=false}if(getObjTop(mobjBubble)<0||getObjTop(mobjBubble)+getClientHeight(mobjBubble)>getUniHeight(p)||
getObjLeft(mobjBubble)<0||getObjLeft(mobjBubble)+getClientWidth(mobjBubble)>getUniWidth(p)){H++;abubbv02_Pointer=H;m=false;switch(abubbv02_Pointer){case 1:m_PointerXpos=d;m_PointerYpos=j;break;case 2:m_PointerXpos=e;m_PointerYpos=j;break;case 3:m_PointerXpos=d;m_PointerYpos=g;break;case 4:m_PointerXpos=e;m_PointerYpos=g;break;case 5:m_PointerXpos=d;m_PointerYpos=j;break;case 6:m_PointerXpos=e;m_PointerYpos=j;break;case 7:m_PointerXpos=d;m_PointerYpos=g;break;case 8:m_PointerXpos=e;m_PointerYpos=g;
break;case 9:m_PointerXpos=getUniWidth(p)/2;m_PointerYpos=getUniHeight(p)/2;n=false;m=true}}else{c.m_bFFClearHeight=false;m=true}m_PointerDirection=abubbv02_Pointer;c.lastbubbstyle=abubbv02_Pointer}}}if(!n){c.m_bMoveDefPos=false;brect=new JSRect;brect.left=getObjLeft(mobjContent)-leftPadding;brect.top=getObjTop(mobjContent)-topPadding;brect.right=getObjLeft(mobjContent)+Z+rightPadding;brect.bottom=getObjTop(mobjContent)+E+bottomPadding;if(m_bWidth)mobjContent.style.pixelWidth=m_bWidth-28;mobjContent.style.pixelHeight=
m_bHeight-41;if(m_bWidth)mobjContent.style.width=m_bWidth-28+"px";mobjContent.style.height="";if(!c.m_bFFClearHeight&&mobjContent.clientHeight<m_bHeight-41)mobjContent.style.height=m_bHeight-41+"px";setBubbleWidthToNowrapElements("getNode:NOBR","size:maxWidth");if(m_PointerXpos!=0){mobjContent.style.pixelWidth=m_bWidth-28;mobjContent.style.pixelHeight=m_bHeight-41;if(m_bWidth)mobjContent.style.width=m_bWidth-28+"px";mobjContent.style.height="";if(!c.m_bFFClearHeight&&mobjContent.clientHeight<m_bHeight-
41){mobjContent.style.height=m_bHeight-41+"px";c.m_bFFClearHeight=false}}GetBubble("bubbNp",abubbv02_bubbcolor);abubbv02_Pointer=BUBB07_NOPOINTER;m=m_PointerXpos-mobjBubble.clientWidth/2;o=m_PointerYpos-mobjBubble.clientHeight/2;if(m_PointerXpos==0){m=brect.left;o=brect.top}if(brect.right>B&&m_PointerXpos==0)m=B-mobjContent.clientWidth-10-leftPadding-rightPadding;if(brect.bottom>D&&m_PointerXpos==0)o=D-mobjContent.clientHeight-10-topPadding-bottomPadding;if(kmbdefpos&&m_PointerXpos==0){m=B-mobjContent.clientWidth-
10-leftPadding-rightPadding;o=D/2-mobjContent.clientHeight/2-topPadding-bottomPadding;brect.left=m;brect.top=o}if(m<0)m=0;if(m+mobjBubble.clientWidth>getUniWidth(p))m=getUniWidth(p)-mobjBubble.clientWidth;if(o<0)o=0;if(o+mobjBubble.clientHeight>getUniHeight(p))o=getUniHeight(p)-mobjBubble.clientHeight;mobjBubble.style.left=m+"px";mobjBubble.style.top=o+"px";mobjContent.style.left=Number(m+leftPadding)+"px";mobjContent.style.top=Number(o+topPadding)+"px";mobjBubble.style.zIndex=2;mobjContent.style.zIndex=
3;if(getObjTop(mobjBubble)<j&&getObjTop(mobjBubble)+getClientHeight(mobjBubble)>g&&getObjLeft(mobjBubble)<e&&getObjLeft(mobjBubble)+getClientWidth(mobjBubble)>d){if(e>B-d){m=e-getClientWidth(mobjBubble)-10;if(m<0)m=0}else{m=d+10;if(m+mobjBubble.clientWidth>getUniWidth(p))m=getUniWidth(p)-mobjBubble.clientWidth}mobjBubble.style.left=m+"px";mobjContent.style.left=Number(m+leftPadding)+"px"}}if(mobjContent&&e==-1&&d==-1&&j==-1&&g==-1&&n&&m_PointerDirection==0){if(m_bWidth)mobjContent.style.pixelWidth=
m_bWidth-28;if(m_bHeight)mobjContent.style.pixelHeight=m_bHeight-41;if(m_bWidth)mobjContent.style.width=m_bWidth-28+"px";mobjContent.style.height="";if(!c.m_bFFClearHeight&&mobjContent.clientHeight<m_bHeight-41){mobjContent.style.height=m_bHeight-41+"px";c.m_bFFClearHeight=false}if(queryContentWidth()>m_bWidth-28)mobjContent.style.width=queryContentWidth()+"px";GetBubble("bubbNp",abubbv02_bubbcolor);abubbv02_Pointer=BUBB07_NOPOINTER;if(m_PointerXpos>0&&m_PointerYpos>0){m=m_PointerXpos-mobjBubble.clientWidth/
2;o=m_PointerYpos-mobjBubble.clientHeight/2}else{m=B/2-mobjBubble.clientWidth/2;o=D/2-mobjBubble.clientHeight/2}if(m<0)m=0;if(m+mobjBubble.clientWidth>getUniWidth(p))m=getUniWidth(p)-mobjBubble.clientWidth;if(o<0)o=0;if(o+mobjBubble.clientHeight>getUniHeight(p))o=getUniHeight(p)-mobjBubble.clientHeight;mobjBubble.style.left=m+"px";mobjBubble.style.top=o+"px";mobjContent.style.left=Number(m+leftPadding)+"px";mobjContent.style.top=Number(o+topPadding)+"px";mobjBubble.style.zIndex=2;mobjContent.style.zIndex=
3}}$("#content a").bind("touchstart",function(T){T.stopPropagation()}).bind("touchend",function(T){T.stopPropagation()}).bind("click",function(T){T.stopPropagation()})}var imgCntr=0;
function buildBubble(c){var d="",e,g;for(g=convert(String(c),10,16);g.length<6;)g="0"+g;g="#"+g;e="bubble_"+c;d+="<div id='"+e+"' name='"+e+"' style='position:absolute; left:100; top:100;zIndex:2;visibility:hidden'>";upk.browserInfo.isIE8()||(d+="<div style=' position: absolute; top:1px; z-index:-1; left:10px; background-color:"+g+"; right: 10px; bottom: 1px;'></div>");d+="<table ID='BubbleTable' width='266' border='0' cellspacing='0' cellpadding='0'>";d+="<tr>";d+="<td valign='top'><img src='"+imagesArr["c_"+
abubbv02_bubbcolor].imageNames[3]+"' width='14' height='27' border='0' alt=''></td>";d+="<td valign='top' bgcolor='"+(grayBubbles?"#F4F2F1":"#003166")+"' width='100%' background="+imagesArr["c_"+abubbv02_bubbcolor].imageNames[4]+">";d+="<table border='0' cellspacing='0' cellpadding='0' height='27' width='100%'>";d+="<tr>";d+="<td id='bubb_cap' valign='"+(grayBubbles?"center":"bottom")+"' nowrap><a style='cursor:default' id='m_Caption' class='CurvedBoxText'></a></td>";d+="<td id='m_StaticCaption' valign='"+
(grayBubbles?"center":"bottom")+"' width='100%' align='right'><div id='blink' style='white-space:nowrap; VISIBILITY: visible'><a id='m_ActionText' style='white-space:nowrap; cursor:pointer; text-decoration:underline;' onclick='setAOpener(event)' class='CurvedBoxNav'></a></div></td>";d+="<td>&nbsp;&nbsp;</td>";d+="</tr>";d+="<tr height='"+(grayBubbles?"0":"3")+"'>";d+="<td colspan='3'></td>";d+="</tr>";d+="</table>";d+="</td>";d+="<td valign='top'><div id='closebtn_"+c+"' style='position:relative'><div><img id='img2' name='img2' src='"+
imagesArr["c_"+abubbv02_bubbcolor].imageNames[1]+"' style='display:block' width='32' height='27' border='0'><img id='img2o' name='img2o' src='"+imagesArr["c_"+abubbv02_bubbcolor].imageNames[2]+"' style='display:none' width='32' height='27' border='0'></div><div style='position:absolute; left:3px; top:7px'><a onclick='BubbleClose();return false'"+(IsTouchDevice()?"":'onMouseMove=\'BubbleimgOn("img2","img2o")\' onMouseOut=\'BubbleimgOff("img2","img2o")\'')+"><img href='#' alt='"+R_bubble_closeondemand+
"' id='imghandler' name='imghandler' src='"+imagesArr["c_"+abubbv02_bubbcolor].imageNames[0]+"' style='display:block' width='23' height='20' border='0'></a></div></div></td>";d+="</tr>";d+="<tr>";d+=!upk.browserInfo.isIE8()&&!upk.browserInfo.isIE11()?"<td "+(upk.browserInfo.isExplorer()?"style='height:1px'":"")+"> <img src='"+imagesArr["c_"+abubbv02_bubbcolor].imageNames[5]+"' style='height:100%; width: 14px'/></td>":"<td style='background-image:url("+imagesArr["c_"+abubbv02_bubbcolor].imageNames[5]+
")'></td>";d+="<td ID='BubbleSides' bgcolor='"+g+"' height='116'>&nbsp;</td>";d+=!upk.browserInfo.isIE8()&&!upk.browserInfo.isIE11()?"<td "+(upk.browserInfo.isExplorer()?"style='height:1px'":"")+"> <img src='"+imagesArr["c_"+abubbv02_bubbcolor].imageNames[6]+"' style='height:100%; width: 32px'/></td>":"<td style='background-image:url("+imagesArr["c_"+abubbv02_bubbcolor].imageNames[6]+")'></td>";d+="</tr>";d+="<tr>";d+="<td valign='top'><img src='"+imagesArr["c_"+abubbv02_bubbcolor].imageNames[7]+
"' width='14' height='14' border='0' alt=''></td>";d+="<td valign='top' width='100%'><img src='"+imagesArr["c_"+abubbv02_bubbcolor].imageNames[8]+"' width='100%' height='14px'></td>";d+="<td valign='top'><img src='"+imagesArr["c_"+abubbv02_bubbcolor].imageNames[9]+"' width='32' height='14' border='0' alt=''></td>";d+="</tr>";d+="</table>";d+="</div>";$("#screen").append(d);e="ulPointer_"+c;ul="<div id='"+e+"' name='"+e+"' style='position:absolute; left:114; top:62;zIndex:2;visibility:hidden' onMouseDown='AnchorMouseDown(); return false' onMouseUp='AnchorMouseUp(); return false'><img src='"+
imagesArr["c_"+abubbv02_bubbcolor].imageNames[10]+"' width='18' height='41' border='0' alt=''></div>";e="urPointer_"+c;ur="<div id='"+e+"' name='"+e+"' style='position:absolute; left:334; top:62;zIndex:2;visibility:hidden' onMouseDown='AnchorMouseDown(); return false' onMouseUp='AnchorMouseUp(); return false'><img src='"+imagesArr["c_"+abubbv02_bubbcolor].imageNames[11]+"' width='18' height='41' border='0' alt=''></div>";e="lhPointer_"+c;lh="<div id='"+e+"' name='"+e+"' style='position:absolute; left:62; top:114;zIndex:2;visibility:hidden' onMouseDown='AnchorMouseDown(); return false' onMouseUp='AnchorMouseUp(); return false'><img src='"+
imagesArr["c_"+abubbv02_bubbcolor].imageNames[12]+"' width='41' height='18' border='0' alt=''></div>";e="llPointer_"+c;ll="<div id='"+e+"' name='"+e+"' style='position:absolute; left:62; top:225;zIndex:2;visibility:hidden' onMouseDown='AnchorMouseDown(); return false' onMouseUp='AnchorMouseUp(); return false'><img src='"+imagesArr["c_"+abubbv02_bubbcolor].imageNames[13]+"' width='41' height='18' border='0' alt=''></div>";e="rhPointer_"+c;rh="<div id='"+e+"' name='"+e+"' style='position:absolute; left:363; top:114;zIndex:2;visibility:hidden' onMouseDown='AnchorMouseDown(); return false' onMouseUp='AnchorMouseUp(); return false'><img src='"+
imagesArr["c_"+abubbv02_bubbcolor].imageNames[14]+"' width='41' height='18' border='0' alt=''></div>";e="rlPointer_"+c;rl="<div id='"+e+"' name='"+e+"' style='position:absolute; left:363; top:225;zIndex:2;visibility:hidden' onMouseDown='AnchorMouseDown(); return false' onMouseUp='AnchorMouseUp(); return false'><img src='"+imagesArr["c_"+abubbv02_bubbcolor].imageNames[15]+"' width='41' height='18' border='0' alt=''></div>";e="btPointer_"+c;bt="<div id='"+e+"' name='"+e+"' style='position:absolute; left:114; top:254;zIndex:2;visibility:hidden' onMouseDown='AnchorMouseDown(); return false' onMouseUp='AnchorMouseUp(); return false'><img src='"+
imagesArr["c_"+abubbv02_bubbcolor].imageNames[16]+"' width='18' height='41' border='0' alt=''></div>";e="brPointer_"+c;br="<div id='"+e+"' name='"+e+"' style='position:absolute; left:334; top:254;zIndex:2;visibility:hidden' onMouseDown='AnchorMouseDown(); return false' onMouseUp='AnchorMouseUp(); return false'><img src='"+imagesArr["c_"+abubbv02_bubbcolor].imageNames[17]+"' width='18' height='41' border='0' alt=''></div>";$("#screen").append(ul);$("#screen").append(ur);$("#screen").append(lh);$("#screen").append(ll);
$("#screen").append(rh);$("#screen").append(rl);$("#screen").append(bt);$("#screen").append(br)}
function LoadAllBubbles(){for(var c=0;c<imagesXref.length;c++){var d=imagesArr[imagesXref[c]].color;abubbv02_bubbcolor=d;buildBubble(d)}$("#screen").append("<div id='content' name='content' style='position:absolute; left:114; top:138;zIndex:10;visibility:hidden'></div>");objDoneTypingA=document.createElement("SPAN");objDoneTypingA.id="bbdta";objDoneTypingA.style.position="absolute";objDoneTypingA.style.right=0;objDoneTypingA.style.marginTop="16px";objDoneTypingImg0=document.createElement("A");objDoneTypingImg0.id=
"bbdt0";objDoneTypingImg0.className="bg_button_a bubbbutton";objDoneTypingImg0.style.display="block";objDoneTypingImg0.onclick=function(){DTOnClick()};objDoneTypingImg0.href="#";spanE=document.createElement("SPAN");spanE.innerHTML=R_tcbutton_title;spanE.className="bg_button_span bubbbutton_span";if(R_tcbutton_title.length>=18){objDoneTypingImg0.style.letterSpacing="-1px";objDoneTypingImg0.style.font="bold 7pt Arial"}if(playMode=="K"){objIcon02Img=document.createElement("img");objIcon02Img.src=m_BubblePath+
template_knowit_icon02;spanEYes=document.createElement("SPAN");spanEYes.innerHTML=R_yesbutton_title;spanEYes.className="bg_button_span bubbbutton_span";spanENo=document.createElement("SPAN");spanENo.innerHTML=R_nobutton_title;spanENo.className="bg_button_span bubbbutton_span";objYesA=document.createElement("A");objYesA.id="bbyesa";objYesA.className="bg_button_a bubbbutton";objYesA.href="#";objYesA.onclick=YesOnClick;objYesA.style.styleFloat="right";objYesA.style.cssFloat="right";objNoA=document.createElement("A");
objNoA.id="bbnoa";objNoA.className="bg_button_a bubbbutton";objNoA.href="#";objNoA.style.styleFloat="right";objNoA.style.cssFloat="right";objNoA.onclick=NoOnClick}if(IsTouchDevice()){$(document).bind("touchend",function(e){bubb07_global_MM(touch(e));ob&&e.preventDefault();bubbleDrag=ob=false});$(document).bind("touchmove",function(e){bubb07_global_MM(touch(e));ob&&e.preventDefault()});$("#m_ActionText").bind("touchstart",function(e){e.stopPropagation()});$("#blink, #m_Caption, #m_StaticCaption").bind("touchstart",
function(e){if(global_moveable){bubbleDrag=true;var g=touch(e);e.preventDefault();e.stopPropagation();ob=true;X=g.clientX;Y=g.clientY}})}}
function GetBubble(c,d){mobjBubble=document.getElementById("bubble_"+d);if(mblnShowPointer){mblnShowPointer=true;switch(c){case "bubbTLp":mobjPointer=document.getElementById("ulPointer_"+d);break;case "bubbTRp":mobjPointer=document.getElementById("urPointer_"+d);break;case "bubbBLp":mobjPointer=document.getElementById("btPointer_"+d);break;case "bubbBRp":mobjPointer=document.getElementById("brPointer_"+d);break;case "bubbLTp":mobjPointer=document.getElementById("lhPointer_"+d);break;case "bubbRTp":mobjPointer=
document.getElementById("rhPointer_"+d);break;case "bubbLBp":mobjPointer=document.getElementById("llPointer_"+d);break;case "bubbRBp":mobjPointer=document.getElementById("rlPointer_"+d);break;case "bubbNp":mblnShowPointer=false}}var e=getElementsByAttribute("id","BubbleSides"),g;for(g in e)e[g].height=mobjContent.clientHeight;e=getElementsByAttribute("id","BubbleTable");for(g in e)e[g].width=mobjContent.clientWidth+leftPadding+rightPadding;load_buttons()}
function setBubbleWidthToNowrapElements(c,d){try{c=c.split(":")[1];for(var e=mobjContent.getElementsByTagName("*"),g=0,j=0;j<e.length;j++)if(e[j].nodeName==c){var n=e[j].offsetLeft;break}if(d.indexOf("size")!=-1){for(j=0;j<e.length;j++)if(e[j].nodeName==c)if(e[j].offsetWidth>g)g=e[j].offsetWidth;if(g+n>mobjContent.clientWidth)mobjContent.style.width=g+n+"px"}if(d.indexOf("id")!=-1){var m=d.split(":")[1];for(j=0;j<e.length;j++)if(e[j].id==m){mobjContent.style.width=e[j].offsetWidth+n+"px";break}}}catch(o){}}
function queryContentWidth(){try{for(var c=mobjContent.getElementsByTagName("*"),d=0,e=0;e<c.length;e++)if(c[e].nodeName.toUpperCase()=="NOBR"||c[e].nodeName.toUpperCase()=="TABLE"){var g=c[e].offsetWidth+c[e].offsetLeft;if(g>d)d=g}return d}catch(j){}}var popupMenu=0;showAttachments=false;var fullength=0;function ActionMenu(){this.Open=_AOpen;this.Close=_AClose;this.Refresh=_ARefresh;this.IsOnScreen=_AIsOnScreen;this.PopupIsOpened=_APopupIsOpened;this.onScreen=false}
function setAOpener(c){if(document.all)popupOpener=event.srcElement;else{event=c;popupOpener=event.target}OnAction()}
function _AOpen(){if(!popupMenu){popupMenu=document.createElement("DIV");document.body.appendChild(popupMenu);myspan=document.createElement("SPAN");myspan.setAttribute("id","_myspan_");myspan.setAttribute("style","font:8pt Arial;");document.body.appendChild(myspan)}nextNode=popupOpener;popupOpener.positionTop=0;for(popupOpener.positionLeft=0;nextNode.nodeName!="BODY";){popupOpener.positionTop+=nextNode.offsetTop;popupOpener.positionLeft+=nextNode.offsetLeft;nextNode=nextNode.parentNode}popupOpenerHeight=
popupOpener.offsetHeight;popupMenu.style.zIndex=1E4;popupMenu.style.textAlign="left";popupMenu.aLink="0000FF";popupMenu.link="0000FF";popupMenu.vLink="0000FF";popupMenu.style.position="absolute";popupMenu.style.top=popupOpener.positionTop+popupOpenerHeight-0-6+"px";if(upk.browserInfo.isIE10orHigher()){popupMenu.style.left=popupOpener.positionLeft-65+"px";popupMenu.style.width="auto"}else{document.all||upk.browserInfo.isiOS7()||upk.browserInfo.isSafari();popupMenu.style.left=popupOpener.positionLeft-
65+"px";popupMenu.style.width="140px"}popupMenu.style.display="block";popupMenu.className="AMenu";popupMenu.style.borderStyle="solid";popupMenu.style.borderWidth="1px";popupMenu.style.borderColor="gray";popupMenu.style.paddingTop="8px";popupMenu.style.paddingBottom="8px";popupMenu.style.paddingLeft="8px";popupMenu.style.paddingRight="8px";popupMenu.aLink="0000FF";popupMenu.link="0000FF";popupMenu.vLink="0000FF";popupMenu.text="black";this.onScreen=true}
function _APopupIsOpened(){if(popupMenu==0)return false;return popupMenu.isOpen}function _AClose(){window.setTimeout("popupMenuHide()",200);this.onScreen=false}
function OnActionSelection(c,d){this.onScreen=false;c=="Next"&&OnMenuAlternative("TeacherForward(false)");c=="Prev"&&OnMenuAlternative("TeacherBack()");c=="Start"&&OnMenuAlternative("TeacherFastBack()");c=="Alt"&&OnMenuAlternative("TeacherAlter()");c=="Conc"&&OnMenuAlternative(concepts[d].url,concepts[d].width,concepts[d].height,concepts[d].infotype,concepts[d].infokey);c=="Info"&&OnMenuAlternative(screens[showScreen].infoblocks[d].simpleurl,screens[showScreen].infoblocks[d].width,screens[showScreen].infoblocks[d].height,
screens[showScreen].infoblocks[d].infotype,screens[showScreen].infoblocks[d].infokey);c=="Prefs"&&OnMenuAlternative("OpenPreferences()");c=="Share"&&OnMenuAlternative("Share()");c=="Help"&&OnMenuAlternative("LaunchHelp()","../../");c=="LogOut"&&OnMenuAlternative("LogOut()");c=="CloseT"&&OnMenuAlternative("OnClose()");c=="CloseW"&&CloseAction();c=="Resume"&&OnMenuAlternative("Menu_Resume()");c=="Printit"&&OnMenuAlternative("ShowPrintit()");c=="AskAnExpert"&&OnMenuAlternative("AskAnExpert()");c=="ProvideFeedback"&&
OnMenuAlternative("ProvideFeedback()")}function CorrectPopup(){try{obj=binterf.GetActionLink();h=obj.offsetHeight;popupMenu.show(0,h,0,0,obj);sp=popupMenu.getElementById("actionspan");hsp=sp.offsetHeight;wsp=sp.offsetWidth;popupMenu.show(0,h,wsp+20,hsp+20,obj)}catch(c){}this.onScreen=true}
function PopupToggle(){if(popupMenu.getElementsByTagName("DIV")[1].style.display=="none"){if(!upk.browserInfo.isExplorer()||upk.browserInfo.isiOS7()||upk.browserInfo.isSafari())if(fullength>100)popupMenu.style.width=""+(fullength+40)+"px";popupMenu.getElementsByTagName("DIV")[1].style.display="block"}else{if(upk.browserInfo.isIE10orHigher())popupMenu.style.width="auto";else if(!upk.browserInfo.isExplorer()||upk.browserInfo.isiOS7()||upk.browserInfo.isSafari())popupMenu.style.width="140px";popupMenu.getElementsByTagName("DIV")[1].style.display=
"none"}showAttachments=true;CorrectPopup()}var _topLevelLmsMode="";function ReducedTOCMode(){if(_inToc==false)return false;if(parent.parent._see_also==true)return true;if(parent.parent._sco==true)return true;if(parent.parent._associated_content==true)return true}function CheckKPTMode(){if(_topLevelLmsMode=="")_topLevelLmsMode=GetTopLevelLmsMode();if(Kpath_launch==true&&_topLevelLmsMode=="LMS"&&ReducedTOCMode()==true)return true;return _topLevelLmsMode=="KPT"}
function lms_IsKPathPortalAvailable(){__alert("lms_IsKPathPortalAvailable() called");if(CheckKPTMode()==false)return false;if(parent.urlParser.GetParameter("launchFromKPath")==null)return"";return lms_GetKPathPortalUrl().length>0}function lms_GetKPathPortalUrl(){__alert("lms_GetKPathPortalUrl() called");if(Kpath_launch==false)return"";var c="";try{}catch(d){}return Kpath_home_URL}
function AskAnExpert(){var c=lms_GetMentoringUrl(parent.topicID);parent.setDlgCtx("expertAdvice");parent.showDialog(c,-1,-1,510,430,true,96,"../../../")}function ProvideFeedback(){var c=lms_GetFeedbackUrl(parent.topicID);parent.setDlgCtx("feedback");parent.showDialog(c,-1,-1,510,430,true,96,"../../../")}
function lms_IsMentoringAvailable(){__alert("lms_IsMentoringAvailable() called");return document.LmsCom.doGetUPKValue("upk.mentoring_available")&&document.LmsCom.doGetUPKValue("upk.anonymous")=="0"}function lms_GetMentoringUrl(){__alert("lms_GetMentoringUrl() called");return Kpath_base_URL+"/Mentoring/NewMentQuest.aspx?Path="+window.location.href.split("?")[0]+"&GUID="+lms_store.cguid+"&FeedbackType=1"+_feedbackUrlArgs}
function lms_IsFeedbackAvailable(){__alert("lms_IsFeedbackAvailable() called");return document.LmsCom.doGetUPKValue("upk.feedback_available")&&document.LmsCom.doGetUPKValue("upk.anonymous")=="0"}function lms_GetFeedbackUrl(){__alert("lms_GetFeedbackUrl() called");return Kpath_base_URL+"/Mentoring/NewMentQuest.aspx?Path="+window.location.href.split("?")[0]+"&GUID="+lms_store.cguid+"&FeedbackType=2"+_feedbackUrlArgs}
function _ARefresh(c,d,e,g,j,n,m,o){if(this.onScreen){j="";j+="<div id='actionspan' style='font:8pt Arial; width:100%;' nowrap=yes>";j+="<a href='#'></a>";if(playMode=="T"){if(c){j+="<li><a href='#' onclick='OnActionSelection(\"Next\");return false;'>";j+=R_menu_nextstep;j+="</a></li>"}if(d){j+="<li><a href='#' onclick='OnActionSelection(\"Prev\");return false;'>";j+=R_menu_prevstep;j+="</a></li>"}if(e){j+="<li><a href='#' onclick='OnActionSelection(\"Start\");return false;'>";j+=R_menu_start;j+=
"</a></li>"}if(g){j+="<li><a href='#' onclick='OnActionSelection(\"Alt\");return false;'>";j+=R_menu_alternatives;j+="</a></li>"}c=0;if(concepts.length>0){j+="<li>";j+="<a href='#' onclick='OnActionSelection(\"Conc\",\"0\");return false;'>";j+=R_menu_concepts;j+="</a></li>"}if(screens[showScreen].infoblocks.length>0){j+="<li><a href='javascript:EmptyFunction()' onclick='PopupToggle(\"infodiv\")'>";j+=R_menu_infoblocks;j+="</a></li>";j+="<div id='infodiv' style='display:none'>";if(!upk.browserInfo.isExplorer())for(c=
0;c<screens[showScreen].infoblocks.length;c++){document.getElementById("_myspan_").innerHTML=fixHTMLString(screens[showScreen].infoblocks[c].tooltip);d=document.getElementById("_myspan_").offsetWidth;if(fullength<d)fullength=d;document.getElementById("_myspan_").innerHTML=""}for(c=0;c<screens[showScreen].infoblocks.length;c++){j+=upk.browserInfo.isIE10orHigher()?"<li style='list-style-type:circle;text-indent:18px; width: 100%;'>":!upk.browserInfo.isExplorer()||upk.browserInfo.isiOS7()||upk.browserInfo.isSafari()?
"<li style='list-style-type:circle;text-indent:18px; width: "+(fullength+40)+"px;'>":"<li style='list-style-type:circle;text-indent:18px; width: 140px;'>";j+="<a href='#' onclick='OnActionSelection(\"Info\",";j+=""+c;j+=");return false;'>";j+=fixHTMLString(screens[showScreen].infoblocks[c].tooltip);j+="</a></li>"}j+="</div>"}}if(playMode=="S"){j+="<li><a href='#' onclick='OnActionSelection(\"Resume\");return false;'>";j+=R_interface_resume;j+="</a></li>"}if(playMode=="T"||playMode=="S")if(o){j+="<li><a href='#' onclick='OnActionSelection(\"Printit\");return false;'>";
j+=R_interface_printit;j+="</a></li>"}if(lms_IsMentoringAvailable()==true){j+="<li><a href='#' onclick='OnActionSelection(\"AskAnExpert\");return false;'>";j+=R_interface_askexpert;j+="</a></li>"}if(lms_IsFeedbackAvailable()==true){j+="<li><a href='#' onclick='OnActionSelection(\"ProvideFeedback\");return false;'>";j+=R_interface_providefeedback;j+="</a></li>"}if(PlayerConfig.EnableCookies&&UserPrefs.EnablePreferences){j+="<li><a href='#' onclick='OnActionSelection(\"Prefs\");return false;'>";j+=
R_menu_preferences;j+="</a></li>"}o=""+parent.location;o=o.indexOf("localhost")>-1||o.indexOf("127.0.0.1")>-1;if(UIComponents.ShareLink&&!o&&GetTopLevelLmsMode()!="LMS"){j+="<li><a href='#' onclick='OnActionSelection(\"Share\");return false;'>";j+=R_menu_share;j+="</a></li>"}if(UIComponents.TopicHelp==true){j+="<li><a href='#' onclick='OnActionSelection(\"Help\");return false;'>";j+=R_menu_help;j+="</a></li>"}try{if((GetTopLevelLmsMode()=="KPT"||Kpath_launch==true)&&lms_IsKPathLogoutAvailable()){j+=
"<li><a href='#' onclick='OnActionSelection(\"LogOut\");return false;'>";j+=R_toctooltip_kpathlogout;j+="</a></li>"}}catch(p){}j+="<li><a href='#' onclick='OnActionSelection(\"CloseT\");return false;'>";j+=R_menu_Close;j+="</a></li>";j+="</span>";popupMenu.innerHTML=j;if(upk.browserInfo.isIE10orHigher()){$("#actionspan *").width("100%");$("#actionspan *").css("white-space","nowrap")}sH=document.getElementsByTagName("body")[0].clientHeight+getScrollTop();if(popupMenu.offsetTop+popupMenu.clientHeight>
sH)popupMenu.style.top=""+(sH-popupMenu.clientHeight)+"px";sW=document.getElementsByTagName("body")[0].clientWidth+getScrollLeft();if(popupMenu.offsetLeft+popupMenu.clientWidth>sW)popupMenu.style.left=""+(sW-popupMenu.clientWidth)+"px";setTimeout('try{popupMenu.document.all["actfocus"].focus();}catch(e){};',100);CorrectPopup()}}function popupMenuHide(){if(showAttachments==true){showAttachments=false;actionMenu.onScreen=true}else popupMenu.style.display="none"}
function _AIsOnScreen(){return this.onScreen}function EmptyFunction(){}var logger_enabled_query=false;function log(c){logger_enabled_query&&window.top.console&&window.top.console.log(c)}var datasourceroot="querydb/",ConvertDbSelector={t:"text",u:"ctxod",e:"ctxex",r:"role",g:"genctx"},q_search_and=" and ",q_search_or=" or ";
function ToHalfWidth(c){for(var d="",e=0;e<c.length;e++){var g="\u30f2\u30a1\u30a3\u30a5\u30a7\u30a9\u30e3\u30e5\u30e7\u30c3\u30fc\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f3".indexOf(c.charAt(e));d+=g!==-1?"\uff66\uff67\uff68\uff69\uff6a\uff6b\uff6c\uff6d\uff6e\uff6f\uff70\uff71\uff72\uff73\uff74\uff75\uff76\uff77\uff78\uff79\uff7a\uff7b\uff7c\uff7d\uff7e\uff7f\uff80\uff81\uff82\uff83\uff84\uff85\uff86\uff87\uff88\uff89\uff8a\uff8b\uff8c\uff8d\uff8e\uff8f\uff90\uff91\uff92\uff93\uff94\uff95\uff96\uff97\uff98\uff99\uff9a\uff9b\uff9c\uff9d".charAt(g):
c.charCodeAt(e)>=65281&&c.charCodeAt(e)<=65375?String.fromCharCode(c.charCodeAt(e)-65248):c.charAt(e)}return d}
var QueryParser=function(){function c(j){var n=[];switch(j[0].Op){case "&":case "|":n=c(j[1]);for(var m=2;m<j.length;m++){n=n.concat(c(j[m]));n.push({a:"o",p:j[0].Op})}return n;case "EM":n[0]={a:"s",d:"e",p:j[0].App+"$"+Escape.MyEscape(j[1])};for(m=2;m<j.length;m++){n.push({a:"s",d:"e",p:j[0].App+"$"+Escape.MyEscape(j[m])});n.push({a:"o",p:"&"})}return n;case "SM":return[{a:"s",d:"g",p:j}];default:console.log("Error: Unknown operator "+j[0].Op)}return null}function d(j,n){for(log("QueryProcessor.SM "+
j+" "+n);;){var m=g[e[e.length-1].st][j];if(m===10)return false;if(m===0)return true;if(m>0){e.push({st:m,se:n});return false}if(m<0){var o,p=e.length,B=e[p-1],D=e[p-2];p=e[p-3];switch(-m){case 1:o={ev:"{a:'s', d:'"+B.se.charAt(0)+"', p:'"+B.se.slice(1)+"'}",pr:B.se.slice(1)};break;case 2:if(B.se==="!")o={ev:"{a:'s', d:'"+D.se.charAt(0)+"', p:'"+D.se.slice(1)+"', m:'"+B.se+"'}"};else{o=D.se.slice(1,parseInt(B.se)+1)+"$002A";o={ev:"{a:'s', d:'"+D.se.charAt(0)+"', p:'"+D.se.slice(1)+"'}, {a:'s', d:'"+
D.se.charAt(0)+"', p:'"+o+"'}, {a:'o', p:'|'}"}}o.pr=D.se.slice(1);break;case 3:o={ev:p.se.ev+", "+B.se.ev+", {a:'o', p:'"+D.se+"'}",pr:p.se.pr+(D.se==="|"?" or ":" ")+B.se.pr};break;case 4:o={ev:D.se.ev,pr:"("+D.se.pr+")"};m=-3}if(m===-1||m===-2){o.pr=decodeURIComponent(o.pr);if(o.pr.search(/\s/)!==-1)o.pr='"'+o.pr+'"'}e.length+=m;e.push({st:g[e[e.length-1].st][6],se:o})}}}var e,g=[0,[2,3,0,0,0,0,4],[-1,-1,-1,-1,5,-1,0],[2,3,0,0,0,0,6],[0,0,0,7,0,10,0],[-2,-2,-2,-2,-2,-2,0],[0,0,8,7,0,0,0],[2,3,
0,0,0,0,9],[-4,-4,-4,-4,-4,-4,0],[-3,-3,-3,-3,-3,-3,0]];return{Parse:function(j,n){log("QueryProcessor.Parse");if(j==="XDT"){var m=c(n);return JSON.stringify(m)}q_search_and=" "+R_search_AND.toLowerCase()+" ";q_search_or=" "+R_search_OR.toLowerCase()+" ";var o;if("URI"===j){m=/\(|\)|\+|-|[u,e,k,r,g]|!|\d|'[^']+'/g;o=["(",")","+","-","u","e","t","r","g","!","0","1","2","3","4","5","6","7","8","9"]}else{m=RegExp("\\(|\\)|"+q_search_and+"|"+q_search_or+'|"[^"]+"|[^ \\(\\)]+(?=\\(|\\)|\\s|$)',"gi");o=
["(",")",q_search_and,q_search_or]}var p=[1,2,3,3,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4],B=[0,0,"&","|",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];if(j!=="URI"){n=ToHalfWidth(n);n=n.toLowerCase()}var D=null,Z=null;e=[];e.push({st:1,se:0});for(var E,H,T=0,ca="t";(E=m.exec(n))!=null;){E=E[0];var S=0;for(H in o)if(E===o[H]){S=p[H];if(B[H])E=B[H];break}if(S===5)ca=E;else{if(S===3)T=0;if((S===0||S===1)&&T){if(d(3,"&"))return;T=0}if(S===0){if(E.charAt(0)==='"'||E.charAt(0)==="'")E=E.slice(1,E.length-1);if("URI"!==j){if(E.length>
1){T=E[E.length-1];if(T==="%"||T==="*")E=E.slice(0,-1)}E=Escape.MyEscape(E.toLowerCase())}E=ca+E;T=1}if(d(S,E)){log("QueryProcessor.Parse return");return}}}if(!d(5,"$")){D=e[1].se.ev;Z=e[1].se.pr}log("QueryProcessor.Parse "+D+" "+Z);return D}}}(),QueryProcessor={rr:null,Start:function(c,d){log("QueryProcessor.Start");this.rr=d;if(c.slice(0,1)==="["&&c.slice(-1)==="]")this.qa=eval(c);else eval("this.qa = ["+c+"]");this.qp=0;this.Eval()},Eval:function(){var c=this.qa[this.qp];if(c.a==="s")if(c.d===
"g")SearchSM(c.p,function(e){QueryProcessor.ReportResult(e)});else{var d=c.d==="t"?false:true;if(c.m==="!")d=!d;SearchDBs[c.d].Search(c.p,d)}else if(c.a==="o"){c.p==="&"?this.qa[this.qp-2].And(this.qa[this.qp-1]):this.qa[this.qp-2].Or(this.qa[this.qp-1]);this.qp-=2;this.qa.splice(this.qp+1,2);this.Next()}},Next:function(){if(this.qa.length===1)this.rr(this.qa[0].rs);else{this.qp++;this.Eval()}},ReportResult:function(c){log("QueryProcessor.ReportResult r = "+c);log("QueryProcessor.ReportResult this.qa = "+
this.qa+" this.qp = "+this.qp+" "+this.qa[this.qp]);this.qa[this.qp]=c;this.Next()}};function ReadBase64_6(c){if(c===43)return 62;if(c===45)return 63;if(c<58)return c-48;return c<91?c-55:c-61}function ReadBase64_32(c){var d,e;e=0;for(d=32;d&32;){d=ReadBase64_6(c.s.charCodeAt(c.p));e<<=5;e|=d&31;c.p++}return e}function ReadBase64_ITP(c,d){for(var e=[],g,j,n=0;c.p<c.s.length;){j=ReadBase64_32(c);for(g=1===j?ReadBase64_32(c):1;g;){n+=j;e.push(new d(n));g--}}return e}
function SearchDB(c){log("SearchDB dbid = "+c);this.db_id=c;this.ResetIndex();this.request_count=this.request_total=0}SearchDB.prototype.ResetIndex=function(){this.index=[];this.index.push({key:null,node:"1"})};
SearchDB.prototype.k=function(c){log("SearchDB.k() args.length = "+c.length);for(var d="",e=0;e<c.length;e++){var g={s:c[e],p:0},j,n="";j=ReadBase64_32(g);var m;m=e===c.length-1?this.index[this.index_insert_position]:{};m.node=j>0?g.s.slice(g.p,g.p+j):0;g.p+=j;j=ReadBase64_32(g);n+=d.slice(0,j);j=ReadBase64_32(g);n+=g.s.slice(g.p,g.p+j);g.p+=j;if(n.length>0)m.key=n;for(d=n;g.p<g.s.length;){m.values=[];j=ReadBase64_32(g);m.values.push(g.s.slice(g.p,g.p+j));g.p+=j}if(e<c.length-1){this.index.splice(this.index_insert_position,
0,m);this.index_insert_position++}}this.d()};SearchDB.prototype.LoadScript=function(c){CDB=this;LoadXMLDocArray(datasourceroot+ConvertDbSelector[this.db_id]+"/"+c+".xml",function(d){return function(e){d.LoadScript_Callback(e)}}(SearchDBs[this.db_id]),null,"N",false);this.request_total++;this.request_count++};SearchDB.prototype.LoadScript_Callback=function(c){CDB=this;CDB.k(c)};
SearchDB.prototype.Search=function(c,d,e){log("SearchDB.Search() = "+c);this.Search_CallBack=e?e:QueryProcessor.ReportResult;this.RequestCount=0;this.search=c;this.exact_match=d;this.results=new SearchResultSet(null);if(this.search.length!==0){this.index_match=0;this.d=this.d1;this.d()}};
SearchDB.prototype.IndexSearch=function(){log("SearchDB.IndexSearch() this.index.length = "+this.index.length);var c;for(c=this.index_match;c<this.index.length;c++)if(null==this.index[c].key||this.search<=this.index[c].key)break;this.index_match=c;log("SearchDB.IndexSearch() this.index_match = "+this.index_match)};
SearchDB.prototype.d1=function(){log("SearchDB.d1()");this.IndexSearch();if(null!=this.index[this.index_match].key&&this.search===this.index[this.index_match].key)if(!this.exact_match&&this.index[this.index_match].values.length<2){this.results.Or(new SearchResultSet(this.index[this.index_match].values[0]));this.index_match++;this.d=this.d2;this.d()}else{var c=this.index[this.index_match].values,d;for(d in c){this.results.Or(new SearchResultSet(c[d]));if(this.exact_match)break}this.ReportResult(this.results)}else if(this.index[this.index_match].node!=
0){this.index_insert_position=this.index_match;this.LoadScript(this.index[this.index_match].node)}else if(this.exact_match)this.ReportResult(this.results);else{this.d=this.d2;this.d()}};
SearchDB.prototype.d2=function(){log("SearchDB.d2()");if(this.index[this.index_match].node!==0){this.index_insert_position=this.index_match;this.LoadScript(this.index[this.index_match].node)}else if(null!==this.index[this.index_match].key&&this.index[this.index_match].key.substring(0,this.search.length)===this.search){this.results.Or(new SearchResultSet(this.index[this.index_match].values[0]));this.index_match++;this.d2()}else{log("SearchDB.d2() this.results = "+this.results);this.ReportResult(this.results)}};
SearchDB.prototype.ReportResult=function(c){log("SearchDB.ReportResult() r = "+c);this.db_id!=="g"?QueryProcessor.ReportResult(c):this.Search_CallBack(c)};var SearchDBs={t:new SearchDB("t"),u:new SearchDB("u"),e:new SearchDB("e"),r:new SearchDB("r"),g:new SearchDB("g")},CDB=null;function SearchResult(c){this.index=c;this.weight=1}function SearchResultSet(c){this.rs=c?ReadBase64_ITP({s:c,p:0},SearchResult):[]}SearchResultSet.prototype.Or=function(c){this.AOR(c,true)};
SearchResultSet.prototype.AOR=function(c,d,e){var g,j;for(j=g=0;g<c.rs.length;g++){for(;j<this.rs.length&&this.rs[j].index<c.rs[g].index;)j++;if(j===this.rs.length||this.rs[j].index!==c.rs[g].index)this.rs.splice(j,0,c.rs[g]);else{var n=this.rs[j].weight,m=c.rs[g].weight;this.rs[j].weight=d?Math.max(n,m):n+m*e}}};SearchResultSet.prototype.Combine=function(c,d){this.AOR(c,false,d)};
SearchResultSet.prototype.GetMaxWeight=function(){for(var c=0,d=0;d<this.rs.length;d++)if(this.rs[d].weight>c)c=this.rs[d].weight;return c};SearchResultSet.prototype.CutOffByLimit=function(c){for(var d=0;d<this.rs.length;d++)if(this.rs[d].weight<c){this.rs.splice(d,1);d--}};
SearchResultSet.prototype.And=function(c){var d,e;for(e=d=0;d<c.rs.length&&e<this.rs.length;d++){for(;e<this.rs.length&&this.rs[e].index<c.rs[d].index;)this.rs.splice(e,1);if(e<this.rs.length&&c.rs[d].index===this.rs[e].index){this.rs[e].weight=Math.min(this.rs[e].weight,c.rs[d].weight);e++}}this.rs.splice(e,this.rs.length-e)};
var EcidComparer={expstr:"",Init:function(c){var d=null;if(c&&c.length>0){if(d=QueryParser.Parse("URI",c))this.expstr=d}else this.expstr=""},Compare:function(c){if(this.expstr.length==0)return false;if(!c)return false;eval("exparray = ["+this.expstr+"]");for(var d=0;d<exparray.length;d++){exparray[d].l=false;if(exparray[d].a.toLowerCase()=="s")for(var e=0;e<c.length;e++)if(matchString(c[e],exparray[d].p))exparray[d].l=true}EcidCompareStack.Init();for(d=0;d<exparray.length;d++)if(exparray[d].a.toLowerCase()==
"s")EcidCompareStack.Push(exparray[d]);else{c=EcidCompareStack.Pop();e=EcidCompareStack.Pop();c.l=exparray[d].p=="|"?c.l||e.l:c.l&&e.l;EcidCompareStack.Push(c)}return EcidCompareStack.Pop().l}};function StackItem(c,d,e){this.a=c;this.p=d;this.l=e}
var EcidCompareStack={Init:function(){this.stArray=[];this.pTop=-1},Push:function(c){if(this.stArray.length-this.pTop==1){this.stArray[this.stArray.length]=new StackItem(c.a,c.p,c.l);this.pTop++}else{this.pTop++;this.stArray[this.pTop]=new StackItem(c.a,c.p,c.l)}},Pop:function(){if(this.pTop!=-1)return this.stArray[this.pTop--]}};function matchCharacter(c,d){return ToHalfWidth(c)==ToHalfWidth(d)}
function replaceDotAndCircle(c){var d=null;d=c.replace(RegExp("\uff9e","g"),"#");d=d.replace(RegExp("\uff9f","g"),"*");for(c=0;c<20;c++)d=d.replace(RegExp("\u30ac\u30ae\u30b0\u30b2\u30b4\u30b6\u30b8\u30ba\u30bc\u30be\u30c0\u30c2\u30c5\u30c7\u30c9\u30d0\u30d3\u30d6\u30d9\u30dc".charAt(c),"g"),"\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30cf\u30d2\u30d5\u30d8\u30db".charAt(c)+"#");for(c=0;c<5;c++)d=d.replace(RegExp("\u30d1\u30d4\u30d7\u30da\u30dd".charAt(c),
"g"),"\u30cf\u30d2\u30d5\u30d8\u30db".charAt(c)+"*");return d}function matchString(c,d,e){if(!c)return false;e||(e=false);var g=c.length,j=d.length;if(g==0&&j==0)return true;if(g==0&&j!=0)return false;if(g!=0&&j==0)return false;if(g!=j)return false;c=e?c:c.toLowerCase();e=e?d:d.toLowerCase();d=replaceDotAndCircle(c);e=replaceDotAndCircle(e);if(d.length!=e.length)return false;for(c=0;c<d.length;c++)if(!matchCharacter(d.substr(c,1),e.substr(c,1)))return false;return true}
function AbsUrl(c){return c}
function LoadXMLDoc(c,d,e,g,j){var n=AbsUrl(c);if(j==undefined)j=false;var m=null;try{if(window.location.href.substr(0,7).toLowerCase()=="http://"||window.location.href.substr(0,8).toLowerCase()=="https://")m=new XMLHttpRequest;if(window.location.href.substr(0,7).toLowerCase()=="file://"&&IsTouchDevice())m=new XMLHttpRequest}catch(o){}finally{if(m==null)m=new ActiveXObject("Microsoft.XMLHTTP")}m.onreadystatechange=function(){state_Change(n,m,d,e,g)};m.open("GET",n,!j);g=="PING"&&m.setRequestHeader("If-Modified-Since",
"Sat, 1 Jan 2005 00:00:00 GMT");m.send(null)}
function state_Change(c,d,e,g,j){if(d.readyState==4)if(d.status==200||d.status==0&&j!="PING"){if(d.responseXML==null||d.responseXML.documentElement==null){c=null;try{c=new ActiveXObject("Microsoft.XMLDOM");c.async=false;c.loadXML(d.responseText)}catch(n){c=(new window.DOMParser).parseFromString(d.responseText,"application/xml")}g=d.responseText;d={};d.responseXML=c;d.responseText=g}e(d,j)}else if(g){j!="PING"&&alert(c+" not found. Logged...");g(j)}else alert("Problem retrieving data: "+d.statusText)}
function LoadXMLDocArray(c,d,e,g,j){LoadXMLDoc(c,j?XMLDocArrayWorker2:XMLDocArrayWorker,e,{nodeName:g,returnFunction:d},false)}function XMLDocArrayWorker(c,d){for(var e=[],g=c.responseXML.getElementsByTagName(d.nodeName),j=0;j<g.length;j++){var n=g[j];(n=n.textContent?n.textContent:n.text)||(n="");var m=n.length;if(m>=2)if(n.substr(0,1)=='"'&&n.substr(m-1,1)=='"')n=n.substr(1,m-2);e[e.length]=n}d.returnFunction(e)}
function XMLDocArrayWorker2(c,d){for(var e=[],g=c.responseXML.getElementsByTagName(d.nodeName),j=0;j<g.length;j++){for(var n=g[j],m=n.attributes[0].value,o="",p=0;p<n.childNodes.length;p++)if(n.childNodes[p].xml)o+=n.childNodes[p].xml;else{var B=new XMLSerializer;o+=B.serializeToString(n.childNodes[p])}e[e.length]=m+"="+o}d.returnFunction(e)}var intPos=window.location.search.toLowerCase().indexOf("aicc_url"),intPos2=window.location.search.toLowerCase().indexOf("aicc_sid");
function getOnlyPath(c){for(;c.indexOf("\\")!=-1;)c=c.replace("\\","/");return c.substr(0,c.lastIndexOf("/"))}if(intPos>-1&&intPos2>-1){if(LmsConfig.AiccAppletPath==""){var currentPgPath=window.location.protocol+"//"+window.location.host+getOnlyPath(window.location.pathname);fullPath=currentPgPath+"/"+lms_path+"aicc"}else fullPath=LmsConfig.AiccAppletPath;document.write("<div style='position: absolute;'><applet NAME='GetHTTPPostData' codebase='"+fullPath+"' archive='gethttppostdata.jar' code='GetHTTPPostData' width='1' height='1' MAYSCRIPT><param name='permissions' value='sandbox' /></applet></div>")}
function InsertRuntimeAPI(c){if(Kpath_launch==false)setTimeout(c,1);else{var d=findKPathAPIFrame(window);if(d==null){d=document.createElement("iframe");d.id="KPATH_API_FRAME";d.style.display="none";document.body.appendChild(d);if(c)if(navigator.appName=="Microsoft Internet Explorer")d.attachEvent("onload",c);else d.onload=c;d.src=Kpath_Runtime_API}else setTimeout(c,1)}}
function findKPathAPIFrame(c){var d=null,e=0,g=c;try{for(;g!=null;){d=g.document.getElementById("KPATH_API_FRAME");if(d!=null)return d.contentWindow;e++;if(e>7)break;if(g===g.parent)break;g=g.parent}if(c.top.opener!=null)return findKPathAPIFrame(c.top.opener)}catch(j){}return null}var _GlobalLmsComFactory=null;function GetLmsComFactory(){_GlobalLmsComFactory==null&&alert(R_initializelmscom_not_called);return _GlobalLmsComFactory}
function CheckForLMSAPI(){if(_lmsMode=="LMS"&&!(_GlobalLmsComFactory.api_type=="scorm2004"||_GlobalLmsComFactory.api_type=="scorm12"||_GlobalLmsComFactory.api_type=="aicc"||_GlobalLmsComFactory.api_type=="kpath"&&findKPathAPIFrame(window)))alert(R_scorm_noapi);_lmsMode=="KPT"&&!findKPathAPIFrame(window)&&alert(R_scorm_noapi)}function InitializeLmsCom(){_GlobalLmsComFactory=new LmsComFactory(window.location.search)}
function LmsComFactory(c){this.api_type="none";this.launch_arg=c;this.aicc_sid=this.aicc_url="";this.scorm_api_2004=this.scorm_api_12=null;c=this.launch_arg.substring(1).split("&");lmslog.addEntry(0,"LmsComFactory","strArgs",c);for(var d=0;d<c.length;d++){strArg=c[d];var e;e=this.CheckParam(strArg,"aicc_url=");if(e!="")this.aicc_url=e.substr(0,4).toLowerCase()!="http"?LmsConfig.AiccUrlProtocol+e:e;else{e=this.CheckParam(strArg,"aicc_sid=");if(e!="")this.aicc_sid=e}}if(LmsConfig.ScormVersion!=="1.2")this.scorm_api_2004=
this.FindScorm2004API();if(this.scorm_api_2004==null&&LmsConfig.ScormVersion!=="2004")this.scorm_api_12=this.FindScorm12API();if(this.aicc_url!=""&&this.aicc_sid!="")this.api_type="aicc";else if(Kpath_launch==true)this.api_type="kpath";else if(this.scorm_api_2004!=null)this.api_type="scorm2004";else if(this.scorm_api_12!=null)this.api_type="scorm12"}
LmsComFactory.prototype.CreateLmsCom=function(){if(this.api_type=="aicc")return new LmsComAICC(this.aicc_url,this.aicc_sid);else if(this.api_type=="scorm2004")return new LmsComScorm2004;else if(this.api_type=="kpath"){var c=new LmsComKPath;c.API=this.scorm_api_2004;return c}else if(this.api_type=="scorm12")return new LmsComScorm12;return PlayerConfig.EnableCookies?new LmsComCookie:new LmsComBase};
LmsComFactory.prototype.FindScorm12API=function(){try{var c=this.FindWindowScorm12API(window);if(c==null&&top.window.opener!=null&&!top.window.opener.closed)c=this.FindWindowScorm12API(top.window.opener);return c}catch(d){return null}};LmsComFactory.prototype.FindWindowScorm12API=function(c){for(var d=0;c.API==null&&c.parent!=null&&c.parent!=c;){d++;if(d>500){lmslog.addEntry(0,"FindScorm12API","",R_scorm_apideep);return null}c=c.parent}return c.API};
LmsComFactory.prototype.FindScorm2004API=function(){try{var c=this.FindWindowScorm2004API(window);if(c==null&&top.window.opener!=null&&!top.window.opener.closed)c=this.FindWindowScorm2004API(top.window.opener);return c}catch(d){return null}};LmsComFactory.prototype.FindWindowScorm2004API=function(c){for(var d=0;c.API_1484_11==null&&c.parent!=null&&c.parent!=c;){d++;if(d>500){lmslog.addEntry(0,"FindScorm2004API","",R_scorm_apideep);return null}c=c.parent}return c.API_1484_11};
LmsComFactory.prototype.CheckParam=function(c,d){var e=d.length,g="";if(c.substr(0,e).toLowerCase()==d)g=c.substring(e);return g};var LMS_PASSED="passed",LMS_FAILED="failed",LMS_COMPLETED="completed",LMS_INCOMPLETE="incomplete",LMS_NOT_ATTEMPTED="not attempted";Date.prototype.toSCORM=function(){return this.getFullYear()+"-"+("0"+(this.getMonth()+1)).slice(-2)+"-"+("0"+this.getDate()).slice(-2)+"T"+("0"+this.getHours()).slice(-2)+":"+("0"+this.getMinutes()).slice(-2)+":"+("0"+this.getSeconds()).slice(-2)};
function LmsComBase(c){this.status_obj=null;this.ordinal_number=0;this.credit=this.student_name=this.student_id=this.end_date=this.start_date="";this.lesson_status=LMS_NOT_ATTEMPTED;this.time=this.score=this.core_vendor=this.original_lesson_data=this.lesson_data=this.lesson_location=this.lesson_flag="";this.doit_child_time=this.mode_idle_time=this.idle_time=0;this.guid=this.owner=null;this.isTestIt=this.bigsco=this.session_active=false;if(c!=null){this.Copy(c);this.ParentLmsCom=c}this.object_type_name=
"LmsComBase"}LmsComBase.prototype.GetOrdinalNumber=function(){return this.ordinal_number};LmsComBase.prototype.SetOrdinalNumber=function(c){this.ordinal_number=c};LmsComBase.prototype.Copy=function(c){this.student_id=c.student_id;this.student_name=c.student_name;this.credit=c.credit;this.lesson_status=c.lesson_status;this.bigsco=c.bigsco;this.lesson_data=c.lesson_data;this.lesson_location=c.lesson_location};
LmsComBase.prototype.Begin=function(){this.start_date=(new Date).getTime();this.session_active&&alert(R_lmscom_already_active);return this.session_active=true};LmsComBase.prototype.End=function(){this.session_active||alert(R_lmscom_inactive);this.end_date=(new Date).getTime();this.session_active=false;return true};LmsComBase.prototype.LoadAPIAdapter=function(c){c()};LmsComBase.prototype.SendCompletionInfo=function(){};
LmsComBase.prototype.NotifyParent=function(){var c=this.ParentLmsCom;c&&!c.owner.closed&&c.owner.ListenChildClose&&c.owner.ListenChildClose()};LmsComBase.prototype.getReportedLessonStatus=function(){return this.lesson_status===LMS_PASSED?LmsConfig.ReportOnPass:this.lesson_status===LMS_FAILED?LmsConfig.ReportOnFail:this.lesson_status};LmsComBase.prototype.computeTime=function(c,d){return this.convertTotalSeconds((d-c-this.idle_time)/1E3)};
LmsComBase.prototype.computeTime2=function(c,d){return""+(d.getTime()-c-this.doit_child_time)/1E3};LmsComBase.prototype.convertTotalSeconds=function(c){var d=c%60;c-=d;var e=c%3600;c-=e;d=Math.round(d*100)/100;var g=d=new String(d);if(d.indexOf(".")!=-1){g=d.substring(0,d.indexOf("."));d.substring(d.indexOf(".")+1,d.length)}if(g.length<2)g="0"+g;d=g;c=c%3600!=0?0:c/3600;e=e%60!=0?0:e/60;if((new String(c)).length<2)c="0"+c;if((new String(e)).length<2)e="0"+e;return c+":"+e+":"+d};
LmsComBase.prototype.doGetUPKValue=function(c){if(this.ParentLmsCom)return this.ParentLmsCom.doGetUPKValue(c);return""};LmsComBase.prototype.doSetUPKValue=function(c,d){this.ParentLmsCom&&this.ParentLmsCom.doSetUPKValue(c,d)};LmsComBase.prototype.doUPKCommit=function(){this.ParentLmsCom&&this.ParentLmsCom.doUPKCommit()};LmsComBase.prototype.setInteraction=function(c,d){if(this.ParentLmsCom)return this.ParentLmsCom.setInteraction(c,d)};
LmsComBase.prototype.getAnsweredQuestions=function(){if(this.ParentLmsCom)return this.ParentLmsCom.getAnsweredQuestions();return{}};LmsComBase.prototype.setObjective=function(c,d){this.ParentLmsCom&&this.ParentLmsCom.setObjective(c,d)};LmsComBase.prototype.requestContinue=function(){this.ParentLmsCom&&this.ParentLmsCom.requestContinue()};LmsComBase.prototype.IsConnected=function(){if(this.ParentLmsCom)return this.ParentLmsCom.IsConnected();return false};
LmsComBase.prototype.OpenBasicStatus=function(){this.status_obj=new LmsBasicStatus;this.status_obj.status=this.lesson_status;return this.status_obj};
LmsComBase.prototype.OpenTopicStatus=function(c,d,e){this.status_obj=new LmsTopicStatus;this.status_obj.setRequiredMode(c,d,e);lmslog.addEntry(0,"OpenTopicStatus","RequiredMode",this.status_obj.requiredMode);this.status_obj.isScored=!!c.K;c=GetTopLevelLmsMode()=="LMS"?c:d;this.status_obj.setModeavail("S",c.S);this.status_obj.setModeavail("T",c.T);this.status_obj.setModeavail("K",c.K);this.status_obj.setModeavail("D",c.D);this.status_obj.setModeavail("P",c.P);this.status_obj.setModeavail("E",c.E);
lmslog.addEntry(0,"OpenTopicStatus","SeeIt",this.status_obj.getModeavail("S"));lmslog.addEntry(0,"OpenTopicStatus","TryIt",this.status_obj.getModeavail("T"));lmslog.addEntry(0,"OpenTopicStatus","KnowIt",this.status_obj.getModeavail("K"));lmslog.addEntry(0,"OpenTopicStatus","DoIt",this.status_obj.getModeavail("D"));lmslog.addEntry(0,"OpenTopicStatus","PrintIt",this.status_obj.getModeavail("P"));lmslog.addEntry(0,"OpenTopicStatus","TestIt",this.status_obj.getModeavail("E"));if(this.bigsco){this.status_obj.savedStatus=
this.lesson_data.charAt(0);this.lesson_data=this.lesson_data.substring(1)}this.status_obj.initTopicstat(this.lesson_data);return this.status_obj};
LmsComBase.prototype.OpenTopicLaunchStatus=function(c,d,e,g){this.status_obj=new LmsTopicLaunchStatus(c);this.status_obj.setRequiredMode(d,e,g);lmslog.addEntry(0,"OpenTopicLaunchStatus","RequiredMode",this.status_obj.requiredMode);this.status_obj.isScored=d.indexOf("K")!=-1;c=GetTopLevelLmsMode()=="LMS"?d:e;this.status_obj.setModeavail("S",c.indexOf("S")!=-1);this.status_obj.setModeavail("T",c.indexOf("T")!=-1);this.status_obj.setModeavail("K",c.indexOf("K")!=-1);this.status_obj.setModeavail("D",
c.indexOf("D")!=-1);this.status_obj.setModeavail("P",c.indexOf("P")!=-1);this.status_obj.setModeavail("E",c.indexOf("E")!=-1);lmslog.addEntry(0,"OpenTopicLaunchStatus","SeeIt",this.status_obj.getModeavail("S"));lmslog.addEntry(0,"OpenTopicLaunchStatus","TryIt",this.status_obj.getModeavail("T"));lmslog.addEntry(0,"OpenTopicLaunchStatus","KnowIt",this.status_obj.getModeavail("K"));lmslog.addEntry(0,"OpenTopicLaunchStatus","DoIt",this.status_obj.getModeavail("D"));lmslog.addEntry(0,"OpenTopicLaunchStatus",
"PrintIt",this.status_obj.getModeavail("P"));lmslog.addEntry(0,"OpenTopicLaunchStatus","TestIt",this.status_obj.getModeavail("E"));this.status_obj.initTopicstat(this.lesson_data);return this.status_obj};LmsComBase.prototype.OpenQuestionStatus=function(){this.status_obj=new LmsQuestionStatus;this.status_obj.status=LMS_NOT_ATTEMPTED;this.status_obj.savedStatus=this.lesson_data?Stat2Lms(this.lesson_data):LMS_NOT_ATTEMPTED;return this.status_obj};
LmsComBase.prototype.OpenAssessmentStatus=function(c,d,e){this.status_obj=new LmsAssessmentStatus;this.status_obj.hash=d;this.status_obj.questionlimit=e;var g=this.lesson_data,j,n=null,m=-1;if(g)if(this.bigsco)n=d;else{var o=g.indexOf("@");if(o>0){j=parseInt(g.substring(0,o));n=g.substring(o+1,o+j+1).replace(/ /g,"+");g=g.substring(o+j+1);o=g.indexOf("@");if(o>0){j=parseInt(g.substring(0,o));m=parseInt(g.substring(o+1,o+j+1));g=g.substring(o+j+1)}}}if(d===n&&g.length===c+1&&e===m){this.status_obj.savedStatus=
g.charAt(0);this.status_obj.status=g.charAt(0)==="I"?LMS_INCOMPLETE:LMS_NOT_ATTEMPTED;for(d=0;d<c;d++)this.status_obj.questionstatus[d]=g.charAt(d+1)}else{if(g&&!this.bigsco){this.status_obj.stateDiscarded=true;this.status_obj.savedStatus=g.charAt(0)==="I"?"N":g.charAt(0)}else this.status_obj.savedStatus="N";this.status_obj.status=LMS_NOT_ATTEMPTED;for(d=0;d<c;d++)this.status_obj.questionstatus[d]="N"}return this.status_obj};
LmsComBase.prototype.OpenTOCStatus=function(c,d){var e=new LmsTOCStatus;this.status_obj=e;var g=new TOCState(c,d);e.setTocState(g);this.lesson_data!=null&&this.lesson_data.length>0&&g.DeserializeTOC(this.lesson_data);return e};LmsComBase.prototype.SaveStatus=function(){this.status_obj&&this.status_obj.Save(this)};LmsComBase.prototype.utGetModeIndex=function(){this.ParentLmsCom&&this.ParentLmsCom.utGetModeIndex()};LmsComBase.prototype.utPushModeIndex=function(){this.ParentLmsCom&&this.ParentLmsCom.utPushModeIndex()};
LmsComBase.prototype.utPopModeIndex=function(){this.ParentLmsCom&&this.ParentLmsCom.utPopModeIndex()};LmsComBase.prototype.utRecordType=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordType(c)};LmsComBase.prototype.utRecordStartTime=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordStartTime(c)};LmsComBase.prototype.utRecordTimespan=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordTimespan(c)};LmsComBase.prototype.utRecordEndTime=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordEndTime(c)};
LmsComBase.prototype.utRecordCompletionStatus=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordCompletionStatus(c)};LmsComBase.prototype.utRecordSuccessStatus=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordSuccessStatus(c)};LmsComBase.prototype.utRecordScoreScaled=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordScoreScaled(c)};LmsComBase.prototype.utRecordFrameViewed=function(c){this.ParentLmsCom&&this.ParentLmsCom.utRecordFrameViewed(c)};
LmsComBase.prototype.utSendTestItResult=function(c){this.ParentLmsCom&&this.ParentLmsCom.utSendTestItResult(c)};function LmsComScorm12(){this.allow_launch=false;this.object_type_name="LmsComScorm12"}LmsComScorm12.prototype=new LmsComBase;LmsComScorm12.prototype.constructor=LmsComScorm12;LmsComScorm12.prototype.BaseClass=LmsComBase.prototype;
LmsComScorm12.prototype.Begin=function(){LmsComScorm12.prototype.BaseClass.Begin.call(this);lmslog.addEntry(0,"LmsComScorm12.Begin","","Start");if(this.API==null){this.allow_launch=true;return false}if(this.API.LMSInitialize("")=="false"){var c=this.API.LMSGetLastError(),d=this.API.LMSGetErrorString(c)+"\n"+this.API.LMSGetDiagnostic("");this.API=null;lms_ConnectionLost(c+" "+d);lmslog.addEntry(0,"LmsComScorm12.Begin","",d);return false}this.lesson_status=this.original_lesson_status=this.doLMSGetValue("cmi.core.lesson_status");
this.lesson_data=this.doLMSGetValue("cmi.suspend_data");this.lesson_location=this.doLMSGetValue("cmi.core.lesson_location");this.student_id=this.doLMSGetValue("cmi.core.student_id");this.student_name=this.doLMSGetValue("cmi.core.student_name");this.allow_launch=true;lmslog.addEntry(0,"LmsComScorm12.Begin","","LMS session started");return true};
LmsComScorm12.prototype.End=function(){LmsComScorm12.prototype.BaseClass.End.call(this);lmslog.addEntry(0,"LmsComScorm12.End","","Start");if(!this.allow_launch)return false;this.allow_launch=false;if(this.API==null)return false;this.lesson_status==LMS_INCOMPLETE?this.doLMSSetValue("cmi.core.exit","suspend"):this.doLMSSetValue("cmi.core.exit","");this.doLMSSetValue("cmi.core.session_time",this.computeTime(this.start_date,this.end_date));this.lesson_data&&this.doLMSSetValue("cmi.suspend_data",this.lesson_data);
this.lesson_location&&this.doLMSSetValue("cmi.core.lesson_location",this.lesson_location);this.SendCompletionInfo(true);if(this.API&&this.API.LMSFinish("")=="false"){var c=this.API.LMSGetLastError(),d=this.API.LMSGetErrorString(c)+"\n"+this.API.LMSGetDiagnostic("");this.API=null;lms_ConnectionLost(c+" "+d);lmslog.addEntry(0,"LmsComScorm12.End","",d);return false}this.API=null;lmslog.addEntry(0,"LmsComScorm12.End","","LMS session terminated");return true};
LmsComScorm12.prototype.SendCompletionInfo=function(c){if(this.lesson_status===LMS_NOT_ATTEMPTED)this.original_lesson_status===LMS_NOT_ATTEMPTED?this.doLMSSetValue("cmi.core.lesson_status",LMS_INCOMPLETE):this.doLMSSetValue("cmi.core.lesson_status",this.original_lesson_status);else this.doLMSSetValue("cmi.core.lesson_status",this.getReportedLessonStatus());if(this.score!==""){this.doLMSSetValue("cmi.core.score.raw",this.score);this.doLMSSetValue("cmi.core.score.min","0");this.doLMSSetValue("cmi.core.score.max",
"100")}c||this.doLMSCommit()};LmsComScorm12.prototype.LoadAPIAdapter=function(c){this.API=null;if(GetLmsComFactory())this.API=GetLmsComFactory().scorm_api_12;c()};LmsComScorm12.prototype.IsConnected=function(){return this.API!=null};LmsComScorm12.prototype.ErrorCodes={NoError:0,GeneralException:101,ElementCannotHaveChildren:202,ElementNotAnArray:203,NotInitialized:301,NotImplemented:401,InvalidSetValue:402,ElementIsReadOnly:403,ElementIsWriteOnly:404,IncorrectDataType:405};
LmsComScorm12.prototype.doLMSGetValue=function(c){if(this.API==null)return"";var d=this.API.LMSGetValue(c),e=this.API.LMSGetLastError();if(e!=this.ErrorCodes.NoError){d=this.API.LMSGetErrorString(e);lms_ConnectionLost(e+" "+d+", "+c);lmslog.addEntry(0,"doLMSGetValue","",R_scorm_getvalfail+c+" "+d);return""}lmslog.addEntry(1,"doLMSGetValue",c,d);return d};
LmsComScorm12.prototype.doLMSSetValue=function(c,d){if(this.API==null)return"false";if(this.API.LMSSetValue(c,d)=="false"){var e=this.API.LMSGetLastError();if(e!=this.ErrorCodes.NoError&&e!=this.ErrorCodes.NotImplemented){var g=this.API.LMSGetErrorString(e);lms_ConnectionLost(e+" "+g+", "+c+", "+d);lmslog.addEntry(0,"doLMSSetValue","",R_scorm_setvalfail+c+":"+d+" "+g);return"false"}}lmslog.addEntry(1,"doLMSSetValue",c,d);return"true"};
LmsComScorm12.prototype.doLMSCommit=function(){if(this.API==null)return"false";if(this.API.LMSCommit("")=="false"){var c=this.API.LMSGetLastError(),d=this.API.LMSGetErrorString(c);lms_ConnectionLost(c+" "+d);lmslog.addEntry(0,"doLMSCommit","",d);this.API=null;return"false"}lmslog.addEntry(1,"doLMSCommit","","");return"true"};function LmsComScorm2004(){this.allow_launch=false;this.object_type_name="LmsComScorm2004";this.lesson_data_location="cmi.suspend_data"}LmsComScorm2004.prototype=new LmsComBase;
LmsComScorm2004.prototype.constructor=LmsComScorm2004;LmsComScorm2004.prototype.BaseClass=LmsComBase.prototype;
LmsComScorm2004.prototype.Begin=function(){LmsComScorm2004.prototype.BaseClass.Begin.call(this);lmslog.addEntry(0,"LmsComScorm2004.Begin","","Start");if(this.API==null){this.allow_launch=true;return false}if(this.API.Initialize("")=="false"){var c=this.API.GetLastError(),d=this.API.GetErrorString(c)+"\n"+this.API.GetDiagnostic("");this.API=null;lms_ConnectionLost(c+" "+d);lmslog.addEntry(0,"LmsComScorm2004.Begin","",d);return false}this.lesson_status=this.doGetValue("cmi.completion_status");if(this.lesson_status===
"unknown")this.lesson_status=LMS_NOT_ATTEMPTED;else if(this.lesson_status===LMS_COMPLETED){c=this.doGetValue("cmi.success_status");if(c===LMS_PASSED||c===LMS_FAILED)this.lesson_status=c}this.original_lesson_status=this.lesson_status;this.lesson_data=this.doGetValue(this.lesson_data_location);this.lesson_location=this.doGetValue("cmi.location");this.student_id=this.doGetValue("cmi.learner_id");this.student_name=this.doGetValue("cmi.learner_name");this.allow_launch=true;lmslog.addEntry(0,"LmsComScorm2004.Begin",
"","LMS session started");return true};
LmsComScorm2004.prototype.End=function(){LmsComScorm2004.prototype.BaseClass.End.call(this);lmslog.addEntry(0,"LmsComScorm2004.End","","Start");if(!this.allow_launch)return false;this.allow_launch=false;if(this.API==null)return false;this.lesson_status==LMS_INCOMPLETE?this.doSetValue("cmi.exit","suspend"):this.doSetValue("cmi.exit","normal");this.doSetValue("cmi.session_time",this.computeTime(this.start_date,this.end_date));this.lesson_data&&this.doSetValue(this.lesson_data_location,this.lesson_data);
this.lesson_location&&this.doSetValue("cmi.location",this.lesson_location);this.SendCompletionInfo(true);if(this.API&&this.API.Terminate("")=="false"){var c=this.API.GetLastError(),d=this.API.GetErrorString(c)+"\n"+this.API.GetDiagnostic("");this.API=null;lms_ConnectionLost(c+" "+d);lmslog.addEntry(0,"LmsComScorm2004.End","",d);return false}this.API=null;lmslog.addEntry(0,"LmsComScorm2004.End","","LMS session terminated");return true};
LmsComScorm2004.prototype.LoadAPIAdapter=function(c){this.API=null;if(GetLmsComFactory())this.API=GetLmsComFactory().scorm_api_2004;c()};
LmsComScorm2004.prototype.SendCompletionInfo=function(c){var d=this.getReportedLessonStatus();if(d===LMS_NOT_ATTEMPTED)d=this.original_lesson_status;if(d==LMS_PASSED||d==LMS_FAILED){this.doSetValue("cmi.success_status",d);this.doSetValue("cmi.completion_status",LMS_COMPLETED)}else this.doSetValue("cmi.completion_status",d);if(this.score!==""){this.doSetValue("cmi.score.raw",this.score);this.doSetValue("cmi.score.scaled",this.score/100);this.doSetValue("cmi.score.min","0");this.doSetValue("cmi.score.max",
"100")}c||this.doCommit()};LmsComScorm2004.prototype.convertTotalSeconds=function(c){var d=c%60;c-=d;var e=c%3600;c-=e;d=Math.round(d*100)/100;var g=d=new String(d);if(d.indexOf(".")!=-1){g=d.substring(0,d.indexOf("."));d.substring(d.indexOf(".")+1,d.length)}if(g.length<2)g="0"+g;d=g;c=c%3600!=0?0:c/3600;e=e%60!=0?0:e/60;if((new String(c)).length<2)c="0"+c;if((new String(e)).length<2)e="0"+e;return"PT"+c+"H"+e+"M"+d+"S"};LmsComScorm2004.prototype.IsConnected=function(){return this.API!=null};
LmsComScorm2004.prototype.ErrorCodes={NoError:0,GeneralException:101,GeneralInitializationFailure:102,AlreadyInitialized:103,ContentInstanceTerminated:104,GeneralTerminationFailure:111,TerminationBeforeInitialization:112,TerminationAfterTermination:113,RetrieveDataBeforeInitialization:122,RetrieveDataAfterTermination:123,StoreDataBeforeInitialization:132,StoreDataAfterTermination:133,CommitBeforeInitialization:142,CommitAfterTermination:143,GeneralArgumentError:201,GeneralGetFailure:301,GeneralSetFailure:351,
GeneralCommitFailure:391,UndefinedDataModelElement:401,UnimplementedDataModelElement:402,DataModelElementValueNotInitialized:403,DataModelElementIsReadOnly:404,DataModelElementIsWriteOnly:405,DataModelElementTypeMismatch:406,DataModelElementValueOutOfRange:407,DataModelDependencyNotEstablished:408,KPathTimeout:1501,KPathConnect:1502,KPathBusy:1503};
LmsComScorm2004.prototype.doGetValue=function(c){if(this.API==null)return"";var d=this.API.GetValue(c),e=this.API.GetLastError();if(e!=this.ErrorCodes.NoError&&e!=this.ErrorCodes.DataModelElementValueNotInitialized)if(e==this.ErrorCodes.KPathTimeout&&this.object_type_name=="LmsComKPath"){lmslog.addEntry(0,"doGetValue","","KCenter timeout");e=this.API.GetValue("upk.idle_time");lmslog.addEntry(0,"doGetValue","upk.idle_time",e);this.idle_time+=e;this.mode_idle_time+=e;lmslog.addEntry(0,"doGetValue",
"idle_time",this.idle_time);return this.doGetValue(c)}else{d=this.API.GetErrorString(e);lms_ConnectionLost(e+" "+d+", "+c);lmslog.addEntry(0,"doGetValue","",R_scorm_getvalfail+c+" "+d);return""}lmslog.addEntry(1,"doGetValue",c,d);return d};
LmsComScorm2004.prototype.doSetValue=function(c,d){if(this.API==null)return"false";if(this.API.SetValue(c,d)=="false"){var e=this.API.GetLastError();if(e!=this.ErrorCodes.NoError&&e!=this.ErrorCodes.UnimplementedDataModelElement)if(e==this.ErrorCodes.KPathTimeout&&this.object_type_name=="LmsComKPath"){lmslog.addEntry(0,"doSetValue","","KCenter timeout");e=this.API.GetValue("upk.idle_time");lmslog.addEntry(0,"doSetValue","upk.idle_time",e);this.idle_time+=e;this.mode_idle_time+=e;lmslog.addEntry(0,
"doSetValue","idle_time",this.idle_time);return this.doSetValue(c,d)}else{var g=this.API.GetErrorString(e);lms_ConnectionLost(e+" "+g+", "+c+", "+d);lmslog.addEntry(0,"doSetValue","",R_scorm_setvalfail+c+":"+d+" "+g);return"false"}}lmslog.addEntry(1,"doSetValue",c,d);return"true"};
LmsComScorm2004.prototype.doCommit=function(){if(this.API==null)return"false";if(this.API.Commit("")=="false"){var c=this.API.GetLastError(),d=this.API.GetErrorString(c);this.API=null;lms_ConnectionLost(c+" "+d);lmslog.addEntry(0,"doCommit","",d);return"false"}lmslog.addEntry(1,"doCommit","","");return"true"};
function LmsComKPath(c){this.allow_launch=false;if(c!=null){this.Copy(c);this.ParentLmsCom=c}this.object_type_name="LmsComKPath";this.lesson_data_location="upk.sco_data";this.commitNeeded=this.commitActive=false}LmsComKPath.prototype=new LmsComScorm2004;LmsComKPath.prototype.constructor=LmsComKPath;LmsComKPath.prototype.BaseClass=LmsComScorm2004.prototype;
LmsComKPath.prototype.Begin=function(){lmslog.addEntry(0,"LmsComKPath.Begin","","Start");var c=LmsComKPath.prototype.BaseClass.Begin.call(this);this.doSetValue("upk.launch_from",GetTopLevelLmsMode());lmslog.addEntry(0,"LmsComKPath.Begin","","LMS session started");return c};
LmsComKPath.prototype.SendCompletionInfo=function(c){var d=this.getReportedLessonStatus();if(d===LMS_NOT_ATTEMPTED)this.doSetValue("cmi.completion_status",LMS_NOT_ATTEMPTED);else{if(d==LMS_PASSED||d==LMS_FAILED){this.doSetValue("cmi.success_status",d);this.doSetValue("cmi.completion_status",LMS_COMPLETED)}else this.doSetValue("cmi.completion_status",d);if(this.score!==""){this.doSetValue("cmi.score.raw",this.score);this.doSetValue("cmi.score.scaled",this.score/100);this.doSetValue("cmi.score.min",
"0");this.doSetValue("cmi.score.max","100")}c||this.doCommit()}};LmsComKPath.prototype.LoadAPIAdapter=function(c){if(this.API)c();else{var d=findKPathAPIFrame(window);if(d&&d.LoadRuntime&&this.guid){this.deferred_callback=c;var e=this;d.LoadRuntime(this.guid,0,0,0,function(g,j,n,m){e.LoadAPIAdapterCallback(g,j,n,m)},upk.browserInfo.isTouchDevice(),this.isTestIt)}else c()}};
LmsComKPath.prototype.LoadAPIAdapterCallback=function(c,d,e,g){if(c=="succeeded"&&d==this.guid){this.API=e.GetAPI();lmslog.addEntry(0,"LoadAPIAdapterCallback","","KPath adapter bound");try{this.deferred_callback()}catch(j){}}else{if(c=="no SCO")this.API=null;else alert(R_scorm_noapi+" "+g);lmslog.addEntry(0,"LoadAPIAdapterCallback","",g);this.deferred_callback()}};LmsComKPath.prototype.doGetUPKValue=function(c){c=this.doGetValue(c);if(c==="")c=-1;return c};
LmsComKPath.prototype.doSetUPKValue=function(c,d){this.doSetValue(c,d)};LmsComKPath.prototype.doUPKCommit=function(){this.doCommit()};
LmsComKPath.prototype.doCommit=function(){if(this.API==null)return"false";if(this.commitActive){lmslog.addEntry(0,"doCommit","commitActive==true","");this.commitNeeded=true;return"true"}lmslog.addEntry(1,"doCommit","","");if(upk.browserInfo.isTouchDevice())d=null;else{this.commitActive=true;var c=this,d=function(g,j){c.doCommitCallback(g,j)}}if(this.API.Commit("",d)=="false"){this.commitActive=false;d=this.API.GetLastError();var e=this.API.GetErrorString(d);if(d==this.ErrorCodes.KPathTimeout&&this.object_type_name==
"LmsComKPath"){lmslog.addEntry(0,"doCommit","","KCenter timeout");d=this.API.GetValue("upk.idle_time");lmslog.addEntry(0,"doCommit","upk.idle_time",d);this.idle_time+=d;this.mode_idle_time+=d;lmslog.addEntry(0,"doCommit","idle_time",this.idle_time);return this.doCommit()}else{this.API=null;lms_ConnectionLost(d+" "+e);lmslog.addEntry(0,"doCommit","",e);return"false"}}return"true"};
LmsComKPath.prototype.doCommitCallback=function(c,d){lmslog.addEntry(1,"doCommitCallback","","");this.commitActive=false;if(!c){this.API=null;lms_ConnectionLost(d);lmslog.addEntry(0,"doCommitCallback","",d)}if(this.commitNeeded){this.commitNeeded=false;this.doCommit()}};
LmsComKPath.prototype.setInteraction=function(c,d){if(this.API){var e=d.status_obj,g=this.doGetValue("cmi.interactions._count");if(c==-1)c=g;c>=g&&this.doSetValue("cmi.interactions."+c+".id",d.guid);this.doSetValue("cmi.interactions."+c+".type",e.getQuestionType());this.doSetValue("cmi.interactions."+c+".timestamp",(new Date).toSCORM());this.doSetValue("cmi.interactions."+c+".weighting","1");if(e.getResult()){this.doSetValue("cmi.interactions."+c+".learner_response",e.getLearnerResponse());this.doSetValue("cmi.interactions."+
c+".result",e.getResult())}this.doCommit();return c}};LmsComKPath.prototype.getAnsweredQuestions=function(){var c={};if(!this.API)return c;for(var d=this.doGetValue("cmi.interactions._count"),e=0;e<d;e++){var g=this.doGetValue("cmi.interactions."+e+".id");c[g]={index:e};c[g].weighting=this.doGetValue("cmi.interactions."+e+".weighting");c[g].result=this.doGetValue("cmi.interactions."+e+".result")}return c};
LmsComKPath.prototype.setObjective=function(c,d){if(this.API){this.doSetValue("cmi.objectives."+c+".id",d.objectiveGuid=="PRIMARYOBJ"?"PRIMARYOBJ":"OBJ_"+d.objectiveGuid);this.doSetValue("cmi.objectives."+c+".score.scaled",d.score/100);this.doSetValue("cmi.objectives."+c+".completion_status",d.completed?"completed":"incomplete");this.doSetValue("cmi.objectives."+c+".success_status",d.completed?"passed":"failed")}};
LmsComKPath.prototype.requestContinue=function(){this.doSetValue("adl.nav.request","continue")};LmsComKPath.prototype.utGetModeIndex=function(){this.mode_index=this.doGetValue("upk.modes._count")};LmsComKPath.prototype.utPushModeIndex=function(){this.saved_mode_index=this.mode_index;this.utGetModeIndex()};LmsComKPath.prototype.utPopModeIndex=function(){this.mode_index=this.saved_mode_index;delete this.saved_mode_index};
LmsComKPath.prototype.utRecordType=function(c){this.doSetValue("upk.modes."+this.mode_index+".type",c)};LmsComKPath.prototype.utRecordStartTime=function(c){this.doSetValue("upk.modes."+this.mode_index+".start_time",c.toSCORM());this.mode_idle_time=0};LmsComKPath.prototype.utRecordEndTime=function(c){this.doSetValue("upk.modes."+this.mode_index+".end_time",c.toSCORM())};
LmsComKPath.prototype.utRecordTimespan=function(c){this.doSetValue("upk.modes."+this.mode_index+".timespan",c-this.mode_idle_time/1E3)};LmsComKPath.prototype.utRecordCompletionStatus=function(c){this.doSetValue("upk.modes."+this.mode_index+".completion_status",c)};LmsComKPath.prototype.utRecordSuccessStatus=function(c){this.doSetValue("upk.modes."+this.mode_index+".success_status",c)};
LmsComKPath.prototype.utRecordScoreScaled=function(c){this.doSetValue("upk.modes."+this.mode_index+".score.scaled",c)};LmsComKPath.prototype.utRecordFrameViewed=function(c){this.doSetValue("upk.modes."+this.mode_index+".frame_viewed",c);this.doSetValue("cmi.session_time",this.computeTime(this.start_date,(new Date).getTime()));this.doCommit()};LmsComKPath.prototype.utSendTestItResult=function(c){this.doSetValue("upk.modes."+this.mode_index+".test_result",c);this.doCommit()};
function LmsComAICC(c,d){this.allow_launch=false;this.aicc_url=c;this.aicc_sid=d;this.app=document.applets.GetHTTPPostData;this.object_type_name="LmsComAICC"}LmsComAICC.prototype=new LmsComBase;LmsComAICC.prototype.constructor=LmsComScorm12;LmsComAICC.prototype.BaseClass=LmsComBase.prototype;LmsComAICC.prototype.Begin=function(){LmsComAICC.prototype.BaseClass.Begin.call(this);lmslog.addEntry(0,"LmsComAICC.Begin","","Start");this.hacpGetparam();lmslog.addEntry(0,"LmsComAICC.Begin","","about to log paramvalues")};
LmsComAICC.prototype.End=function(){LmsComAICC.prototype.BaseClass.End.call(this);lmslog.addEntry(0,"LmsComAICC.End","","Start");if(!this.allow_launch)return false;this.allow_launch=false;var c=this.hacpGetpostdata();c="command=putparam&version="+LmsConfig.AiccVersion+"&session_id="+this.aicc_sid+"&aicc_data="+escape(c)+"&";lmslog.addEntry(0,"LmsComAICC.End","params",c);c=this.app.GetData(unescape(this.aicc_url),c);lmslog.addEntry(0,"LmsComAICC.End","strData",c);c="version="+LmsConfig.AiccVersion+
"&command=ExitAU&session_id="+this.aicc_sid+"&";lmslog.addEntry(0,"LmsComAICC.End","params",c);c=this.app.GetData(unescape(this.aicc_url),c);lmslog.addEntry(0,"LmsComAICC.End","strData",c)};var closingAmp=true;
LmsComAICC.prototype.hacpGetparam=function(){lmslog.addEntry(0,"hacpGetparam","","Start");var c="";c="version="+LmsConfig.AiccVersion+"&command=GetParam&session_id="+this.aicc_sid;if(closingAmp)c+="&";lmslog.addEntry(0,"hacpGetparam","params",c);c=this.app.GetData(unescape(this.aicc_url),c);lmslog.addEntry(0,"hacpGetparam","strData",c);var d,e,g=false;c+=" ";for(var j=c.split("\r"),n=0;n<j.length;n++){var m=j[n],o=trimValue(m.substring(0,m.indexOf("="))),p=trimValue(m.substring(m.indexOf("=")+1));
if(o.toLowerCase()=="error"){d=p;g=true}if(o.toLowerCase()=="error_text")e=p;if(o.toLowerCase()=="aicc_data"){this.aicc_data=c.substring(c.indexOf(m.substring(0,m.indexOf("=")))+m.substring(0,m.indexOf("=")).length+1);g=true}}if(g)if(d==0){j=get_group_content("core",this.aicc_data).split("\r");for(n=0;n<j.length;n++){m=j[n];o=trimValue(m.substring(0,m.indexOf("=")));p=trimValue(m.substring(m.indexOf("=")+1));if(o.toLowerCase()=="student_id")this.student_id=p;if(o.toLowerCase()=="student_name")this.student_name=
p;if(o.toLowerCase()=="lesson_status"){this.lesson_status=p.toLowerCase().charAt(0);if(p.indexOf(",")!=-1)this.lesson_flag=trimValue(p.substring(p.indexOf(",")+1)).toLowerCase();if(this.lesson_status=="p")this.lesson_status=LMS_PASSED;if(this.lesson_status=="c")this.lesson_status=LMS_COMPLETED;if(this.lesson_status=="f")this.lesson_status=LMS_FAILED;if(this.lesson_status=="i")this.lesson_status=LMS_INCOMPLETE;if(this.lesson_status=="n")this.lesson_status=LMS_NOT_ATTEMPTED;this.original_lesson_status=
this.lesson_status}if(o.toLowerCase()=="lesson_location")this.lesson_location=p;if(o.toLowerCase()=="credit")this.credit=p;if(o.toLowerCase()=="score")this.score=p;if(o.toLowerCase()=="time")this.time=p}this.lesson_data=this.lesson_status==LMS_INCOMPLETE||this.lesson_status==LMS_COMPLETED||this.lesson_status==LMS_PASSED||this.lesson_status==LMS_FAILED?trimValue(get_group_content("core_lesson",this.aicc_data)):"";this.core_vendor=trimValue(get_group_content("core_vendor",this.aicc_data));this.allow_launch=
true}else{alert(R_error_unexp+e);lmslog.addEntry(0,"hacpGetparam","","Unable to continue because of the following error: "+e)}else{alert(R_error_svr+unescape(this.aicc_url)+"\r\r - "+c);lmslog.addEntry(0,"hacpGetparam","","Unable to post to server "+unescape(this.aicc_url)+" - "+c)}};
LmsComAICC.prototype.hacpGetpostdata=function(){lmslog.addEntry(0,"hacpGetpostdata","","Start");var c="";c="[CORE]\r\n";c+="Lesson_Location=\r\n";var d=this.getReportedLessonStatus();if(d===LMS_NOT_ATTEMPTED)d=this.original_lesson_status;c+=this.lesson_status===LMS_INCOMPLETE?"Lesson_Status="+d+", suspend\r\n":"Lesson_Status="+d+"\r\n";lmslog.addEntry(0,"hacpGetpostdata","is_assess",this.is_assess);c+=this.score!==""?"Score="+this.score+"\r\n":"Score=\r\n";c+="Time="+this.computeTime(this.start_date,
this.end_date)+"\r\n";c+="[CORE_LESSON]\r\n";c+=this.lesson_data+"\r\n";lmslog.addEntry(0,"hacpGetpostdata","NewAiccData",c);return c};function get_group_content(c,d){for(var e="",g=d.split("\r"),j=false,n=0;n<g.length;n++){var m=trimValue(g[n]);if(m.substr(0,1)=="[")j=m.toLowerCase().indexOf("["+c.toLowerCase()+"]")>=0?true:false;else if(j)e+=m+"\r\n"}return e}
function trimValue(c){for(var d=0,e=c.length,g=0;g<c.length;g++)if(c.substr(g,1)!=" "&&c.substr(g,1)!="\t"&&c.substr(g,1)!="\n"&&c.substr(g,1)!="\r"){d=g;break}if(g==c.length)return"";for(g=c.length-1;g>0;g--)if(c.substr(g,1)!=" "&&c.substr(g,1)!="\t"&&c.substr(g,1)!="\n"&&c.substr(g,1)!="\r"){e=g;break}if(g==0)e=0;return c.substring(d,e+1)}LmsComAICC.prototype.IsConnected=function(){return true};function LmsComCookie(){this.allow_launch=false;this.object_type_name="LmsComCookie"}
LmsComCookie.prototype=new LmsComBase;LmsComCookie.prototype.constructor=LmsComCookie;LmsComCookie.prototype.BaseClass=LmsComBase.prototype;LmsComCookie.prototype.Begin=function(){LmsComCookie.prototype.BaseClass.Begin.call(this)};LmsComCookie.prototype.End=function(){LmsComCookie.prototype.BaseClass.End.call(this)};function LmsBasicStatus(){this.status=LMS_NOT_ATTEMPTED}LmsBasicStatus.prototype.getStatus=function(){return this.status};LmsBasicStatus.prototype.setStatus=function(c){this.status=c};
LmsBasicStatus.prototype.Save=function(c){c.lesson_status=this.status};LmsTopicStatus.prototype=new LmsBasicStatus;LmsTopicStatus.prototype.constructor=LmsTopicStatus;LmsTopicStatus.prototype.BaseClass=LmsBasicStatus.prototype;function LmsTopicStatus(){this.score="";this.passed=false;this.modes=[];this.modes.S=new Mode("S");this.modes.T=new Mode("T");this.modes.K=new Mode("K");this.modes.D=new Mode("D");this.modes.P=new Mode("P");this.modes.E=new Mode("E");this.anylaunched=false}
LmsTopicStatus.prototype.Save=function(c){c.lesson_data=c.bigsco?"":this.getStatusstring();c.lesson_status=this.getLMSStatus();c.score=this.getScore()};LmsTopicStatus.prototype.setModeavail=function(c,d){this.modes[c].avail=d};LmsTopicStatus.prototype.getModeavail=function(c){return this.modes[c].avail};LmsTopicStatus.prototype.setModestatus=function(c,d){if(this.modes[c].avail)this.modes[c].complete=d;else lmslog.addEntry(0,"setModestatus","","Invalid call of setModestatus")};
LmsTopicStatus.prototype.getModestatus=function(c){return this.modes[c].complete};LmsTopicStatus.prototype.setRequiredMode=function(c,d,e){this.requiredMode=GetTopLevelLmsMode()=="LMS"?e||this._getRequiredMode(c):this._getRequiredMode(d)};LmsTopicStatus.prototype._getRequiredMode=function(c){for(var d=0;d<6;d++)if(c["EKTSPD".charAt(d)])return"EKTSPD".charAt(d);return"None"};LmsTopicStatus.prototype.GetRequiredMode=function(){return this.requiredMode};
LmsTopicStatus.prototype.initTopicstat=function(c){lmslog.addEntry(0,"initTopicstat","","Start");lmslog.addEntry(0,"initTopicstat","s string",c);lmslog.addEntry(0,"initTopicstat","s.length",c.length);if(c.length!=0){var d=c.split(",");for(c=0;c<=d.length-1;c++){lmslog.addEntry(0,"initTopicstat","f["+c+"]",d[c]);if(d[c].charAt(1)=="=")this.modes[d[c].charAt(0)].complete=this.modeIscomplete(d[c].substr(2,1));else if(d[c].substr(0,5)=="PASS=")this.passed=d[c].substr(5,1)!=="0";else if(d[c].substr(0,
6)=="SCORE=")this.score=d[c].substr(6)}}};LmsTopicStatus.prototype.clearTopicstat=function(){this.score="";this.passed=false;for(var c in this.modes)this.modes[c].complete=false};
LmsTopicStatus.prototype.getStatusstring=function(){lmslog.addEntry(0,"get_statusstring","","Start");var c="";for(x in this.modes){if(c.length!=0)c+=",";c+=this.modes[x].id+"="+(this.modes[x].complete?"C":"I")}if(this.modes.E.complete)c+=",PASS="+(this.passed?"1":"0");else if(this.requiredMode==="K"&&this.modes.K.complete&&this.isScored)c+=",PASS="+(this.passed?"1":"0")+",SCORE="+this.score;lmslog.addEntry(0,"get_statusstring","dataString",c);return c};
LmsTopicStatus.prototype.getStatus=function(){var c="";if(this.isComplete())if(this.requiredMode==="K"&&this.isScored||this.requiredMode==="E")c=this.passed?LMS_PASSED:LMS_FAILED;else{c=LMS_COMPLETED;if(this.savedStatus=="P"||this.savedStatus=="F")c=this.savedStatus}else{c=LMS_INCOMPLETE;if(this.savedStatus=="P"||this.savedStatus=="F"||this.savedStatus=="C")c=Stat2Lms(this.savedStatus)}return c};
LmsTopicStatus.prototype.getLMSStatus=function(){if(this.isComplete()&&!this.anylaunched)return LMS_NOT_ATTEMPTED;return this.getStatus()};LmsTopicStatus.prototype.getScore=function(){return this.score};LmsTopicStatus.prototype.isComplete=function(){lmslog.addEntry(0,"is_complete","","Start");var c=false;if(this.requiredMode==="None"||this.modes[this.requiredMode].complete)c=true;lmslog.addEntry(0,"is_complete","iscomp",c);return c};
LmsTopicStatus.prototype.modeIscomplete=function(c){var d=false;lmslog.addEntry(0,"modeIscomplete","","Start");if(c=="C")d=true;else if(c=="I")d=false;lmslog.addEntry(0,"modeIscomplete","ret",d);return d};LmsTopicStatus.prototype.isRequired=function(c){return this.requiredMode===c};LmsTopicLaunchStatus.prototype=new LmsTopicStatus;LmsTopicLaunchStatus.prototype.constructor=LmsTopicStatus;LmsTopicLaunchStatus.prototype.BaseClass=LmsTopicStatus.prototype;
function LmsTopicLaunchStatus(c){this.mode=this.modes[c];this.score="";this.passed=false;this.anylaunched=true}LmsTopicLaunchStatus.prototype.Save=function(c){this.BaseClass.Save.call(this,c)};LmsTopicLaunchStatus.prototype._getRequiredMode=function(c){for(var d=0;d<6;d++)if(c.indexOf("EKTSPD".charAt(d))!=-1)return"EKTSPD".charAt(d);return"None"};LmsTopicLaunchStatus.prototype.getResult=function(){return this.passed?"correct":"incorrect"};LmsTopicLaunchStatus.prototype.getQuestionType=function(){return"other"};
LmsTopicLaunchStatus.prototype.getLearnerResponse=function(){return""};function Mode(c){this.complete=this.avail=false;this.id=c}LmsQuestionStatus.prototype=new LmsBasicStatus;LmsQuestionStatus.prototype.constructor=LmsQuestionStatus;LmsQuestionStatus.prototype.BaseClass=LmsBasicStatus.prototype;function LmsQuestionStatus(){this.result=this.learner_response=this.question_type=null}LmsQuestionStatus.prototype.Save=function(c){c.lesson_status=this.status;c.lesson_data=Lms2Stat(this.getStatus())};
LmsQuestionStatus.prototype.getStatus=function(){return this.status===LMS_NOT_ATTEMPTED?this.savedStatus:this.status};LmsQuestionStatus.prototype.getQuestionType=function(){return this.question_type};LmsQuestionStatus.prototype.setQuestionType=function(c){return this.question_type=c};LmsQuestionStatus.prototype.getLearnerResponse=function(){return this.learner_response};LmsQuestionStatus.prototype.setLearnerResponse=function(c){return this.learner_response=c};
LmsQuestionStatus.prototype.getResult=function(){return this.result};LmsQuestionStatus.prototype.setResult=function(c){return this.result=c};LmsAssessmentStatus.prototype=new LmsBasicStatus;LmsAssessmentStatus.prototype.constructor=LmsAssessmentStatus;LmsAssessmentStatus.prototype.BaseClass=LmsBasicStatus.prototype;function LmsAssessmentStatus(){this.score="";this.questionstatus=[];this.stateDiscarded=false}
LmsAssessmentStatus.prototype.Save=function(c){c.lesson_status=this.status;c.score=this.status!=LMS_INCOMPLETE&&this.status!=LMS_NOT_ATTEMPTED?this.score:"";var d="";if(!c.bigsco){d=this.hash.length+"@"+this.hash;var e=this.questionlimit.toString();d+=e.length+"@"+e}d+=this.status==LMS_NOT_ATTEMPTED?this.savedStatus:Lms2Stat(this.status);for(e=0;e<this.questionstatus.length;e++)d+=this.questionstatus[e];c.lesson_data=d};
LmsAssessmentStatus.prototype.getStatus=function(){return this.status===LMS_NOT_ATTEMPTED?Stat2Lms(this.savedStatus):this.status};LmsAssessmentStatus.prototype.getLMSStatus=function(){return this.status};LmsAssessmentStatus.prototype.getScore=function(){return this.score};LmsAssessmentStatus.prototype.setScore=function(c){return this.score=c};LmsTOCStatus.prototype=new LmsBasicStatus;LmsTOCStatus.prototype.constructor=LmsTOCStatus;LmsTOCStatus.prototype.BaseClass=LmsBasicStatus.prototype;
function LmsTOCStatus(){}LmsTOCStatus.prototype.getStatus=function(){return Stat2Lms(this.getTocState().GetStatus(0))};LmsTOCStatus.prototype.Save=function(c){c.lesson_status=this.getStatus();var d=this.getTocState();c.lesson_data=d.SerializeTOC()};LmsTOCStatus.prototype.getTocState=function(){return this.tocstate};LmsTOCStatus.prototype.setTocState=function(c){return this.tocstate=c};function NodeState(){this.Status="N";this.Score=null;this.ChildrenStatus=""}
function TOCState(c,d){this.NodeCounter=c;this.TocVersion=d;this.InitInLookupTable()}TOCState.prototype.SetStatus=function(c,d){this.LookUpTable[c]||(this.LookUpTable[c]=new NodeState);this.LookUpTable[c].Status=d};TOCState.prototype.GetStatus=function(c){return this.LookUpTable[c].Status};TOCState.prototype.SetScore=function(c,d){this.LookUpTable[c]||(this.LookUpTable[c]=new NodeState);this.LookUpTable[c].Score=d};TOCState.prototype.GetScore=function(c){return this.LookUpTable[c].Score};
TOCState.prototype.SetChildren=function(c,d){this.LookUpTable[c]||(this.LookUpTable[c]=new NodeState);this.LookUpTable[c].ChildrenStatus=d};TOCState.prototype.GetChildren=function(c){return this.LookUpTable[c].ChildrenStatus};
TOCState.prototype.DeserializeTOC=function(c){var d=0,e,g=c.indexOf("@");if(g>0){d=parseInt(c.substring(0,g));e=c.substring(g+1,g+d+1);if(e==this.TocVersion){c=c.substring(g+d+2);g=c.indexOf("@");if(g>0){d=parseInt(c.substring(0,g));c=c.substring(g+1,g+d+1);if(c.length==d){c=this.RLESDecode(c);this.DeserializeLookUpTable(c)}}}}};
TOCState.prototype.DeserializeLookUpTable=function(c){for(var d=0,e="",g=0;g<c.length;g++){e=c.charAt(g);this.SetStatus(d,e);for(e="";g<c.length-1&&c.charAt(g+1)>="0"&&c.charAt(g+1)<="9";){g++;e+=c.charAt(g)}e.length>0&&this.SetScore(d,parseInt(e));if(g<c.length-1&&c.charAt(g+1)=="{"){e=c.indexOf("}",g+2);this.SetChildren(d,c.substring(g+2,e));g=e}d++}};
TOCState.prototype.SerializeTOC=function(){var c=this.RLESEncode(this.SerializeLookupTable());return this.TocVersion.length+"@"+this.TocVersion+" "+c.length+"@"+c};TOCState.prototype.SerializeLookupTable=function(){for(var c="",d=0;d<this.NodeCounter;d++){var e=this.LookUpTable[d].Status,g=this.LookUpTable[d].ChildrenStatus;e||(e="N");c+=e;if(g)c+="{"+g+"}"}return c};
TOCState.prototype.InitInLookupTable=function(){this.LookUpTable=[];for(var c=0;c<this.NodeCounter;c++)this.LookUpTable[c]=new NodeState;this.SetStatus(0,"I")};TOCState.prototype.RLESEncode=function(c){var d="",e=0,g="";d=c.charAt(0);for(var j=e=1;j<c.length;j++)if(c.charAt(j)==d)e++;else{if(e>2){g+="#";g+=e;g+=d}else g+=c.substring(j-e,j);d=c.charAt(j);e=1}if(e>2){g+="#";g+=e;g+=d}else g+=c.substring(j-e,j);return g};
TOCState.prototype.RLESDecode=function(c){for(var d="",e="",g=0;g<c.length;g++)if(c.charAt(g)=="#"){e="";for(g++;c.charAt(g)>="0"&&c.charAt(g)<="9";){e+=c.charAt(g);g++}e=parseInt(e);for(var j=0;j<e;j++)d+=c.charAt(g)}else d+=c.charAt(g);return d};function Lms2Stat(c){return c.charAt(0).toUpperCase()}function Stat2Lms(c){return[LMS_PASSED,LMS_FAILED,LMS_COMPLETED,LMS_INCOMPLETE,LMS_NOT_ATTEMPTED]["PFCIN".indexOf(c)]}
function LogEntry(c,d,e,g,j){this.logType=d;this.funcName=e;this.varName=g;this.msgValue=j;this.dateTime=(new Date).getTime()-c}LogEntry.prototype.GetTableRow=function(){var c="#006600";if(this.logType===1)c="#000033";var d=this.varName;if(d==="")d="&nbsp;";var e=this.msgValue;if(e==="")e="&nbsp;";var g="<tr>";g+="<td align='right'>"+this.dateTime/1E3+"</td>";g+="<td style='color:"+c+";'>"+this.funcName+"</td>";g+="<td>"+d+"</td>";g+="<td>"+e+"</td>";g+="</tr>";return g};
function Log(c){this.traceWindow=null;this.logArray=[];this.enabled=c;this.startDateTime=new Date;this.changed=true;this.windowReady=false;this.startLog()}Log.prototype.startLog=function(){if(this.enabled){this.addEntry(0,"initLog","","Log Intialized");this.openTraceWindow()}};Log.prototype.addEntry=function(c,d,e,g){if(this.enabled){this.logArray.push(new LogEntry(this.startDateTime.getTime(),c,d,e,g));this.changed=true;this.traceWindow&&this.windowReady&&this.traceWindow.UpdateTraceStack()}};
Log.prototype.writeLog=function(c,d){var e=d;if(e>this.logArray.length||e==0)e=this.logArray.length;var g="<table width='600'>";g+="<tr>";g+="<th colspan=4>Session start: "+this.startDateTime+"</th>";g+="</tr>";g+="<tr>";g+="<th>time</th>";g+="<th>function</th>";g+="<th>variable</th>";g+="<th>message</th>";g+="</tr>";var j;if(c==0)for(var n=this.logArray.length-e;n<this.logArray.length;n++){j=this.logArray[n];g+=j.GetTableRow(n)}else for(n=this.logArray.length-1;n>=this.logArray.length-e;n--){j=this.logArray[n];
g+=j.GetTableRow(n)}g+="</table>";this.changed=false;this.windowReady=true;return g};Log.prototype.writeDetails=function(c){return this.logArray[c].GetDetails()};Log.prototype.openTraceWindow=function(){if(this.traceWindow==null){this.changed=true;this.traceWindow=window.open(lms_path+"html/lmsdebug.html","_blank")}};var _lmsMode=null,_lmsParser=null;
function InitLmsMode(c){if(_lmsParser==null){_lmsParser=new UrlParser;_lmsParser.Parse();if(IsTouchDevice()&&c=="player")if(parent==null||window.location==parent.location)if(_lmsParser.GetParameter("directlaunch")==null)_lmsParser.params.directlaunch=2;if(c=="player"){if(_lmsParser.GetParameter("directlaunch")!=null)_lmsMode=Kpath_launch==true?"KPT":"Cookie"}else if(c=="lmstart"){if(_lmsParser.GetParameter("toc")==null)_lmsMode=_lmsParser.GetParameter("dhtml")!=null?Kpath_launch==true?"KPT":"Cookie":
"LMS"}else if(c=="toc"){if(_lmsParser.GetParameter("sco")==null)_lmsMode=Kpath_launch==true?"KPT":"Cookie"}else alert(R_undefined_lms_source)}}function GetTopLevelLmsMode(){return _GetTopLevelLmsMode(this)}function _GetTopLevelLmsMode(c){var d=c._lmsMode;if(d==null)return _GetTopLevelLmsMode(c.lms_store.parentW);return d}var lms_initialized=false,lms_store,lmslog;
function lms_InitPage(c,d,e,g){if(lms_initialized==true)setTimeout(g,1);else{__Ialert("lms_InitPage called with parameters:"+c+","+d+","+e+","+g);var j=false;if(window.lmsModes)j=typeof window.lmsModes=="string"?window.lmsModes.indexOf("E")>-1:window.lmsModes.E===true;lms_store={window:window,childIndex:c,parentW:d,cguid:e,isTestIt:j,callbackfunction:g};if(!d||d.closed){lmslog=new Log(LmsConfig.DebugMode);InitializeLmsCom();InsertRuntimeAPI(lms_LoadRuntimeComplete)}else if(d.lms_initialized){lmslog=
d.lmslog;setTimeout(lms_LoadRuntimeComplete,1)}}}
function lms_LoadRuntimeComplete(){__Ialert("lms_LoadRuntimeComplete() called");if(lms_store.parentW&&!lms_store.parentW.closed)lms_store.parentW.GetChildLmsCom(lms_store);else if(!lms_store.parentW&&!lms_store.cguid&&!window.bigScoItemCount)document.LmsCom=PlayerConfig.EnableCookies?new LmsComCookie:new LmsComBase;else{CheckForLMSAPI();document.LmsCom=_GlobalLmsComFactory.CreateLmsCom()}var c=document.LmsCom;c.guid=lms_store.cguid;c.isTestIt=lms_store.isTestIt;c.owner=window;c.LoadAPIAdapter(lms_LoadAdapterComplete)}
function lms_UpdateUI(c){try{parent&&parent.updateUI&&parent.updateUI(c)}catch(d){}}var hasClosed=false;
function lms_ClosePage(c){__Ialert("lms_ClosePage() called");if(hasClosed!=true){hasClosed=true;var d=document.LmsCom;if(d&&d.session_active){var e=d.child;e&&e.session_active&&e.owner&&!e.owner.closed&&e.owner.lms_ClosePage(true);(e=d.ancillaryChild)&&e.session_active&&e.owner&&!e.owner.closed&&e.owner.lms_ClosePage(true);window._closePage&&_closePage();if(d.session_active){d.SaveStatus();d.End();d.NotifyParent()}c&&window.close()}}}
function lms_ConnectionLost(c){window.ConnectionLostEvent&&ConnectionLostEvent(c);lms_store.parentW&&!lms_store.parentW.closed&&lms_store.parentW.lms_ConnectionLost(c)}function lms_IsConnected(){var c=document.LmsCom;if(c)return c.IsConnected();return false}function lms_IsKPathLogoutAvailable(){return!!window.Kpath_logout_available}
function _logout(c){if(lms_store.parentW&&!lms_store.parentW.closed&&lms_store.parentW._logout)lms_store.parentW._logout(false);else if(window.Kpath_logout_URL)if(GetTopLevelLmsMode()=="LMS")window.parent.parent.location.replace(Kpath_logout_URL);else if(c)if(window.opener&&!window.opener.closed){window.opener.location.replace(Kpath_logout_URL);window.close()}else window.location.replace(Kpath_logout_URL);else window.location.replace(Kpath_logout_URL)}
function lms_IsUserProfileAvailable(){__alert("lms_IsUserProfileAvailable() called");if(GetTopLevelLmsMode()!=="KPT")return false;return document.LmsCom.doGetUPKValue("upk.anonymous")=="0"}function lms_GetUserProfileUrl(){__alert("lms_GetUserProfileUrl() called");if(Kpath_launch==false)return"";return Kpath_profile_URL+"?UPKLaunch=true"}function GetNoSound(){return lms_store.parentW&&!lms_store.parentW.closed?lms_store.parentW.GetNoSound():lms_store.noSound}
function SetNoSound(c){lms_store.noSound=c}var _lms_show_all_alert=false;function __alert(c){if(_lms_show_alert||_lms_show_all_alert)alert(c+"\nfile: "+_lms_module_name)}function __Ialert(c){if(_lms_show_alert||_lms_show_Ialert||_lms_show_all_alert)alert(c+"\nfile: "+_lms_module_name)}var _modeLaunch="incomplete",_feedbackUrlArgs="";
function lms_LoadAdapterComplete(){__alert("lms_LoadAdapterComplete() called");var c=document.LmsCom;c.Begin();c.assessment_guid&&c.doSetUPKValue("upk.actual_guid",c.assessment_guid);c.utPushModeIndex();lms_initialized=true;setTimeout(lms_store.callbackfunction,1)}function GetChildLmsCom(c){__Ialert("lms_GetChildLmsCom() called");var d=document.LmsCom,e=c.window.document.LmsCom=new LmsComBase(d);e.owner=c.window;d.child=e}
function ListenChildClose(){__alert("lms_ListenChildClose() called");var c=document.LmsCom,d=c.child;if(d){c.status_obj.modes[d.status_obj.mode.id].complete=d.status_obj.mode.complete;c.utPopModeIndex();c.doit_child_time+=d.end_date-d.start_date}}function _closePage(){var c=document.LmsCom,d=new Date;c.utRecordEndTime(d);c.utRecordTimespan(c.computeTime2(c.start_date,d));c.utRecordCompletionStatus(_modeLaunch)}
function lms_LaunchTopic(c){__alert("lms_LaunchTopic("+c+") called");var d=document.LmsCom;if(c=="P"){d.utPushModeIndex();d.utRecordType("print_it");d.utRecordStartTime(new Date);d.utRecordEndTime(new Date);d.utRecordCompletionStatus(LMS_COMPLETED);d.utPopModeIndex();d.status_obj.setModestatus("P",true);d.SaveStatus()}}
function lms_topicStart(c,d){__alert("lms_topicStart() called with parameters: "+c+","+d);var e=document.LmsCom,g=lmsModes.indexOf("E")>-1||typeof lmsReqMode==="undefined"?null:lmsReqMode;e.assessment_guid?e.OpenTopicLaunchStatus(d,lmsModes+"K",playerModes+"K",g):e.OpenTopicLaunchStatus(d,lmsModes,playerModes,g);e.lesson_status===LMS_NOT_ATTEMPTED&&e.status_obj.isComplete()&&e.status_obj.clearTopicstat();g=["see_it","try_it","know_it","do_it","print_it","test_it"]["STKDPE".indexOf(d)];e.utRecordType(g);
e.utRecordStartTime(new Date)}function lms_topicFinish(c){__alert("lms_topicFinish() called with parameter: "+c);document.LmsCom.status_obj.mode.complete=true;_modeLaunch=LMS_COMPLETED}function lms_frameView(c,d,e){__alert("lms_frameView() called with parameter: "+c+","+d+","+e);document.LmsCom.utRecordFrameViewed(e);_feedbackUrlArgs="&FrameID="+e+"&UPKMode="+d}
function lms_knowitScore(c,d,e){__alert("lms_knowitScore called with parameter: "+c+","+d+","+e);c=document.LmsCom;c.status_obj.mode.complete=true;c.status_obj.score=d;c.status_obj.passed=e;c.utRecordSuccessStatus(e?"passed":"failed");c.utRecordScoreScaled(d/100)}function lms_getUserName(){return document.LmsCom.student_name}
function lms_sendTestItResult(c,d){__alert("lms_sendTestItResult called with parameter: "+d);var e=document.LmsCom;e.status_obj.passed=c==1;e.utRecordSuccessStatus(c==1?"passed":c==2?"failed":"unknown");e.utSendTestItResult(d)}function lms_KPathLogout(){_logout(true)}var _lms_module_name="lms_topic.js",_lms_show_alert=false,_lms_show_Ialert=false;function splitUri(c){c=c.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);c.shift();return c=[c[1]+"://"+c[3],c[4],c[6]+c[8]]}
function combine(c,d){var e=d;if(e.indexOf("odrel://")==0)e=e.substr(8);if(e=="")e=".";var g=splitUri(c),j=g[0];g=g[1];if(g.charAt(0)=="/")g=g.substr(1);if(g.charAt(g.length-1)=="/")g=g.substr(0,g.length-1);if(e.charAt(e.length-1)=="/")e=e.substr(0,e.length-1);g=g.split("/");var n=e.split("/");if(n.length>2&&n[0]==""&&n[1]==""){j=j.split(":")[0]+":/";for(e=2;e<n.length;e++)j+="/"+n[e];return j}var m=[];for(e=0;e<g.length;e++)m[e]=g[e];for(e=0;e<n.length;e++)if(n[e]==".."){if(m.length>0)m=m.slice(0,
m.length-1)}else if(n[e]!=".")if(n[e]=="")m=[];else m[m.length]=n[e];g="";for(e=0;e<m.length;e++)g+="/"+m[e];return j+g}function getRootUrl(){if(typeof isTocHtml!="undefined"){var c=document.location.href;return c.substr(0,c.lastIndexOf("/"))}var d=splitUri(document.location.href);c=d[0];d=d[1];if(d.charAt(0)=="/")d=d.substr(1);d=d.split("/");var e;for(e=d.length-1;d[e]!="tpc"&&e>=0;e--);if(e>0&&(d[e-1]=="data"||d[e-1]=="help"))e-=1;for(var g="",j=0;j<e;j++)g+="/"+d[j];return c+g}
function isRelative(c){c=c.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);return c[1]==""||c[1]==undefined}function resolveIfRelative(c){return c.indexOf("odrel://")==0?resolve(c):c}function resolve(c){if(isRelative(PlayerConfig.BaseUrl)){var d=getRootUrl();d=combine(d,PlayerConfig.BaseUrl);return combine(d,c)}else return combine(PlayerConfig.BaseUrl,c)}
function resolveLinksInWebPage(){for(var c=document.getElementsByTagName("a"),d=0;d<c.length;d++){var e=c[d].getAttribute("href");if(e!=null)if(e.indexOf("odrel://")==0)c[d].href=resolve(c[d].getAttribute("href"))}}if(!Array.prototype.last)Array.prototype.last=function(){return this.length>0?this[this.length-1]:null};if(!Array.prototype.first)Array.prototype.first=function(){return this.length>0?this[0]:null};function UPKDelegate(){this.fn=[]}
UPKDelegate.prototype.Raise=function(c,d){for(var e=0;e<this.fn.length;e++)this.fn[e](c,d)};UPKDelegate.prototype.Register=function(c){this.fn.push(c)};UPKDelegate.prototype.Unregister=function(c){for(var d=0;d<this.fn.length;d++)if(this.fn[d]==c){this.fn.splice(d,1);return}alert("UPKDelegate.Unregister failed to find function")};UPKDelegate.prototype.Count=function(){return this.fn.length};upk=upk||{};
upk.Timeline=function(){function c(q,G){if(G=="back"){for(var I=F-1;I>=0;I--)if(H[I]==q)return I;for(I=F;I<H.length;I++)if(H[I]==q)return I}else{for(I=F;I<H.length;I++)if(H[I]==q)return I;for(I=F-1;I>=0;I--)if(H[I]==q)return I}return-1}function d(q){q=screens[q].actions[0];if(_HasSound(q)){q=q.id.substr(1)+".ASX";q=StandardTimeToMillisecs(sounds[q].duration);return isNaN(q)?0:q+500}return 0}function e(q){q=screens[q].actions[0].delay;if(q!=DELAY_INFINITE)return q*100;return 0}function g(q){if(q==
"end")return 0;return _HasSound(screens[q].actions[0])?d(q):e(q)}function j(q){if(q=="end")return 0;return screens[q].actions[0].animTime}function n(q){var G=g(q),I=j(q);if(da!=null)da[q]={n:G,a:I,s:I+G};return G+I}function m(){var q=0,G=E.GetCurrentFrame();if(!G)return 0;if(G=="end")return 0;var I=screens[G].actions[0];switch(A){case "A":q+=_HasSound(I)?d(G):e(G);q+=Q;break;case "D":q=Q;break;case "S":q=SoundPlayer_GetTime().t;if(isNaN(q))return R;if(Math.round(q)==P.t)if(G!=P.f)return R;P={f:G,
t:Math.round(q)};break;case "B":q=0}I=n(G);if(q>I)q=I;if(W==G){if(G!="start")if(q<R)q=R;else R=q}else q=0;W=G;return q}function o(q){R=0;A="B";Q=0;F=q}function p(){for(var q=0,G=0;G<F;G++)q+=n(H[G]);v=q}function B(q){ia=[];if(D(q,false))return true;ia=[];return D(q,true)}function D(q,G,I){if(I==undefined)I=H.last();if(I=="end"){H.push("end");return true}var aa=1;try{aa=screens[I].actions.length}catch(ka){}for(var ha=0;ha<aa;ha++){var ja=screens[I].actions[ha].nextFrame,ga=false;if(ja==q){H.push(ja);
return true}else if(ja=="end")continue;else if(_SkipFrame(screens[ja]))ga=true;if(!ga){if(G){if(ha>0){a:{for(ga=0;ga<H.length;ga++)if(ia[ga]==ja){ga=true;break a}ga=false}if(ga)continue;else ia.push(ja)}}else if(c(ja)>=0)continue;H.push(ja)}if(D(q,G,ja))return true;else H.pop()}return false}function Z(){ba.Raise(E,{CurrentTime:E.GetCurrentTime(),TimelineDuration:K,FrameState:E.GetFrameState(),Locked:T})}var E={},H=[],T=false,ca=0,S=0,F=-1;H.push("start");var K=0,v=0,R=0,W=0,P={f:"",t:0},J=false,ba=
new UPKDelegate,ia,da=null,A="B",Q;E.Init=function(q){if(J)return false;J=true;H.push(q);R=W=0;return true};E.Lock=function(q,G){T=q;if(q==true){ca=3;S=G}};E.OnProgressUpdate=function(q){ba.Register(q);ba.Count()==1&&setInterval(Z,300)};E.SetFrameState=function(q){A=q;Q=0};E.GetFrameState=function(){return A};E.IncFrameTimeCounter=function(q){Q+=q};E.CalculateTimeline=function(q){E.CalculateTimelineThrough(q)};E.CalculateTimelineThrough=function(q){H=[];H.push(StartScreen);q!="end"&&B(q);B("end");
o(q=="end"?0:c(q));E.UpdateTimelineDuration();da=null};E.UpTimelineAt=function(q,G,I){var aa=c(q,G);if(I&&I.valid)aa=I.timelineindex;if(aa>=0&&G!="back"){o(aa);p()}else{if(aa>=0){H=H.slice(0,aa+1);B("end")}else{H=H.slice(0,F+1);B(q);q!="end"&&B("end");aa=c(q,G)}o(aa);E.UpdateTimelineDuration()}if(I&&I.valid){R=I.resttime;W=this.GetCurrentFrame()}};E.GetCurrentFrame=function(){return H[F]};E.GetTimeline=function(){return H};E.GetCurrentFrameIndex=function(){return F};E.GetTimelineDuration=function(){return K};
E.GetCurrentTime=function(){if(T==false)if(ca>0){ca--;if(S!=undefined)return S}return v+m()};E.GetHistory=function(){for(var q=[],G=0;G<F;G++)q.push(H[G]);return q};E.UpdateTimelineDuration=function(){for(var q=0,G=0;G<H.length;G++)q+=n(H[G]);p();K=q};E.FrameTimeStructure=function(q,G,I,aa,ka){this.frameid=q;this.timelineindex=G;this.narration=I;this.animation=aa;this.resttime=ka};E.END_OF_TOPIC=-999;E.DeterminateCurrentFrameFromTime=function(q){if(q==K)return new E.FrameTimeStructure(E.END_OF_TOPIC);
var G=0,I=0,aa=0;for(aa=0;aa<H.length;aa++){var ka=g(H[aa]),ha=j(H[aa]);G+=ka+ha;if(G>=q)break;I=G}return new E.FrameTimeStructure(H[aa],aa,ka,ha,q-I)};return E}();function StandardTimeToMillisecs(c){c=c.split(":");var d=DELAY_INFINITE;try{d=parseFloat(c[0]*3600)+parseFloat(c[1]*60)+parseFloat(c[2]);d*=1E3}catch(e){}return d}
function MillisecsToFormattedTime(c){var d=c/1E3;c=""+Math.floor(d%60);c=c.length>1?c:"0"+c;var e=""+Math.floor(d/60);e=e.length>1?e:"0"+e;d=""+Math.floor(d/3600);d=d.length>1?d:"0"+d;return""+d+":"+e+":"+c}var fidiv=document.getElementById("frameiddiv"),showtest=false;
function SetUpProgressReporting(){if(showtest){$("#frameiddiv").append("<div id='testtiming'>timing</div>");$("#frameiddiv").append("<div id='testtimeline'>timeline</div>");$("#frameiddiv").append("<input id='testback' type='button' value='Back' onclick='return testback_onclick()' />")}upk.Timeline.OnProgressUpdate(TestTimelineProgress)}function testback_onclick(){DemoPrev()}
function TestTimelineProgress(c,d){if(!d.Locked){if(SoundIsLocked)if(SoundIsLocked())return;if(showtest){var e=MillisecsToFormattedTime(d.CurrentTime)+" : "+MillisecsToFormattedTime(d.TimelineDuration);e+=" - "+d.FrameState;$("#testtiming").html(e);var g=upk.Timeline.GetTimeline(),j=upk.Timeline.GetCurrentFrameIndex();e="Cindex: "+j+" | ";for(var n=0;n<g.length;n++){if(n==j)e+="->";e+=g[n];if(n==j)e+="<-";e+=" "}$("#testtimeline").html(e)}if(isNavBar()){navBar.setEndTime(d.TimelineDuration);navBar.setCurrentTime(d.CurrentTime)}}}
var trackArgList,trackScoreCompleted,trackScoreRequired;function trackOnBegin(){for(var c=0;c<trackArgList.length;c++){strArg=trackArgList[c];if(strArg.substr(0,9)=="kpfeedbk="){PlayerConfig.TrackFeedBack=strArg.substr(9)=="0"?false:true;PlayerConfig.ShowScoreNeeded=PlayerConfig.TrackFeedBack}}}
function trackComplete(){for(var c="",d=0;d<trackArgList.length;d++){strArg=trackArgList[d];if(strArg.substr(0,11)=="kpnextpage=")c=strArg.substr(11)}if(c.length>0){d=""+trackScoreCompleted+"%";var e=0;if(trackScoreCompleted>=trackScoreRequired)e=1;var g="";g=c.indexOf("?")>=0||c.indexOf("#")>=0?c+"&score="+e+"&answer="+d:c+"?score="+e+"&answer="+d;if(window.parent.opener)window.parent.opener.location.href=g}}function trackIncomplete(){}var guidedParent=null,gopener=null;
function GetOpener(){if(top.window.opener)try{if(!top.window.opener.closed)if(top.window.opener.GIPlayer)gopener=guidedParent=top.window.opener.GIPlayer}catch(c){}}
var playMode="S",param_frame="",param_ctx="",param_ctxlist="",param_guid="",param_printitname="",lms_childIndex=0,lms_inAssessment=false,screenshotPath="",DEF_KWARNINGSCORELEVEL=1,KWarningLevel=0,KScoreNeeded=80,KTopicFinished=false,soundIsExported=false,KWrongScreens=[],KScoringScreen=false,KConfirmDemo=false,KConfirmCheckBox=true,KFinishClose=false,KPreventSound=false,KContinueFlag=0,KGuestDemoMode=0,KRemediation1=true,KRemediation2=true,KRemediation3=true,binterf=0,def_PLAYER_CLOSE="PLAYER_CLOSE",
NS4=navigator.appName=="Netscape"&&parseInt(navigator.appVersion)==4,screens=[],screenNames=[],currentScreenObj,currentscreenName,FirstScreenName="",showLeadIn=2,firsthemialternativeindex=0,nosound=false,concepts=[],preloadImages=[],preloadImagesList=[],preloadImagesCacheSize=50,showScreen="",showAct=0,moduleName="",topicName=unescape(document.title),topicShowBubbles="",StartAction=0,Knowit_minimum=167,Rem1_minimum=200,Rem2_minimum=250,Rem4_width=300;function DummyObj(){this.type=""}
var showActObj=new DummyObj,showActInpObj,showHistory=[],historyActionMap=[],isPaused=false,DELAY_INFINITE=999,MOUSE_STEP=25,scrH=0,scrW=0,animTimeout,bullsTimeout,animPhase="",animCmd="",animSteps=0,animStepOriginal=0,anim_x,anim_y,anim_to_x,anim_to_y,screenshot=new Image,event_blocked,animObject,showFrameIDToggle=0;function InputOnFocus(){if(showActInpObj)showActInpObj.hasfocus=true}function InputOnBlur(){if(showActInpObj)showActInpObj.hasfocus=false}
function FocusMe(){try{window.focus()}catch(c){}}function FocusInpObj(){if(showActInpObj){try{showActInpObj.focus()}catch(c){}var d=document.getElementById(showActInpObj.id);d.text=d.text;SelectText(showActInpObj)}}function SelectText(c){if(IsTouchDevice())try{c.setSelectionRange(0,9999)}catch(d){c.select()}else c.select()}function OnFocus(){showActObj&&showActObj.type&&showActObj.type=="Input"&&showActInpObj&&setTimeout("FocusInpObj()",10)}function OnBubbleMoved(){OnFocus()}
function OnBubbleClicked(){actionMenu&&actionMenu.IsOnScreen()&&actionMenu.Close()}function AnimObject(c,d,e){this.cmd=c;this.timeout=d;this.phase=e;this.delaystep=0;this.showbubble=true}function IsLeadIn(c){if(c==null)c=showActObj;return screens.start.actions[0].id==c.id}function IsLeadOut(c){if(c==null)c=showActObj;return c.nextFrame=="end"}function IsDecision(c){if(c==null)c=showActObj;return c.type=="Decision"}
function IsExplanation(c){if(c==null)c=showActObj;if(IsLeadIn(c)||IsLeadOut(c))return false;return c.type=="None"}function IsActionFrame(c){if(c==null)c=showActObj;return c.type=="Normal"}function StoredEvent(c,d,e,g){this.storedEvent=true;this.pX=c;this.pY=d;this.pShState=e;this.pButton=g}function AddToWrongScreens(c){for(var d=0;d<KWrongScreens.length;d++)if(KWrongScreens[d]==c)return;KWrongScreens[KWrongScreens.length]=c}
function GetResultInPercent(c){for(var d=0,e=0;e<showHistory.length;e++)screens[showHistory[e]].actions[0].type!="None"&&d++;e=KWrongScreens.length;if(c)if(!IsLeadOut()){c=screens[showScreen];for(var g=c.actions[0].nextFrame;g!="end";){if(c.type!="decision"&&c.type!="none"){d++;e++}c=screens[g];g=c.actions[0].nextFrame}}if(d==0)return 100;return Math.round(100-e/d*100)}
function StartDemoInKnowIt(){IsDragBegin||AddToWrongScreens(showScreen);KGuestDemoMode=1;binterf.SetMoveable(false);setTimeout("ShowScreen(showScreen)",200)}function StartDemoInTryIt(){KGuestDemoMode=1;setTimeout("ShowScreen(showScreen)",200)}
function HLink(c){if(playMode=="T")if(c==0||c==1||c==2){HLinkStart=true;TeacherForward(true)}else if(c==13)AssessStringInput(true,true)?TeacherForward(true):TeacherWrong();else if(c==130)UpdateDoneTyping(false);else c==131&&UpdateDoneTyping(true);else if(playMode=="S")if(c==0||c==1||c==2)DemoForward();else c==600&&PauseToggle();else if(c==0||c==1){HLinkStart=true;TeacherForward(true)}else if(c==2)if(KWarningLevel<DEF_KWARNINGSCORELEVEL&&KConfirmCheckBox){KPreventSound=true;HideAction();KConfirmDemo=
true;ShowAction()}else{KWarningLevel<DEF_KWARNINGSCORELEVEL&&!KConfirmCheckBox&&AddToWrongScreens(showScreen);StartDemoInKnowIt()}else if(c==10)StartDemoInKnowIt();else if(c==11){KConfirmDemo=false;AddToWrongScreens(showScreen);StartDemoInKnowIt()}else if(c==110)UpdateYesNo(false,false);else if(c==111)UpdateYesNo(true,false);else if(c==12){KPreventSound=true;HideAction();KConfirmDemo=false;ShowAction()}else if(c==120)UpdateYesNo(false,false);else if(c==121)UpdateYesNo(false,true);else if(c==13)AssessStringInput(true,
true)?TeacherForward(true):TeacherWrong();else if(c==130)UpdateDoneTyping(false);else if(c==131)UpdateDoneTyping(true);else if(c==125)KConfirmCheckBox=!KConfirmCheckBox;else if(c==126){KConfirmCheckBox=!KConfirmCheckBox;document.getElementsByName("KConfCB")[0].checked=!document.getElementsByName("KConfCB")[0].checked}else if(c==20)ClosePlayer(1);else if(c==30)StartDemoInKnowIt();else if(c==400){if(!trackSent){c=GetResultInPercent();page=window.open("../../../html/certificate.html#ModuleDesc=1&TopicDesc=1&PctComplete="+
c+"&PctNeeded="+KScoreNeeded,"print","toolbar=1,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=800,height=600,left=147,top=131")}}else if(c==500)ClosePlayer();else if(c==501){HideAction();KFinishClose=false;ShowAction()}else if(c==502)ClosePlayer(0,1);else if(c==503){lms_knowitScore(getMyGuid(),0,0);lms_topicFinish(getMyGuid());ClosePlayer()}else if(c==504){HideAction();KFinishClose=false;ShowAction()}else c==600&&PauseToggle()}
function Certification_GetModuleName(){if(moduleName.length==0)return"";return R_outline+moduleName}function Certification_GetTopicName(){if(topicName.length==0)return"";return R_topic+topicName}function OnClose(){SavePosition();if(playMode=="K")if(IsLeadOut())KScoringScreen?ClosePlayer(1):HLink(1);else{HideAction();KFinishClose=true;ShowAction()}else ClosePlayer()}var actionMenu=0,closedbyEnter=false;
function OnAction(){if(closedbyEnter)closedbyEnter=false;else{if(actionMenu)if(actionMenu.IsOnScreen()){actionMenu.Close();return true}if(playMode=="T"||playMode=="K"&&KGuestDemoMode==0){if(actionMenu==0)actionMenu=new ActionMenu;actionMenu.Open();RefreshActionMenu()}if(playMode=="S"||playMode=="K"&&KGuestDemoMode>0){isPaused||PauseToggle();if(actionMenu==0)actionMenu=new ActionMenu;actionMenu.Open();RefreshActionMenu()}}}function OnAlternative(){TeacherAlter()}
function RefreshActionMenu(c,d,e){if(actionMenu){var g=showActObj.nextFrame!="end"&&showActObj.type!="Decision";UserPrefs.TryIt.EnableSkipping||(g=false);var j=showHistory.length>1;actionMenu.Refresh(g,j,j,screens[showScreen].actions.length>1&&showActObj.type!="Decision",c,d,e,param_printitname.length>0)}}function OnMenuAlternative(c,d,e){CloseAction();PlayStop();d!=null&&e==null?LaunchHelp(d):eval(c)}function LaunchHelp(c){isPaused||PauseToggle();onHelp(c)}
function CloseAction(c){actionMenu&&actionMenu.Close();c||FocusMe()}function ShowPrintit(){param_printitname.length>0&&window.open("../../printit/"+param_printitname)}function LogOut(){lms_KPathLogout()}
function OpenPreferences(){var c=!SoundPlayerObj.IsAvailable(),d=MakeAbsolute("../../../html/preferences.html"),e=[];if(lms_IsUserProfileAvailable()){var g=lms_GetUserProfileUrl();if(g!="")e[e.length]="UserProfileUrl="+Escape.MyEscape(g)}if(c)e[e.length]="nosound";for(c=0;c<e.length;c++){d+=c==0?"?":"&";d+=e[c]}saved_preferences_event=getOnCloseEvent();setOnCloseEvent("preferences_return()");parent.setDlgCtx("preferences");parent.showDialog(d,-1,-1,420,380,true,96,"../../../")}
var saved_preferences_event="";function preferences_return(){setOnCloseEvent(saved_preferences_event)}function IsPreferencesOpened(){return getOnCloseEvent()=="preferences_return()"}var sharedUrl1="",sharedUrl2="",sharedUrl3="";
function Share(){var c=window.location.href.indexOf("/data/tpc/"),d=window.location.href.substr(0,c)+"/",e=document.getElementById("TopicId").getAttribute("topicid");sharedUrl1=d+"index.html?"+("bypasstoc=0&guid="+e);c="mode="+playMode+"&guid="+e;sharedUrl2=d+"index.html?"+c;c="mode="+playMode+"&guid="+e;if(showScreen!="start"&&showActObj.nextFrame!="end")c+="&frame="+showScreen.substr(1);sharedUrl3=d+"index.html?"+c;c=MakeAbsolute("../../../html/sharecontent.html");c+="?type=player";if(playMode==
"K")c+="K";d=IsTouchDevice()||upk.browserInfo.isIE10Modern();c+="&touch="+(d?"1":"0");d=PxToPt(650,96);e=PxToPt(260,96);parent.setDlgCtx("shareIt");parent.showDialog(c,-1,-1,d,e,true,96,"../../../")}function GetSharedUrl(c){switch(c){case 1:return sharedUrl1;case 2:return sharedUrl2;case 3:return sharedUrl3}return""}function Menu_Resume(){isPaused&&PauseToggle()}
function InsertStart(){for(var c=[],d=0;d<showHistory.length;d++)c[c.length]=showHistory[d];showHistory=[];showHistory[0]="start";for(d=0;d<c.length;d++)showHistory[showHistory.length]=c[d]}function DeleteStart(){for(var c=[],d=0;d<showHistory.length;d++)c[c.length]=showHistory[d];showHistory=[];for(d=1;d<c.length;d++)showHistory[showHistory.length]=c[d]}
function OnUpdatePreferences(c){UserPrefs.Copy(c);if(showLeadIn==1||c.ShowLeadIn=="all"&&showLeadIn!=0)showHistory.length>0&&showHistory[0]!="start"&&InsertStart();else showHistory.length>0&&showHistory[0]=="start"&&DeleteStart();try{opener.OnUpdatePreferences&&opener.OnUpdatePreferences(c)}catch(d){}}function DownloadImage_(c,d,e){c.user_url=Format(d);c.user_retFn=e;c.onload=Loaded_;c.onerror=LoadError_;c.src=d}function Loaded_(){eval(this.user_retFn+'("'+this.user_url+'",true)')}
function LoadError_(){eval(this.user_retFn+'("'+this.user_url+'",false)')}function Format(c){var d="";for(i=0;i<c.length;i++){var e=c.charAt(i);d+=e=="\\"?"\\\\":e}return d}function GetImage(c,d){c.src=d}function DownloadImage(c,d){preloadImages[c]||PreloadImage(c);WaitForImage(c,d)}
function WaitForImage(c,d){var e;if(preloadImages[c].loaded){e=d+'("'+preloadImages[c].user_url+'",true)';eval(e)}else if(preloadImages[c].error){e=d+'("'+preloadImages[c].user_url+'",false)';eval(e)}else setTimeout("WaitForImage('"+c+"','"+d+"');",300)}function HandlePreloadImagesCache(){for(;preloadImagesList.length>preloadImagesCacheSize;){var c=preloadImagesList.shift();preloadImages[c]=null}}
function PreloadImage(c){if(!preloadImages[c]){preloadImagesList.push(c);preloadImages[c]=new Image;preloadImages[c].loaded=false;preloadImages[c].error=false;HandlePreloadImagesCache();DownloadImage_(preloadImages[c],c,"Preload_Return")}}function Preload_Return(c,d){if(d)preloadImages[c].loaded=true;else preloadImages[c].error=true}function ScreenObj(c,d){this.image=c;this.showBubble=d;this.actions=[];this.infoblocks=[];this.emptyinfo=true}
function Screen(c,d,e){d=new ScreenObj(d,e);currentScreenObj=screens[c]=d;currentScreenName=screenNames[screenNames.length]=c}
function FilterTryItText(c){var d=c,e=d.toLowerCase();for(c=true;c;){c=false;for(var g,j,n=0;n<e.length;n++)if(e.substr(n,5)=="href="){c=true;g=n;break}if(c){for(j=0;n<e.length;n++)if(e.substr(n,7)=="hrefend"){j=n+10;break}if(j>0){d=d.substr(0,g)+d.substr(j);e=d.toLowerCase()}else c=false}}e=d;for(c=true;c;){c=false;for(n=0;n<e.length;n++)if(e.substr(n,6)=="title="){c=true;g=n;break}if(c){for(j=0;n<e.length;n++)if(e.substr(n,8)=="titleend"){j=n+11;break}if(j>0){d=d.substr(0,g)+d.substr(j);e=d.toLowerCase()}else c=
false}}return d}function IsTextEmpty(c){for(var d=true,e=0;e<c.length;e++){var g=c.substr(e,1);if(d==true)if(g=="<")d=false;else{if(c.charCodeAt(e)!=13&&c.charCodeAt(e)!=10)return false}else if(g==">")d=true}return true}function Replace(c,d,e){var g=d.length,j=c.indexOf(d);if(j<0)return c;d=c.substr(0,j);c=c.substr(j+g);return d+e+c}
function DisplayInputTextPart(c,d,e){var g="<DIV id="+d+' style="DISPLAY: inline">',j=c.indexOf(g);if(j<0){g='<div id="'+d+'" style="display: inline;">';j=c.indexOf(g);if(j<0){g='<div id="'+d+'" style="display:inline">';j=c.indexOf(g);if(j<0){g='<DIV style="DISPLAY: inline" id='+d+">";j=c.indexOf(g);if(j<0)return c}}}d=c.substr(j+g.length);g=d.indexOf("</DIV>");if(g<0)g=d.indexOf("</div>");if(e==true)return c.substr(0,j)+d.substr(0,g)+d.substr(g+6);return c.substr(0,j)+d.substr(g+6)}
function BuildInputText(c,d){var e=false,g=false,j=false,n=false,m=false;if(playMode=="S"||playMode=="T")j=true;else if(c.par1[0]=="S"){e=true;if(template_strinp_suppress_example=="<span>0</span>")j=g=true}else if(c.par1[0]=="A"){m=e=true;if(template_strinp_suppress_example=="<span>0</span>")j=g=true}else if(c.par1[0]=="N")m=n=j=true;else n=j=true;e=DisplayInputTextPart(d,"anything",e);e=DisplayInputTextPart(e,"example",g);e=DisplayInputTextPart(e,"inputtext",j);e=DisplayInputTextPart(e,"inputalt",
n);e=DisplayInputTextPart(e,"blank",m);e=e.replace(RegExp("<SPAN></SPAN>","g"),"<SPAN> </SPAN>");e=e.replace(RegExp("\r","g"),"");return e=e.replace(RegExp("\n","g"),"")}function StartsWith(c,d){if(c.length<d.length)return false;var e=d.toLowerCase();if(c.substr(0,d.length).toLowerCase()==e)return true;return false}
function RemoveNbsp(c){for(var d=0,e="",g=0;g<c.length;){snext=c.substr(g);switch(d){case 0:if(StartsWith(snext,"<font")){e+=snext.substr(0,5);g+=5;d=1}else{e+=snext.substr(0,1);g++}break;case 1:if(StartsWith(snext,">")){e+=snext.substr(0,1);g+=1;d=2}else{e+=snext.substr(0,1);g++}break;case 2:if(StartsWith(snext,"&nbsp;&nbsp;")){e+=snext.substr(0,6);g+=6;d=2}else if(StartsWith(snext,"&nbsp; ")){e+=snext.substr(0,7);g+=7;d=2}else if(StartsWith(snext,"&nbsp;")){e+=" ";g+=6;d=2}else if(StartsWith(snext,
">")){e+=snext.substr(0,1);g+=1;d=0}else{e+=snext.substr(0,1);g++}}}return e}function DummyActionObj(c,d,e,g,j){this.realAction=false;this.id=c;this.nextFrame=d;this.hotspots=e;this.type=g;this.par1=j}
function AddDummyActions(c,d){if(upk.browserInfo.isMacOs()){if(upk.browserInfo.isFF()){if(d.type=="RClick1"&&d.par1=="")c[c.length]=new DummyActionObj(d.id,d.nextFrame,d.hotspots,"RClick1","c");if(d.type=="LClick1"&&d.par1=="c")c[c.length]=new DummyActionObj(d.id,d.nextFrame,d.hotspots,"RClick1","c")}if(upk.browserInfo.isSafari()){if(d.type=="RClick1"&&d.par1=="")c[c.length]=new DummyActionObj(d.id,d.nextFrame,d.hotspots,"LClick1","c");if(d.type=="RClick1"&&d.par1=="c")c[c.length]=new DummyActionObj(d.id,
d.nextFrame,d.hotspots,"LClick1","c")}}}function TemplateTextCorrection(c){var d=$("<div>"+c+"</div>"),e=d.find("span[face]");if(e.length==0)return c;c="";for(var g=0;g<e[0].attributes.length;g++){var j=e[0].attributes[g];if(j.name=="face")c=j.value}e.find("span").css("font-family",c);return d[0].innerHTML}
function TemplateTextCorrection2(c,d){for(var e=$("<div>"+c+"</div"),g="",j=$("<div "+d+" />"),n=0;n<j[0].attributes.length;n++){var m=j[0].attributes[n];if(m.name=="face")g=m.value}e.find("span").css("font-family",g);return e[0].innerHTML}
function ActionObj(c,d,e,g,j,n,m,o,p,B,D,Z,E,H,T,ca,S,F,K,v,R,W,P,J,ba,ia,da){this.realAction=true;this.disabledmodes=da==null?"":da;R=RemoveNbsp(R);(W=RemoveNbsp(W))||(W="");if(IsTextEmpty(W))W="";P||(P="");this.id=c;this.nextFrame=d;this.matchedcontext=e;this.hotspots=g;this.bubpos=j;this.xpos=n;this.ypos=m;this.width=o;this.height=p;this.kwidth=B;this.kheight=D;this.ctx=Z;this.ecidarray=null;this.type=H;this.delay=T;this.par1=ca;try{this.par1[1]=DecodeTagElements(ca[1])}catch(A){}this.par2=DecodeInputString(S);
this.par3=F;this.par4=false;this.par5=this.lastIMEtext="";this.iconname=K;this.bubcolor=v;c="<font "+J+">";e=0;if(UserPrefs.PlayAudio!="none")e=1E3;if(this.type=="Input"){g=10;try{g=DecodeInputString(this.par1[1]).length}catch(Q){}this.animTime=PlayerConfig.InputDelay*g;this.animTime+=e}else if(this.type=="Key"){this.animTime=PlayerConfig.InputDelay;this.animTime+=e}else if(this.type.indexOf("Wheel")!=-1){this.animTime=PlayerConfig.WheelDelay;this.animTime+=e}else if(this.type=="None")this.animTime=
0;else if(this.type=="Decision")this.animTime=0;else if(this.type=="Drag")this.animTime=PlayerConfig.MouseDelay*3;else{this.animTime=PlayerConfig.MouseDelay*PlayerConfig.MouseSteps;this.animTime+=2*PlayerConfig.BullseyeDelay;this.animTime+=e}this.fontbegin=c;this.fontend="</font>";P=TemplateTextCorrection(P);if(playMode=="S"&&H!="Decision")R=FilterTryItText(R);if(this.type=="Input"&&P.length>0)P=BuildInputText(this,P);R=R.length==0&&P.length==0?"":R.length==0?P:P==0?R:ba?R+"<p>"+P+"</p>":P+R;e=W.length==
0&&P.length==0?"":W.length==0?P:P==0?W:ba?W+P:P+W;if(H=="None")if(currentScreenName=="start"&&playMode!="S"){R+="<br><p class='MsoNormal'>"+c+TemplateTextCorrection2(template_leadin,J)+"</font></p>";if(PlayerConfig.ShowScoreNeeded)e+="###KSCORE###";e+="###KINSTRUCTION###";e+="<br><p class='MsoNormal'>"+c+TemplateTextCorrection2(template_knowit_leadin,J)+"</font></p>";this.delay=999}else if(d=="end"&&playMode!="S"){R+="<br><p class='MsoNormal'>"+c+TemplateTextCorrection2(template_leadout,J)+"</font></p>";
e+="<br><p class='MsoNormal'>"+c+TemplateTextCorrection2(template_knowit_leadout,J)+"</font></p>";this.delay=999}else if(T==999){R+="<br><p class='MsoNormal'>"+c+TemplateTextCorrection2(template_explanation,J)+"</font></p>";e+="<br><p class='MsoNormal'>"+c+TemplateTextCorrection2(template_knowit_explanation,J)+"</font></p>"}else{if(!IsTextEmpty(R)&&this.delay!=999&&playMode=="T"){R+="<br><p class='MsoNormal'>"+c+TemplateTextCorrection2(template_explanation,J)+"</font></p>";this.delay=999}}else if(playMode==
"S")if(T==999)if(H!="Decision")R+="<br><p class='MsoNormal'>"+c+TemplateTextCorrection2(template_explanation,J)+"</font></p>";this.text=IsTextEmpty(R)?"":R;this.emptytext=this.text.length==0;this.ktext=IsTextEmpty(e)?"":e;this.kemptytext=this.ktext.length==0;ia||(P="");this.knowittext=R=W.length==0&&P==0?"":W.length==0?P:P==0?W:ba?W+P:P+W}
function Action(c,d,e,g,j,n,m,o,p,B,D,Z,E,H,T,ca,S,F,K,v,R,W,P,J,ba,ia,da){if(currentScreenObj){var A=currentScreenObj.actions;c=new ActionObj(c,d,e,g,j,n,m,o,p,B,D,Z,E,H,T,ca,S,F,K,v,R,W,P,J,ba,ia,da);A[A.length]=c;AddDummyActions(A,c)}}function InfoObj(c,d,e,g,j){this.buttonfile=c;this.url=d;this.tooltip=DecodeInputString(e);if(isNaN(g))g=999;this.infotype=g;this.infokey=j;this.simpleurl=d;this.height=this.width=0}
function InfoBlock(c,d,e,g,j){e||(e="");if(currentScreenObj){_buttonfile=c;_img="infobitmapimage.gif";_sb=c.toLowerCase();if(_sb.substr(_sb.length-_img.length)==_img)_buttonfile=c.substr(0,_sb.length-_img.length)+_img;c=currentScreenObj.infoblocks;c[c.length]=new InfoObj(_buttonfile,d,e,g,j);currentScreenObj.emptyinfo=false}}function ConceptObj(c,d,e,g,j,n){this.url=c;this.width=d;this.height=e;this.text=g;if(isNaN(j))j=999;this.infotype=j;this.infokey=n}
function ConceptInfo(c,d,e,g,j,n){concepts[concepts.length]=new ConceptObj(c,d,e,g,j,n)}var frameChangedDuringPausedStatus=false;
function Animate2(c,d,e,g,j){if(g=="")g=0;if(isPaused){if(frameChangedDuringPausedStatus==true)if(c.split(".")[0]!=getActualSoundFileName().split(".")[0])return;setTimeout('Animate2("'+c+'",'+d+',"'+e+'",'+g+',"'+j+'")',PlayerConfig.PausedDelay)}else{frameChangedDuringPausedStatus=false;d||upk.Timeline.SetFrameState("D");animObject=new AnimObject(e,g,j);if(showActObj.emptybubble||!_ShowBubble(showActObj))animObject.showbubble=false;if(KGuestDemoMode&&d==false)Animate(e,g,j);else _lastAsyncronFile==
true&&animSteps==0?setTimeout('Animate2("'+c+'",'+d+',"'+e+'",'+g+',"'+j+'")',200):PlaySound(c,d)}}var DELAY_STEP=20;function Animate(c,d,e){animCmd=c;animPhase=e;if(d==DELAY_INFINITE*100){animPhase="";SetButtonToBeInfinite()}else{clearTimeout(animTimeout);if(animObject)animObject.delaystep=0;animObject.timeout=d;animTimeout=setTimeout("AnimateTimer()",DELAY_STEP);upk.Timeline.IncFrameTimeCounter(DELAY_STEP)}}
function AnimateTimer(){if(animObject)if(animObject.timeout==DELAY_INFINITE*100)if(_ShowBubble(showActObj)==true){animPhase="";SetButtonToBeInfinite();return}if(isPaused){clearTimeout(animTimeout);animTimeout=setTimeout("AnimateTimer()",PlayerConfig.PausedDelay)}else{if(animObject){animObject.delaystep+=DELAY_STEP;if(animObject.delaystep<animObject.timeout){upk.Timeline.IncFrameTimeCounter(DELAY_STEP);clearTimeout(animTimeout);animTimeout=setTimeout("AnimateTimer()",DELAY_STEP);return}}eval(animCmd)}}
function AnimateKeyboard(){Animate2("stype.flv",true,"ShowScreen('"+showActObj.nextFrame+"')",PlayerConfig.InputDelay,"nostop");show("cursor")}
function AnimateInput(c){hide("cursor");animObject=null;c||upk.Timeline.SetFrameState("A");upk.Timeline.IncFrameTimeCounter(PlayerConfig.InputDelay);--animSteps;Ds=DecodeInputString(showActObj.par1[1]);if(typeof trimAnimTxt=="undefined")trimAnimTxt=0;if(Ds.length-animSteps==1){trimAnimTxt=0;c=document.styleSheets;for(var d in c)if(c[d].cssRules)for(var e in c[d].cssRules){var g="."+showActInpObj.className,j=g.toLowerCase();if(c[d].cssRules[e].selectorText==g||c[d].cssRules[e].selectorText==j){iSDFontSize=
c[d].cssRules[e].style.fontSize;break}}else for(e in c[d].rules)if(c[d].rules[e].selectorText=="."+showActInpObj.className){iSDFontSize=c[d].rules[e].style.fontSize;break}}showActInpObj.value=Ds.substr(trimAnimTxt,Ds.length-animSteps);showActInpObj.original=showActInpObj.value;try{iSD=document.getElementById("InpSizeDetect");iSD.innerHTML=showActInpObj.value;iSD.style.fontSize=iSDFontSize}catch(n){d=document.createElement("SPAN");d.id="InpSizeDetect";d.style.fontFamily="arial";d.style.fontSize=iSDFontSize;
d.style.paddingRight="12px";d.style.visibility="hidden";document.body.appendChild(d);iSD=document.getElementById("InpSizeDetect")}iSD.offsetWidth>=showActInpObj.offsetWidth&&trimAnimTxt++;DecodeInputString(showActObj.par1[1]).length-1==animSteps&&PlaySound_asyncron("strinput.flv");if(animSteps>0)setTimeout("AnimateInput(true)",PlayerConfig.InputDelay);else{show("cursor");Animate2("",true,"ShowScreen('"+showActObj.nextFrame+"')",PlayerConfig.InputDelay,"nostop")}}
function ShowBullsEye(){PlayerConfig.HideClickMark!=true&&show("bullseye")}function HideBullsEye(){hide("bullseye")}var cursor_alignment_x=25,cursor_alignment_y=25;
function AnimateMouse(c){c==undefined&&upk.Timeline.SetFrameState("A");var d;show("cursor");animSteps--;if(animSteps>=0){c="hot"+showActObj.id+"_0";anim_to_x=getObjLeft(c)+getObjWidth(c)/2;anim_to_y=getObjTop(c)+getObjHeight(c)/2;c=anim_to_x-animSteps*anim_x;d=anim_to_y-animSteps*anim_y;if(!isNaN(c)&&!isNaN(d)){shiftTo("cursor",c-cursor_alignment_x,d-cursor_alignment_y);shiftTo("bullseye",c-getObjWidth("bullseye")/2,d-getObjHeight("bullseye")/2)}}if(animSteps>=0){c=PlayerConfig.MouseDelay;if(animStepOriginal>
15)if(animSteps>5&&animSteps<animStepOriginal-5)c=PlayerConfig.MinMouseDelay;upk.Timeline.IncFrameTimeCounter(c);Animate("AnimateMouse(true)",c,animPhase)}else{animSteps=parseInt(showActObj.type.substr(showActObj.type.length-1,1))*2;if(animSteps>0){ShowBullsEye();animPhase!=""&&clearTimeout(animTimeout);Animate2("sclick.flv",true,"AnimateBullseye()",PlayerConfig.BullseyeDelay,"nostop")}else if(showActObj.type.indexOf("Down")!=-1){ShowBullsEye();Animate2("sclick.flv",true,"ShowScreen('"+showActObj.nextFrame+
"')",PlayerConfig.MouseDelay,"nostop")}else if(showActObj.type.indexOf("BeginDrag")!=-1){ShowBullsEye();clearTimeout(bullsTimeout);bullsTimeout=setTimeout("DragStart()",PlayerConfig.BullseyeDelay)}else if(showActObj.type.indexOf("Up")!=-1){ShowBullsEye();clearTimeout(bullsTimeout);bullsTimeout=setTimeout("DragEnd()",PlayerConfig.BullseyeDelay)}else if(showActObj.type.indexOf("Wheel")!=-1){ShowBullsEye();Animate2("swheel.flv",true,"ShowScreen('"+showActObj.nextFrame+"')",PlayerConfig.WheelDelay,"nostop")}else ShowScreen(showActObj.nextFrame)}}
function DragStart(){Animate2("sclick.flv",true,"ShowScreen('"+showActObj.nextFrame+"')",PlayerConfig.MouseDelay,"nostop")}function DragEnd(){HideBullsEye();Animate2("sclick.flv",true,"ShowScreen('"+showActObj.nextFrame+"')",PlayerConfig.MouseDelay,"nostop")}
function AnimateBullseye(){--animSteps;upk.Timeline.IncFrameTimeCounter(PlayerConfig.BullseyeDelay);if(Math.floor(animSteps/2)==animSteps/2){HideBullsEye();animSteps>0?Animate2("sclick.flv",true,"AnimateBullseye()",PlayerConfig.BullseyeDelay,animPhase):ShowScreen(showActObj.nextFrame)}else{ShowBullsEye();animSteps>0?Animate("AnimateBullseye()",PlayerConfig.BullseyeDelay,animPhase):ShowScreen(showActObj.nextFrame)}}
function DemoNext(){if(IsPaused())frameChangedDuringPausedStatus=true;upk.Timeline.Lock(true);clearTimeout(animTimeout);clearTimeout(bullsTimeout);PlayStop();HideBullsEye();ShowScreen(showActObj.nextFrame)}
function DemoPrev(c){if(IsPaused())frameChangedDuringPausedStatus=true;upk.Timeline.Lock(true);clearTimeout(animTimeout);clearTimeout(bullsTimeout);PlayStop();HideBullsEye();l=showHistory.length;if(l!=0){if(l==1){s=showHistory[0];showHistory.length--}else{for(s=showHistory[l-2];screens[s].actions[0].type=="Drag"||c==true&&screens[s].actions[0].type.indexOf("Up")!=-1;){showHistory.length--;s=showHistory[showHistory.length-2]}showHistory.length-=2}ShowScreen(s,null,"back")}}
function DemoForward(c){c||(c=false);ClearInfiniteButton();if(c||!c&&isPaused){clearTimeout(animTimeout);clearTimeout(bullsTimeout);PlayStop();HideBullsEye();setTimeout('ShowScreen("'+showActObj.nextFrame+'")',10)}else if(showActObj&&animPhase=="mouse"&&animSteps!=animStepOriginal){HideBullsEye();ShowScreen(showActObj.nextFrame)}else if(showActObj&&animPhase!="nostop")if(showActObj.type!="Input"&&showActObj.type!="Key"&&showActObj.type!="None"&&showActObj.type!="Decision"){animObject.timeout=50;PlaySound("dummy.flv")}else ShowScreen(showActObj.nextFrame)}
function TeacherFastBack(){if(showHistory.length>1)showHistory.length=0;FirstScreen(true)}function TeacherTestSkip(c){return c=="Drag"||c.indexOf("Up")!=-1}var _backStep=false;
function TeacherBack(){if(actionMenu)if(actionMenu.IsOnScreen()){actionMenu.Close();return true}_backStep=true;if(showHistory.length>1){showHistory.length--;for(var c=showHistory[showHistory.length-1];showHistory.length>1&&TeacherTestSkip(screens[c].actions[0].type);){showHistory.length--;c=showHistory[showHistory.length-1]}showHistory.length--;HideAction();historyActionMap[c]?ShowScreen(c,historyActionMap[c]):ShowScreen(c)}}
function TeacherForward(c,d,e){_backStep=false;if(!event_blocked)if(!KFinishClose){KnowItForward();if(d==null)d=showActObj.nextFrame;if(e)for(var g=0;g<screens[showScreen].actions.length;g++)if(e==screens[showScreen].actions[g].id){historyActionMap[showScreen]=g;break}e=999;g=d;if(d!="end")for(;!c&&d!="end"&&TeacherTestSkip(screens[d].actions[0].type)&&e--;){showHistory[showHistory.length]=d;d=screens[d].actions[0].nextFrame}if(d!=g){HideBullsEye();KGuestDemoMode=2}ShowScreen(d)}}
function TeacherAlter(){for(var c=true;c;){showAct++;if(showAct==screens[showScreen].actions.length)showAct=0;c=screens[showScreen].actions[showAct].realAction==false;if(c==true)c=screens[showScreen].actions[showAct].emptybubble}showHistory.length--;ShowScreen(showScreen,showAct)}function FrameIDUpdated(c){document.getElementById("frameidvalue").innerHTML=c=="start"?"Start":c.substr(1)}
function ToggleShowFrameID(){if(document.getElementById("frameiddiv").style.display=="none")document.getElementById("frameiddiv").style.display="block";else document.getElementById("frameiddiv").style.display="none"}function CheckFrameIDKeys(c){if(c!=undefined)if(c.type=="keydown"){if(c.keyCode==showFrameIDToggle)if(c.shiftKey==true)return true;try{if(c.originalCode==showFrameIDToggle)if(c.shiftKey==true)return true}catch(d){}}return false}
function TeacherWrong(c){if(showFrameIDToggle&&CheckFrameIDKeys(c)==true)ToggleShowFrameID();else if(showActObj.type!="None")if(!KFinishClose)if(!event_blocked)if(playMode=="K"){if(showActObj.type=="Input")showActObj.par2=showActInpObj.value;!IsLeadIn()&&!IsLeadOut()&&KnowItWrong()}else{c=showActObj.type=="Input"?R_wrong_input:showActObj.type=="Key"?R_wrong_key:showActObj.type=="Decision"?R_wrong_decision:R_wrong_mouse;line=showActObj.type=="Input"?"FocusInpObj()":"";if(showHistory.length>1&&TeacherTestSkip(showActObj.type)){for(var d=
showHistory[showHistory.length-1];showHistory.length>1&&TeacherTestSkip(screens[d].actions[0].type);){showHistory.length--;d=showHistory[showHistory.length-1]}showHistory.length--;line="ShowScreen('"+d+"')"}_ShowBubble(showActObj)&&binterf.SetErrorMessage(c);Animate2("ding.flv",true,"","","");if(line.length>0)if(IsTouchDevice())line=="FocusInpObj()"?FocusInpObj():setTimeout(line,0);else setTimeout(line,0)}}
function Decision(c){ClearInfiniteButton();OffLink();Menu_Resume();ShowScreen(screens[showScreen].actions[c-1].nextFrame)}var trackSent=false;
function ClosePlayer(c,d){if(knowit_AltF4Pressed){c=0;d=1}lms_ClosePage();KeepAlive_Close();SavePosition();if(parent.isOpenDialog)if(parent.isOpenDialog()){parent.closeDialog();return}if(!trackSent){trackSent=true;try{if(opener.OnQuestionContinue_fromTopic){var e=c;e||(e=0);d||(d=0);if(e==1)e=GetResultInPercent()>=KScoreNeeded;opener.OnQuestionContinue_fromTopic(e,d)}}catch(g){}}setTimeout("TimedClosePlayer("+c+")",500)}
function TimedClosePlayer(c){PlayStop();CloseAction();KTopicFinished=c;this.blur();c=_lmsParser.GetParameter("directlaunch");if(IsTouchDevice()&&c!=null&&c!=2)history.back();else{try{window.opener!=null&&window.opener.focus()}catch(d){}upk.browserInfo.isExplorer()&&window.open("","_self");opener=null;window.close()}}function HandleResize0(){if(!IsTouchDevice()){Scroll2Action(true,true);HandleResize()}}
function HandleResize(){if(scrW!=0)if(NS4)if(loadWidth!=window.innerWidth||loadHeight!=window.innerHeight)history.go(0)}function ClearScrBorder(){}function SetScrBorder(){}function max(c,d){return c>d?c:d}function min(c,d){return c<d?c:d}function SetActionColor(){for(var c=showActObj.id,d=UserPrefs.MarqueeColor,e=0;e<showActObj.hotspots;e++)document.getElementById("hot"+c+"_"+e+"p").style.borderColor=d}
function KnowItWrong(){if(KWarningLevel==4)Animate2("ding.flv",true,"","","");else{HideKnowItBubble();KWarningLevel++;KWarningLevel==1&&KRemediation1==false&&KWarningLevel++;KWarningLevel==2&&KRemediation2==false&&KWarningLevel++;KWarningLevel==3&&KRemediation3==false&&KWarningLevel++;KWarningLevel>=DEF_KWARNINGSCORELEVEL&&AddToWrongScreens(showScreen);Animate2("ding.flv",true,"","","");ShowKnowItBubble()}}function KnowItForward(){KWarningLevel=0}
function IsDragBegin(c){var d=showActObj.type;if(c)d=c;return d=="LBeginDrag"||d=="RBBeginDrag"||d=="MBBeginDrag"}function IsDragSequence2(c){var d=showActObj.type;if(c)d=c;return d=="Drag"}var nib_Positioned=false,nib_l,nib_t,nib_r,nib_b,nib_bCloseEnabled=true;function DecodeTagElements(c){c=replaceString("&lt;","<",c);return c=replaceString("&gt;",">",c)}function AddTopMargin(c){if(c.substr(0,17)=='<p align="right">')return ss=c.substr(0,16)+' style="margin-top: 10px;" '+c.substr(16);return c}
function formatStr(c){for(var d=arguments,e=1;e<d.length;e++){var g="{"+(e-1)+"}",j=c.indexOf(g);if(j>=0)c=c.substr(0,j)+d[e]+c.substr(j+g.length)}return c}
function formatKnowItIgnoreText(c){var d='<a class="InstructText"><b><font color="#000080"><p style="margin-top: 0px;">';d+=formatStr(R_knowit_ignore_text1,c);d+="<br/>";d+=R_knowit_ignore_text2;d+="<br/>";d+=R_knowit_ignore_text3;d+="</p><p>";d+=R_knowit_ignore_text4;d+='</p></font></b></a><br/><input onClick="HLink(30)" value="'+R_preferences_OK+'" width="200" type="button"/>';return d}
function ShowKnowItBubble(){binterf.m_bFFClearHeight=false;var c="";nib_Positioned=false;nib_bCloseEnabled=true;if(KFinishClose){PlayStop();binterf.m_bFFClearHeight=true;c=lms_inAssessment==true?template_knowit_finish_close_inassessment:template_knowit_finish_close;c=ss=c.substr(0,3)+' style="list-style-type:disc;" '+c.substr(3);nib_Positioned=true;nib_bCloseEnabled=false}else if(KConfirmDemo){binterf.m_bFFClearHeight=true;c=template_knowit_confirmdemo;nib_Positioned=true}else if(IsLeadIn()){c=DecodeTagElements(R_titleformat_begin)+
topicName+DecodeTagElements(R_titleformat_end);c+=showActObj.ktext;sscore=GetTemplate_knowit_leadin_score(""+KScoreNeeded);sscore='<p id="scoretext" class="InstructText">'+sscore+"</p>";c=c.indexOf("###KSCORE###")>=0?replaceString("###KINSTRUCTION###",'<br/><p class="InstructText">'+R_knowit_knowitdraginstruction+"</p>",c):replaceString("###KINSTRUCTION###",'<p class="InstructText">'+R_knowit_knowitdraginstruction+"</p>",c);c=replaceString("###KSCORE###",sscore,c);if(PlayerConfig.ShowScoreNeeded)binterf.m_bFFClearHeight=
true;nib_Positioned=false}else if(IsLeadOut()){if(KScoringScreen){binterf.m_bFFClearHeight=true;var d=GetResultInPercent(),e="";c=DecodeTagElements(R_titleformat_begin)+topicName+DecodeTagElements(R_titleformat_end);if(d>=KScoreNeeded){lms_knowitScore(getMyGuid(),d,1);e=template_scoring_YES}else{lms_knowitScore(getMyGuid(),d,0);e=template_scoring_NO}c+=GetTemplate_scoring(""+d,""+KScoreNeeded,e)}else{c=DecodeTagElements(R_titleformat_begin)+topicName+DecodeTagElements(R_titleformat_end);c+=showActObj.ktext}nib_Positioned=
false}else if(IsExplanation()){c=showActObj.knowittext+"<br><p class='MsoNormal'>"+showActObj.fontbegin+template_knowit_explanation+showActObj.fontend+"</p>";nib_Positioned=false;binterf.m_bFFClearHeight=true}else{switch(KWarningLevel){case 0:binterf.m_bFFClearHeight=true;if(IsDragBegin())c=IsTouchDevice()?formatKnowItIgnoreText(R_action_dragdrop):template_knowit_dragwarning;else if(IsTouchDevice()&&showActObj.type=="Key")c=formatKnowItIgnoreText(R_action_keyboard);else{c="";if(KContinueFlag==1){c=
template_knowit_continue;if(showActObj.knowittext.length>0)c+="<br><br>"}c+=showActObj.knowittext;if(showActObj.type=="Input")c+=template_typingcomplete;c+=AddTopMargin(template_knowit_nextstep)}break;case 1:binterf.m_bFFClearHeight=true;c=showActObj.knowittext.length>0?template_knowit_warningL1+"<hr>"+showActObj.knowittext:template_knowit_warningL1;if(showActObj.type=="Input")c+=template_typingcomplete;c+=AddTopMargin(template_knowit_nextstep);break;case 2:binterf.m_bFFClearHeight=true;c=template_knowit_warningL2+
showActObj.text;if(showActObj.type=="Input")c+=template_typingcomplete;c+=AddTopMargin(template_knowit_nextstep);break;case 3:binterf.m_bFFClearHeight=true;if(showActObj.hotspots==0){c=template_knowit_warningL3_0+showActObj.text;if(showActObj.type=="Input")c+=template_typingcomplete;c+=AddTopMargin(template_knowit_nextstep)}else{c=template_knowit_warningL3_H+showActObj.text;if(showActObj.type=="Input")c+=template_typingcomplete;c+=AddTopMargin(template_knowit_nextstep);d=showActObj.id;SetActionColor();
for(e=0;e<showActObj.hotspots;e++){var g="hot"+d+"_"+e;getDIV(g)&&show(g,playMode=="S")}}break;default:binterf.m_bFFClearHeight=true;c=template_knowit_warningL4}nib_Positioned=true}nib_l=nib_t=nib_r=nib_b=-1;if(nib_Positioned)if(showActObj.hotspots){d="hot"+showActObj.id+"_0";nib_l=getObjLeft(d);nib_t=getObjTop(d);nib_r=nib_l+getObjWidth(d);nib_b=nib_t+getObjHeight(d)}nib_Positioned=!nib_Positioned;binterf.ResetContent();binterf.SetText(c);binterf.SetColor(showActObj.bubcolor);ShowKnowItBubble2()}
function ShowKnowItBubble2(){if(IsExplanation())binterf.SetPosition(-1,-1,-1,-1,true,false,showActObj.xpos,showActObj.ypos,showActObj.kwidth,showActObj.kheight);else{w=KWarningLevel<2?showActObj.kwidth:showActObj.width;h=KWarningLevel<2?showActObj.kheight:showActObj.height;w=w<Knowit_minimum?Knowit_minimum:w;if(KWarningLevel==1||KConfirmDemo==true)w=w<Rem1_minimum?Rem1_minimum:w;if(KWarningLevel==2||KWarningLevel==3)w=w<Rem2_minimum?Rem2_minimum:w;if(KWarningLevel==4)w=Rem4_width;if(KFinishClose)w=
58;binterf.SetPosition(nib_l,nib_t,nib_r,nib_b,nib_Positioned,0,0,0,w,h)}binterf.SetEnableCloseButton(nib_bCloseEnabled?1:0);binterf.Show();if(showActObj.type=="Input"){var c=showActObj.id;SetActionColor();for(var d=0;d<showActObj.hotspots;d++){var e="hot"+c+"_"+d,g=getDIV(e);if(g){var j=getDIV(e+"p");if(KWarningLevel<3||KWarningLevel==4||KFinishClose){if(!g.LeftOriginal)g.LeftOriginal=g.offsetLeft;if(!g.TopOriginal)g.TopOriginal=g.offsetTop;g.style.left=""+(g.LeftOriginal+2)+"px";g.style.top=""+
(g.TopOriginal+2)+"px";if(!j.WidthOriginal)j.WidthOriginal=j.offsetWidth;if(!j.HeightOriginal)j.HeightOriginal=j.offsetHeight;if(!j.borderColorOriginal)j.borderColorOriginal=j.style.borderColor;j.style.border="0px";j.style.width=""+(j.WidthOriginal-4)+"px";j.style.height=""+(j.HeightOriginal-4)+"px"}else{if(j.borderColorOriginal){j.style.border="3px";j.style.borderColor=j.borderColorOriginal;j.style.borderStyle="solid"}if(j.WidthOriginal)j.style.width=""+j.WidthOriginal+"px";if(j.HeightOriginal)j.style.height=
""+j.HeightOriginal+"px";if(g.LeftOriginal)g.style.left=""+g.LeftOriginal+"px";if(g.TopOriginal)g.style.top=""+g.TopOriginal+"px"}show(e,playMode=="S")}}if(showActObj.par4){showActObj.par4=false;if(KWarningLevel==0){showActInpObj=document.layers?document.layers.screen.document.layers["hot"+showActObj.id+"_0"].document["f"+showActObj.id]["inp"+showActObj.id]:document["f"+showActObj.id+"_0"]["inp"+showActObj.id+"_0"];showActInpObj.value=showActObj.par5;showActInpObj.original=showActInpObj.value;showActInpObj.onkeyup=
EventKeyUp;showActInpObj.onkeypress=EventInputKey;showActInpObj.onpropertychange=EventPropertyChange;showActInpObj.onfocus=InputOnFocus;showActInpObj.onblur=InputOnBlur}try{showActInpObj.focus()}catch(n){}}}ShowScreen3()}function HideKnowItBubble(){for(var c=showActObj.id,d=0;d<showActObj.hotspots;d++){var e="hot"+c+"_"+d;getDIV(e)&&hide(e,playMode=="S")}binterf.ResetContent();binterf.Hide()}var soundplayed=false;function PlayStop(c){SoundPlayerObj.Stop(c)}
function PlayPause(){SoundPlayerObj.Pause()}function PlayResume(){if(soundplayed)SoundPlayerObj.Resume();else if(bPlayerIsAvailable)if(showScreen==StartScreen)return false;return true}function GetDecisionSound(c){return c}function PlaySound_asyncron(c){UserPrefs.PlayAudio!="none"&&SoundPlayerObj.Play(c,true,false,true)}
function PlaySound(c,d,e){if(KPreventSound==true)KPreventSound=false;else if(c=="dummy.flv"){PlayStop();soundplayed=false;animObject&&animObject.cmd.length>0&&Animate(animObject.cmd,animObject.timeout,animObject.phase)}else{c=GetDecisionSound(c);if(!e){animObject.fname=c;animObject.demosound=d}var g=true;d||(g=false);d=UserPrefs.PlayAudio;if(playMode=="T"||playMode=="K")if(d=="all"&&soundIsExported||g&&(d=="demo"||d=="all")){if(KScoringScreen==false&&KFinishClose==false&&(KWarningLevel==0||g)){soundplayed=
true;SoundPlayerObj.Play(c,g,e);upk.Timeline.IncFrameTimeCounter(1E3)}}else animObject.cmd.length>0&&Animate(animObject.cmd,animObject.timeout,animObject.phase);else if(playMode=="S"||KGuestDemoMode)if(d=="all"&&soundIsExported||g&&(d=="demo"||d=="all")){soundplayed=true;SoundPlayerObj.Play(c,g,e);upk.Timeline.IncFrameTimeCounter(1E3)}else animObject.cmd.length>0&&Animate(animObject.cmd,animObject.timeout,animObject.phase)}}
function OnErrorPlaySound(){soundplayed=false;if(animObject)if(animObject.cmd.length>0&&(playMode!="K"||playMode=="K"&&KGuestDemoMode>0)){if(timelineDescriptor.valid==true){if(timelineDescriptor.type=="narration")if(animObject.timeout!=DELAY_INFINITE*100)animObject.timeout=timelineDescriptor.resttime;if(timelineDescriptor.type=="animationstart")if(animObject.timeout!=DELAY_INFINITE*100)animObject.timeout=1;if(timelineDescriptor.type=="nextframe"){DemoNext();timelineDescriptor.valid=false;return}timelineDescriptor.valid=
false}Animate(animObject.cmd,animObject.timeout,animObject.phase)}}function OnEndPlaySound(){soundplayed=false;timelineDescriptor.valid=false;if(animObject)if(animObject.cmd.length>0&&(playMode!="K"||playMode=="K"&&KGuestDemoMode>0)){animCmd=animObject.cmd;animPhase=animObject.phase;clearTimeout(animTimeout);animTimeout=setTimeout("AnimateTimer();",100);upk.Timeline.IncFrameTimeCounter(1E3)}}
function _HasSound(c){if(UserPrefs.PlayAudio!="all")return false;ix=c.id.substr(1)+".ASX";if(sounds[ix]){if(sounds[ix].fct==0)return false;return sounds[ix].flist[0].length>0}return false}function _HasActionArea(c){if(IsExplanation(c))return false;if(IsLeadIn(c))return false;if(IsLeadOut(c))return false;if(IsDecision(c))return false;return c.hotspots>0}
function _ShowBubble(c){f=screens[c.prevFrame];if(playMode=="S"||playMode=="T"){if(c.type=="Decision")return true;if(topicShowBubbles=="Always")return true;if(topicShowBubbles=="Never")return false;return f.showBubble=="true"?true:false}return true}function _ShowActionArea(c){if(playMode=="S"&&PlayerConfig.HideActionBordersInSeeIt==true)return false;if(topicShowBubbles=="Never")return false;if($("#"+c).attr("border")=="0")return false;return true}
function _SkipFrame(c){a=c.actions[0];if(c.actions.length==1&&a.type=="Decision")return true;if(playMode=="S"&&a.type=="None"&&a.delay==0)return true;if(playMode=="T"&&a.type=="None"&&a.delay==0)return true;if(playMode=="S"&&a.type=="Decision"&&a.delay==0)return true;if(playMode=="K"&&a.type=="Decision")return true;if(playMode=="K"&&a.type=="None"&&a.prevFrame!="start"&&a.nextFrame!="end"&&a.knowittext.length==0)return true;if(playMode=="K")return false;_HasActionArea(a);if(!_ShowBubble(a))if(!_HasSound(a)){if(IsLeadIn(a))return true;
if(IsLeadOut(a))return true;if(IsExplanation(a))return true;if(IsDecision(a))return false;if(a.delay==DELAY_INFINITE)if(playMode=="S")return true}return false}
function FilterDecisionText(){if(IsDecision()){var c=showActObj.prevFrame,d=ecidStartDecisions[c];if(d==null){d=showActObj.text;if(upk.browserInfo.isIE10())d=replaceString("DecisionList","DecisionListIE10",showActObj.text);return d}var e=[],g="",j="",n=showActObj.text.toLowerCase(),m="<li class=decisionlist>",o='<li class="decisionlist">';if(upk.browserInfo.isIE10()){m="<li class=decisionlistie10>";o='<li class="decisionlistie10">'}var p=n.indexOf(m);if(p<0)p=n.indexOf(o);g=showActObj.text.substr(0,
p);var B=n.lastIndexOf("</li>")+5;for(j=showActObj.text.substr(B);;){if(p<0)break;var D=n.indexOf(m,p+1);if(D<0)D=n.indexOf(o,p+1);if(D>0){e[e.length]=showActObj.text.substr(p,D-p-1);p=D}else{e[e.length]=showActObj.text.substr(p,B-p);break}}for(m=0;m<e.length;m++){n=e[m].toLowerCase();o=n.length;if(n.substr(o-5)!="</li>")e[m]+="</li>"}c=screens[c].actions;for(m=0;m<c.length;m++){o=true;for(ii=0;ii<d.pathstoignore.length;ii++)if(d.pathstoignore[ii]==c[m].id)o=false;if(o)g+=e[m]}g+=j;return g}return showActObj.text}
function ShowAction(){binterf.m_bFFClearHeight=false;if(!IsDragBegin()&&!IsDragSequence())disableswipeondrag=false;var c=showActObj.bubpos,d=showActObj.xpos,e=showActObj.ypos;if(playMode=="K"&&!KGuestDemoMode){ShowKnowItBubble();if((IsDragBegin()||IsTouchDevice()&&showActObj.type=="Key")&&!KFinishClose)Animate2("ding.flv",true,"","","")}else{if(showActObj.type=="None"&&showActObj.emptytext)if(!IsLeadIn()&&!IsLeadOut()){ShowScreen3();return}var g=showActObj.id;binterf.ResetContent();var j=FilterDecisionText();
if(playMode=="T"&&showActObj.type=="Input")j=showActObj.text+template_typingcomplete;if(playMode=="S"||playMode=="K"&&KGuestDemoMode){var n=template_pauselink.indexOf("HLink(600)"),m=template_pauselink.indexOf("</a>");n=template_pauselink.substr(0,n+12);m=template_pauselink.substr(m);m=n+(isPaused?R_interface_resume:R_interface_pause)+m;j+=fusionmode?"":m;binterf.m_bFFClearHeight=true}if(playMode=="T"&&IsDragBegin()&&IsTouchDevice()&&KGuestDemoMode==0){binterf.ResetContent();disableswipeondrag=true;
binterf.SetText('<p class="InstructText" style="margin-top: 0px; color: #000080; font-weight:bold;">'+R_swipe_drag+"</p>");binterf.SetIcon(showActObj.iconname);binterf.SetColor(showActObj.bubcolor);binterf.SetPosition(-1,-1,-1,-1,true,0,0,0)}else{if(playMode=="S"&&IsDragBegin()&&IsTouchDevice()&&KGuestDemoMode==0)disableswipeondrag=true;binterf.SetText(j);binterf.SetIcon(showActObj.iconname);binterf.SetColor(showActObj.bubcolor);if(playMode=="T"){binterf.SetAlternative(showActObj.showalternatives);
for(j=0;j<screens[showScreen].infoblocks.length;j++){m=screens[showScreen].infoblocks[j];binterf.AddInfoBlock(m.buttonfile,m.url,m.tooltip)}}if(showActObj.type=="Decision"||showActObj.type=="Input")binterf.m_bFFClearHeight=true;if(showActObj.hotspots){g="hot"+g+"_0";l=getObjLeft(g);if(l<0)l=0;t=getObjTop(g);if(t<0)t=0;r=l+getObjWidth(g);b=t+getObjHeight(g);if(showActObj.bubpos>0)binterf.SetPosition(l,t,r,b,true,c,d,e,showActObj.width,showActObj.height);else showActObj.type=="None"?binterf.SetPosition(-1,
-1,-1,-1,true,c,d,e,showActObj.width,showActObj.height):binterf.SetPosition(l,t,r,b,false,c,d,e,showActObj.width,showActObj.height)}else binterf.SetPosition(-1,-1,-1,-1,true,c,d,e,showActObj.width,showActObj.height)}ShowAction2()}}
function ShowAction2(){KGuestDemoMode==0&&!showActObj.emptybubble&&_ShowBubble(showActObj)?binterf.Show():binterf.Hide();if(showActObj.type!="None"){SetActionColor();for(var c=showActObj.id,d=0;d<showActObj.hotspots;d++)if(d==0||showActObj.type!="Input"){var e="hot"+c+"_"+d,g=getDIV(e),j=e+"p";w=getObjWidth("screen");h=getObjHeight("screen");if(!showActObj.areacorrected){bord1=document.getElementById(j).border;if(document.getElementById(j).type=="password"){document.getElementById(j).style.fontFamily=
"Arial";document.getElementById(j).style.fontSize="12px"}hl=g.offsetLeft;if(hl<0){hw=document.getElementById(j).clientWidth;document.getElementById(j).style.width=""+(hw+hl)+"px";g.style.left=0}ht=g.offsetTop;if(ht<0){hh=document.getElementById(j).clientHeight;document.getElementById(j).style.height=hh+ht;g.style.top=0}bord=bord1*2;hl=g.offsetLeft;hw=document.getElementById(j).clientWidth+bord;ht=g.offsetTop;hh=document.getElementById(j).clientHeight+bord;var n=bord1;if(hl+hw>w-n)document.getElementById(j).style.width=
""+(hw-bord-3-n)+"px";if(ht+hh>h)document.getElementById(j).style.height=""+(hh-bord-3)+"px";showActObj.areacorrected=true}if(g)if(showActObj.type=="Input"){n=getDIV(e+"p");if(n.borderColorOriginal){n.style.border="3px";n.style.borderColor=n.borderColorOriginal;n.style.borderStyle="solid"}if(n.WidthOriginal)n.style.width=""+n.WidthOriginal+"px";if(n.HeightOriginal)n.style.height=""+n.HeightOriginal+"px";if(g.LeftOriginal)g.style.left=""+g.LeftOriginal+"px";if(g.TopOriginal)g.style.top=""+g.TopOriginal+
"px";j=_ShowActionArea(j)==false;if(g.style.cssText.toLowerCase().indexOf("marquee: false")>=0)j=true;if(j==true)if(!showActObj.marqueecorrected){showActObj.marqueecorrected=true;g.style.left=""+Number(getObjLeft(g)+3)+"px";g.style.top=""+Number(getObjTop(g)+3)+"px";n.style.border="0px";n.style.width=""+(n.offsetWidth-6)+"px";n.style.height=""+(n.offsetHeight-6)+"px"}show(e,playMode=="S")}else _ShowActionArea(j)&&show(e,playMode=="S")}}if(playMode=="S")isPaused?binterf.SetPRText(R_interface_resume):
binterf.SetPRText(R_interface_pause);ShowScreen3()}function _getObjTop(c){k=getObjTop(c)-10;if(k<0)k=0;return k}function _getObjLeft(c){k=getObjLeft(c)-10;if(k<0)k=0;return k}function ScrollToAction(){if(playMode=="K"){showScreen=="start"&&window.scrollTo(0,0);showActObj.nextFrame=="end"&&window.scrollTo(0,0);setTimeout("ShowScreen4()",5);upk.browserInfo.isiOS()&&showActObj.type=="Input"&&!showActObj.par4&&SelectText0()}else Scroll2Action()}
var Actionarea_left=150,Actionarea_top=32,Actionarea_right=0,Actionarea_bottom=0,Bubble_horizontal=150,Bubble_vertical=32;function RectArea(c,d,e,g,j){this.x=c;this.y=d;this.dx=e;this.dy=g;this.bubpt=j}function combineRect(c,d){if(c.dx==0&&c.dy==0)return d;if(d.dx==0&&d.dy==0)return c;var e=min(c.x,d.x),g=min(c.y,d.y),j=max(c.x+c.dx,d.x+d.dx)-e,n=max(c.y+c.dy,d.y+d.dy)-g;return new RectArea(e,g,j,n,0)}
function fitRectinRect(c,d){if(c.dx==0&&c.dy==0)return true;if(c.dx>d.dx)return false;if(c.dy>d.dy)return false;return true}function containRect(c,d){if(c.dx==0&&c.dy==0)return true;if(c.x<d.x)return false;if(c.y<d.y)return false;if(c.x+c.dx>d.x+d.dx)return false;if(c.y+c.dy>d.y+d.dy)return false;return true}
function getArea(c,d,e){sdx=document.getElementById("screen").clientWidth;sdy=document.getElementById("screen").clientHeight;brect=new RectArea(0,0,0,0,0);brectnopadding=new RectArea(0,0,0,0,0);if(c.dx>0&&c.dy>0){brect=new RectArea(c.x,c.y,c.dx,c.dy,c.bubpt);brectnopadding=new RectArea(c.x,c.y,c.dx,c.dy,c.bubpt);switch(brect.bubpt){case BUBB07_TOPLEFT:case BUBB07_TOPRIGHT:if(brect.y>Bubble_vertical){brect.y-=Bubble_vertical;brect.dy+=Bubble_vertical}else{brect.dy+=brect.y;brect.y=0}break;case BUBB07_BOTTOMLEFT:case BUBB07_BOTTOMRIGHT:if(brect.y+
brect.dy<sdy)brect.dy+=Bubble_vertical;else brect.dy=sdy-brect.dy;break;case BUBB07_LEFTTOP:case BUBB07_LEFTBOTTOM:if(brect.x>Bubble_horizontal){brect.x-=Bubble_vertical;brect.dx+=Bubble_vertical}else{brect.dx+=brect.x;brect.x=0}break;case BUBB07_RIGHTTOP:case BUBB07_RIGHTBOTTOM:if(brect.x+brect.dx<sdx)brect.dx+=Bubble_horizontal;else brect.dx=sdx-brect.dx}}hrect=new RectArea(0,0,0,0,0);hrectnopadding=new RectArea(0,0,0,0,0);if(d.dx>0&&d.dy>0){hrect=new RectArea(d.x,d.y,d.dx,d.dy,d.bubpt);hrectnopadding=
new RectArea(d.x,d.y,d.dx,d.dy,d.bubpt);if(hrect.x>Actionarea_left){hrect.x-=Actionarea_left;hrect.dx+=Actionarea_left}else{hrect.dx+=hrect.x;hrectx=0}if(hrect.y>Actionarea_top){hrect.y-=Actionarea_top;hrect.dy+=Actionarea_top}else{hrect.dy-=hrect.y;hrect.y=0}if(hrect.x+hrect.dx<sdx)hrect.dx+=Actionarea_right;else hrect.dx=sdx-hrect.x;if(hrect.y+hrect.dy<sdy)hrect.dy+=Actionarea_bottom;else hrect.dy=sdy-hrect.y}c=combineRect(brect,hrect);if(fitRectinRect(c,e))return c;r1=combineRect(brectnopadding,
hrectnopadding);if(fitRectinRect(r1,e))return r1;if(fitRectinRect(brect,e))return brect;if(fitRectinRect(brectnopadding,e))return brectnopadding;brectnopadding.dx=e.dx;if(brectnopadding.x+brectnopadding.dx>sdx)brectnopadding.dx=sdx-brectnopadding.x;brectnopadding.dy=e.dy;if(brectnopadding.y+brectnopadding.dy>sdy)brectnopadding.dy=sdy-brectnopadding.y;return brectnopadding}function getHorizontalScrollPosition(c,d){if(c.x<d.x)return c.x;if(c.x+c.dx>d.x+d.dx)return c.x-(d.dx-c.dx);return d.x}
function getVerticalScrollPosition(c,d){if(c.y<d.y)return c.y;if(c.y+c.dy>d.y+d.dy)return c.y-(d.dy-c.dy);return d.y}function getDefinedBubbleRect(c){switch(c.bubpt){case BUBB07_TOPLEFT:case BUBB07_TOPRIGHT:case BUBB07_BOTTOMLEFT:case BUBB07_BOTTOMRIGHT:c.dy+=40+Bubble_vertical;break;case BUBB07_LEFTTOP:case BUBB07_LEFTBOTTOM:case BUBB07_RIGHTTOP:case BUBB07_RIGHTBOTTOM:c.dx+=40+Bubble_horizontal}return c}
function Scroll2Action(c,d){var e=document.body.clientHeight;e-=3;if(fusionmode)e-=navBar.getHeight();var g=document.body.clientWidth;g-=3;var j=getObjLeft("screencontainer");j=getScrollLeft()-j;var n=getObjTop("screencontainer");n=getScrollTop()-n;e=new RectArea(j,n,g,e,0);j=showActObj.id;if(showScreen=="start")j+="S";g=new RectArea(0,0,0,0,0);if(getDIV(j))g=new RectArea(binterf.GetBubbleLeft(true),binterf.GetBubbleTop(true),binterf.GetBubbleWidth(true),binterf.GetBubbleHeight(true),binterf.GetBubblePointer());
j="hot"+j+"_0";n=new RectArea(0,0,0,0,0);if(getDIV(j))n=new RectArea(_getObjLeft(j),_getObjTop(j),getObjWidth(j),getObjHeight(j),0);g=getArea(g,n,e);if(containRect(g,e))c||setTimeout("ShowScreen4()",5);else{if(showActObj.nextFrame!="end"){j=screens[showActObj.nextFrame].actions[0];for(n=true;n;){var m=j.id,o=new RectArea(0,0,0,0,0);if(getDIV(m))o=getDefinedBubbleRect(new RectArea(j.xpos,j.ypos,j.width,j.height,j.bubpos));m="hot"+m+"_0";var p=new RectArea(0,0,0,0,0);if(getDIV(m))p=new RectArea(_getObjLeft(m),
_getObjTop(m),getObjWidth(m),getObjHeight(m),0);o=getArea(o,p,e);o=combineRect(g,o);if(fitRectinRect(o,e))g=o;else n=false;if(j.nextFrame=="end")n=false;if(n)j=screens[j.nextFrame].actions[0]}}ssx=getHorizontalScrollPosition(g,e);ssy=getVerticalScrollPosition(g,e);ScrollTo(ssx,ssy,c,d)}if(upk.browserInfo.isiOS())if(showActObj.type=="Input"&&playMode!="K"||showActObj.type=="Input"&&playMode=="K"&&!showActObj.par4)SelectText0()}
function ScrollTo(c,d,e,g){if(fusionmode)if(e||isPaused){window.scrollTo(c,d);setTimeout("ShowScreen4("+g+")",5)}else SmoothScroll(c,d);else{window.scrollTo(c,d);setTimeout("ShowScreen4("+g+")",5)}}function TimerObj(c,d,e,g,j,n,m,o){this.x=c;this.y=d;this.currentx=e;this.currenty=g;this.targetx=j;this.targety=n;this.dx=m;this.dy=o}var timerObj=new TimerObj(0,0,0,0,0,0,0,0,0);
function SmoothScroll(c,d){currentx=getScrollLeft();currenty=getScrollTop();l=PlayerConfig.PanSpeed;dx=c-currentx;dy=d-currenty;x=dx>0?l:0-l;y=dy>0?l:0-l;step=0;if(Math.abs(dx)>Math.abs(dy)){step=Math.abs(Math.round(dx/l))+1;y=Math.round(dy/step);if(y==0)y=dy>0?1:-1}else{step=Math.abs(Math.round(dy/l))+1;x=Math.round(dx/step);if(x==0)x=dx>0?1:-1}timerObj=new TimerObj(x,y,currentx,currenty,c,d,dx,dy);setTimeout("SmoothScollTimed()",5)}
function SmoothScollTimed(){if(isPaused){isNavBar()&&navBar.setKeepHidden(false);setTimeout("SmoothScollTimed()",5)}else{isNavBar()&&navBar.setKeepHidden(true);if(timerObj.currentx==timerObj.targetx&&timerObj.currenty==timerObj.targety){isNavBar()&&navBar.setKeepHidden(false);setTimeout("ShowScreen4()",5)}else{timerObj.currentx+=timerObj.x;if(timerObj.dx>0){if(timerObj.targetx-timerObj.currentx<0)timerObj.currentx=timerObj.targetx}else if(timerObj.targetx-timerObj.currentx>0)timerObj.currentx=timerObj.targetx;
timerObj.currenty+=timerObj.y;if(timerObj.dy>0){if(timerObj.targety-timerObj.currenty<0)timerObj.currenty=timerObj.targety}else if(timerObj.targety-timerObj.currenty>0)timerObj.currenty=timerObj.targety;window.scrollTo(timerObj.currentx,timerObj.currenty);setTimeout("SmoothScollTimed()",5)}}}
function HideAction(){if(playMode=="K"&&!KGuestDemoMode)HideKnowItBubble();else{var c=showActObj.id;binterf.ResetContent();binterf.Hide();for(var d=0;d<showActObj.hotspots;d++){var e="hot"+c+"_"+d;getDIV(e)&&hide(e,playMode=="S")}}}var myscr="";
function ShowScreen(c,d,e,g){if(!g)timelineDescriptor.valid=false;if(c!="end")screens[c].actions[0].nextFrame=="end"?lms_frameView(getMyGuid(),playMode,"end"):lms_frameView(getMyGuid(),playMode,c);if(c!="end"){g=screens[c];for(var j=0;j==0;){var n=g.actions[0],m=n.nextFrame;if(m=="end")j=1;else if(n.delay==0||n.type=="None")g=screens[m];else j=2}}if(d==null){d=firsthemialternativeindex;firsthemialternativeindex=0}if(KGuestDemoMode==2){KWarningLevel=KGuestDemoMode=0;binterf.SetPosition(-1,-1,-1,-1,
true,0,0,0);playMode=="K"&&binterf.SetMoveable(true);KContinueFlag=1;ShowScreen(c,d);KContinueFlag=2}else{if(KGuestDemoMode==1){g=screens[c].actions[0];IsDragBegin(g.type)&&showActObj.id==g.id||IsDragSequence2(g.type)||(KGuestDemoMode=2)}if(KContinueFlag==2)KContinueFlag=0;try{for(g=c;_SkipFrame(screens[g]);)g=screens[g].actions[0].nextFrame;screens[g].actions[0].nextFrame=="end"&&lms_topicFinish(getMyGuid())}catch(o){g=="end"&&lms_topicFinish(getMyGuid())}if(playMode=="S"){if(upk.Timeline.Init(g))StartScreen=
g;upk.Timeline.UpTimelineAt(g,e,timelineDescriptor);upk.Timeline.Lock(false)}if(c=="end")if(playMode=="K"&&PlayerConfig.TrackFeedBack){HideAction();KScoringScreen=true;ShowAction()}else ClosePlayer(1);else{if(showScreen!=""){showActObj.type=="Input"&&showActInpObj&&showActInpObj.blur();HideAction()}for(oldscr=c;_SkipFrame(screens[c]);){c=screens[c].actions[0].nextFrame;if(c=="end"){setTimeout('ShowScreen("end")',10);return}d=0}if(ecidStartDecisions[c])if(ecidStartDecisions[c].display)ecidDecisionStart=
true;if(ecidDecisionStart){c=FindEcidStartNextFrame(c);d=0}if(c!=oldscr)if(c!="end")screens[c].actions[0].nextFrame=="end"?lms_frameView(getMyGuid(),playMode,"end"):lms_frameView(getMyGuid(),playMode,c);showScreen=c;KGuestDemoMode||(showHistory[showHistory.length]=c);showAct=d?d:0;if(animPhase!=""){clearTimeout(animTimeout);animPhase=""}showActObj=screens[showScreen].actions[showAct];if(showActObj==null)showActObj=screens[showScreen].actions[0];myscr=c;url=screenshotPath+screens[showScreen].image;
screenshot=new Image;event_blocked=true;DownloadImage(url,"Returned")}}}function Returned(c){GetImage(screenshot,c);event_blocked=false;FrameIDUpdated(myscr);if(document.layers)document.layers.screen.document.screenshot.src=screenshot.src;else document.screenshot.src=screenshot.src;ShowScreen2()}function GetDelay(){if(KGuestDemoMode)return 200;return showActObj.delay*100}function ShowScreen2(){scr=myscr;if(showActObj.type=="Input"){showActObj.par4=false;showActObj.lastIMEtext=""}ShowAction()}
function ShowScreen3(){if(playMode=="S"||KGuestDemoMode){showCursor||hide("cursor");showCursor=true}playMode=="K"&&!KGuestDemoMode&&hide("cursor");playMode=="T"&&!KGuestDemoMode&&hide("cursor");if(showActObj.type=="Input"&&playMode!="K"||showActObj.type=="Input"&&playMode=="K"&&!showActObj.par4){showActInpObj=document.layers?document.layers.screen.document.layers["hot"+showActObj.id+"_0"].document["f"+showActObj.id]["inp"+showActObj.id]:document["f"+showActObj.id+"_0"]["inp"+showActObj.id+"_0"];showActInpObj.value=
showActObj.par2;showActInpObj.original="";showActInpObj.onkeyup=EventKeyUp;showActInpObj.onkeypress=EventInputKey;EventPropertyChange();showActInpObj.onfocus=InputOnFocus;showActInpObj.onblur=InputOnBlur}ScrollToAction()}function SelectText0(){showActInpObj.value=showActObj.par2;showActInpObj.original=showActInpObj.value;SelectText(showActInpObj);_backStep=false}
function ShowPlayButtons(){var c=window.innerHeight,d=$("#screen").width(),e=$("#screen").height();e=c<e?c:e;c=d/1024;var g=parseInt(192*c),j=parseInt(195*c),n=parseInt((e-j)/2);d=parseInt((d-g)/2);var m='<div id="graydiv" scrolling="yes" class="pointerdiv" onclick="onStartClick()">';m+='<img src="../../../img/ipad_playbutton.png" style="position:absolute; ';m+="top: "+n+"px; left: "+d+"px; width: "+g+"px; height: "+j+'px; "/>';j=parseInt(50*c);m+='<div id="startplayfont" ';m+='style="position:absolute; width: 100%; height: '+
j+"px; left: 0px; top: "+(e-j)+"px; text-align: center; padding-top: "+parseInt(10*c)+"px; ";m+='background-image: url(../../../img/ipad_messagebar.png); background-repeat: repeat;">'+R_swipe_instruction+"</div>";m+="</div>";$("#screen").append(m);d=parseInt($("#startplayfont").css("font-size"));d=""+parseInt(d*c)+"px";$("#startplayfont").css("font-size",d);$("#graydiv").bind("touchstart",function(){swipe.Init(screenwidth)});$("#graydiv").bind("touchmove",function(o){try{if(o.originalEvent.touches[1]||
o.originalEvent.changedTouches[1])swipe.DetectedMulti();else swipe.IsNotZoomed()&&o.preventDefault()}catch(p){}o=o.originalEvent.touches[0]||o.originalEvent.changedTouches[0];swipe.Add(o.pageY,o.pageX)});$("#graydiv").bind("touchend",function(){if(!swipe.IsMulti())if(swipe.IsNotZoomed()!=false){var o=swipe.GetX(),p=swipe.GetY();Math.abs(o)>Math.abs(p)||p<-30&&onStartClick()}})}function onStartClick(){$("#graydiv").remove();SoundPlayerObj.InitAudioPlayer();iPadStartingProcess(1)}
function iPadStartingProcess(c){switch(c){case 0:binterf.Hide();ShowPlayButtons();break;case 1:touchIntroChecked=true;if(isNavBar()){navBar.setKeepHidden(false);navBar.show()}KGuestDemoMode==0&&!showActObj.emptybubble&&_ShowBubble(showActObj)?binterf.Show():binterf.Hide();ShowScreen4();if(showActObj.type=="Input"&&playMode!="K"||showActObj.type=="Input"&&playMode=="K"&&!showActObj.par4)SelectText0()}}var touchIntroChecked=false;
function ShowScreen4(c){HandleResize();if(IsTouchDevice()&&!touchIntroChecked)iPadStartingProcess(0);else if(!c){IsTouchEvent()||FocusInpObj();PreloadImages();var d="hot"+showActObj.id+"_0";c=showActObj.id.substr(1)+".ASX";if(playMode=="S"||KGuestDemoMode){showActObj.nextFrame=="end"&&Animate2(c,false,"ClosePlayer(1)",GetDelay(),"other");if(showActObj.type=="Input"){animSteps=DecodeInputString(showActObj.par1[1]).length;Animate2(c,false,"AnimateInput()",GetDelay(),"input")}else if(showActObj.type==
"Key"){hide("cursor");Animate2(c,false,"AnimateKeyboard()",GetDelay(),"keyboard")}else if(showActObj.type=="None"||showActObj.type=="Decision"||!getDIV(d))Animate2(c,false,"ShowScreen('"+showActObj.nextFrame+"')",GetDelay(),"other");else{var e,g,j;anim_to_x=getObjLeft(d)+getObjWidth(d)/2;anim_to_y=getObjTop(d)+getObjHeight(d)/2;d=getObjLeft("cursor")+cursor_alignment_x;e=getObjTop("cursor")+cursor_alignment_y;g=anim_to_x-d-(upk.browserInfo.isiOS()?sx:0);j=anim_to_y-e-(upk.browserInfo.isiOS()?sy:0);
animSteps=Math.round(Math.sqrt(g*g+j*j)/MOUSE_STEP);animSteps==0&&animSteps++;animStepOriginal=animSteps;anim_x=g/animSteps;anim_y=j/animSteps;if(showActObj.type=="Drag"||showActObj.type.indexOf("Up")!=-1)shiftTo("bullseye",d-sx-getObjWidth("bullseye")/2,e-sy-getObjHeight("bullseye")/2);HideBullsEye();Animate2(c,false,"AnimateMouse()",GetDelay(),"mouse")}}else if(showActObj.emptybubble&&_ShowBubble(showActObj)&&showActObj.type=="None"&&scr!="start")Animate2(c,false,"ShowScreen('"+showActObj.nextFrame+
"')",GetDelay(),"other");else{animObject=new AnimObject("","","");PlaySound(c,false)}upk.browserInfo.isiOS()&&setTimeout(function(){$("#screencontent").removeClass("swipeanim");$("#screencontent").css({"-webkit-transform":"translate3d(0,0,0)"});SetSwipeActions();var n=$("#screen").width()+2,m=n,o=0;if(swipeNextEnabled)m+=n+100;if(swipePrevEnabled){m+=n+100;o=-n-100}$("#screencontent").css("left",o).width(m)},100)}}
function SetSwipeActions(){if(!(playMode=="K"&&scr!=StartScreen&&!IsLeadOut()&&!IsExplanation())){var c=screens[scr],d=c.actions[0].nextFrame,e,g,j;if(d!="end")for(;_SkipFrame(screens[d]);)d=screens[d].actions[0].nextFrame;if(d!="end")g=screenshotPath+screens[d].image;var n=null;try{n=showHistory[showHistory.length-2]}catch(m){}if(n!=null)j=screenshotPath+screens[n].image;e="normal";if(scr==StartScreen)e="start";if(d=="end")e="end";if(c.actions[0].type=="Input")e="input";if(c.actions[0].type=="Decision")e=
"decision";if(c.actions[0].type.substr(1)=="BeginDrag")e="begindrag";if(c.actions[0].type=="Drag")e="drag";if(c.actions[0].type.substr(1)=="Up")e="up";if(playMode=="K"&&IsLeadOut())e="endknowit";if(e=="normal"||e=="input"||e=="decision"||e=="up"){EnableSwipeNext(g);EnableSwipePrev(j)}if(e=="start"||playMode=="K"&&IsExplanation()){EnableSwipeNext(g);DisableSwipePrev()}if(e=="end"||e=="begindrag"){DisableSwipeNext();EnableSwipePrev(j)}if(e=="drag"||e=="endknowit"){DisableSwipeNext();DisableSwipePrev()}n==
null&&DisableSwipePrev();swipeStarted=false}}function PreloadImages(){if(PlayerConfig.PreloadScreenEnabled){for(var c=showActObj.nextFrame,d=3;c!="end"&&d--;){url=screenshotPath+screens[c].image;PreloadImage(url);c=screens[c].actions[0].nextFrame}for(d=0;d<screens[showScreen].actions.length;d++){c=screens[showScreen].actions[d].nextFrame;if(c!="end"){url=screenshotPath+screens[c].image;PreloadImage(url)}}}}
function GetShiftState(c){if(c==0)c=window.event;if(c.storedEvent)return c.pShState;return((c.modifiers?c.modifiers&Event.SHIFT_MASK:c.shiftKey)?"s":"")+((c.modifiers?c.modifiers&Event.CONTROL_MASK:c.ctrlKey)?"c":"")+((c.modifiers?c.modifiers&Event.ALT_MASK:c.altKey)?"a":"")}function GetButton(c){if(c==0)c=window.event;if(c.storedEvent)return c.pButton;return c.button?c.button&1?"L":c.button&2?"R":c.button&4?"M":"":c.which==1?"L":c.which==3?"R":""}
function GetMouseX(c){if(c==0)c=window.event;if(c.storedEvent)return c.pX;var d=0;if(upk.browserInfo.isExplorer()==false)d=getObjLeft("screencontainer");return c.pageX?c.type=="DOMMouseScroll"?c.screenX-d+document.body.scrollLeft:c.pageX-d:c.x?c.x-d+getScrollLeft():c.layerX}
function GetMouseY(c){if(c==0)c=window.event;if(c.storedEvent)return c.pY;var d=0;if(upk.browserInfo.isExplorer()==false)d=getObjTop("screencontainer");return c.pageY?c.type=="DOMMouseScroll"?c.screenY-d+document.body.scrollTop:c.pageY-d:c.y?c.y-d+getScrollTop():c.layerY}
function MouseInObject(c,d){if(getDIV(d)){var e=GetMouseX(c),g=GetMouseY(c),j=getObjLeft(d),n=getObjTop(d),m=getObjWidth(d),o=getObjHeight(d),p=document.body.scrollLeft,B=document.body.scrollTop;if(upk.browserInfo.isIE10orHigher()){e-=getObjLeft("screencontainer");g-=getObjTop("screencontainer")}if(upk.browserInfo.isIE8()||upk.browserInfo.isIE9()||upk.browserInfo.isIE11Compatibility()){e-=p;g-=B}if(showActObj.type=="Input"){for(p=showActInpObj.id.substr(0,14);p.substr(p.length-1,1)=="p"||p.substr(p.length-
1,1)=="x";)p=p.substr(0,p.length-1);if(p==d){m=showActInpObj.offsetWidth;o=showActInpObj.offsetHeight}}if(e>=j&&g>=n&&e<j+m&&g<n+o)return true;if(IsTouchDevice()){if(j>30)j-=30;else j=0;if(n>30)n-=30;else n=0;m+=60;o+=60;if(e>=j&&g>=n&&e<j+m&&g<n+o)return true}}return false}function MouseInHotspot(c,d){if(d==null)d=showActObj;for(var e=0;e<d.hotspots;e++)if(MouseInObject(c,"hot"+d.id+"_"+e)&&GetShiftState(c)==d.par1)return true;return false}
var touchEvents=["LClick1","LClick2","LClick3","LBeginDrag","LDown","LUp","RClick1","RClick2","RClick3","RBeginDrag","RDown","RUp","Drag","Move"];function InArray(c,d){for(var e=0;e<d.length;e++)if(c==d[e])return true;return false}function MouseEventControl(c,d){if(c==d)return true;if(IsTouchDevice())if(InArray(c,touchEvents)&&InArray(d,touchEvents))return true;return false}
function IsStringinputValidated(){if(showActObj.type!="Input")return false;var c=showActObj.par1[0];return c=="N"||c=="A"?false:true}
function ActionControl(c,d,e){if(playMode=="K"&&KGuestDemoMode>0)return null;if(e==null)e=false;if(d==null){for(var g=0;g<screens[showScreen].actions.length;g++){var j=screens[showScreen].actions[g];if(MouseEventControl(j.type,c))return j}return 0}for(g=0;g<screens[showScreen].actions.length;g++){j=screens[showScreen].actions[g];if(MouseEventControl(j.type,c)&&MouseInHotspot(d,j))return j}if(e==true)return null;if(showActObj.type=="Input"&&IsStringinputValidated()==false){e=showActObj.nextFrame;for(g=
0;g<screens[e].actions.length;g++){j=screens[e].actions[g];if(MouseEventControl(j.type,c)&&MouseInHotspot(d,j))return j}}return 0}function ToStandard(c){c=String.fromCharCode(c);return c.toUpperCase(c).charCodeAt(0)}function ToStandard2(c){if(c>=112&&c<=123)return c;return ToStandard(c)}
function ActionKeyControl(c,d,e){e||(e=false);var g=c;if(c==107||c==187){g=43;e=true}if(c==109||c==189){g=45;e=true}if(c==56||c==106){g=42;e=true}c=GetShiftState(d);if(c.length>0)if(e)if(c.substr(0,1)=="s")c=c.substr(1);for(d=0;d<screens[showScreen].actions.length;d++){var j=screens[showScreen].actions[d],n=j.par2;if(e)if(n.substr(0,1)=="s")n=n.substr(1);if(j.type=="Key"&&(g==ToStandard(j.par1)||g==ToStandard2(j.par1))&&c==n)return j}return 0}
function IsDragSequence(){return screens[showScreen].actions.length==1&&screens[showScreen].actions[0].type=="Drag"}var m_mouseStatus=0,m_p1=new StoredEvent(0,0,"",""),m_p2=new StoredEvent(0,0,"",""),m_p3=new StoredEvent(0,0,"",""),m_buttonID,DOUBLECLICKTIME=500,m_timer1=0,m_timer2=0,m_bClkEvent=false,m_begindragEvent=0;
function BDown(c){m_begindragEvent=0;c=ActionControl(m_buttonID+"BDown",c);if(showActObj.type=="Input")if(AssessStringInput(true,true)){showHistory[showHistory.length]=showActObj.nextFrame;historyActionMap[showActObj.nextFrame]=0;TeacherForward(true,c.nextFrame,c.id);return}if(c)TeacherForward(true,c.nextFrame,c.id);else{m_mouseStatus=0;FalseEvent()}}
function BBeginDrag(c){c=ActionControl(m_buttonID+"BeginDrag",c);if(showActObj.type=="Input")if(AssessStringInput(true,true)){showHistory[showHistory.length]=showActObj.nextFrame;historyActionMap[showActObj.nextFrame]=0;TeacherForward(true,c.nextFrame,c.id);return}if(c)TeacherForward(true,c.nextFrame,c.id);else{m_mouseStatus=0;FalseEvent()}}
function BUp(c){if(!isOnLink){m_begindragEvent=0;if(c=ActionControl(m_buttonID+"Up",c))TeacherForward(true,c.nextFrame,c.id);else{m_mouseStatus=0;playMode=="K"&&KScoringScreen||IsLeadIn()||IsLeadOut()||showActObj.type=="None"||FalseMouseEvent()}}}
function BClk(c){m_begindragEvent=0;c=ActionControl(m_buttonID+"Click1",c,false);if(showActObj.type=="Input")if(AssessStringInput(true,true)){showHistory[showHistory.length]=showActObj.nextFrame;historyActionMap[showActObj.nextFrame]=0;TeacherForward(true,c.nextFrame,c.id);return}c?TeacherForward(true,c.nextFrame,c.id):FalseEvent()}
function BDblClk(c){m_begindragEvent=0;c=ActionControl(m_buttonID+"Click2",c,false);if(showActObj.type=="Input")if(AssessStringInput(true,true)){showHistory[showHistory.length]=showActObj.nextFrame;historyActionMap[showActObj.nextFrame]=0;TeacherForward(true,c.nextFrame,c.id);return}c?TeacherForward(true,c.nextFrame,c.id):FalseEvent()}
function BTrplClk(c){m_begindragEvent=0;c=ActionControl(m_buttonID+"Click3",c,false);if(showActObj.type=="Input")if(AssessStringInput(true,true)){showHistory[showHistory.length]=showActObj.nextFrame;historyActionMap[showActObj.nextFrame]=0;TeacherForward(true,c.nextFrame,c.id);return}c?TeacherForward(true,c.nextFrame,c.id):FalseEvent()}
function BWheel(c){c=ActionControl("Wheel",c);if(showActObj.type=="Input")if(AssessStringInput(true,true)){showHistory[showHistory.length]=showActObj.nextFrame;historyActionMap[showActObj.nextFrame]=0;TeacherForward(true,c.nextFrame,c.id);return}c?TeacherForward(true,c.nextFrame,c.id):FalseEvent()}function FalseMouseEvent(){if(showActObj.type=="Input")if(AssessStringInput(true,true)){TeacherForward(true,showActObj.nextFrame,showActObj.id);setTimeout("FalseEvent();",300);return}FalseEvent()}
function FalseEvent(){TeacherWrong()}var g_x,g_y,g_shst,g_timer=0;
function EventMouseMove(c){if(!IsTouchDevice()){if(c==null)c=window.event;if(playMode=="K"){g_x=GetMouseX(c);g_y=GetMouseY(c);g_shst=GetShiftState(c)}if(playMode=="K"&&KGuestDemoMode)return false;if(playMode=="K"&&IsDragBegin())return false;if(m_begindragEvent)if(!MouseInHotspot(c,m_begindragEvent)){TeacherForward(true,m_begindragEvent.nextFrame,m_begindragEvent.id);m_begindragEvent=0;return}var d=ActionControl("Drag",c);if(d)TeacherForward(true,d.nextFrame,d.id);else if(d=ActionControl("Move",c))if(playMode==
"K"){if(g_timer==0)g_timer=setTimeout("PointDelay();",300)}else TeacherForward(true,d.nextFrame,d.id)}}function PointDelay(){var c=new StoredEvent(g_x,g_y,g_shst);g_timer=0;(act=ActionControl("Move",c))&&TeacherForward(true,act.nextFrame,act.id)}function EventDblClk(){return false}
function EventWheel(c){if(playMode=="K"&&KGuestDemoMode)return false;if(playMode=="K"&&IsDragBegin())return false;if(playMode=="K"&&KConfirmDemo>0)return false;if(playMode=="S")return false;if(m_mouseStatus!=0)return false;if(c==null)c=window.event;BWheel(c);return false}function DocEventMouseDown(c){if(!c)c=window.event;if(c.srcElement)if(c.srcElement.id=="m_ActionText")return;if(c.target)if(c.target.id=="m_ActionText")return;if(actionMenu)return true}
function EventMouseDown(c){if(actionMenu)if(actionMenu.IsOnScreen()){actionMenu.Close();return true}if(playMode=="K"&&KGuestDemoMode)return false;if(playMode=="K"&&IsDragBegin())return false;if(playMode=="K"&&KConfirmDemo>0)return false;if(playMode=="S"){if(isOnLink)return true;return false}if(c==null)c=window.event;var d=GetButton(c);m_buttonID||(m_buttonID=d);if(d=="")d=m_buttonID;if(playMode=="K"||playMode=="T")if(showActObj.type=="Input")for(var e=0;e<showActObj.hotspots;e++)if(MouseInObject(c,
"hot"+showActObj.id+"_"+e))return true;if(screens[showScreen].actions.length>0)if(screens[showScreen].actions[0].type=="Decision")return true;e=ActionControl(d+"BDown",c);var g=ActionControl(d+"BeginDrag",c),j=ActionControl(d+"Click1",c),n=ActionControl(d+"Click2",c),m=ActionControl(d+"Click3",c);switch(m_mouseStatus){case 0:m_bClkEvent=false;m_mouseStatus=1;m_p1=new StoredEvent(GetMouseX(c),GetMouseY(c),GetShiftState(c),d);m_buttonID=d;m_begindragEvent=0;if(j==0&&n==0&&m==0){e&&BDown(m_p1);g&&BBeginDrag(m_p1);
break}if(g)m_begindragEvent=g;if(n||m)m_timer1=setTimeout(Event_Mouse_Timer1,DOUBLECLICKTIME);break;case 2:if(d!=m_buttonID)break;if(m_timer1>0){clearTimeout(m_timer1);m_timer1=0}if(n&&m==0){m_mouseStatus=0;MouseInHotspot(m_p1,n)?BDblClk(c):FalseMouseEvent();break}m_mouseStatus=3;m_p3=new StoredEvent(GetMouseX(c),GetMouseY(c),GetShiftState(c),d);m_timer2=setTimeout(Event_Mouse_Timer2,DOUBLECLICKTIME);break;case 3:if(d!=m_buttonID)break;if(m_timer2>0){clearTimeout(m_timer2);m_timer2=0}m_mouseStatus=
0;m&&MouseInHotspot(m_p1,m)&&MouseInHotspot(m_p3,m)?BTrplClk(c):FalseMouseEvent();break;default:m_mouseStatus=0}return false}
function EventMouseUp(c){m_mouseStatus==2&&EventMouseDown(c);if(playMode=="K"&&KGuestDemoMode)return false;if(playMode=="K"&&IsDragBegin())return false;if(playMode=="K"&&KConfirmDemo>0)return false;if(c==null)c=window.event;var d=GetButton(c);if(d!=m_buttonID)return false;if(screens[showScreen].actions.length>0)if(screens[showScreen].actions[0].type=="Decision")return true;var e=ActionControl(d+"Click1",c),g=ActionControl(d+"Click2",c),j=ActionControl(d+"Click3",c);switch(m_mouseStatus){case 1:if(e==
0&&g==0&&j==0){m_mouseStatus=0;BUp(c);break}if(e)m_bClkEvent=MouseInHotspot(m_p1,e);if(m_timer1==0){if(e){m_mouseStatus=0;m_bClkEvent?BClk(c):BUp(c)}else{m_mouseStatus=0;FalseMouseEvent()}break}m_mouseStatus=2;m_p2=new StoredEvent(GetMouseX(c),GetMouseY(c),GetShiftState(c),d)}return false}function Event_Mouse_Timer1(){m_timer1=0;if(m_mouseStatus==2){m_bClkEvent?BClk(m_p2):BUp(m_p2);m_mouseStatus=0}}
function Event_Mouse_Timer2(){m_timer2=0;if(m_mouseStatus==3){m_mouseStatus=0;var c=ActionControl(m_buttonID+"Click2",m_p3);if(c)MouseInHotspot(m_p1,c)&&BDblClk(m_p3);else FalseMouseEvent()}}var knowit_AltF4Pressed=false;function BeforeUnload(){SavePosition()}var getCode=false;
function EventKeyPress(c){if(showActObj.type=="Input")return true;if(!getCode)return true;if(c==null)c=window.event;var d=c.which?c.which:c.keyCode;if(d>=65&&d<=90)d=String.fromCharCode(d).toUpperCase().charCodeAt(0);if(playMode=="T")if(act=ActionKeyControl(d,c,true))TeacherForward(true,act.nextFrame,act.id);else!IsLeadIn()&&!IsLeadOut()&&TeacherWrong(c);else(act=ActionKeyControl(d,c,true))?TeacherForward(true,act.nextFrame,act.id):TeacherWrong(c);return getCode=false}var _tabsemaphore=false;
function EventKeyDown(c){if(c==null)c=window.event;var d=c.which?c.which:c.keyCode;if(d>=96&&d<=105)d-=48;if(upk.browserInfo.isExplorer())if(d==9)if(_tabsemaphore==true)return false;else{_tabsemaphore=true;setInterval("_tabsemaphore=false;",10)}if(playMode=="S"&&d>=112&&d<=123){showFrameIDToggle&&CheckFrameIDKeys(c)==true&&ToggleShowFrameID();return false}if(playMode=="K"){if(d==27&&actionMenu)if(actionMenu.IsOnScreen()){actionMenu.Close();return false}if(KFinishClose==true)return false}if(showActObj.type==
"Input"){if(playMode=="S"||playMode=="K"&&KGuestDemoMode){d==13&&DemoForward();d==27&&ClosePlayer();d==32&&PauseToggle();return false}if(d==9&&PlayerConfig.StringInputLostFocusAutoadvanceEnabled)AssessStringInput(true,true)?TeacherForward(true):TeacherWrong(c);if(d==13){if(actionMenu)if(actionMenu.IsOnScreen()){actionMenu.Close();return true}if(playMode=="T"&&(UserPrefs.TryIt.EnableSkipping||IsTouchEvent()))TeacherForward(true);else AssessStringInput(true,true)?TeacherForward(true):TeacherWrong(c)}if(upk.browserInfo.isSafari()&&
d==27){OnClose();return false}return true}if(playMode=="K"&&KGuestDemoMode)return false;if(playMode=="K"&&IsDragBegin())return false;if(d>=65&&d<=90)d=String.fromCharCode(d).toUpperCase().charCodeAt(0);if(d>=16&&d<=18)return true;if(d==91||d==92)return true;if(d==114||d==116||d==117||d==121){if(document.all&&!upk.browserInfo.isFF3()){c.originalCode=d;c.keyCode=0}if(playMode=="S")return false}var e;if(playMode=="S"){if(d==27){ClosePlayer();return false}else if(d==32){PauseToggle();return false}else if(d==
13){if(actionMenu)if(actionMenu.IsOnScreen()){actionMenu.Close();return true}DemoForward(showActObj.delay!=DELAY_INFINITE);return false}return true}else if(playMode=="T"){if(c.keyCode==115&&c.altKey==true)return false;if(d==13){if(actionMenu)if(actionMenu.IsOnScreen()){closedbyEnter=true;actionMenu.Close();return true}if(e=ActionKeyControl(d,c)){TeacherForward(true,e.nextFrame,e.id);return false}else if(UserPrefs.TryIt.EnableSkipping||IsTouchEvent()){TeacherForward(false);return false}else if(screens[showScreen].actions[0].type==
"None"){TeacherForward(true);return false}if(!UserPrefs.TryIt.EnableSkipping&&!IsTouchEvent()){TeacherWrong(c);return false}else return true}else if(d==27){(e=ActionKeyControl(d,c))?TeacherForward(true,e.nextFrame,e.id):ClosePlayer();return false}else if(d==9){(e=ActionKeyControl(d,c))?TeacherForward(true,e.nextFrame,e.id):TeacherWrong(c);return false}else if(d>=16&&d<=18||showActObj.type=="Input")return true;else{(e=ActionKeyControl(d,c))?TeacherForward(true,e.nextFrame,e.id):TeacherWrong(c);return false}}else{if(c.keyCode==
115&&c.altKey==true){try{c.keyCode=27}catch(g){}d=27;knowit_AltF4Pressed=true}if(d==13){if(actionMenu)if(actionMenu.IsOnScreen()){actionMenu.Close();return true}if(KScoringScreen)ClosePlayer(1);else if(IsLeadIn()||IsLeadOut())TeacherForward(true);else if(e=ActionKeyControl(d,c))TeacherForward(true,e.nextFrame,e.id);else screens[showScreen].actions[0].type=="None"?TeacherForward(true,e.nextFrame,e.id):TeacherWrong(c);return true}if(d==27){(e=ActionKeyControl(d,c))?TeacherForward(true,e.nextFrame,e.id):
OnClose();return false}else if(d==9){(e=ActionKeyControl(d,c))?TeacherForward(true,e.nextFrame,e.id):TeacherWrong(c);return false}else if(d>=16&&d<=18||showActObj.type=="Input")return true;else if(e=ActionKeyControl(d,c)){TeacherForward(true,e.nextFrame,e.id);return false}if(d>=112&&d<=123){TeacherWrong(c);return false}return getCode=true}}
function StrongAssess(c,d){c||(c=false);d||(d=false);var e=showActInpObj.value;if(d){var g=showActObj.par1[1];if(matchString(g,e,showActObj.par3))return true;g=DecodeInputString(showActObj.par1[1]);return matchString(g,e,showActObj.par3)}if(c){if(showActObj.par1[0]=="N"&&e=="")return true;if(showActObj.par1[0]=="A"&&e=="")return true}for(var j=1;j<showActObj.par1.length;j++){g=showActObj.par1[j];if(matchString(g,e,showActObj.par3))return true;g=DecodeInputString(showActObj.par1[j]);if(matchString(g,
e,showActObj.par3))return true}return false}var _assessStr_counter=0;function AssessStringInput(c,d){if(!d){_assessStr_counter++;if(_assessStr_counter==3)_assessStr_counter=0;if(_assessStr_counter!=0)return}c||(c=false);var e=false;if(playMode=="K")e=true;if(!c)return StrongAssess(false,!e);return e?showActObj.par1[0]=="N"||showActObj.par1[0]==""?StrongAssess(true,false):showActObj.par1[0]=="S"?showActInpObj.value.length>0:true:StrongAssess(c,true)}
function EventInputKey(c){if(playMode=="S"){c=window.event?window.event.keyCode:c.which?c.which:c.keyCode;if(c==27){OnClose();return false}setTimeout("showActInpObj.value=showActInpObj.original;",10);return false}if(playMode=="K"&&KGuestDemoMode){setTimeout("showActInpObj.value=showActInpObj.original;",10);return false}if(playMode=="K"&&IsDragBegin()){setTimeout("showActInpObj.value=showActInpObj.original;",10);return false}if(playMode=="T"||playMode=="K"){c=window.event?window.event.keyCode:c.which?
c.which:c.keyCode;if(c!=13)showActObj.par4=true;if(c==27){showActInpObj.value=showActObj.par5;showActInpObj.original=showActInpObj.value;OnClose();return false}}return true}var tracewindow=null;function Trace(c){tracewindow==null&&tracewindow.open("","","");tracewindow.document.writeln(c);tracewindow.document.writeln("<br>");tracewindow.scrollBy(0,100)}
function EventPropertyChange(){if(showActObj.type!="Input")if(showActObj.par4==false)return true;if(playMode=="T"||playMode=="K")PlayerConfig.StringInputAutoadvanceEnabled&&AssessStringInput(false)&&showActObj.par4==true&&TeacherForward(true,showActObj.nextFrame,showActObj.id);setTimeout("EventPropertyChange();",100);return true}function EventKeyUp(){return true}function EventCancel(){return false}
function SavePosition(){if(!upk.browserInfo.isiOS())if(playMode=="S"){var c=new Cookie(document,"OnDemandSeeItSizes",365,"/");c.Load();if(isNaN(window.screenX)){var d=80;if(upk.browserInfo.getAgentInfo().toLowerCase().indexOf("trident/5.")>=0)d-=21;else if(upk.browserInfo.isIEVersion(7))d-=21;window.status="test";if(window.status=="test")d-=29;c.SeeItLeft=window.screenLeft-8;c.SeeItTop=window.screenTop-d;c.SeeItWidth=document.body.clientWidth+17;c.SeeItHeight=document.body.clientHeight+17}else{c.SeeItLeft=
window.screenX;c.SeeItTop=window.screenY;c.SeeItWidth=upk.browserInfo.isExplorer()?window.innerWidth-4:window.innerWidth;c.SeeItHeight=upk.browserInfo.isExplorer()?window.innerHeight-4:window.innerHeight}c.Store()}}
function UnLoad(){lms_ClosePage();SavePosition();if(playMode=="K"){trackScoreCompleted=GetResultInPercent(true);trackScoreRequired=KScoreNeeded;KTopicFinished||KScoringScreen||showActObj.nextFrame=="end"?trackComplete():trackIncomplete()}if(playMode=="S"||playMode=="T"||playMode=="K")ClosePlayer();guidedParent&&guidedParent.GITMClosed()}
function StartFrameCorrection(c){var d;if(screens[c].backActions.length==0){StartScreen="start";if(StartScreen!=c)StartAction=0}else{d="";for(var e=0;e<screens[c].backActions.length;e++)if(e==0)d=screens[c].backActions[0].prevFrame;else if(d!=screens[c].backActions[0].prevFrame){StartScreen=c;if(StartScreen!=c)StartAction=0;return}for(d=screens[c].backActions[0].prevFrame;;){if(screens[d].backActions.length==0){StartScreen="start";if(StartScreen!=c)StartAction=0;break}if(screens[d].actions[0].type==
"None")d=screens[d].backActions[0].prevFrame;else{if(screens[d].actions[0].type=="Decision"){StartScreen=d;if(StartScreen!=c)StartAction=0;break}StartScreen=c;if(StartScreen!=c)StartAction=0;break}}}}function SetStartFrame(c){if(c.length!=0)if(screens[c])StartScreen=c}
function SetStartContext(c){if(c.length!=0){var d=[];d=c.split("+");for(c=0;c<d.length;c++){ctxItem=d[c];for(var e=0;e<screenNames.length;e++){scrName=screenNames[e];scr=screens[scrName];for(var g=0;g<scr.actions.length;g++){act=scr.actions[g];if(act.ctx==ctxItem){SetStartFrame(scrName);StartFrameCorrection(StartScreen);return}}}}}}var ecidMatchingFrames=[],ecidStartDecisions={},ecidDecisionStart=false;
function SearchPathForEcid(c,d){for(var e=c;;){if(e=="end")return false;var g=screens[e];g.type=g.actions[0].type.toLowerCase();if(g.type=="decision"){var j=false;ecidStartDecisions[e]={id:e,display:false,pathstoignore:[]};for(var n=0;n<g.actions.length;n++)if(SearchPathForEcid(g.actions[n].nextFrame,d)){if(j)ecidStartDecisions[e].display=true;j=true}else ecidStartDecisions[e].pathstoignore.push(g.actions[n].id);return j}j=d.split("C");for(n=0;n<j.length;n++){ctxItem="C"+j[n];if(ctxItem!="C")for(var m=
0;m<g.actions.length;m++)if(g.actions[m].matchedcontext==ctxItem){ecidMatchingFrames.push({frameid:e,altindex:m});return true}}e=g.actions[0].nextFrame}}
function FindEcidStartNextFrame(c){var d=screens[c];d.type=d.actions[0].type.toLowerCase();if(d.type=="decision")if(ecidStartDecisions[c].display)return c;for(var e=0;e<ecidMatchingFrames.length;e++)if(c==ecidMatchingFrames[e].frameid){StartAction=ecidMatchingFrames[e].altindex;ecidDecisionStart=false;return c}for(c=0;c<d.actions.length;c++)if(d.actions[c].nextFrame!="end")if(e=FindEcidStartNextFrame(d.actions[c].nextFrame))return e}
function SetStartMatchedContext(c,d){if(c!="")if(d==getMyGuid()){SearchPathForEcid(screenNames[0],c);if(ecidMatchingFrames.length==1){SetStartFrame(ecidMatchingFrames[0].frameid);StartAction=ecidMatchingFrames[0].altindex;StartFrameCorrection(StartScreen)}else if(ecidMatchingFrames.length>=2){ecidDecisionStart=true;StartScreen=FindEcidStartNextFrame(screenNames[0]);StartFrameCorrection(StartScreen)}}}function Skip(){return false}
function SetFlags(){for(var c=0;c<screenNames.length;c++){scrName=screenNames[c];for(var d=0,e=0;e<screens[scrName].actions.length;e++){var g=screens[scrName].actions[e].emptytext;g=screens[scrName].emptyinfo&&g;screens[scrName].actions[e].emptybubble=g;!g&&screens[scrName].actions[e].realAction==true&&d++}for(e=0;e<screens[scrName].actions.length;e++){screens[scrName].actions[e].showalternatives=d>1;if(screens[scrName].actions[e].type=="None"||screens[scrName].actions[e].type=="Decision")screens[scrName].actions[e].showalternatives=
false}}}var bActionsBuilded=false;function FrameContainer(){this.container={};this.Clear=function(){this.container={}};this.Contains=function(c){try{if(this.container[c]!=null)return true}catch(d){}return false};this.Get=function(c){if(this.Contains(c))return this.container[c];return null};this.Add=function(c,d){this.container[c]=d}}var frameContainer=new FrameContainer;function _isHiddenAction(c){try{return c.disabledmodes.indexOf(playMode)>=0}catch(d){return false}}
function _isFrameToSkip(c){if(playMode=="S"){var d=c.actions[0];if(!_isHiddenAction(d))return false}else for(var e=0;e<c.actions.length;e++){d=c.actions[e];if(!_isHiddenAction(d))return false}return true}function _createActionArray(c){var d=[];c=screens[c];for(var e=0;e<c.actions.length;e++){var g=c.actions[e];_isHiddenAction(g)||(d[d.length]=g)}return d}
function _buildActionsS(){for(var c=0;c<screenNames.length;c++){var d=screens[screenNames[c]];_isFrameToSkip(d)&&frameContainer.Add(d.actions[0].prevFrame,d.actions[0].nextFrame)}for(c=true;c;){c=false;for(var e in frameContainer.container){d=frameContainer.Get(e);var g=frameContainer.Get(d);if(g!=null&&d!=g){frameContainer.Add(e,g);c=true}}}for(c=0;c<screenNames.length;c++){d=screens[screenNames[c]];try{var j=d.actions[0].nextFrame;if(frameContainer.Contains(j))d.actions[0].nextFrame=frameContainer.Get(j)}catch(n){}}}
function _buildActionsTK(){for(var c=0;c<screenNames.length;c++){var d=screens[screenNames[c]];if(_isFrameToSkip(d))for(var e=0;e<d.backActions.length;e++)frameContainer.Add(d.backActions[e].nextFrame,d.actions[0].nextFrame)}for(c=true;c;){c=false;for(e in frameContainer.container){d=frameContainer.Get(e);var g=frameContainer.Get(d);if(g!=null&&d!=g){frameContainer.Add(e,g);c=true}}}for(c=0;c<screenNames.length;c++){e=screenNames[c];d=screens[e];d.actions=_createActionArray(e);for(e=0;e<d.actions.length;e++){g=
d.actions[e].nextFrame;if(frameContainer.Contains(g))d.actions[e].nextFrame=frameContainer.Get(g)}}}function BuildActions(){if(!bActionsBuilded){frameContainer.Clear();playMode=="S"?_buildActionsS():_buildActionsTK();bActionsBuilded=true}}var bBackActionsBuilded=false;
function BuildBackActions(){if(!bBackActionsBuilded){for(var c=0;c<screenNames.length;c++){scr=screens[screenNames[c]];scr.backActions=[]}for(c=0;c<screenNames.length;c++)if(!frameContainer.Contains(screenNames[c])){scr=screens[screenNames[c]];for(var d=0;d<scr.actions.length;d++){scr.actions[d].prevFrame=screenNames[c];s=scr.actions[d].nextFrame;if(s!="end")screens[s].backActions[screens[s].backActions.length]=scr.actions[d]}}}bBackActionsBuilded=true}
var _deviceDPI=0,swipe=new Swipe,screenwidth=0;function IsTouchEvent(){if(IsTouchDevice()){if(UserPrefs.TryIt.EnableSkipping)return true;var c=showActObj.type.toLowerCase();if(c.indexOf("click")>=0)return false;if(c.indexOf("input")>=0)return false;return true}return false}
function TestResolution(){var c=document.body.clientWidth,d=document.body.clientHeight,e=document.getElementById("screen").clientWidth,g=document.getElementById("screen").clientHeight;if(c!=e||d!=g)document.body.style.overflow="auto"}function SetVolumeLevel(c,d){SoundPlayerObj.SetVolume(d?0:c);UserPrefs.LoadCookie();UserPrefs.NavbarVolume=d?c+1E3:c;UserPrefs.StoreCookie()}
function UpdateHistoryFromTimeline(c){var d=upk.Timeline.GetTimeline();showHistory=[];for(var e=0;e<c;e++)showHistory[showHistory.length]=d[e]}
function SetTimeLevel(c){upk.Timeline.Lock(true,c);PlayStop();c=upk.Timeline.DeterminateCurrentFrameFromTime(c);if(c.frameid==upk.Timeline.END_OF_TOPIC)ClosePlayer();else{timelineDescriptor=new TimelineDescriptor(true,c.frameid,c.timelineindex,c.narration,c.animation,c.resttime);UpdateHistoryFromTimeline(c.timelineindex);ShowScreen(c.frameid,"","back",true)}}
function MenuitemSelected(c){IsPaused()||PauseToggle();switch(c.item){case "share":Share();break;case "askexpert":AskAnExpert();break;case "providefeedback":ProvideFeedback();break;case "printit":ShowPrintit();break;case "preferences":OpenPreferences();break;case "help":LaunchHelp("../../");break;case "logout":LogOut()}}var tStartX,tStartY,disableSwipe=false,swipeStarted=false,sticktofinger=true,bubbleDrag=false,showCursor=false,fusionmode=false,touch_Started=false,disableswipeondrag=false;
function FirstScreen(c){template_pauselink='<div align="right"><span id="prbr"><br /></span><a id="prdiv" class="InstructText" href="javascript:HLink(600)">'+R_interface_pause+"</a></div>";if(fusionmode&&!isNavBar()){navBar=new upk.player.navBar("navBar1",$(document.body),{ios:IsTouchDevice()});navBar.bind({onnext:function(){ClearInfiniteButton();DemoNext()},onprev:function(){ClearInfiniteButton();DemoPrev()},onrefresh:function(){clearLastSoundFileName();ClearInfiniteButton();TeacherFastBack()},onpausetoggle:function(){PauseToggle()},
onprefs:function(){SeeItPause();OpenPreferences()},onvolumechange:function(j){SetVolumeLevel(j.volume,j.muted)},onsliderchange:function(j){SetTimeLevel(j.time)},onhelp:function(){LaunchHelp("../../")},onmenu:function(j){MenuitemSelected(j)}});UserPrefs.LoadCookie();var d=UserPrefs.NavbarVolume;if(d>1E3){navBar.setVolume(d-1E3);navBar.toggleMute(true)}else navBar.setVolume(d);IsTouchDevice()?navBar.setKeepHidden(true):navBar.show()}HideSplash();TestResolution();if(_deviceDPI==0)_deviceDPI=getDpiInfo();
if(_deviceDPI!=96)if(getDPICookie()==false){loader_dontclose=true;this.location.replace("../../../html/unsuppdpi.html?"+Escape.MyEscape(AbsUrl(this.location.href)));return}InitLmsMode("player");if(!c&&lms_initialized==false){SetUpProgressReporting();GetOpener();c=window.opener==undefined?window.parent:window.opener;if(soundModes.indexOf(playMode)<0)soundIsExported=false;if(window.location.href.substr(0,7).toLowerCase()!="file://"||!IsTouchDevice())if(location.hostname=="")soundIsExported=false;if(_lmsMode!=
null)if(nosound==false)if(Sound_Init(soundIsExported,UserPref_PlayAudio_Original,null,false)==false){loader_dontclose=true;return}ctxHelper.SetContext("topicPlayer");lms_InitPage(_lmsMode==null?lms_childIndex:-1,_lmsMode==null?gopener==null?c:gopener:null,"T_"+document.getElementById("TopicId").getAttribute("topicid"),"FirstScreen()")}else{if(isNavBar()){d=""+parent.location;d=d.indexOf("localhost")>-1||d.indexOf("127.0.0.1")>-1;navBar.initMenuItems(UIComponents.ShareLink&&!d&&GetTopLevelLmsMode()!=
"LMS",lms_IsMentoringAvailable()==true,lms_IsFeedbackAvailable()==true,param_printitname.length>0,PlayerConfig.EnableCookies&&UserPrefs.EnablePreferences,UIComponents.TopicHelp,(GetTopLevelLmsMode()=="KPT"||Kpath_launch==true)&&lms_IsKPathLogoutAvailable())}nosound==true&&SetNoSound(true);if(GetNoSound())soundIsExported=false;BuildBackActions();BuildActions();bBackActionsBuilded=false;BuildBackActions();event_blocked=false;if(playMode!="K"){if(c)StartScreen=FirstScreenName;else{SetStartFrame(param_frame);
if(param_frame==""){SetStartContext(param_ctx);SetStartMatchedContext(param_ctxlist,param_guid)}FirstScreenName=StartScreen;SetFlags()}if(StartScreen=="start")if(showLeadIn==0)StartScreen=screens.start.actions[0].nextFrame;else if(showLeadIn!=1)if(UserPrefs.ShowLeadIn=="toc")StartScreen=screens.start.actions[0].nextFrame}else{FirstScreenName=StartScreen;KWrongScreens=[]}d=getDIV("screen");scrH=getObjHeight("screen");scrW=getObjWidth("screen");window.onresize=HandleResize0;if(!IsTouchDevice())window.onscroll=
HandleResize;document.body.oncontextmenu=EventCancel;window.onhelp=Skip;document.onhelp=Skip;d.onhelp=Skip;navigator.appName.substring(0,9)!="Microsoft"&&!IsTouchDevice()&&setInterval("HandleResize()",1E3);if(document.layers){document.captureEvents(Event.KEYDOWN);if(playMode=="T"||playMode=="K")d.captureEvents(Event.MOUSEMOVE);d.captureEvents(Event.MOUSEDOWN);if(playMode=="T"||playMode=="K")d.captureEvents(Event.MOUSEUP);d.captureEvents(Event.DBLCLICK)}if(playMode=="T"||playMode=="K")d.onmousemove=
EventMouseMove;getDIV("scrtransparent").onmousedown=EventMouseDown;document.onmousedown=DocEventMouseDown;if(playMode=="T"||playMode=="K")d.onmouseup=EventMouseUp;d.ondblclick=EventDblClk;if(d.addEventListener)d.addEventListener("DOMMouseScroll",EventWheel,false);else d.onmousewheel=EventWheel;d.oncontextmenu=EventCancel;d.ondragstart=EventCancel;document.ondragstart=EventCancel;document.onkeydown=EventKeyDown;document.onkeypress=EventKeyPress;document.onstop=null;if(screenwidth==0){screenwidth=$("#screen").width()+
2;if(IsTouchDevice()){var e=document.body.className;if(e.indexOf("ipad")<0)document.body.className=e+" ipad";setiPadScreen();$("body").bind("orientationchange",function(){actionMenu&&actionMenu.IsOnScreen()&&actionMenu.Close();setiPadScreen()});$("body").bind("touchstart",function(j){if(touchIntroChecked!=false)if(!IsPreferencesOpened())if(!(actionMenu&&actionMenu.IsOnScreen()))if(playMode!="K"||scr=="start"||IsLeadOut()||IsExplanation()){j=touch(j);swipe.Init(screenwidth);tStartX=j.pageX;tStartY=
j.pageY}});$("body").bind("touchmove",function(j){touch_Started=true;if(touchIntroChecked!=false)if(!IsPreferencesOpened())if(!(actionMenu&&actionMenu.IsOnScreen()))if((playMode!="K"||scr=="start"||IsLeadOut()||IsExplanation())&&!bubbleDrag)if(!(j.originalEvent.touches.length>1&&!sticktofinger)){if(disableSwipe||swipeStarted){j.preventDefault();return false}try{if((j.originalEvent.touches[1]||j.originalEvent.changedTouches[1])&&!sticktofinger)swipe.DetectedMulti();else if(swipe.IsNotZoomed()){if(disableswipeondrag==
false){var n=j.originalEvent.touches[0]||j.originalEvent.changedTouches[0],m=n.pageX-tStartX;if(m>0&&!swipePrevEnabled||m<0&&!swipeNextEnabled)m/=2;$("#screencontent").css({"-webkit-transform":"translate3d("+m+"px,0,0)"});sticktofinger=true}j.preventDefault()}}catch(o){}n=j.originalEvent.touches[0]||j.originalEvent.changedTouches[0];swipe.Add(n.pageX,n.pageY)}});$("body").bind("touchend",function(j){if(touch_Started==true){touch_Started=false;isNavBar()&&navBar.hideMenu();if(touchIntroChecked!=false)if(!IsPreferencesOpened())if(actionMenu&&
actionMenu.IsOnScreen())CloseAction();else if(playMode!="K"||scr=="start"||IsLeadOut()||IsExplanation()){if(j.originalEvent.touches.length>0&&!sticktofinger){disableSwipe=true;return false}if(j.originalEvent.touches.length==0&&j.originalEvent.changedTouches.length)sticktofinger=disableSwipe=false;if(disableSwipe||swipeStarted){j.preventDefault();return false}j=$("#screen").width()/2;if(swipe.IsMulti()){if(swipe.IsNotZoomed()==true){$("#screencontent").addClass("swipeanim");$("#screencontent").css({"-webkit-transform":"translate3d(0,0,0)"});
setTimeout(function(){$("#screencontent").removeClass("swipeanim")},400)}}else if(swipe.IsNotZoomed()!=false){var n=swipe.GetX(),m=swipe.GetY(),o=swipe.GetSpeedX();swipe.GetSpeedY();if(Math.abs(m)>Math.abs(n)){$("#screencontent").addClass("swipeanim");disableSwipe=true;$("#screencontent").css({"-webkit-transform":"translate3d(0,0,0)"});setTimeout(function(){$("#screencontent").removeClass("swipeanim");disableSwipe=false},400)}else if(swipePrevEnabled&&n>0&&(n>j||o>30)){swipeStarted=true;$("#screencontent").addClass("swipeanim");
j=$("#screen").width()+102;$("#screencontent").css({"-webkit-transform":"translate3d("+j+"px,0,0)"});$("#screencontent").bind("webkitTransitionEnd",function(){$("#screencontent").removeClass("swipeanim");CloseAction();if(playMode=="S"){ClearInfiniteButton();DemoPrev(true)}else TeacherBack();$("#screencontent").unbind("webkitTransitionEnd")})}else if((IsDragBegin()||IsDragSequence()||swipeNextEnabled||IsLeadOut())&&n<0&&(n<0-j||o<-30)&&IsTouchEvent())if(IsDragBegin()&&KGuestDemoMode==0)StartDemoInTryIt();
else if((IsDragBegin()||IsDragSequence())&&KGuestDemoMode==1)TeacherForward(false);else{animSpeed=o;swipeStarted=true;$("#screencontent").addClass("swipeanim");j=-($("#screen").width()+102);$("#screencontent").css({"-webkit-transform":"translate3d("+j+"px,0,0)"});$("#screencontent").bind("webkitTransitionEnd",function(){$("#screencontent").removeClass("swipeanim");CloseAction();if(playMode=="S"){ClearInfiniteButton();DemoNext()}else{var p={};p.keyCode=13;EventKeyDown(p)}$("#screencontent").unbind("webkitTransitionEnd")})}else{$("#screencontent").addClass("swipeanim");
disableSwipe=true;$("#screencontent").css({"-webkit-transform":"translate3d(0,0,0)"});setTimeout(function(){$("#screencontent").removeClass("swipeanim");disableSwipe=false},400)}}}}})}}if(parent)parent.document.onstop=null;window.onunload=UnLoad;window.onbeforeunload=BeforeUnload;window.onfocus=OnFocus;curH=getObjHeight("cursor");curW=getObjWidth("cursor");sx=d.offsetLeft;sy=d.offsetTop;if(upk.browserInfo.isiOS())if(sx>scrW)sx-=scrW+100;shiftTo("cursor",(scrW-curW-sx-cursor_alignment_x)/2,(scrH-curH-
sy-cursor_alignment_y)/2);showCursor=false;d=StartScreen;StartScreen="";HandleResize();StartScreen=d;c||(binterf=new JSBubbleInterface("bubb01"));binterf.SetEnableCloseButton(1);if(playMode=="T"){binterf.SetMode(R_mode_tryit);binterf.SetActionText(R_interface_action);binterf.SetMoveable(false)}if(playMode=="S"){binterf.SetMode(R_mode_seeit);fusionmode||binterf.SetActionText(R_interface_action);binterf.SetMoveable(false)}if(playMode=="K"){binterf.SetMode(R_mode_knowit);binterf.SetActionText(R_interface_action);
binterf.SetPosition(-1,-1,-1,-1,true,0,0,0);binterf.SetMoveable(true)}document.getElementById("frameidtext").innerHTML=R_frameid;switch(PlayerConfig.ShowFrameID.toLowerCase()){case "on":document.getElementById("frameiddiv").style.display="block";break;case "off":document.getElementById("frameiddiv").style.display="none";break;case "shiftf1":showFrameIDToggle=112;break;case "shiftf2":showFrameIDToggle=113;break;case "shiftf3":showFrameIDToggle=114;break;case "shiftf4":showFrameIDToggle=115;break;case "shiftf5":showFrameIDToggle=
116;break;case "shiftf6":showFrameIDToggle=117;break;case "shiftf7":showFrameIDToggle=118;break;case "shiftf8":showFrameIDToggle=119;break;case "shiftf9":showFrameIDToggle=120;break;case "shiftf10":showFrameIDToggle=121;break;case "shiftf11":showFrameIDToggle=122;break;case "shiftf12":showFrameIDToggle=123}lms_topicStart(getMyGuid(),playMode);ShowScreen(StartScreen,StartAction);try{window.focus()}catch(g){}playMode=="S"&&upk.Timeline.CalculateTimelineThrough("end")}}var ___TraceStarted=false;
function ___TraceInit(){$("#frameiddiv").append("<div id='mytracediv'></div>");___TraceStarted=true}function ___TraceClear(){___TraceStarted==true&&$("#mytracediv").html("")}function ___Trace(c){___TraceStarted==true&&$("#mytracediv").html($("#mytracediv").html()+"<br/>"+c)}
function setiPadScreen(){if(window.innerWidth/window.innerHeight>$("#screen").width()/$("#screen").height()){$("html").css({margin:0,padding:0});$("body").css({position:"relative",margin:0,padding:0}).width(window.innerWidth/window.innerHeight*$("#screen").height())}else $("body").width($("#screen").width())}var swipeNextEnabled=false,swipePrevEnabled=false;
function EnableSwipeNext(c){if(swipeNextEnabled)$("#nextscreen").css("background-image","url('"+c+"')");else{$("<div/>",{id:"nextscreen",style:"float:left; margin-left:100px; margin-top:1px; width:"+($("#screen").width()+2)+"px;height:"+($("#screen").height()+2)+"px; background-color:Blue; background-image : url('"+c+"')"}).appendTo("#screencontent");swipeNextEnabled=true}}function DisableSwipeNext(){if(swipeNextEnabled){$("#nextscreen").remove();swipeNextEnabled=false}}
function EnableSwipePrev(c){if(swipePrevEnabled)$("#prevscreen").css("background-image","url('"+c+"')");else{$("<div/>",{id:"prevscreen",style:"float:left; margin-right:100px; margin-top:1px; width:"+($("#screen").width()+2)+"px;height:"+($("#screen").height()+2)+"px; background-color:Blue; background-image : url('"+c+"')"}).prependTo("#screencontent");swipePrevEnabled=true}}function DisableSwipePrev(){if(swipePrevEnabled){$("#prevscreen").remove();swipePrevEnabled=false}}
function SetSound(c){soundIsExported=c}function soundIsPublished(){return true}function SetKScore(c){KScoreNeeded=c}function HexaToDec(c){if(c.length==0)return"";try{return c.substr(0,1)+parseInt("0x"+c.substr(1))}catch(d){return""}}function ecidStr(c){return replaceString("%27","'",c)}
function ParseArguments(){var c,d;c=document.location.hash.substring(1);c=c.split("&");if(c.length==0||c[0]==""){c=document.location.search.substring(1);c=c.split("&")}if(c.length==1)if(c[0].toLowerCase().substr(0,3)=="su=")c=Escape.SafeUriUnEscape(c[0].substr(3)).split("&");for(var e=false,g=false,j=0;j<c.length;j++){d=c[j];if(d.substr(0,5).toLowerCase()=="mode="){playMode=d.substr(5,1);if(playMode=="S")fusionmode=true}if(d.substr(0,9).toLowerCase()=="framehex=")param_frame=HexaToDec(d.substr(9));
if(d.substr(0,6).toLowerCase()=="frame=")param_frame=d.substr(6);if(d.substr(0,4).toLowerCase()=="ctx=")param_ctx=d.substr(4);if(d.substr(0,5).toLowerCase()=="guid=")param_guid=d.substr(5);if(d.substr(0,12).toLowerCase()=="contextlist=")param_ctxlist=d.substr(12);if(d.substr(0,8).toLowerCase()=="leadin=1")showLeadIn=1;if(d.substr(0,8).toLowerCase()=="leadin=0")showLeadIn=0;if(d.substr(0,12).toLowerCase()=="printitname=")param_printitname=d.substr(12);if(d.substr(0,11).toLowerCase()=="childindex=")lms_childIndex=
parseInt(d.substr(11));if(d.substr(0,10).toLowerCase()=="assessment")lms_inAssessment=true;if(d.substr(0,7).toLowerCase()=="nosound")nosound=true;if(d.substr(0,12).toLowerCase()=="directlaunch")e=true;if(d.substr(0,16).toLowerCase()=="keep-alive-timer")g=true}e==true&&g==true&&KeepAlive_Init("../../../");if(playMode=="K"){trackArgList=c;trackOnBegin()}}var clicknum=1;function SoundToggle(){clicknum+=1;document.imgS.src=Math.floor(clicknum/2)==clicknum/2?"sound_isoff.gif":"sound_ison.gif"}
function OpenDialog(){day=new Date;id=day.getTime();eval("page"+id+" = window.open(MakeAbsolute(URL), '"+id+"', 'toolbar=1,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=506,height=338,left = 147,top = 131');")}var _infiniteButton=false;function SetButtonToBeInfinite(){if(fusionmode){_infiniteButton=true;navBar.togglePause(true)}}function ClearInfiniteButton(){if(fusionmode)if(_infiniteButton==true){_infiniteButton=false;navBar.togglePause(isPaused);return true}return false}
function PauseToggle(){if(ClearInfiniteButton()==true)DemoNext();else try{_lastAsyncronFile=false;if(isPaused=!isPaused){if(fusionmode==false){binterf.SetPRText(R_interface_resume);binterf.StartBlink()}PlayPause()}else{if(fusionmode==false){binterf.EndBlink();binterf.SetPRText(R_interface_pause)}if(!PlayResume()){isNavBar()&&navBar.togglePause(isPaused);TeacherFastBack();return}}parent.setPauseStatus&&parent.setPauseStatus(isPaused);isNavBar()&&navBar.togglePause(isPaused)}catch(c){isPaused=!isPaused}}
function SeeItPause(){playMode=="S"&&!isPaused&&PauseToggle()}function SeeItResume(){playMode=="S"&&isPaused&&PauseToggle()}function IsPaused(){return isPaused}function SetScrollbars(){var c=getDIV("screen"),d=c.offsetHeight,e=document.body.clientHeight;if(c.offsetWidth>document.body.clientWidth+2||d>e)document.body.scroll="auto"}function SetScreenshotPath(c){c||(c="");screenshotPath=c==""?MakeAbsolute(""):c;c!=""&&SoundPlayerObj.SetSoundPath(c)}
function SetRemediationLevels(c,d,e){KRemediation1=c;KRemediation2=d;KRemediation3=e}function SetTopicName(c){c||(c="");if(c.length>0)topicName=unescape(c)}function SetTopicShowBubbles(c){topicShowBubbles=c}function fixHTMLString(c){c=replaceString("<","&lt;",c);c=replaceString(">","&gt;",c);c=replaceString("'","&#39;",c);return c=replaceString('"',"&#34;",c)}function DecodeInputString(c){c=replaceString("&lt;","<",c);c=replaceString("&gt;",">",c);return c=replaceString("&amp;","&",c)}ParseArguments();
document.writeln("<STYLE>");if(playMode=="S"){document.writeln("A.textLink {text-decoration:none; color:black}");document.writeln(".infoblocks {display:none}")}else document.writeln("A.textLink {color:#0033cc}");document.writeln("</STYLE>");if(NS4)var loadWidth=window.innerWidth,loadHeight=window.innerHeight;function getMyGuid(){var c=this.location.href,d=c.indexOf("?");if(d>=0)c=c.substr(0,d);d=c.lastIndexOf("/");return c.substr(d-36,36)}function Swipe(){}
Swipe.prototype.Init=function(c){this.dny=this.dnx=this.dy=this.dx=this.y=this.x=0;this.width=c;this.multi=false};Swipe.prototype.Add=function(c,d){if(this.x==0&&this.y==0){this.x=this.dx=this.dnx=c;this.y=this.dy=this.dny=d}else{this.dnx=this.dx;this.dny=this.dy;this.dx=c;this.dy=d}};Swipe.prototype.IsNotZoomed=function(){if(window.innerWidth>this.width)return true;return Math.abs(window.innerWidth-this.width)<5};Swipe.prototype.DetectedMulti=function(){this.multi=true};Swipe.prototype.IsMulti=function(){return this.multi};
Swipe.prototype.Result=function(){return""+(this.dx-this.x)+" "+(this.dy-this.y)};Swipe.prototype.GetSpeedX=function(){return this.dx-this.dnx};Swipe.prototype.GetSpeedY=function(){return this.dy-this.dny};Swipe.prototype.GetX=function(){return this.dx-this.x};Swipe.prototype.GetY=function(){return this.dy-this.y};Swipe.prototype.GetPoint=function(){return""+this.dx+","+this.dy};var __myLogWnd=null;function MYLOGOpen(){if(__myLogWnd==null)__myLogWnd=window.open()}
function MYLOG(c){MYLOGOpen();__myLogWnd.document.write("<hr/>");__myLogWnd.document.write(c+"<br/><br/>");for(var d in c)__myLogWnd.document.write(d+": "+c[d]+"<br/>");__myLogWnd.document.write("<hr/>")}function MYLOGSimple(c){MYLOGOpen();__myLogWnd.document.write(c+"<br/>")}var requiredFlashVersion="9.0.124",_name="",_asyn=false,_fire=false,_knowpalyer=false,bPlayerIsAvailable=false,useAudioTag=false,useFlash=false,hasRequestedVersion,_fPlayerPath="",soundjs_initialized=false;
function SoundjsInit(){if(soundjs_initialized!=true){soundjs_initialized=true;var c=document.getElementById("fplayer");if(c)if(typeof assetType==="undefined")c.innerHTML="<audio id='upkaudio' onended='AudioEnded();' onerror='AudioError();' oncanplay='AudioLoaded()' style='display: none;'><Source type='audio/mpeg'></audio>";if(upk.browserInfo.isiOS5()&&typeof assetType==="undefined"){getAPlayer().addEventListener("loadstart",SoundPlayer_OnLoadStart);getAPlayer().addEventListener("durationchange",SoundPlayer_OnDurationChange)}hasRequestedVersion=
swfobject.hasFlashPlayerVersion(requiredFlashVersion);try{_fPlayerPath=_webpage_==true?"../../../../":"../../../"}catch(d){_fPlayerPath="../../../"}SupportAAC();CheckAndEnableSound()}}function SoundPlayer_OnLoadStart(){SoundPlayerObj.LoadStartTimer&&clearInterval(SoundPlayerObj.LoadStartTimer);if(getAPlayer().src)SoundPlayerObj.LoadStartTimer=setInterval("SoundPlayer_Started()",3E3)}
function SoundPlayer_OnDurationChange(){if(SoundPlayerObj.LoadStartTimer){clearInterval(SoundPlayerObj.LoadStartTimer);SoundPlayerObj.LoadStartTimer=0}}function SoundPlayer_Started(){getAPlayer().src=getAPlayer().src;getAPlayer().play()}function SupportAAC(){if(upk.browserInfo.isiOS()){bPlayerIsAvailable=useAudioTag=true;if(PlayerConfig.AACIsAvailable==true)return true}return false}
function CheckAndEnableSound(){var c=false;try{c=soundIsPublished()}catch(d){c=false}c==true&&hasRequestedVersion&&!IsTouchDevice()&&bPlayerIsAvailable==false&&UserPrefs.PlayAudio!="none"&&swfobject.embedSWF(_fPlayerPath+"audio/fplayer.swf","fplayer","1","1",requiredFlashVersion,null,null,null,null,onLoadFlash)}
function onLoadFlash(c){if(c.success==true)bPlayerIsAvailable=useFlash=true;document.getElementById("fplayer").style.position="absolute";document.getElementById("fplayer").style.top="0px";document.getElementById("fplayer").style.left="0px"}function AreCookiesEnabled(){if(PlayerConfig.EnableCookies==false)return false;chkcookie=(new Date).getTime()+"";document.cookie="chkcookie="+chkcookie+"; path=/";return document.cookie.indexOf(chkcookie,0)<0?false:true}
function Check_Flash(c,d){if(c==false)return true;if(SupportAAC()==true)return true;if(hasRequestedVersion==false)if(d!="none")return false;return true}function getFPlayer(){return document.getElementById("fplayer")}function getAPlayer(){return document.getElementById("upkaudio")}
function Sound_Init(c,d,e,g,j){SoundjsInit();if(Check_Flash(c,d)==true)return true;if(!SupportAAC()&&upk.browserInfo.isiOS())return true;c="../../../";if(j!=undefined)c=j;e!=null&&eval(e);sw=(screen.width-640)/2;sh=(screen.height-480)/2;if(g==null)g=true;KeepAlive_DoNotSendClose();if(g==true)window.open(c+"html/getflash.html?url="+Escape.MyEscape(this.location.href)+"&newwindow","","top="+sh+", left="+sw+", width=640, height=480, resizable=1,toolbar=1,scrollbars=1,location=1,statusbar=1,menubar=1");
else g=="parent"?setTimeout('parent.location.replace("'+c+"html/getflash.html?url="+Escape.MyEscape(parent.location.href)+'")',10):setTimeout('this.location.replace("'+c+"html/getflash.html?url="+Escape.MyEscape(this.location.href)+'")',10);return false}
function SoundPlayerClass(){for(this.TopicPath=unescape(window.location.href);this.TopicPath.indexOf("\\")!=-1;)this.TopicPath=this.TopicPath.replace("\\","/");var c=this.TopicPath.indexOf("?");if(c>=0)this.TopicPath=this.TopicPath.substr(0,c);c=this.TopicPath.lastIndexOf("/");this.RootPath=this.TopicPath=this.TopicPath.substr(0,c+1);for(var d=0;d<=3;d++){c=this.RootPath.lastIndexOf("/");if(c!=-1)this.RootPath=this.RootPath.substr(0,c)}this.RootPath+="/";this.SoundPath=this.TopicPath;this.AudioPath=
resolveUri(this.TopicPath,"../../../audio/");this.Volume=100;this.PlayCheckerTimer=this.LoadStartTimer=0}function resolveUri(c,d){return c+d}SoundPlayerClass.prototype.ChangeFileSuffix=function(c){if(c.lastIndexOf(".mp3")==c.length-4)return c;c=c.substr(0,c.length-4);if(PlayerConfig.AACIsAvailable||upk.browserInfo.isiOS())return c+".m4a";if(useFlash)return c+".flv";alert("sound - file extension error")};
SoundPlayerClass.prototype.Play=function(c,d,e,g){if(useFlash){var j=getFPlayer();if(j){j.style.top=getScrollTop()+"px";j.style.left=getScrollLeft()+"px"}}d||S_SetFrameState("S");j=S_GetFrameState();g||(g=false);if(bPlayerIsAvailable){e||(e=false);if(e==true)g==false&&OnEndPlaySound();else if(c.length==0){if(g==false){j!="D"&&S_SetFrameState("D");OnErrorPlaySound()}}else{if(c.substr(c.length-4)==".ASX"){e=sounds[c].duration.split(":");try{_lastAudioFileSize=parseInt(e[0])*3600+parseInt(e[1])*60+parseFloat(e[2])}catch(n){_lastAudioFileSize=
0}c=sounds[c].flist[0]}SoundPlayer_Stop();if(c.length==0){if(g==false){j!="D"&&S_SetFrameState("D");OnErrorPlaySound()}}else{fname=d?resolveUri(this.AudioPath,c):resolveUri(this.SoundPath,c);_name=this.ChangeFileSuffix(fname);_asyn=g;_fire=true;if(useFlash)_knowpalyer==true&&setTimeout('SoundPlayer_Open("'+_name+'",'+g+")",120);else useAudioTag&&setTimeout('SoundPlayer_Open("'+_name+'",'+g+")",120)}}}else if(g==false){j!="D"&&S_SetFrameState("D");OnErrorPlaySound()}};
SoundPlayerClass.prototype.Stop=function(c){if(bPlayerIsAvailable)c?SoundPlayer_Stop():setTimeout("SoundPlayer_Stop()",10)};SoundPlayerClass.prototype.Pause=function(){try{if(bPlayerIsAvailable){useFlash&&getFPlayer().SoundPause();useAudioTag&&getAPlayer().pause()}}catch(c){}};SoundPlayerClass.prototype.Resume=function(){if(!InWebpage())if(getLastSoundFileName()!=getActualSoundFileName())return;try{if(bPlayerIsAvailable){useFlash&&getFPlayer().SoundPlay();useAudioTag&&getAPlayer().play()}}catch(c){}};
SoundPlayerClass.prototype.InitAudioPlayer=function(){if(bPlayerIsAvailable)if(useAudioTag){getAPlayer().src=this.AudioPath+"empty.m4a";getAPlayer().play()}};SoundPlayerClass.prototype.IsAvailable=function(){return bPlayerIsAvailable};SoundPlayerClass.prototype.SetSoundPath=function(c){if(c.length>0)this.SoundPath=c};
SoundPlayerClass.prototype.SetVolume=function(c){if(c==null)c=this.Volume;else this.Volume=c;if(useFlash)try{getFPlayer().SetSoundVolume(c/100)}catch(d){}if(useAudioTag)try{getAPlayer().volume=c/100}catch(e){}};function InWebpage(){if(typeof _webpage_==="undefined")return false;return _webpage_}function SoundPlayer_EndCheck(){getAPlayer().ended&&SoundPlayerObj.PlayCheckerTimer&&setTimeout(function(){SoundPlayerObj.PlayCheckerTimer&&SoundComplete(false)},50)}
var _lastAsyncronFile=false,_lastAudioFile="",_lastFlashTime=-1,_lastAudioFileSize=0,_lastFileName="";function clearLastSoundFileName(){_lastFileName=""}function getLastSoundFileName(){return _lastFileName.substr(_lastFileName.lastIndexOf("/")+1)}function getActualSoundFileName(){try{return sounds[showActObj.id.substr(1)+".ASX"].flist[0]}catch(c){return""}}
function SoundPlayer_Open(c,d){if(c.length>0)_lastFileName=c;try{if(c.length>0&&d==true)_lastAsyncronFile=true;if(timelineDescriptor.valid&&timelineDescriptor.type!="narration")throw"";if(useFlash){audio_loading=true;_lastFlashTime=-1;getFPlayer().SetSoundFile(c);getFPlayer().SoundPlay();if(timelineDescriptor.valid&&timelineDescriptor.type=="narration"){SoundFPlayer_SetTime();return}audio_loading=false}if(useAudioTag){audio_loading=true;getAPlayer().pause();if(_lastAudioFile==c)AudioLoaded();else{getAPlayer().src=
c;CLog(c+" - "+_lastAudioFile+" play")}_lastAudioFile=c}SoundPlayerObj.SetVolume();if(upk.browserInfo.isiOS()){SoundPlayerObj.PlayCheckerTimer&&clearInterval(SoundPlayerObj.PlayCheckerTimer);SoundPlayerObj.PlayCheckerTimer=setInterval("SoundPlayer_EndCheck()",500)}}catch(e){S_SetFrameState("D");d==false&&OnErrorPlaySound()}}
function SoundFPlayer_SetTime(){getFPlayer().SoundPause();getFPlayer().SoundSeek(timelineDescriptor.resttime/1E3);if(Math.abs(timelineDescriptor.resttime/1E3-getFPlayer().Time())<0.3){getFPlayer().SoundPlay();audio_loading=false}else setTimeout("SoundFPlayer_SetTime()",300)}
function SoundAPlayer_SetTime(){if(audio_seeking!=false)if(audio_counter>100)setTimeout("AudioReload();",100);else{audio_counter++;var c=0;if(timelineDescriptor.valid==true&&timelineDescriptor.type=="narration"){c=timelineDescriptor.resttime/1E3;if(c>_lastAudioFileSize-1){getAPlayer().pause();SoundComplete();CLog("nextframe");return}if(c<0)c=0}try{getAPlayer().currentTime=c}catch(d){setTimeout("SoundAPlayer_SetTime()",300)}var e=getAPlayer().currentTime,g=Math.abs(e-c);try{CLog("d: "+g+" "+e+" "+
c+" "+_lastAudioFileSize+" "+showScreen)}catch(j){CLog("d: "+g+" "+e+" "+c+" "+_lastAudioFileSize)}if(g<0.3){audio_seeking=false;CLog("play...");getAPlayer().play()}else setTimeout("SoundAPlayer_SetTime()",300)}}function SoundIsLocked(){return audio_loading==true||audio_seeking==true}
function SoundPlayer_Stop(){try{if(SoundPlayerObj.PlayCheckerTimer){clearInterval(SoundPlayerObj.PlayCheckerTimer);SoundPlayerObj.PlayCheckerTimer=0}_lastAsyncronFile=false;useFlash&&getFPlayer().SoundStop();useAudioTag&&getAPlayer().pause()}catch(c){}}
function SoundPlayer_GetTime(){var c=getLastSoundFileName(),d=showActObj.id.substr(1);d=sounds[d+".ASX"].flist[0];if(c.length>0&&c!=d)return{s:c,t:NaN};d=0;if(useAudioTag)d=getAPlayer().currentTime*1E3;if(useFlash)d=getFPlayer().Time()*1E3;if(d==0&&_lastFlashTime>=0)d=_lastFlashTime;else _lastFlashTime=d;return{s:c,t:d}}function OnFlashLoad(){_fire==true&&setTimeout('SoundPlayer_Open("'+_name+'",'+_asyn+")",20);_fire_=false;_knowpalyer=true}
function SoundComplete(c){if(InWebpage())c?OnErrorPlaySound():OnEndPlaySound();else{if(SoundPlayerObj.PlayCheckerTimer){clearInterval(SoundPlayerObj.PlayCheckerTimer);SoundPlayerObj.PlayCheckerTimer=0}if(_lastAsyncronFile)_lastAsyncronFile=false;else{if(useAudioTag)if(c){S_SetFrameState("D");OnErrorPlaySound()}else{if(typeof animObject!="undefined")if(animObject)if(fusionmode==true&&animObject.timeout==DELAY_INFINITE*100){if(animObject.showbubble==false)animObject.timeout=0}else animObject.timeout=
0;OnEndPlaySound()}if(useFlash){s=getFPlayer().SoundState();if(s=="notfoundfile"){S_SetFrameState("D");OnErrorPlaySound()}else if(s=="complete"){if(typeof animObject!="undefined")if(animObject)if(fusionmode==true&&animObject.timeout==DELAY_INFINITE*100){if(animObject.showbubble==false)animObject.timeout=0}else animObject.timeout=0;OnEndPlaySound()}}}}}function AudioEnded(){var c=getAPlayer();CLog(c.src+" done...");c.src.indexOf("empty.m4a")>=0||SoundComplete(false)}
function AudioError(){var c=getAPlayer();if(c!=null)if(c.src!="")if(!(c.src.indexOf("empty.m4a")>=0)){CLog(c.src+" error...");SoundComplete(true)}}var audio_loading=false,audio_seeking=false,audio_counter=0;function AudioReload(){audio_loading=true;getAPlayer().pause();getAPlayer().src=_lastAudioFile;CLog(fname+" - "+_lastAudioFile+" replay")}
function AudioLoaded(){CLog("AudioLoaded");if(audio_loading==true){CLog("AudioLoaded true");audio_loading=false;audio_counter=0;getAPlayer().pause();audio_seeking=true;SoundAPlayer_SetTime()}}function S_GetFrameState(){try{return upk.Timeline.GetFrameState()}catch(c){return""}}function S_SetFrameState(c){try{upk.Timeline.SetFrameState(c)}catch(d){}}
function TimelineDescriptor(c,d,e,g,j,n){if(this.valid=c){this.frameid=d;this.timelineindex=e;this.narration=g;this.animation=j;this.resttime=n;this.type="narration";if(n>=g)this.type="animationstart";if(n>=g+j/2)this.type="nextframe"}}var timelineDescriptor=new TimelineDescriptor(false,"",0,0,0,0),SoundPlayerObj=new SoundPlayerClass,clog_enabled=false;function CLog(c,d){if(clog_enabled||d==true)console!==undefined&&console.log(c)}upk=upk||{};
$.extend(true,upk,{player:{navBar:function(c,d,e){function g(A){var Q="";var q=Q=0,G=0;Q=Math.floor(A/1E3%60);q=Math.floor(A/6E4%60);if((G=Math.floor(A/36E5))||p>=36E5)q=(q<10?"0":"")+q;return Q=(G||p>=36E5?G+":":"")+q+":"+((Q<10?"0":"")+Q)}var j=this;j.bind=function(A,Q){v.bind(A,Q)};j.show=function(A){E=28;m.scaleToWindow();if(!S){S=true;if(A){v.show();A=$(".NavbarOuter").height();$(".NavbarOuter").css({"-webkit-transform":"translate3d(0,"+A+"px,0)",transform:"translate3d(0,"+A+"px,0)","-ms-transform":"translate3d(0,"+
A+"px,0)"});$(".NavbarOuter").unbind("webkitTransitionEnd").unbind("transitionend");$(".NavbarOuter, .timeslider").addClass("navbaranim");$(".NavbarOuter").css({"-webkit-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)","-ms-transform":"translate3d(0,0,0)"});$(".timeslider").css({"-webkit-transform":"translate3d(0,0,0)"});$(".NavbarOuter").bind("webkitTransitionEnd",function(){$(".NavbarOuter").unbind("webkitTransitionEnd");$(".NavbarOuter, .timeslider").removeClass("navbaranim")}).bind("transitionend",
function(){$(".NavbarOuter").unbind("transitionend");$(".NavbarOuter, .timeslider").removeClass("navbaranim")})}else{$(".NavbarOuter").css({"-webkit-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)","-ms-transform":"translate3d(0,0,0)"});$(".timeslider").css({"-webkit-transform":"translate3d(0,0,0)"});v.show()}m.scaleToWindow()}};j.hide=function(A){if(S){S=false;if(A){$(".NavbarOuter").unbind("webkitTransitionEnd").unbind("transitionend");$(".NavbarOuter, .timeslider").addClass("navbaranim");
var Q=$(".NavbarOuter").height();$(".NavbarOuter").css({"-webkit-transform":"translate3d(0,"+Q+"px,0)",transform:"translate3d(0,"+Q+"px,0)","-ms-transform":"translate3d(0,"+Q+"px,0)"});$(".timeslider").css({"-webkit-transform":"translate3d(0,"+Q+"px,0)"});$(".NavbarOuter").bind("webkitTransitionEnd",function(){$(".NavbarOuter").unbind("webkitTransitionEnd");$(".NavbarOuter").removeClass("navbaranim");v.hide()}).bind("transitionend",function(){$(".NavbarOuter").unbind("transitionend");$(".NavbarOuter, .timeslider").removeClass("navbaranim");
v.hide()})}else{$(".NavbarOuter").css({"-webkit-transform":"translate3d(0,"+Q+"px,0)",transform:"translate3d(0,"+Q+"px,0)","-ms-transform":"translate3d(0,"+Q+"px,0)"});$(".timeslider").css({"-webkit-transform":"translate3d(0,"+Q+"px,0)"});v.hide()}}};j.setOptions=function(A){$.extend(m.options,A)};j.setEndTime=function(A){if(!Z){p=A;v.find(".endtime").text(g(p));v.find(".timeslider").slider("option","max",p);j.setCurrentTime(o);A=0;A=p>=36E5?m.options.ios?260:120:m.options.ios?180:100;v.find(".timerdisplay").width(A)}};
j.setCurrentTime=function(A){if(!Z){o=A;v.find(".currenttime").text(g(o));v.find(".timeslider").slider("value",o)}};j.setVolume=function(A){B=A;v.find(".volumeslider").slider("value",B)};j.setKeepHidden=function(A){T=A;if(E>0)E=28;if(T){ca=false;j.hide()}else E>0&&j.show()};j.setKeepVisible=function(A){if(ca=A){T=false;j.show()}};j.toggleMute=function(A){(D=A)&&v.find(".volumeslider").slider("value",0)};j.initMenuItems=function(A,Q,q,G,I,aa,ka){var ha=(A||Q||q||G)&&(I||aa||ka);if(A||Q||q||G||I||aa||
ka){A==false&&v.find(".m_share").css("display","none");Q==false&&v.find(".m_askexpert").css("display","none");q==false&&v.find(".m_providefeedback").css("display","none");G==false&&v.find(".m_printit").css("display","none");I==false&&v.find(".m_preferences").css("display","none");aa==false&&v.find(".m_help").css("display","none");ha==false&&v.find(".m_separator").css("display","none");ka==false&&v.find(".m_logout").css("display","none");A=v.find(".menucontainer");A.css("top","-"+(A.height()+3)+"px")}else v.find(".menubutton").remove()};
j.hideMenu=function(){v.find(".menucontainer").hide()};var n=true;j.togglePause=function(A){(n=A)?v.find(".pauseresumebutton").removeClass("pause_butt"+F).addClass("play_butt"+F):v.find(".pauseresumebutton").removeClass("play_butt"+F).addClass("pause_butt"+F)};j.getHeight=function(){return $(".NavbarOuter").height()};var m={};m.id=c;m.parentElement=d;m.options={ios:false};$.extend(m.options,e);m.create=function(){var A=$("<div>",{"class":"NavbarWrapper"+(m.options.ios?"":" small"),html:[$("<div>",
{"class":"NavbarOuter",html:$("<div>",{id:m.id,"class":"NavbarMain",html:[$("<div>",{"class":"prevbutton previous_butt"+F,title:R_fusion_back,html:"",click:function(){v.trigger("onprev")}}),$("<div>",{"class":"pauseresumebutton pause_butt"+F,title:R_fusion_play_pause,html:"",click:function(){v.trigger("onpausetoggle")}}),$("<div>",{"class":"nextbutton next_butt"+F,title:R_fusion_forward,html:"",click:function(){v.trigger("onnext")}}),$("<div>",{"class":"refreshbutton refresh_butt"+F,title:R_fusion_restart,
html:"",click:function(){v.trigger("onrefresh")}}),$("<div>",{"class":"slidercontainer slider_backgrnd"+F,html:$("<div>",{"class":"sliderleft slider_leftbar"+F})}),$("<div>",{"class":"menubutton more_butt"+F,title:R_fusion_more,html:$("<div>",{"class":"menucontainer",title:"",html:[$("<ul>",{html:[$("<li>",{"class":"m_share",click:function(){v.trigger({type:"onmenu",item:"share"})},html:[$("<div>",{"class":"menuimage share_link"+K}),$("<span>",{"class":"menutext",text:R_menu_share})]}),$("<li>",{"class":"m_askexpert",
click:function(){v.trigger({type:"onmenu",item:"askexpert"})},html:[$("<div>",{"class":"menuimage askexpert_button"+K}),$("<span>",{"class":"menutext",text:R_interface_askexpert})]}),$("<li>",{"class":"m_providefeedback",click:function(){v.trigger({type:"onmenu",item:"providefeedback"})},html:[$("<div>",{"class":"menuimage feedback_qualifier"+K}),$("<span>",{"class":"menutext",text:R_interface_providefeedback})]}),$("<li>",{"class":"m_printit",click:function(){v.trigger({type:"onmenu",item:"printit"})},
html:[$("<div>",{"class":"menuimage PrintAreaIconPurple"+K}),$("<span>",{"class":"menutext",text:R_interface_printit})]}),$("<li>",{"class":"m_separator",html:$("<hr>",{width:"90%"})}),$("<li>",{"class":"m_preferences",click:function(){v.trigger({type:"onmenu",item:"preferences"})},html:[$("<div>",{"class":"menuimage prefs_button2b"+K}),$("<span>",{"class":"menutext",text:R_menu_preferences})]}),$("<li>",{"class":"m_help",click:function(){v.trigger({type:"onmenu",item:"help"})},html:[$("<div>",{"class":"menuimage helptopics"+
K}),$("<span>",{"class":"menutext",text:R_menu_help})]}),$("<li>",{"class":"m_logout",click:function(){v.trigger({type:"onmenu",item:"logout"})},html:[$("<div>",{"class":"menuimage logout_button"+K}),$("<span>",{"class":"menutext",text:R_toctooltip_kpathlogout})]})]}),$("<div>",{"class":"menupointer dialog_pointer"})]}),click:function(){var Q=$(this).find(".menucontainer").toggle();v.trigger({type:"onmenu",item:Q.css("display")=="none"?"closed":"opened"});j.setKeepVisible(Q.css("display")!="none");
return false}}),$("<div>",{"class":"timerdisplay slider_backgrnd"+F,html:[$("<span>",{"class":"currenttime",text:g(o)}),$("<span>",{text:" / "}),$("<span>",{"class":"endtime",text:g(p)})]}),$("<div>",{html:"","class":"timerleft slider_leftbar"+F}),$("<div>",{"class":"volumebutton volume_butt"+F,html:$("<div>",{"class":"volumeslidercontainer",html:$("<div>",{"class":"volumeslider"})}),click:function(){D=!D;v.trigger({type:"onvolumechange",volume:B,muted:D});v.find(".volumeslider").slider("value",D?
0:B)}})]})}),$("<div>",{html:"","class":"timeslider"})]});A.appendTo(m.parentElement);A.find(".timeslider").slider({orientation:"horizontal",range:"min",change:function(Q,q){v.find(".currenttime").text(g(q.value))},start:function(){Z=true},stop:function(Q,q){Z=false;v.trigger({type:"onsliderchange",time:q.value})},slide:function(Q,q){v.find(".currenttime").text(g(q.value));v.trigger({type:"onsliderslide",time:q.value})}});if(m.options.ios){A.find(".ui-slider .ui-slider-handle").addClass("sliderpointer");
A.find(".volumebutton").remove()}else{A.find(".prevbutton, .pauseresumebutton, .nextbutton, .refreshbutton, .menubutton, .volumebutton").bind({mouseenter:function(){$(this).css("background-color","#cacac9")},mouseleave:function(){$(this).css("background-color","")}});A.find(".m_share, .m_askexpert, .m_providefeedback, .m_printit, .m_preferences, .m_help, .m_logout").bind({mouseenter:function(){$(this).css("background-color","#97c4ff")},mouseleave:function(){$(this).css("background-color","")}});A.find(".volumeslider").slider({orientation:"horizontal",
range:"min",max:100,value:100,change:function(Q,q){if(!D)B=q.value;(D=q.value==0)?v.find(".volumebutton").removeClass("volumebutton"+F).addClass("volumemuted_butt"+F):v.find(".volumebutton").addClass("volumebutton"+F).removeClass("volumemuted_butt"+F);v.trigger({type:"onvolumechange",volume:B,muted:D})},slide:function(Q,q){D=q.value==0;B=q.value;D?v.find(".volumebutton").removeClass("volumebutton"+F).addClass("volumemuted_butt"+F):v.find(".volumebutton").addClass("volumebutton"+F).removeClass("volumemuted_butt"+
F);v.trigger({type:"onvolumechange",volume:B,muted:D})}});A.find(".volumeslider.ui-slider .ui-slider-handle").addClass("volumesliderbutton");A.find(".timeslider").appendTo(".NavbarOuter")}A.find(".timeslider .ui-slider-handle").addClass("slider_pointer"+F);A.find(".timeslider .ui-slider-range-min").addClass("slider_left"+F);return A};m.scaleToWindow=function(){var A=0;if(v.find(".volumeslidercontainer").is(":visible"))A=22;if(v.find(".menucontainer").is(":visible"))A+=v.find(".menucontainer").height()+
3;if(m.options.ios){var Q=v.find(".menucontainer");Q.css("top","-"+(Q.height()+3)+"px");Q=window.orientation==0||window.orientation==180?window.innerWidth/45*87:window.innerWidth/45*87;var q=window.innerWidth/Q;v.find(".NavbarOuter").css({height:(87+A)*q,top:window.pageYOffset+window.innerHeight-(87+A)*q});v.find(".NavbarMain").css({transform:"scale("+q+")","-ms-transform":"scale("+q+")","-webkit-transform":"scale("+q+")","-o-transform":"scale("+q+")","-moz-transform":"scale("+q+")"});v.find(".NavbarMain").css({left:window.pageXOffset-
(Q-window.innerWidth)/2,top:0-(87-87*q)/2+A*q,width:Q});var G=0,I=0;v.find(".NavbarMain > div").not(".slidercontainer").each(function(){G+=$(this).width()});v.find(".slidercontainer").prevAll().each(function(){I+=$(this).width()});v.find(".slidercontainer").css({right:G-I,width:"auto"});v.find(".timeslider").css({left:(I+40)*q+window.pageXOffset,top:window.pageYOffset+window.innerHeight-61*q,height:35*q,width:(Q-G-80)*q});v.find(".ui-slider .ui-slider-handle").get(0).style.setProperty("width",45*
q+"px","important");v.find(".ui-slider .ui-slider-handle").get(0).style.setProperty("height",45*q+"px","important");v.find(".ui-slider .ui-slider-handle").css("background-size",45*q+"px "+45*q+"px");v.find(".ui-slider-horizontal .ui-slider-handle").css({"margin-left":-22*q,top:-5*q})}else{I=G=0;v.find(".NavbarMain > div").not(".slidercontainer").each(function(){G+=$(this).width()});v.find(".slidercontainer").prevAll().each(function(){I+=$(this).width()});v.find(".NavbarOuter").css({top:$(document.body).scrollTop()+
document.body.clientHeight-27-A,left:$(document.body).scrollLeft(),width:document.body.clientWidth>=G+100?document.body.clientWidth:G+100,height:27+A});v.find(".NavbarMain").css({width:"100%"});v.find(".slidercontainer").css({left:I,width:document.body.clientWidth>=G+100?document.body.clientWidth-G:100});v.find(".timeslider").css({top:8+A,left:I+25,width:document.body.clientWidth>=G+100?document.body.clientWidth-G-50:50})}};var o=0,p=9999999,B=100,D=false,Z=false,E=0,H=false,T=false,ca=false,S=false,
F=m.options.ios?"":"_sm",K=m.options.ios?"_ios":"",v=m.create();j.setEndTime(p);m.scaleToWindow();setInterval(function(){m.scaleToWindow()},100);setInterval(function(){if(!T){if(E<=0&&!ca)j.hide(true);else!Z&&!ca&&E--;H?v.find(".volumeslidercontainer").show():v.find(".volumeslidercontainer").hide()}},250);v.find(".ui-slider-handle").removeAttr("href");var R=false;v.bind("touchmove",function(A){if(v.find(".menucontainer").is(":visible"))R=true;if(!R){A.stopPropagation();A.preventDefault()}});v.bind("click",
function(A){v.find(".menucontainer").is(":visible")&&$(document).trigger("click",A)});v.find(".volumebutton").bind({mouseenter:function(){H=true;v.find(".volumeslidercontainer").show()},mouseover:function(){H=true;v.find(".volumeslidercontainer").show()}});var W=function(){H=false};v.find(".volumebutton").bind("mouseout",W);v.find(".volumeslidercontainer").bind({mouseenter:function(){H=true;v.find(".volumeslidercontainer").show()},mouseover:function(){H=true;v.find(".volumeslidercontainer").show()},
click:function(){return false}});v.find(".volumeslider").bind({mousedown:function(){v.find(".volumebutton").unbind("mouseout",W);$(document).one("mouseup",function(){H=false;v.find(".volumebutton").bind("mouseout",W)})}});var P,J;$(document).bind({touchmove:function(){Z||j.hide()},touchend:function(){R=false;T||E<=0||j.show()},click:function(){v.find(".menucontainer").hide();T||j.show()}});if(!m.options.ios){$(document).bind({mousemove:function(A){if(!(P==A.clientX&&J==A.clientY||T)){j.show();P=A.clientX;
J=A.clientY}}});v.bind({mouseenter:function(){j.setKeepVisible(true)},mouseleave:function(){j.setKeepVisible(false)}})}if(m.options.ios){var ba=false,ia=false,da=function(A,Q){if(!(A.originalEvent.touches.length>1)){A.preventDefault();var q=A.originalEvent.changedTouches[0],G=document.createEvent("MouseEvents");G.initMouseEvent(Q,true,true,window,1,q.screenX,q.screenY,q.clientX,q.clientY,false,false,false,false,0,null);A.target.dispatchEvent(G)}};v.find(".ui-slider, .ui-slider *").bind("touchstart",
function(A){if(!ba){ba=true;ia=false;da(A,"mouseover");da(A,"mousemove");da(A,"mousedown")}}).bind("touchmove",function(A){if(ba){ia=true;da(A,"mousemove")}}).bind("touchend",function(A){if(ba){da(A,"mouseup");da(A,"mouseout");ia||da(A,"click");ba=false}})}return j}}});upk.player.navBar.prototype={};upk=upk||{};
$.extend(true,upk,{contextHelper:function(){var c=null,d,e;this.SetContext=function(j,n){if(c)c.SetContext(j,n);else{e=d;d={view:j,subview:n};ias.SetContext(d)}};this.SetNamespace=function(j){c||ias.SetNamespace(j)};this.AddDiscoveryCddUrl=function(j){c||ias.AddDiscoveryCddUrl(j)};this.SetPrevContext=function(){if(c)c.SetPrevContext();else{d=e;ias.SetContext(d)}};try{if(self!=top&&typeof parent.ctxHelper==="object")c=parent.ctxHelper}catch(g){}return this}});window.ctxHelper=new upk.contextHelper;
window.ias=function(c){function d(F){var K={};if(F!=o)for(var v in F){var R=F[v];if(R!=o)K[v]=R}return K}function e(F){D=d(F);Z.push(D);B=o}function g(F,K){if(K!=o)E[F]=K;else delete E[F];H=o}function j(F,K){return encodeURIComponent(F)+"="+encodeURIComponent(K)}function n(F,K){return encodeURIComponent(F)+(K==""?"":"="+encodeURIComponent(K))}function m(F,K){var v=K?n:j,R=[],W;for(W in F){var P=F[W];if(P&&P.push&&P.sort)for(var J=0;J<P.length;++J)R.push(v(W,P[J]));else P!=o&&R.push(v(W,P))}return R.join(";")}
var o=null,p=o,B=o,D={},Z=[D],E={},H=o,T=[],ca=[],S=window.ias||{};S.SetNamespace=function(F){p=F};S.SetContext=function(F){D=d(F);Z[Z.length-1]=D;B=o};S.SetContextPart=function(F,K){if(K!=o)D[F]=K;else delete D[F];B=o};S.ResetContext=function(F){Z=[];e(F)};S.SetTag=g;S.SetTags=function(F){for(var K in F)g(K,F[K])};S.ResetTags=function(F){E=d(F);H=o};S.PushContext=e;S.PopContext=function(){Z.pop();Z.length||Z.push({});D=Z[Z.length-1];B=o};S.AddDiscoveryCddUrl=function(F){T.push(F)};S.AddApplicableCddUrl=
function(F){ca.push(F)};c.UPK_GetNamespace=function(){return p};c.UPK_GetContext=function(){if(B==o)B=m(D);return B};c.UPK_GetTags=function(){if(H==o)H=m(E,true);return H};c.UPK_GetDiscoveryCddUrls=function(){return T.length?T:o};c.UPK_GetApplicableCddUrls=function(){return ca.length?ca:o};return S}(window);ias.SetTag("upk-trait-nohelp","");
