/*
Copyright © 1998, 2014, Oracle and/or its affiliates.  All rights reserved.
*/
var _simulate_120_dpi=false;function IsTouchDevice(){return upk.browserInfo.isTouchDevice()}var upk=upk||{};
(function(a){var b="",c,e=false,d,f=false,g=false;a.getAgentInfo=function(){return typeof document.documentMode!="undefined"?navigator.userAgent+" - "+document.documentMode:navigator.userAgent};a.isSupportedBrowser=function(){var j=false;if(b=="MSIE"&&(c>=8||e&&d>=4))j=true;if(b=="Firefox"&&(c==24||c>=27))j=true;if(b=="Safari"&&c>=6)j=true;if(b=="Chrome"&&c>=32)j=true;if(a.isiOS())j=true;return j};a.isHardStop=function(){return b=="MSIE"&&c<=6};a.isMacOs=function(){return f};a.isFF3=function(){return g};
a.isFF=function(){return b=="Firefox"};a.isFF4=function(){return b=="Firefox"&&c==4};a.checkFFVersion=function(j){return b=="Firefox"&&c==j};a.isSafari=function(){return b=="Safari"||b=="Chrome"};a.isChrome=function(){return b=="Chrome"};a.isExplorer=function(){return b=="MSIE"};a.isIEVersion=function(j){return b=="MSIE"&&c==j};a.isIEQuirks=function(){if(a.isExplorer()==false)return false;return document.compatMode!=="CSS1Compat"};a.isIE8=function(){if(b!="MSIE")return false;return c==8&&e&&d==4};
a.isIE9=function(){if(b!="MSIE")return false;if(c==9&&e&&d==5)return true;if(c==7&&e&&d==5)return true;return e&&d==6&&(c!=10||document.documentMode!=10)};a.isIE10=function(){if(b!="MSIE")return false;return c==10&&e&&d==6&&document.documentMode==10};a.isIE10Compatibility=function(){if(b!="MSIE")return false;return e&&d==6&&(c!=10||document.documentMode!=10)};a.isIE10orHigher=function(){if(b!="MSIE")return false;return c>=10&&e&&d>=6&&document.documentMode>=10};a.isIE11=function(){if(b!="MSIE")return false;
return c==11&&e&&d==7&&document.documentMode==11};a.isIE11Compatibility=function(){if(b!="MSIE")return false;return e&&d==7&&(c!=11||document.documentMode!=11)};a.isActiveXEnabled=function(){var j=null,m="";try{new ActiveXObject("")}catch(o){m=o.name}try{j=!!new ActiveXObject("htmlfile")}catch(q){j=false}return m!="ReferenceError"&&j==false?false:true};a.isIE10Modern=function(){if(a.isIE10()==false)return false;return!a.isActiveXEnabled()};a.isiOS=function(){var j=navigator.platform;if(j==="iPad"||
j==="iPad Simulator"||j==="iPhone"||j==="iPod")return true;if(a.isChrome()&&a.isTouchDevice())return true;return false};a.isiOS5=function(){return navigator.userAgent.indexOf("CPU OS 5_")>=0};a.isiOS6=function(){return navigator.userAgent.indexOf("CPU OS 6_")>=0};a.isiOS7=function(){return navigator.userAgent.indexOf("CPU OS 7_")>=0};a.isTouchDevice=function(){return"ontouchstart"in window?window:null};a.isSoundSupported=function(){if(a.isiOS())return true;if(window.location.href.substr(0,7).toLowerCase()==
"file://")return false;if(swfobject.getFlashPlayerVersion().major>0)return true;return false};var h=navigator.userAgent,i=-1;if(h.indexOf("OPR")>=0){b="Opera";i=h.indexOf("OPR")+4}else if(h.indexOf("Chrome")>=0){b="Chrome";i=h.indexOf("Chrome")+7}else if(h.indexOf("Opera")>=0){b="Opera";i=h.indexOf("Opera")+6}else if(h.indexOf("Firefox")>=0){b="Firefox";i=h.indexOf("Firefox")+8}else if(h.indexOf("Safari")>=0){b="Safari";i=h.indexOf("Version")+8}else if(h.indexOf("MSIE")>=0){b="MSIE";i=h.indexOf("MSIE")+
5;var k=h.indexOf("Trident/");if(k>=0){e=true;d=parseInt(h.substr(k+8))}}else if(h.indexOf(" rv:")>=0){b="MSIE";i=h.indexOf(" rv:")+3;k=h.indexOf("Trident/");if(k>=0){e=true;d=parseInt(h.substr(k+8))}}else{b="";c=0}if(b!=""){c=parseInt(h.substr(i));if(isNaN(c)){i++;c=parseInt(h.substr(i))}parseInt(h.substr(i+2,1))}if(b=="Safari"&&isNaN(c))c=5;f=h.indexOf("Macintosh")>=0;g=b=="Firefox"&&h.indexOf("Firefox/3")>0})(upk.browserInfo={});function getDIV(a){return document.getElementById(a)}
function getDIVstyle(a){try{return document.getElementById(a).style}catch(b){return null}}function shiftTo(a,b,c){a=getDIVstyle(a);a.left=b+"px";a.top=c+"px"}function getUniWidth(a){return a.offsetWidth}function getUniHeight(a){return a.offsetHeight}function getClientWidth(a){return a.offsetWidth}function getClientHeight(a){return a.offsetHeight}function getObjHeight(a){return getDIV(a).offsetHeight}function getObjWidth(a){return getDIV(a).offsetWidth}
function getObjLeft(a){try{var b=getDIVstyle(a);return b.pixelLeft?b.pixelLeft:b.left!=""?parseInt(b.left):document.getElementById(a).offsetLeft}catch(c){return parseInt(a.offsetLeft)}}function getObjTop(a){try{var b=getDIVstyle(a);return b.pixelTop?b.pixelTop:b.top!=""?parseInt(b.top):document.getElementById(a).offsetTop}catch(c){return parseInt(a.offsetTop)}}function getInsideWindowWidth(){return window.innerWidth?window.innerWidth:document.body.clientWidth}
function getInsideWindowHeight(){return window.innerHeight?window.innerHeight:document.body.clientHeight}function getScrollLeft(){return window.pageXOffset||window.pageXOffset==0?window.pageXOffset:document.body.scrollLeft}function getScrollTop(){return window.pageYOffset||window.pageYOffset==0?window.pageYOffset:document.body.scrollTop}
function show(a,b){getDIVstyle(a).visibility="visible";if(b&&upk.browserInfo.isiOS())try{playMode=="S"&&showActObj.type=="Input"&&$("#"+a+" input").attr("readonly",true)}catch(c){}}function hide(a){getDIVstyle(a).visibility="hidden"}var __DPIwidth=0;
function getDpiInfo(){var a=document.getElementById("DPIInfoDiv");if(a!=null){__DPIwidth=a.clientWidth;if(__DPIwidth==0)__DPIwidth=96;__DPIwidth!=0&&document.getElementsByTagName("body")[0].removeChild(a)}return _simulate_120_dpi==true?120:__DPIwidth}function initDpiInfo(){document.write('<div id="DPIInfoDiv" style="visibility:hidden; width: 72pt; height: 1pt;">DPIINFODIV</div>')}function checkIEDPI(){return true}function Get_Element(a){return document.getElementById(a)}
function touch(a){if(a.originalEvent.touches&&a.originalEvent.touches.length)return a.originalEvent.touches[0];else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)return a.originalEvent.changedTouches[0]}function isNavBar(){return typeof navBar!=="undefined"}
var Escape=function(){function a(d,f){for(var g="",h=0;h<d.length;h++){var i=d.substr(h,1),k;if(f==0)k=i>="0"&&i<="9"||i>="a"&&i<="z"||i>="A"&&i<="Z";else{a:{k=e.length;for(var j=0;j<k;j++)if(i==e[j]){k=true;break a}k=i==c?true:false}k=!k}if(k)g+=i;else{i=d.charCodeAt(h);i="0000"+i.toString(16).toUpperCase();g+=(f==0?"$":c)+i.substr(i.length-4)}}return g}function b(d,f){for(var g="",h=false,i=0;i<d.length;i++){var k;if(h){k=d.substr(i,4);g+=String.fromCharCode(parseInt("0x"+k));i+=3;h=false}else{k=
d.substr(i,1);if(k==(f==0?"$":c))h=true;else g+=k}}return g}var c="/",e=["<",">",'"',"'","%",";","(",")","&","+"];return{SafeUriEscape:function(d){return a(d,1)},SafeUriUnEscape:function(d){return b(d,1)},MyEscape:function(d){return a(d,0)},MyUnEscape:function(d){return b(d,0)}}}();function UrlParser(){this.params=[];this.safemode=false}
UrlParser.prototype.Clone=function(){var a=new UrlParser;a.params=[];a.safemode=this.safemode;for(var b in this.params)if(this.params[b]!=null)a.params[b]=this.params[b];return a};
UrlParser.prototype.Parse=function(){var a,b;a=document.location.hash.substring(1);a=a.split("&");if(a.length==0||a[0]==""){a=document.location.search.substring(1);a=a.split("&")}if(a.length>0)if(a[0].toLowerCase().substr(0,3)=="su="){this.safemode=true;a=a[0].substr(3);a=Escape.SafeUriUnEscape(a);a=a.split("&")}for(var c=0;c<a.length;c++){b=a[c];if(b.length!=0){var e=b.split("=");if(e.length==2)this.params[e[0].toLowerCase()]=e[1];else if(e.length<2)this.params[e[0].toLowerCase()]="";else this.params[e[0].toLowerCase()]=
b.substr(e[0].length+1)}}};UrlParser.prototype.GetSafeMode=function(){return this.safemode};UrlParser.prototype.SetSafeMode=function(a){this.safemode=a};UrlParser.prototype.GetParameter=function(a){return this.params[a.toLowerCase()]};UrlParser.prototype.AddParameter=function(a,b){this.params[a.toLowerCase()]=b};UrlParser.prototype.RemoveParameter=function(a){this.params[a.toLowerCase()]=null};UrlParser.prototype.ClearParameterList=function(){this.params=null;this.params=[]};
UrlParser.prototype.BuildParameterList=function(a){a="";var b=true,c;for(c in this.params){var e=this.params[c];if(e!=null){if(b==false)a+="&";b=false;a+=e.length==0?c:c+"="+this.params[c]}}if(this.safemode)a="su="+Escape.MyEscape(a);return a};
UrlParser.prototype.GetCorrectUrl=function(a,b){if(!this.safemode)return a;var c,e=a.indexOf("#");if(e==-1)e=a.indexOf("?");if(e>=0){var d=a.substring(e+1);c=d.split("&");if(c[0].toLowerCase().substr(0,3)=="su=")return a;return a.substring(0,e+1)+"su="+Escape.SafeUriEscape(d)}else return a+(b?"":"?su=")};function UnescapeQuotes(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}
function Cookie(a,b,c,e,d,f){this.$document=a;this.$name=b;if(c=="today"){a=new Date;a.setHours(23);a.setMinutes(59);a.setSeconds(59);this.$exp=a}else this.$exp=c?new Date((new Date).getTime()+c*864E5):null;this.$path=e?e:null;this.$domain=d?d:null;this.$secure=f?true:false}
Cookie.prototype.Store=function(){if(PlayerConfig.EnableCookies){var a="",b;for(b in this)if(!(b.charAt(0)=="$"||typeof this[b]=="function")){if(a!="")a+="&";a+=b+":"+escape(this[b])}a=this.$name+"="+a;if(this.$exp)a+="; expires="+this.$exp.toGMTString();if(this.$path)a+="; path="+this.$path;if(this.$domain)a+="; domain="+this.$domain;if(this.$secure)a+="; secure=";this.$document.cookie=a}};
Cookie.prototype.Load=function(){if(!PlayerConfig.EnableCookies)return false;var a=this.$document.cookie;if(a=="")return false;var b=a.indexOf(this.$name+"=");if(b==-1)return false;b+=this.$name.length+1;var c=a.indexOf(";",b);if(c==-1)c=a.length;a=decodeURIComponent(a.substring(b,c)).split("&");for(b=0;b<a.length;b++){c=a[b].split(":");this[c[0]]=unescape(c[1])}return true};
Cookie.prototype.Remove=function(){if(PlayerConfig.EnableCookies){var a=this.$name+"=";if(this.$path)a+="; path="+this.$path;if(this.$domain)a+="; domain="+this.$domain;a+="; expires=Fri, 02-Jan-1970 00:00:00 GMT";this.$document.cookie=a}};var logger_enabled_query=false;function log(a){logger_enabled_query&&window.top.console&&window.top.console.log(a)}var datasourceroot="querydb/",ConvertDbSelector={t:"text",u:"ctxod",e:"ctxex",r:"role",g:"genctx"},q_search_and=" and ",q_search_or=" or ";
function ToHalfWidth(a){for(var b="",c=0;c<a.length;c++){var e="\u30f2\u30a1\u30a3\u30a5\u30a7\u30a9\u30e3\u30e5\u30e7\u30c3\u30fc\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f3".indexOf(a.charAt(c));b+=e!==-1?"\uff66\uff67\uff68\uff69\uff6a\uff6b\uff6c\uff6d\uff6e\uff6f\uff70\uff71\uff72\uff73\uff74\uff75\uff76\uff77\uff78\uff79\uff7a\uff7b\uff7c\uff7d\uff7e\uff7f\uff80\uff81\uff82\uff83\uff84\uff85\uff86\uff87\uff88\uff89\uff8a\uff8b\uff8c\uff8d\uff8e\uff8f\uff90\uff91\uff92\uff93\uff94\uff95\uff96\uff97\uff98\uff99\uff9a\uff9b\uff9c\uff9d".charAt(e):
a.charCodeAt(c)>=65281&&a.charCodeAt(c)<=65375?String.fromCharCode(a.charCodeAt(c)-65248):a.charAt(c)}return b}
var QueryParser=function(){function a(d){var f=[];switch(d[0].Op){case "&":case "|":f=a(d[1]);for(var g=2;g<d.length;g++){f=f.concat(a(d[g]));f.push({a:"o",p:d[0].Op})}return f;case "EM":f[0]={a:"s",d:"e",p:d[0].App+"$"+Escape.MyEscape(d[1])};for(g=2;g<d.length;g++){f.push({a:"s",d:"e",p:d[0].App+"$"+Escape.MyEscape(d[g])});f.push({a:"o",p:"&"})}return f;case "SM":return[{a:"s",d:"g",p:d}];default:console.log("Error: Unknown operator "+d[0].Op)}return null}function b(d,f){for(log("QueryProcessor.SM "+
d+" "+f);;){var g=e[c[c.length-1].st][d];if(g===10)return false;if(g===0)return true;if(g>0){c.push({st:g,se:f});return false}if(g<0){var h,i=c.length,k=c[i-1],j=c[i-2];i=c[i-3];switch(-g){case 1:h={ev:"{a:'s', d:'"+k.se.charAt(0)+"', p:'"+k.se.slice(1)+"'}",pr:k.se.slice(1)};break;case 2:if(k.se==="!")h={ev:"{a:'s', d:'"+j.se.charAt(0)+"', p:'"+j.se.slice(1)+"', m:'"+k.se+"'}"};else{h=j.se.slice(1,parseInt(k.se)+1)+"$002A";h={ev:"{a:'s', d:'"+j.se.charAt(0)+"', p:'"+j.se.slice(1)+"'}, {a:'s', d:'"+
j.se.charAt(0)+"', p:'"+h+"'}, {a:'o', p:'|'}"}}h.pr=j.se.slice(1);break;case 3:h={ev:i.se.ev+", "+k.se.ev+", {a:'o', p:'"+j.se+"'}",pr:i.se.pr+(j.se==="|"?" or ":" ")+k.se.pr};break;case 4:h={ev:j.se.ev,pr:"("+j.se.pr+")"};g=-3}if(g===-1||g===-2){h.pr=decodeURIComponent(h.pr);if(h.pr.search(/\s/)!==-1)h.pr='"'+h.pr+'"'}c.length+=g;c.push({st:e[c[c.length-1].st][6],se:h})}}}var c,e=[0,[2,3,0,0,0,0,4],[-1,-1,-1,-1,5,-1,0],[2,3,0,0,0,0,6],[0,0,0,7,0,10,0],[-2,-2,-2,-2,-2,-2,0],[0,0,8,7,0,0,0],[2,3,
0,0,0,0,9],[-4,-4,-4,-4,-4,-4,0],[-3,-3,-3,-3,-3,-3,0]];return{Parse:function(d,f){log("QueryProcessor.Parse");if(d==="XDT"){var g=a(f);return JSON.stringify(g)}q_search_and=" "+R_search_AND.toLowerCase()+" ";q_search_or=" "+R_search_OR.toLowerCase()+" ";var h;if("URI"===d){g=/\(|\)|\+|-|[u,e,k,r,g]|!|\d|'[^']+'/g;h=["(",")","+","-","u","e","t","r","g","!","0","1","2","3","4","5","6","7","8","9"]}else{g=RegExp("\\(|\\)|"+q_search_and+"|"+q_search_or+'|"[^"]+"|[^ \\(\\)]+(?=\\(|\\)|\\s|$)',"gi");h=
["(",")",q_search_and,q_search_or]}var i=[1,2,3,3,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4],k=[0,0,"&","|",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];if(d!=="URI"){f=ToHalfWidth(f);f=f.toLowerCase()}var j=null,m=null;c=[];c.push({st:1,se:0});for(var o,q,r=0,u="t";(o=g.exec(f))!=null;){o=o[0];var t=0;for(q in h)if(o===h[q]){t=i[q];if(k[q])o=k[q];break}if(t===5)u=o;else{if(t===3)r=0;if((t===0||t===1)&&r){if(b(3,"&"))return;r=0}if(t===0){if(o.charAt(0)==='"'||o.charAt(0)==="'")o=o.slice(1,o.length-1);if("URI"!==d){if(o.length>
1){r=o[o.length-1];if(r==="%"||r==="*")o=o.slice(0,-1)}o=Escape.MyEscape(o.toLowerCase())}o=u+o;r=1}if(b(t,o)){log("QueryProcessor.Parse return");return}}}if(!b(5,"$")){j=c[1].se.ev;m=c[1].se.pr}log("QueryProcessor.Parse "+j+" "+m);return j}}}(),QueryProcessor={rr:null,Start:function(a,b){log("QueryProcessor.Start");this.rr=b;if(a.slice(0,1)==="["&&a.slice(-1)==="]")this.qa=eval(a);else eval("this.qa = ["+a+"]");this.qp=0;this.Eval()},Eval:function(){var a=this.qa[this.qp];if(a.a==="s")if(a.d==="g")SearchSM(a.p,
function(c){QueryProcessor.ReportResult(c)});else{var b=a.d==="t"?false:true;if(a.m==="!")b=!b;SearchDBs[a.d].Search(a.p,b)}else if(a.a==="o"){a.p==="&"?this.qa[this.qp-2].And(this.qa[this.qp-1]):this.qa[this.qp-2].Or(this.qa[this.qp-1]);this.qp-=2;this.qa.splice(this.qp+1,2);this.Next()}},Next:function(){if(this.qa.length===1)this.rr(this.qa[0].rs);else{this.qp++;this.Eval()}},ReportResult:function(a){log("QueryProcessor.ReportResult r = "+a);log("QueryProcessor.ReportResult this.qa = "+this.qa+
" this.qp = "+this.qp+" "+this.qa[this.qp]);this.qa[this.qp]=a;this.Next()}};function ReadBase64_6(a){if(a===43)return 62;if(a===45)return 63;if(a<58)return a-48;return a<91?a-55:a-61}function ReadBase64_32(a){var b,c;c=0;for(b=32;b&32;){b=ReadBase64_6(a.s.charCodeAt(a.p));c<<=5;c|=b&31;a.p++}return c}function ReadBase64_ITP(a,b){for(var c=[],e,d,f=0;a.p<a.s.length;){d=ReadBase64_32(a);for(e=1===d?ReadBase64_32(a):1;e;){f+=d;c.push(new b(f));e--}}return c}
function SearchDB(a){log("SearchDB dbid = "+a);this.db_id=a;this.ResetIndex();this.request_count=this.request_total=0}SearchDB.prototype.ResetIndex=function(){this.index=[];this.index.push({key:null,node:"1"})};
SearchDB.prototype.k=function(a){log("SearchDB.k() args.length = "+a.length);for(var b="",c=0;c<a.length;c++){var e={s:a[c],p:0},d,f="";d=ReadBase64_32(e);var g;g=c===a.length-1?this.index[this.index_insert_position]:{};g.node=d>0?e.s.slice(e.p,e.p+d):0;e.p+=d;d=ReadBase64_32(e);f+=b.slice(0,d);d=ReadBase64_32(e);f+=e.s.slice(e.p,e.p+d);e.p+=d;if(f.length>0)g.key=f;for(b=f;e.p<e.s.length;){g.values=[];d=ReadBase64_32(e);g.values.push(e.s.slice(e.p,e.p+d));e.p+=d}if(c<a.length-1){this.index.splice(this.index_insert_position,
0,g);this.index_insert_position++}}this.d()};SearchDB.prototype.LoadScript=function(a){CDB=this;LoadXMLDocArray(datasourceroot+ConvertDbSelector[this.db_id]+"/"+a+".xml",function(b){return function(c){b.LoadScript_Callback(c)}}(SearchDBs[this.db_id]),null,"N",false);this.request_total++;this.request_count++};SearchDB.prototype.LoadScript_Callback=function(a){CDB=this;CDB.k(a)};
SearchDB.prototype.Search=function(a,b,c){log("SearchDB.Search() = "+a);this.Search_CallBack=c?c:QueryProcessor.ReportResult;this.RequestCount=0;this.search=a;this.exact_match=b;this.results=new SearchResultSet(null);if(this.search.length!==0){this.index_match=0;this.d=this.d1;this.d()}};
SearchDB.prototype.IndexSearch=function(){log("SearchDB.IndexSearch() this.index.length = "+this.index.length);var a;for(a=this.index_match;a<this.index.length;a++)if(null==this.index[a].key||this.search<=this.index[a].key)break;this.index_match=a;log("SearchDB.IndexSearch() this.index_match = "+this.index_match)};
SearchDB.prototype.d1=function(){log("SearchDB.d1()");this.IndexSearch();if(null!=this.index[this.index_match].key&&this.search===this.index[this.index_match].key)if(!this.exact_match&&this.index[this.index_match].values.length<2){this.results.Or(new SearchResultSet(this.index[this.index_match].values[0]));this.index_match++;this.d=this.d2;this.d()}else{var a=this.index[this.index_match].values,b;for(b in a){this.results.Or(new SearchResultSet(a[b]));if(this.exact_match)break}this.ReportResult(this.results)}else if(this.index[this.index_match].node!=
0){this.index_insert_position=this.index_match;this.LoadScript(this.index[this.index_match].node)}else if(this.exact_match)this.ReportResult(this.results);else{this.d=this.d2;this.d()}};
SearchDB.prototype.d2=function(){log("SearchDB.d2()");if(this.index[this.index_match].node!==0){this.index_insert_position=this.index_match;this.LoadScript(this.index[this.index_match].node)}else if(null!==this.index[this.index_match].key&&this.index[this.index_match].key.substring(0,this.search.length)===this.search){this.results.Or(new SearchResultSet(this.index[this.index_match].values[0]));this.index_match++;this.d2()}else{log("SearchDB.d2() this.results = "+this.results);this.ReportResult(this.results)}};
SearchDB.prototype.ReportResult=function(a){log("SearchDB.ReportResult() r = "+a);this.db_id!=="g"?QueryProcessor.ReportResult(a):this.Search_CallBack(a)};var SearchDBs={t:new SearchDB("t"),u:new SearchDB("u"),e:new SearchDB("e"),r:new SearchDB("r"),g:new SearchDB("g")},CDB=null;function SearchResult(a){this.index=a;this.weight=1}function SearchResultSet(a){this.rs=a?ReadBase64_ITP({s:a,p:0},SearchResult):[]}SearchResultSet.prototype.Or=function(a){this.AOR(a,true)};
SearchResultSet.prototype.AOR=function(a,b,c){var e,d;for(d=e=0;e<a.rs.length;e++){for(;d<this.rs.length&&this.rs[d].index<a.rs[e].index;)d++;if(d===this.rs.length||this.rs[d].index!==a.rs[e].index)this.rs.splice(d,0,a.rs[e]);else{var f=this.rs[d].weight,g=a.rs[e].weight;this.rs[d].weight=b?Math.max(f,g):f+g*c}}};SearchResultSet.prototype.Combine=function(a,b){this.AOR(a,false,b)};
SearchResultSet.prototype.GetMaxWeight=function(){for(var a=0,b=0;b<this.rs.length;b++)if(this.rs[b].weight>a)a=this.rs[b].weight;return a};SearchResultSet.prototype.CutOffByLimit=function(a){for(var b=0;b<this.rs.length;b++)if(this.rs[b].weight<a){this.rs.splice(b,1);b--}};
SearchResultSet.prototype.And=function(a){var b,c;for(c=b=0;b<a.rs.length&&c<this.rs.length;b++){for(;c<this.rs.length&&this.rs[c].index<a.rs[b].index;)this.rs.splice(c,1);if(c<this.rs.length&&a.rs[b].index===this.rs[c].index){this.rs[c].weight=Math.min(this.rs[c].weight,a.rs[b].weight);c++}}this.rs.splice(c,this.rs.length-c)};function AbsUrl(a){return a}
function LoadXMLDoc(a,b,c,e,d){var f=AbsUrl(a);if(d==undefined)d=false;var g=null;try{if(window.location.href.substr(0,7).toLowerCase()=="http://"||window.location.href.substr(0,8).toLowerCase()=="https://")g=new XMLHttpRequest;if(window.location.href.substr(0,7).toLowerCase()=="file://"&&IsTouchDevice())g=new XMLHttpRequest}catch(h){}finally{if(g==null)g=new ActiveXObject("Microsoft.XMLHTTP")}g.onreadystatechange=function(){state_Change(f,g,b,c,e)};g.open("GET",f,!d);e=="PING"&&g.setRequestHeader("If-Modified-Since",
"Sat, 1 Jan 2005 00:00:00 GMT");g.send(null)}
function state_Change(a,b,c,e,d){if(b.readyState==4)if(b.status==200||b.status==0&&d!="PING"){if(b.responseXML==null||b.responseXML.documentElement==null){a=null;try{a=new ActiveXObject("Microsoft.XMLDOM");a.async=false;a.loadXML(b.responseText)}catch(f){a=(new window.DOMParser).parseFromString(b.responseText,"application/xml")}e=b.responseText;b={};b.responseXML=a;b.responseText=e}c(b,d)}else if(e){d!="PING"&&alert(a+" not found. Logged...");e(d)}else alert("Problem retrieving data: "+b.statusText)}
function LoadXMLDocArray(a,b,c,e,d){LoadXMLDoc(a,d?XMLDocArrayWorker2:XMLDocArrayWorker,c,{nodeName:e,returnFunction:b},false)}function XMLDocArrayWorker(a,b){for(var c=[],e=a.responseXML.getElementsByTagName(b.nodeName),d=0;d<e.length;d++){var f=e[d];(f=f.textContent?f.textContent:f.text)||(f="");var g=f.length;if(g>=2)if(f.substr(0,1)=='"'&&f.substr(g-1,1)=='"')f=f.substr(1,g-2);c[c.length]=f}b.returnFunction(c)}
function XMLDocArrayWorker2(a,b){for(var c=[],e=a.responseXML.getElementsByTagName(b.nodeName),d=0;d<e.length;d++){for(var f=e[d],g=f.attributes[0].value,h="",i=0;i<f.childNodes.length;i++)if(f.childNodes[i].xml)h+=f.childNodes[i].xml;else{var k=new XMLSerializer;h+=k.serializeToString(f.childNodes[i])}c[c.length]=g+"="+h}b.returnFunction(c)}var doItplayerWindow=null;
function LaunchDoIt(a,b){var c=false,e=b,d=true;if(doItplayerWindow)doItplayerWindow.closed||(d=false);if(d){if(upk.browserInfo.isExplorer())try{if(!function(){var i=window.createPopup();i.show(1,1,1,1);var k=i.document.parentWindow.screenTop==1;i.hide();return!k}()&&!upk.browserInfo.isIE10Modern()){d=false;if(e.substr(0,3)=="su="){e=Escape.SafeUriUnEscape(e.substr(3));d=true}e+="&popup=true";if(d)e="su="+Escape.SafeUriEscape(e);c=true}}catch(f){}if(c){a+="topicgc.html";e=typeof urlParser=="undefined"?
a+"?"+e:urlParser.GetCorrectUrl(a+"?"+e);doItplayerWindow=window.open(e,"","toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,left=1500")}else{a+="topicgcx.html";if(upk.browserInfo.isExplorer()){c=navigator.appVersion.split(";")[1];c=c.substr(6);c=parseFloat(c)}c=upk.browserInfo.isSafari()?screen.availWidth-361:screen.availWidth-290;d=screen.availHeight-450;var g=upk.browserInfo.isSafari()?346:275,h=400;if(PlayerConfig.EnableCookies){GICookie=new Cookie(document,"GICookie",365,"/",
null,null);if(GICookie.Load())if(GICookie.Cleft>=0&&GICookie.Ctop>=0&&parseInt(GICookie.Cleft)+parseInt(GICookie.Cwidth)<screen.availWidth&&GICookie.Ctop<screen.availHeight){c=parseInt(GICookie.Cleft);d=parseInt(GICookie.Ctop);g=parseInt(GICookie.Cwidth);h=parseInt(GICookie.Cheight)}}e=typeof urlParser=="undefined"?a+"?"+e:urlParser.GetCorrectUrl(a+"?"+e);doItplayerWindow=window.open(e,"","toolbar=0,scrollbars=0,location=1,statusbar=0,menubar=0,resizable=1,left="+c+",top="+d+",width="+g+",height="+
h)}}else alert(R_toc_doit_err)}var SM_CYCAPTION=19,SM_CYFRAME=4;
function GetDualMonitor(){primarydisplay=true;if(PlayerConfig.DualMonitorSupport){var a=window.open("","","width=10,height=10");twscreenX=a.screenX!=null?a.screenX:a.screenLeft;twscreenY=a.screenY!=null?a.screenY:a.screenTop;if(twscreenX<0||twscreenX>this.screen.width)primarydisplay=false;if(twscreenY<0||twscreenY>this.screen.height)primarydisplay=false;a.close()}a="";if(primarydisplay)if(PlayerConfig.DualMonitorFixedSize==true){var b,c=0,e=0;if(screen.width>1024){a=1024;c=Math.round(screen.width/
2-512)}else a=screen.width-8;if(screen.height>768){b=768;e=Math.round((screen.height-60)/2-384)}else b=screen.height-60;a="top="+e+",left="+c+",width="+a+",height="+b}else a="fullscreen=1";else{sw=window.screen.availWidth-2*SM_CYFRAME;sh=window.screen.availHeight-2*SM_CYFRAME-SM_CYCAPTION;a="top=0,left=0,width="+sw+",height="+sh}return a}
var upk_tocTreeData=function(){function a(){if(!f.rootNode)f.rootNode={t:null,y:"S",g:f.root,o:1,r:null};return f.rootNode}function b(m,o){if(m in g)g[m].push(o);else{g[m]=[o];LoadXMLDoc(i+"toc/"+m+".json.js",function(q){q=$.parseJSON(q.responseText);if(q.seealsoroots==undefined)q.seealsoroots=[];if(m==1)f=q;else for(var r in q.data)f.data[r]=q.data[r];h[m]=true;for(r=0;r<g[m].length;r++)g[m][r]();delete g[m]},null,null,true)}}function c(m,o){function q(){if(u in f.data)o(m,f.data[u]);else if(r()==
false){for(;f.indexer[t].block in h||f.indexer[t].min>m||f.indexer[t].max<m;)t++;b(f.indexer[t].block,q)}}function r(){function l(y,C){d();j[y]?C(j[y].block,j[y].obj):C(null,null)}if(k==0)return false;f.seealsoroots.sort(function(y,C){return parseInt(y)-parseInt(C)});for(var p=0;p<f.seealsoroots.length;p++){for(var v=[],w=0,z=f.seealsoroots[p],x=0;x<f.data[z].length;x++){var B=f.data[z][x];if(k>=B.r[0]&&k<=B.r[1]){v.unshift(B);w=z;break}}if(w!=0){for(var D=true;D==true;)l(w,function(y,C){if(y){v.unshift(C);
w=y}else{o(0,v);D=false}});return true}}return false}var u=m.toString(),t=0;f?q():b(1,q)}function e(m,o,q){function r(t,l){if(u==null)u=[a()];if(t==0){var p=l[l.length-1];o(l,p.t,p.y,m-p.r[0])}else for(var v=l.length-1;v>=0;v--){p=l[v];if(p.r[0]<=m){u.push(p);m<=p.r[1]?o(u,p.t,p.y,m-p.r[0]):c(p.o,r);break}}}var u=null;k=q==true?m:0;c(1,r)}function d(){function m(){j=[];for(var o=0;o<f.seealsoroots.length;o++)for(var q=f.seealsoroots[o],r=0;r<f.data[q].length;r++){var u=f.data[q][r];j[u.o]={block:q,
obj:u}}}j==null&&c(1,m)}var f,g={},h={},i="",k=0,j=null;return{getByOrdinal:c,getByCIndex:e,getByGuid:function(m,o){QueryProcessor.Start(QueryParser.Parse("URI","t'"+Escape.MyEscape('"'+m)+"'"),function(q){e(q[0].index,o,false)})},getPathByOrdinal:function(m,o){function q(u,t){if(r==null)r=[a()];for(var l=t.length-1;l>=0;l--){var p=t[l];if(p.o<=m){r.push(p);m==p.o?o(r,p.t,p.y):c(p.o,q);break}}}var r=null;c(1,q)},getSeeAlsoReferences:function(m,o){var q=[];c(1,function(){for(var r=0;r<f.seealsoroots.length;r++)for(var u=
f.seealsoroots[r],t=0;t<f.data[u].length;t++){var l=f.data[u][t];l.g==m.g&&q.push(l)}o(q)})},setDataPath:function(m){i=m}}}();upk=upk||{};
$.extend(true,upk,{contextHelper:function(){var a=null,b,c;this.SetContext=function(d,f){if(a)a.SetContext(d,f);else{c=b;b={view:d,subview:f};ias.SetContext(b)}};this.SetNamespace=function(d){a||ias.SetNamespace(d)};this.AddDiscoveryCddUrl=function(d){a||ias.AddDiscoveryCddUrl(d)};this.SetPrevContext=function(){if(a)a.SetPrevContext();else{b=c;ias.SetContext(b)}};try{if(self!=top&&typeof parent.ctxHelper==="object")a=parent.ctxHelper}catch(e){}return this}});window.ctxHelper=new upk.contextHelper;
window.ias=function(a){function b(l){var p={};if(l!=h)for(var v in l){var w=l[v];if(w!=h)p[v]=w}return p}function c(l){j=b(l);m.push(j);k=h}function e(l,p){if(p!=h)o[l]=p;else delete o[l];q=h}function d(l,p){return encodeURIComponent(l)+"="+encodeURIComponent(p)}function f(l,p){return encodeURIComponent(l)+(p==""?"":"="+encodeURIComponent(p))}function g(l,p){var v=p?f:d,w=[],z;for(z in l){var x=l[z];if(x&&x.push&&x.sort)for(var B=0;B<x.length;++B)w.push(v(z,x[B]));else x!=h&&w.push(v(z,x))}return w.join(";")}
var h=null,i=h,k=h,j={},m=[j],o={},q=h,r=[],u=[],t=window.ias||{};t.SetNamespace=function(l){i=l};t.SetContext=function(l){j=b(l);m[m.length-1]=j;k=h};t.SetContextPart=function(l,p){if(p!=h)j[l]=p;else delete j[l];k=h};t.ResetContext=function(l){m=[];c(l)};t.SetTag=e;t.SetTags=function(l){for(var p in l)e(p,l[p])};t.ResetTags=function(l){o=b(l);q=h};t.PushContext=c;t.PopContext=function(){m.pop();m.length||m.push({});j=m[m.length-1];k=h};t.AddDiscoveryCddUrl=function(l){r.push(l)};t.AddApplicableCddUrl=
function(l){u.push(l)};a.UPK_GetNamespace=function(){return i};a.UPK_GetContext=function(){if(k==h)k=g(j);return k};a.UPK_GetTags=function(){if(q==h)q=g(o,true);return q};a.UPK_GetDiscoveryCddUrls=function(){return r.length?r:h};a.UPK_GetApplicableCddUrls=function(){return u.length?u:h};return t}(window);ias.SetTag("upk-trait-nohelp","");var navigation_mode="smart",browser_buttons=false,newWindow=true,dim_w=800,dim_h=600;
function ShowToc(){if(upk.browserInfo.isSupportedBrowser())if(!(window.location.hostname==""&&upk.browserInfo.isiOS()==false)){var a=document.location.hash.substring(1);if(a.length==0)a=document.location.search.substring(1);var b="./"+targetPath+"/toc.html";if(a.length>0)b+="?"+a;if(!newWindow){this.location.href=b;return true}var c=new Cookie(document,"OnDemandToc",365);c.Load();var e=screen.availWidth,d=screen.availHeight,f,g;if(c.TocWidth){a=Number(c.TocLeft);f=Number(c.TocTop);g=Number(c.TocWidth);
c=Number(c.TocHeight)}else{g=e*0.81;c=d*0.8;if(g>880)g=880;if(g<770)g=770;if(c>750)c=750;a=Math.floor((e-g)/2);f=Math.floor((d-c)/2)}if(a<0)a=0;if(f<0)f=0;if(a+g>e-12)if(g>e-12){a=0;g=e-12}else a=e-12-g;if(f+c>d-36)if(c>d-36){f=0;c=d-36}else f=d-36-c;e="channelmode=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,resizable=yes,toolbar=no,";if(browser_buttons==true)e="channelmode=no,location=yes,directories=yes,status=yes,menubar=yes,scrollbars=yes,resizable=yes,toolbar=yes,";return window.open(b,
"toc",e+"left="+a+",top="+f+",width="+g+",height="+c)!=null}}
function Parse_index(){for(var a=0;a<strArgs.length;a++){strArg=strArgs[a].toLowerCase();if(strArg.substr(0,8)=="buttons="){s=strArg.substr(8,1);browser_buttons=s=="y"}if(strArg.substr(0,6)=="index="){s=strArg.substr(6,1);if(s=="b")navigation_mode="back";if(s=="c")navigation_mode="close";if(s=="s")navigation_mode="self";if(s=="r")navigation_mode="smart"}}if(navigation_mode=="smart"){navigation_mode="self";browser_buttons=true}newWindow=navigation_mode!="self"}
function Back(){var a=upk.browserInfo.isExplorer()?1:2;history.length>a?setTimeout("history.back();",10):Close()}function Close(){window.open("","_self");opener=null;window.close()}function Init_index(){Parse_index();if(ShowToc())switch(navigation_mode){case "back":Back();break;case "close":Close()}}var map_loaded=false,nameMap=[],_printitName="",urlParams="";function NameObj(a,b){this.name=a;this.guid=b}function PrObj(a,b){this.guid=a;this.filename=b}
function Name(a,b){nameMap[nameMap.length]=new NameObj(a,b)}function A(a,b){Name(b,a)}function GetGuidForName(a){for(var b=0;b<nameMap.length;b++)if(nameMap[b].name==a)return nameMap[b].guid;return""}function GetFilenameForGuid(a){LoadXMLDoc(targetPath+"/tpc/"+a+"/descriptor.xml",Returned)}
function GetIndexForGuid(a){upk_tocTreeData.setDataPath(targetPath+"/");datasourceroot=targetPath+"/"+datasourceroot;upk_tocTreeData.getByGuid(a,function(b){this.location.replace("./"+targetPath+"/toc.html?treeindex="+b[b.length-1].o+"&"+urlParams)})}
function Returned(a){var b="",c="";nodes=a.responseXML.getElementsByTagName("PlayModes");if(nodes.length>0){n=nodes[0];if(n.textContent!=null)b=n.textContent;else if(n.text!=null)b=n.text;else if(n.firstChild.data!=null)b=n.firstChild.data}nodes=a.responseXML.getElementsByTagName("PrintItName");if(nodes.length>0){n=nodes[0];if(n.textContent!=null)c=n.textContent;else if(n.text!=null)c=n.text;else if(n.firstChild.data!=null)c=n.firstChild.data}if(b.indexOf("P")>=0)_printitName=c;Load2()}
var targetPath="data";function Init_dhtml(){document.title=R_KP_title;var a=document.createElement("script");a.type="text/javascript";a.src=targetPath+"/topicmap.js";document.body.appendChild(a);setTimeout("LoadFirst();",100)}var infoWindow="none",kp_param_kpnextpage="",kpfeedbk="",kp_param_kpfeedbk="",strAfter="",playerwindow,IntervalID,guid="",conceptonly=false,bypassToc=null;function LoadFirst(){setTimeout("Load()",100)}function LoadLast(){}
function Close(){window.open("","_self");opener=null;window.close()}function PlayerExit(a){if(a)setTimeout(strAfter,1);else if(playerwindow){if(playerwindow.closed){clearInterval(IntervalID);setTimeout(strAfter,1)}}else{clearInterval(IntervalID);setTimeout(strAfter,1)}}var strMode="",strListFile="",strExtraOptions="",strFrame="",strWindowed=false,strOwner="";
function Load(){try{if(strListPath==undefined)strListPath="./"+targetPath+"/tpc/"}catch(a){strListPath="./"+targetPath+"/tpc/"}try{eval("LoadMap()")}catch(b){setTimeout("Load();",100);return}urlParams=document.location.hash.substring(1);if(urlParams=="")urlParams=document.location.search.substring(1);for(var c=0;c<strArgs.length;c++){strArg=strArgs[c];if(strArg.substr(0,5).toLowerCase()=="mode=")strMode=strArg.substr(5,1);else if(strArg.substr(0,5).toLowerCase()=="guid=")strListFile=guid=strArg.substring(5);
else if(strArg.substr(0,5).toLowerCase()=="name="){name=decodeURI(strArg.substring(5));strListFile=guid=GetGuidForName(name)}else if(strArg.substr(0,11).toLowerCase()=="kpnextpage=")kp_param_kpnextpage=strArg.substr(11);else if(strArg.substr(0,9).toLowerCase()=="kpfeedbk=")kp_param_kpfeedbk=strArg.substr(9);else if(strArg.substr(0,4).toLowerCase()=="back"&&strArg.substr(0,5).toLowerCase()!="back2")strAfter="history.back()";else if(strArg.substr(0,5).toLowerCase()=="back2")strAfter="history.go(-2)";
else if(strArg.substr(0,5).toLowerCase()=="close")strAfter="Close()";else if(strArg.substr(0,6).toLowerCase()=="frame="){strFrame=strArg.substr(6);if(strFrame!="")strFrame="&Frame=F"+strFrame}else if(strArg.substr(0,8).toLowerCase()=="windowed")strWindowed=true;else if(strArg.substr(0,6).toLowerCase()=="owner=")strOwner=strArg.substr(6);else if(strArg.substr(0,11).toLowerCase()=="conceptonly")conceptonly=true;else if(strArg.substr(0,10).toLowerCase()=="bypasstoc=")bypassToc=strArg.substr(10)=="y"?
true:false}strAfter="LoadLast();"+strAfter;if(strListFile==""){LoadLast();alert(R_KP_invalid_arguments)}else if(strMode=="")if(bypassToc==undefined||bypassToc==true){c="?dhtml";if(strFrame.length>0)c+="&"+strFrame;if(strOwner.length>0)c+="&owner="+strOwner;if(conceptonly==true)c+="&conceptonly";this.location.replace(strListPath+strListFile+"/lmstart.html"+c+"&"+urlParams)}else GetIndexForGuid(guid);else strMode=="A"?Load2():GetFilenameForGuid(guid)}
function Load2(){if(playerwindow)if(!playerwindow.closed){alert(R_toc_doit_err);return}if(strMode=="P"){if(_printitName.length>0)playerwindow=window.open(strListPath+strListFile+"/lmstart.html?dhtml&mode=P")}else if(strMode=="D"||strMode=="E"){var a="directlaunch&mode=D";if(strFrame.length>0)a+=strFrame;if(_printitName.length>0)a+="&printitname="+_printitName;if(strMode==="E")a+="&testit";LaunchDoIt(strListPath+strListFile+"/",a)}else if(strMode=="A")playerwindow=window.open(strListPath+strListFile+
"/topic.html");else{a="?directlaunch&mode="+strMode;if(strFrame.length>0)a+=strFrame;if(_printitName.length>0)a+="&printitname="+_printitName;if(kp_param_kpnextpage.length>0)a+="&kpnextpage="+kp_param_kpnextpage;if(kp_param_kpfeedbk.length>0)a+="&kpfeedbk="+kp_param_kpfeedbk;if(IsTouchDevice()){strAfter="";LaunchTopic(strListPath+strListFile+"/topic.html"+a)}else{var b=0,c=0,e=screen.width,d=screen.height,f=PlayerConfig.SeeItPlayBackSize;if(strMode=="S"){if(PlayerConfig.LaunchNewPlayerWindow==false){window.location.href=
strListPath+strListFile+"/topic.html"+a;return}var g=new Cookie(document,"OnDemandSeeItSizes",365,"/");g.Load();if(g.SeeItHeight){b=Number(g.SeeItLeft);c=Number(g.SeeItTop);e=Number(g.SeeItWidth);d=Number(g.SeeItHeight)}else{switch(f.toLowerCase()){case "fullsize":break;case "halfsize":e=Math.round(screen.width/2);d=Math.round(screen.height/2);break;default:b=f.split("x");if(b.length==1)break;if(isNaN(parseInt(b[0])))break;if(isNaN(parseInt(b[1])))break;e=parseInt(b[0]);d=parseInt(b[1])}b=Math.round((screen.width-
e)/2);c=Math.round((screen.height-d)/2)}}if(e>screen.width){e=screen.width;b=0}if(d>screen.height){d=screen.height;c=0}playerwindow=window.open(strListPath+strListFile+"/topic.html"+a,"","resizable=1,toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,left="+b+",top="+c+",width="+e+",height="+d)}}if(strAfter!=""&&playerwindow||doItplayerWindow&&doItplayerWindow.closed==false)IntervalID=setInterval("PlayerExit(true)",125)}
function LaunchTopic(a){this.location.replace(a);setTimeout("LaunchTopic('"+a+"')",1E3)}var strArgs,dhtml_mode=false;
function SetTargetPath(){strArgs=document.location.hash.substring(1).split("&");if(strArgs.length==0||strArgs[0]=="")strArgs=document.location.search.substring(1).split("&");if(strArgs.length==1)if(strArgs[0].toLowerCase().substr(0,3)=="su=")strArgs=Escape.SafeUriUnEscape(strArgs[0].substr(3)).split("&");for(var a=0;a<strArgs.length;a++){strArg=strArgs[a].toLowerCase();if(strArg.substr(0,5)=="path=")targetPath=strArg.substr(5)}}
function Init(){SetTargetPath();var a=document.getElementById("getdimension");dim_w=a.clientWidth;dim_h=a.clientHeight;a.style.display="none";if(!(window.location.hostname==""&&upk.browserInfo.isiOS()==false)){strArgs=document.location.hash.substring(1).split("&");if(strArgs.length==0||strArgs[0]=="")strArgs=document.location.search.substring(1).split("&");if(strArgs.length==1)if(strArgs[0].toLowerCase().substr(0,3)=="su=")strArgs=Escape.SafeUriUnEscape(strArgs[0].substr(3)).split("&");for(a=0;a<
strArgs.length;a++){strArg=strArgs[a].toLowerCase();if(strArg.substr(0,5)=="guid=")dhtml_mode=true;if(strArg.substr(0,5)=="name=")dhtml_mode=true}dhtml_mode==true?Init_dhtml():Init_index()}}function OnPlayButton(){dhtml_mode==true?Load2():ShowToc()};
