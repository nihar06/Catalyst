/*
Copyright © 1998, 2014, Oracle and/or its affiliates.  All rights reserved.
*/
function filterHTML(a){a=replaceString("&","&amp;",a);a=replaceString("<","&lt;",a);return a=replaceString(">","&gt;",a)}function replaceString(a,c,d){if(d!=null)return d.replace(RegExp(a,"g"),c)}function PtToPx(a,c){return Math.floor(a*c/72)}function PxToPt(a,c){return a/c*72}function Bool(a){if(typeof a=="boolean")return a;if(typeof a=="string"){if(a.toLowerCase()=="false")return false;if(a.toLowerCase()=="true")return true}return null}
function getDPICookie(){var a=new Cookie(document,"UPKDpiDailyWarning","today","/",null,false);a.Load();if(a.DPIdailyWarning==1)return true;a.DPIdailyWarning=1;a.Store();return false}var KeepAlive_url_ping=null,KeepAlive_url_closeserver=null,KeepAlive_finished=false,KeepAlive_timer=null;
function KeepAlive_Init(a){if(KeepAlive_url_ping==null){KeepAlive_url_ping=a+"xml/ping.xml";KeepAlive_url_closeserver=a+"closeserver.xml";KeepAlive_finished=false;KeepAlive_timer=setInterval("KeepAlive_Ping()",2E3)}}function KeepAlive_DoNotSendClose(){KeepAlive_finished=true}
function KeepAlive_Close(){if(KeepAlive_url_ping!=null)if(KeepAlive_finished!=true){KeepAlive_Track("close...");KeepAlive_finished=true;clearTimeout(KeepAlive_timer);LoadXMLDoc(KeepAlive_url_closeserver,KeepAlive_Return_OK,KeepAlive_Return_OK,"PING",true)}}function KeepAlive_Ping(){KeepAlive_Track("ping...");KeepAlive_finished!=true&&LoadXMLDoc(KeepAlive_url_ping,KeepAlive_Return_OK,KeepAlive_Return_Error,"PING",false)}function KeepAlive_Return_OK(){KeepAlive_Track("ping returned")}
function KeepAlive_Return_Error(){KeepAlive_Track("error returned");if(KeepAlive_finished!=true){KeepAlive_finished=true;clearInterval(KeepAlive_timer);alert(R_playexe_comm_error)}}var _KeepAlive_window=null,_KeepAlive_track=false;function KeepAlive_Track(a){if(_KeepAlive_track!=false){if(_KeepAlive_window==null)_KeepAlive_window=window.open();_KeepAlive_window.document.writeln(a+"<br/>")}}
var Escape=function(){function a(f,j){for(var m="",i=0;i<f.length;i++){var o=f.substr(i,1),t;if(j==0)t=o>="0"&&o<="9"||o>="a"&&o<="z"||o>="A"&&o<="Z";else{a:{t=e.length;for(var w=0;w<t;w++)if(o==e[w]){t=true;break a}t=o==d?true:false}t=!t}if(t)m+=o;else{o=f.charCodeAt(i);o="0000"+o.toString(16).toUpperCase();m+=(j==0?"$":d)+o.substr(o.length-4)}}return m}function c(f,j){for(var m="",i=false,o=0;o<f.length;o++){var t;if(i){t=f.substr(o,4);m+=String.fromCharCode(parseInt("0x"+t));o+=3;i=false}else{t=
f.substr(o,1);if(t==(j==0?"$":d))i=true;else m+=t}}return m}var d="/",e=["<",">",'"',"'","%",";","(",")","&","+"];return{SafeUriEscape:function(f){return a(f,1)},SafeUriUnEscape:function(f){return c(f,1)},MyEscape:function(f){return a(f,0)},MyUnEscape:function(f){return c(f,0)}}}();function UrlParser(){this.params=[];this.safemode=false}
UrlParser.prototype.Clone=function(){var a=new UrlParser;a.params=[];a.safemode=this.safemode;for(var c in this.params)if(this.params[c]!=null)a.params[c]=this.params[c];return a};
UrlParser.prototype.Parse=function(){var a,c;a=document.location.hash.substring(1);a=a.split("&");if(a.length==0||a[0]==""){a=document.location.search.substring(1);a=a.split("&")}if(a.length>0)if(a[0].toLowerCase().substr(0,3)=="su="){this.safemode=true;a=a[0].substr(3);a=Escape.SafeUriUnEscape(a);a=a.split("&")}for(var d=0;d<a.length;d++){c=a[d];if(c.length!=0){var e=c.split("=");if(e.length==2)this.params[e[0].toLowerCase()]=e[1];else if(e.length<2)this.params[e[0].toLowerCase()]="";else this.params[e[0].toLowerCase()]=
c.substr(e[0].length+1)}}};UrlParser.prototype.GetSafeMode=function(){return this.safemode};UrlParser.prototype.SetSafeMode=function(a){this.safemode=a};UrlParser.prototype.GetParameter=function(a){return this.params[a.toLowerCase()]};UrlParser.prototype.AddParameter=function(a,c){this.params[a.toLowerCase()]=c};UrlParser.prototype.RemoveParameter=function(a){this.params[a.toLowerCase()]=null};UrlParser.prototype.ClearParameterList=function(){this.params=null;this.params=[]};
UrlParser.prototype.BuildParameterList=function(a){a="";var c=true,d;for(d in this.params){var e=this.params[d];if(e!=null){if(c==false)a+="&";c=false;a+=e.length==0?d:d+"="+this.params[d]}}if(this.safemode)a="su="+Escape.MyEscape(a);return a};
UrlParser.prototype.GetCorrectUrl=function(a,c){if(!this.safemode)return a;var d,e=a.indexOf("#");if(e==-1)e=a.indexOf("?");if(e>=0){var f=a.substring(e+1);d=f.split("&");if(d[0].toLowerCase().substr(0,3)=="su=")return a;return a.substring(0,e+1)+"su="+Escape.SafeUriEscape(f)}else return a+(c?"":"?su=")};function UnescapeQuotes(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}
function Cookie(a,c,d,e,f,j){this.$document=a;this.$name=c;if(d=="today"){a=new Date;a.setHours(23);a.setMinutes(59);a.setSeconds(59);this.$exp=a}else this.$exp=d?new Date((new Date).getTime()+d*864E5):null;this.$path=e?e:null;this.$domain=f?f:null;this.$secure=j?true:false}
Cookie.prototype.Store=function(){if(PlayerConfig.EnableCookies){var a="",c;for(c in this)if(!(c.charAt(0)=="$"||typeof this[c]=="function")){if(a!="")a+="&";a+=c+":"+escape(this[c])}a=this.$name+"="+a;if(this.$exp)a+="; expires="+this.$exp.toGMTString();if(this.$path)a+="; path="+this.$path;if(this.$domain)a+="; domain="+this.$domain;if(this.$secure)a+="; secure=";this.$document.cookie=a}};
Cookie.prototype.Load=function(){if(!PlayerConfig.EnableCookies)return false;var a=this.$document.cookie;if(a=="")return false;var c=a.indexOf(this.$name+"=");if(c==-1)return false;c+=this.$name.length+1;var d=a.indexOf(";",c);if(d==-1)d=a.length;a=decodeURIComponent(a.substring(c,d)).split("&");for(c=0;c<a.length;c++){d=a[c].split(":");this[d[0]]=unescape(d[1])}return true};
Cookie.prototype.Remove=function(){if(PlayerConfig.EnableCookies){var a=this.$name+"=";if(this.$path)a+="; path="+this.$path;if(this.$domain)a+="; domain="+this.$domain;a+="; expires=Fri, 02-Jan-1970 00:00:00 GMT";this.$document.cookie=a}};
var swfobject=function(){function a(){if(!R){try{var g=u.getElementsByTagName("body")[0].appendChild(u.createElement("span"));g.parentNode.removeChild(g)}catch(h){return}R=true;g=X.length;for(var l=0;l<g;l++)X[l]()}}function c(g){if(R)g();else X[X.length]=g}function d(g){if(typeof F.addEventListener!=v)F.addEventListener("load",g,false);else if(typeof u.addEventListener!=v)u.addEventListener("load",g,false);else if(typeof F.attachEvent!=v)M(F,"onload",g);else if(typeof F.onload=="function"){var h=
F.onload;F.onload=function(){h();g()}}else F.onload=g}function e(){var g=u.getElementsByTagName("body")[0],h=u.createElement(I);h.setAttribute("type",J);var l=g.appendChild(h);if(l){var p=0;(function(){if(typeof l.GetVariable!=v){try{var q=l.GetVariable("$version")}catch(B){}if(q){q=q.split(" ")[1].split(",");r.pv=[parseInt(q[0],10),parseInt(q[1],10),parseInt(q[2],10)]}}else if(p<10){p++;setTimeout(arguments.callee,10);return}g.removeChild(h);l=null;f()})()}else f()}function f(){var g=N.length;if(g>
0)for(var h=0;h<g;h++){var l=N[h].id,p=N[h].callbackFn,q={success:false,id:l};if(r.pv[0]>0){var B=G(l);if(B)if(O(N[h].swfVersion)&&!(r.wk&&r.wk<312)){E(l,true);if(p){q.success=true;q.ref=j(l);p(q)}}else if(N[h].expressInstall&&m()){q={};q.data=N[h].expressInstall;q.width=B.getAttribute("width")||"0";q.height=B.getAttribute("height")||"0";if(B.getAttribute("class"))q.styleclass=B.getAttribute("class");if(B.getAttribute("align"))q.align=B.getAttribute("align");var z={};B=B.getElementsByTagName("param");
for(var C=B.length,D=0;D<C;D++)if(B[D].getAttribute("name").toLowerCase()!="movie")z[B[D].getAttribute("name")]=B[D].getAttribute("value");i(q,z,l,p)}else{o(B);p&&p(q)}}else{E(l,true);if(p){if((l=j(l))&&typeof l.SetVariable!=v){q.success=true;q.ref=l}p(q)}}}}function j(g){var h=null;if((g=G(g))&&g.nodeName=="OBJECT")if(typeof g.SetVariable!=v)h=g;else if(g=g.getElementsByTagName(I)[0])h=g;return h}function m(){return!Y&&O("6.0.65")&&(r.win||r.mac)&&!(r.wk&&r.wk<312)}function i(g,h,l,p){Y=true;ea=
p||null;ga={success:false,id:l};var q=G(l);if(q){if(q.nodeName=="OBJECT"){V=t(q);Z=null}else{V=q;Z=l}g.id=S;if(typeof g.width==v||!/%$/.test(g.width)&&parseInt(g.width,10)<310)g.width="310";if(typeof g.height==v||!/%$/.test(g.height)&&parseInt(g.height,10)<137)g.height="137";u.title=u.title.slice(0,47)+" - Flash Player Installation";p=r.ie&&r.win?"ActiveX":"PlugIn";p="MMredirectURL="+F.location.toString().replace(/&/g,"%26")+"&MMplayerType="+p+"&MMdoctitle="+u.title;if(typeof h.flashvars!=v)h.flashvars+=
"&"+p;else h.flashvars=p;if(r.ie&&r.win&&q.readyState!=4){p=u.createElement("div");l+="SWFObjectNew";p.setAttribute("id",l);q.parentNode.insertBefore(p,q);q.style.display="none";(function(){q.readyState==4?q.parentNode.removeChild(q):setTimeout(arguments.callee,10)})()}w(g,h,l)}}function o(g){if(r.ie&&r.win&&g.readyState!=4){var h=u.createElement("div");g.parentNode.insertBefore(h,g);h.parentNode.replaceChild(t(g),h);g.style.display="none";(function(){g.readyState==4?g.parentNode.removeChild(g):setTimeout(arguments.callee,
10)})()}else g.parentNode.replaceChild(t(g),g)}function t(g){var h=u.createElement("div");if(r.win&&r.ie)h.innerHTML=g.innerHTML;else if(g=g.getElementsByTagName(I)[0])if(g=g.childNodes)for(var l=g.length,p=0;p<l;p++)!(g[p].nodeType==1&&g[p].nodeName=="PARAM")&&g[p].nodeType!=8&&h.appendChild(g[p].cloneNode(true));return h}function w(g,h,l){var p,q=G(l);if(r.wk&&r.wk<312)return p;if(q){if(typeof g.id==v)g.id=l;if(r.ie&&r.win){var B="",z;for(z in g)if(g[z]!=Object.prototype[z])if(z.toLowerCase()==
"data")h.movie=g[z];else if(z.toLowerCase()=="styleclass")B+=' class="'+g[z]+'"';else if(z.toLowerCase()!="classid")B+=" "+z+'="'+g[z]+'"';z="";for(var C in h)if(h[C]!=Object.prototype[C])z+='<param name="'+C+'" value="'+h[C]+'" />';q.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+B+">"+z+"</object>";aa[aa.length]=g.id;p=G(g.id)}else{C=u.createElement(I);C.setAttribute("type",J);for(var D in g)if(g[D]!=Object.prototype[D])if(D.toLowerCase()=="styleclass")C.setAttribute("class",
g[D]);else D.toLowerCase()!="classid"&&C.setAttribute(D,g[D]);for(B in h)if(h[B]!=Object.prototype[B]&&B.toLowerCase()!="movie"){g=C;z=B;D=h[B];l=u.createElement("param");l.setAttribute("name",z);l.setAttribute("value",D);g.appendChild(l)}q.parentNode.replaceChild(C,q);p=C}}return p}function H(g){var h=G(g);if(h&&h.nodeName=="OBJECT")if(r.ie&&r.win){h.style.display="none";(function(){if(h.readyState==4){var l=G(g);if(l){for(var p in l)if(typeof l[p]=="function")l[p]=null;l.parentNode.removeChild(l)}}else setTimeout(arguments.callee,
10)})()}else h.parentNode.removeChild(h)}function G(g){var h=null;try{h=u.getElementById(g)}catch(l){}return h}function M(g,h,l){g.attachEvent(h,l);T[T.length]=[g,h,l]}function O(g){var h=r.pv;g=g.split(".");g[0]=parseInt(g[0],10);g[1]=parseInt(g[1],10)||0;g[2]=parseInt(g[2],10)||0;return h[0]>g[0]||h[0]==g[0]&&h[1]>g[1]||h[0]==g[0]&&h[1]==g[1]&&h[2]>=g[2]?true:false}function U(g,h,l,p){if(!(r.ie&&r.mac)){var q=u.getElementsByTagName("head")[0];if(q){l=l&&typeof l=="string"?l:"screen";if(p)fa=K=null;
if(!K||fa!=l){p=u.createElement("style");p.setAttribute("type","text/css");p.setAttribute("media",l);K=q.appendChild(p);if(r.ie&&r.win&&typeof u.styleSheets!=v&&u.styleSheets.length>0)K=u.styleSheets[u.styleSheets.length-1];fa=l}if(r.ie&&r.win)K&&typeof K.addRule==I&&K.addRule(g,h);else K&&typeof u.createTextNode!=v&&K.appendChild(u.createTextNode(g+" {"+h+"}"))}}}function E(g,h){if(ha){var l=h?"visible":"hidden";if(R&&G(g))G(g).style.visibility=l;else U("#"+g,"visibility:"+l)}}function A(g){return/[\\\"<>\.;]/.exec(g)!=
null&&typeof encodeURIComponent!=v?encodeURIComponent(g):g}var v="undefined",I="object",J="application/x-shockwave-flash",S="SWFObjectExprInst",F=window,u=document,P=navigator,ia=false,X=[function(){ia?e():f()}],N=[],aa=[],T=[],V,Z,ea,ga,R=false,Y=false,K,fa,ha=true,r=function(){var g=typeof u.getElementById!=v&&typeof u.getElementsByTagName!=v&&typeof u.createElement!=v,h=P.userAgent.toLowerCase(),l=P.platform.toLowerCase(),p=l?/win/.test(l):/win/.test(h);l=l?/mac/.test(l):/mac/.test(h);h=/webkit/.test(h)?
parseFloat(h.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false;var q=!+"\u000b1",B=[0,0,0],z=null;if(typeof P.plugins!=v&&typeof P.plugins["Shockwave Flash"]==I){if((z=P.plugins["Shockwave Flash"].description)&&!(typeof P.mimeTypes!=v&&P.mimeTypes[J]&&!P.mimeTypes[J].enabledPlugin)){ia=true;q=false;z=z.replace(/^.*\s+(\S+\s+\S+$)/,"$1");B[0]=parseInt(z.replace(/^(.*)\..*$/,"$1"),10);B[1]=parseInt(z.replace(/^.*\.(.*)\s.*$/,"$1"),10);B[2]=/[a-zA-Z]/.test(z)?parseInt(z.replace(/^.*[a-zA-Z]+(.*)$/,
"$1"),10):0}}else if(typeof F.ActiveXObject!=v)try{var C=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(C)if(z=C.GetVariable("$version")){q=true;z=z.split(" ")[1].split(",");B=[parseInt(z[0],10),parseInt(z[1],10),parseInt(z[2],10)]}}catch(D){}return{w3:g,pv:B,wk:h,ie:q,win:p,mac:l}}();(function(){if(r.w3){if(typeof u.readyState!=v&&u.readyState=="complete"||typeof u.readyState==v&&(u.getElementsByTagName("body")[0]||u.body))a();if(!R){typeof u.addEventListener!=v&&u.addEventListener("DOMContentLoaded",
a,false);if(r.ie&&r.win){u.attachEvent("onreadystatechange",function(){if(u.readyState=="complete"){u.detachEvent("onreadystatechange",arguments.callee);a()}});F==top&&function(){if(!R){try{u.documentElement.doScroll("left")}catch(g){setTimeout(arguments.callee,0);return}a()}}()}r.wk&&function(){R||(/loaded|complete/.test(u.readyState)?a():setTimeout(arguments.callee,0))}();d(a)}}})();(function(){r.ie&&r.win&&window.attachEvent("onunload",function(){for(var g=T.length,h=0;h<g;h++)T[h][0].detachEvent(T[h][1],
T[h][2]);g=aa.length;for(h=0;h<g;h++)H(aa[h]);for(var l in r)r[l]=null;r=null;for(var p in swfobject)swfobject[p]=null;swfobject=null})})();return{registerObject:function(g,h,l,p){if(r.w3&&g&&h){var q={};q.id=g;q.swfVersion=h;q.expressInstall=l;q.callbackFn=p;N[N.length]=q;E(g,false)}else p&&p({success:false,id:g})},getObjectById:function(g){if(r.w3)return j(g)},embedSWF:function(g,h,l,p,q,B,z,C,D,W){var ba={success:false,id:h};if(r.w3&&!(r.wk&&r.wk<312)&&g&&h&&l&&p&&q){E(h,false);c(function(){l+=
"";p+="";var Q={};if(D&&typeof D===I)for(var L in D)Q[L]=D[L];Q.data=g;Q.width=l;Q.height=p;L={};if(C&&typeof C===I)for(var ca in C)L[ca]=C[ca];if(z&&typeof z===I)for(var da in z)if(typeof L.flashvars!=v)L.flashvars+="&"+da+"="+z[da];else L.flashvars=da+"="+z[da];if(O(q)){ca=w(Q,L,h);Q.id==h&&E(h,true);ba.success=true;ba.ref=ca}else if(B&&m()){Q.data=B;i(Q,L,h,W);return}else E(h,true);W&&W(ba)})}else W&&W(ba)},switchOffAutoHideShow:function(){ha=false},ua:r,getFlashPlayerVersion:function(){return{major:r.pv[0],
minor:r.pv[1],release:r.pv[2]}},hasFlashPlayerVersion:O,createSWF:function(g,h,l){if(r.w3)return w(g,h,l)},showExpressInstall:function(g,h,l,p){r.w3&&m()&&i(g,h,l,p)},removeSWF:function(g){r.w3&&H(g)},createCSS:function(g,h,l,p){r.w3&&U(g,h,l,p)},addDomLoadEvent:c,addLoadEvent:d,getQueryParamValue:function(g){var h=u.location.search||u.location.hash;if(h){if(/\?/.test(h))h=h.split("?")[1];if(g==null)return A(h);h=h.split("&");for(var l=0;l<h.length;l++)if(h[l].substring(0,h[l].indexOf("="))==g)return A(h[l].substring(h[l].indexOf("=")+
1))}return""},expressInstallCallback:function(){if(Y){var g=G(S);if(g&&V){g.parentNode.replaceChild(V,g);if(Z){E(Z,true);if(r.ie&&r.win)V.style.display="block"}ea&&ea(ga)}Y=false}}}}(),_simulate_120_dpi=false;function IsTouchDevice(){return upk.browserInfo.isTouchDevice()}var upk=upk||{};
(function(a){var c="",d,e=false,f,j=false,m=false;a.getAgentInfo=function(){return typeof document.documentMode!="undefined"?navigator.userAgent+" - "+document.documentMode:navigator.userAgent};a.isSupportedBrowser=function(){var w=false;if(c=="MSIE"&&(d>=8||e&&f>=4))w=true;if(c=="Firefox"&&(d==24||d>=27))w=true;if(c=="Safari"&&d>=6)w=true;if(c=="Chrome"&&d>=32)w=true;if(a.isiOS())w=true;return w};a.isHardStop=function(){return c=="MSIE"&&d<=6};a.isMacOs=function(){return j};a.isFF3=function(){return m};
a.isFF=function(){return c=="Firefox"};a.isFF4=function(){return c=="Firefox"&&d==4};a.checkFFVersion=function(w){return c=="Firefox"&&d==w};a.isSafari=function(){return c=="Safari"||c=="Chrome"};a.isChrome=function(){return c=="Chrome"};a.isExplorer=function(){return c=="MSIE"};a.isIEVersion=function(w){return c=="MSIE"&&d==w};a.isIEQuirks=function(){if(a.isExplorer()==false)return false;return document.compatMode!=="CSS1Compat"};a.isIE8=function(){if(c!="MSIE")return false;return d==8&&e&&f==4};
a.isIE9=function(){if(c!="MSIE")return false;if(d==9&&e&&f==5)return true;if(d==7&&e&&f==5)return true;return e&&f==6&&(d!=10||document.documentMode!=10)};a.isIE10=function(){if(c!="MSIE")return false;return d==10&&e&&f==6&&document.documentMode==10};a.isIE10Compatibility=function(){if(c!="MSIE")return false;return e&&f==6&&(d!=10||document.documentMode!=10)};a.isIE10orHigher=function(){if(c!="MSIE")return false;return d>=10&&e&&f>=6&&document.documentMode>=10};a.isIE11=function(){if(c!="MSIE")return false;
return d==11&&e&&f==7&&document.documentMode==11};a.isIE11Compatibility=function(){if(c!="MSIE")return false;return e&&f==7&&(d!=11||document.documentMode!=11)};a.isActiveXEnabled=function(){var w=null,H="";try{new ActiveXObject("")}catch(G){H=G.name}try{w=!!new ActiveXObject("htmlfile")}catch(M){w=false}return H!="ReferenceError"&&w==false?false:true};a.isIE10Modern=function(){if(a.isIE10()==false)return false;return!a.isActiveXEnabled()};a.isiOS=function(){var w=navigator.platform;if(w==="iPad"||
w==="iPad Simulator"||w==="iPhone"||w==="iPod")return true;if(a.isChrome()&&a.isTouchDevice())return true;return false};a.isiOS5=function(){return navigator.userAgent.indexOf("CPU OS 5_")>=0};a.isiOS6=function(){return navigator.userAgent.indexOf("CPU OS 6_")>=0};a.isiOS7=function(){return navigator.userAgent.indexOf("CPU OS 7_")>=0};a.isTouchDevice=function(){return"ontouchstart"in window?window:null};a.isSoundSupported=function(){if(a.isiOS())return true;if(window.location.href.substr(0,7).toLowerCase()==
"file://")return false;if(swfobject.getFlashPlayerVersion().major>0)return true;return false};var i=navigator.userAgent,o=-1;if(i.indexOf("OPR")>=0){c="Opera";o=i.indexOf("OPR")+4}else if(i.indexOf("Chrome")>=0){c="Chrome";o=i.indexOf("Chrome")+7}else if(i.indexOf("Opera")>=0){c="Opera";o=i.indexOf("Opera")+6}else if(i.indexOf("Firefox")>=0){c="Firefox";o=i.indexOf("Firefox")+8}else if(i.indexOf("Safari")>=0){c="Safari";o=i.indexOf("Version")+8}else if(i.indexOf("MSIE")>=0){c="MSIE";o=i.indexOf("MSIE")+
5;var t=i.indexOf("Trident/");if(t>=0){e=true;f=parseInt(i.substr(t+8))}}else if(i.indexOf(" rv:")>=0){c="MSIE";o=i.indexOf(" rv:")+3;t=i.indexOf("Trident/");if(t>=0){e=true;f=parseInt(i.substr(t+8))}}else{c="";d=0}if(c!=""){d=parseInt(i.substr(o));if(isNaN(d)){o++;d=parseInt(i.substr(o))}parseInt(i.substr(o+2,1))}if(c=="Safari"&&isNaN(d))d=5;j=i.indexOf("Macintosh")>=0;m=c=="Firefox"&&i.indexOf("Firefox/3")>0})(upk.browserInfo={});function getDIV(a){return document.getElementById(a)}
function getDIVstyle(a){try{return document.getElementById(a).style}catch(c){return null}}function shiftTo(a,c,d){a=getDIVstyle(a);a.left=c+"px";a.top=d+"px"}function getUniWidth(a){return a.offsetWidth}function getUniHeight(a){return a.offsetHeight}function getClientWidth(a){return a.offsetWidth}function getClientHeight(a){return a.offsetHeight}function getObjHeight(a){return getDIV(a).offsetHeight}function getObjWidth(a){return getDIV(a).offsetWidth}
function getObjLeft(a){try{var c=getDIVstyle(a);return c.pixelLeft?c.pixelLeft:c.left!=""?parseInt(c.left):document.getElementById(a).offsetLeft}catch(d){return parseInt(a.offsetLeft)}}function getObjTop(a){try{var c=getDIVstyle(a);return c.pixelTop?c.pixelTop:c.top!=""?parseInt(c.top):document.getElementById(a).offsetTop}catch(d){return parseInt(a.offsetTop)}}function getInsideWindowWidth(){return window.innerWidth?window.innerWidth:document.body.clientWidth}
function getInsideWindowHeight(){return window.innerHeight?window.innerHeight:document.body.clientHeight}function getScrollLeft(){return window.pageXOffset||window.pageXOffset==0?window.pageXOffset:document.body.scrollLeft}function getScrollTop(){return window.pageYOffset||window.pageYOffset==0?window.pageYOffset:document.body.scrollTop}
function show(a,c){getDIVstyle(a).visibility="visible";if(c&&upk.browserInfo.isiOS())try{playMode=="S"&&showActObj.type=="Input"&&$("#"+a+" input").attr("readonly",true)}catch(d){}}function hide(a){getDIVstyle(a).visibility="hidden"}var __DPIwidth=0;
function getDpiInfo(){var a=document.getElementById("DPIInfoDiv");if(a!=null){__DPIwidth=a.clientWidth;if(__DPIwidth==0)__DPIwidth=96;__DPIwidth!=0&&document.getElementsByTagName("body")[0].removeChild(a)}return _simulate_120_dpi==true?120:__DPIwidth}function initDpiInfo(){document.write('<div id="DPIInfoDiv" style="visibility:hidden; width: 72pt; height: 1pt;">DPIINFODIV</div>')}function checkIEDPI(){return true}function Get_Element(a){return document.getElementById(a)}
function touch(a){if(a.originalEvent.touches&&a.originalEvent.touches.length)return a.originalEvent.touches[0];else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)return a.originalEvent.changedTouches[0]}function isNavBar(){return typeof navBar!=="undefined"}
function UserPreferences(){this.EnablePreferences=true;this.TimeStamp="000000000000";this.ShowLeadIn=this.PlayAudio="all";this.MarqueeColor="red";this.TryIt={};this.TryIt.EnableSkipping=true;this.DoIt={};this.DoIt.HotKey={};this.DoIt.HotKey.Ctrl="L";this.DoIt.HotKey.Shift="N";this.DoIt.HotKey.Alt="L";this.DefaultPlayMode="S";this.WebPageAutoPlayback=true;this.ApplicableOutlineDisplay="L";this.NavbarVolume=100;this.EnableShowDiagnostics=false}
UserPreferences.prototype.Copy=function(a){this.TimeStamp=a.TimeStamp;this.PlayAudio=a.PlayAudio;this.ShowLeadIn=a.ShowLeadIn;this.MarqueeColor=a.MarqueeColor;this.TryIt.EnableSkipping=a.TryIt.EnableSkipping;this.DoIt.HotKey.Ctrl=a.DoIt.HotKey.Ctrl;this.DoIt.HotKey.Shift=a.DoIt.HotKey.Shift;this.DoIt.HotKey.Alt=a.DoIt.HotKey.Alt;this.DefaultPlayMode=a.DefaultPlayMode;this.WebPageAutoPlayback=a.WebPageAutoPlayback;this.ApplicableOutlineDisplay=a.ApplicableOutlineDisplay;this.NavbarVolume=a.NavbarVolume;
this.EnableShowDiagnostics=a.EnableShowDiagnostics};
UserPreferences.prototype.Compare=function(a){if(this.PlayAudio!=a.PlayAudio)return true;if(this.ShowLeadIn!=a.ShowLeadIn)return true;if(this.MarqueeColor!=a.MarqueeColor)return true;if(this.TryIt.EnableSkipping!=a.TryIt.EnableSkipping)return true;if(this.DoIt.HotKey.Ctrl!=a.DoIt.HotKey.Ctrl)return true;if(this.DoIt.HotKey.Shift!=a.DoIt.HotKey.Shift)return true;if(this.DoIt.HotKey.Alt!=a.DoIt.HotKey.Alt)return true;if(this.DefaultPlayMode!=a.DefaultPlayMode)return true;if(this.WebPageAutoPlayback!=
a.WebPageAutoPlayback)return true;if(this.ApplicableOutlineDisplay!=a.ApplicableOutlineDisplay)return true;if(this.NavbarVolume!=a.NavbarVolume)return true;if(this.EnableShowDiagnostics!=a.EnableShowDiagnostics)return true;return false};UserPreferences.prototype.GetCookie=function(){return new Cookie(document,"OnDemandPlayer",365,"/",null,false)};
UserPreferences.prototype.LoadCookie=function(){var a=this.GetCookie();a.Load();if(a.PlayAudio)this.PlayAudio=a.PlayAudio;UserPref_PlayAudio_Original=this.PlayAudio;if(upk.browserInfo.isSoundSupported()==false)this.PlayAudio="none";if(!(UserPrefs.TimeStamp!="000000000000"&&(!a.TimeStamp||UserPrefs.TimeStamp>a.TimeStamp))){if(a.ShowLeadIn)this.ShowLeadIn=a.ShowLeadIn;if(a.MarqueeColor)this.MarqueeColor=a.MarqueeColor;if(a.TryIt_EnableSkipping)this.TryIt.EnableSkipping=a.TryIt_EnableSkipping=="true";
if(a.DoIt_HotKey_Ctrl)this.DoIt.HotKey.Ctrl=a.DoIt_HotKey_Ctrl;if(a.DoIt_HotKey_Shift)this.DoIt.HotKey.Shift=a.DoIt_HotKey_Shift;if(a.DoIt_HotKey_Alt)this.DoIt.HotKey.Alt=a.DoIt_HotKey_Alt;if(a.DefaultPlayMode)this.DefaultPlayMode=a.DefaultPlayMode;if(a.WebPageAutoPlayback)this.WebPageAutoPlayback=a.WebPageAutoPlayback;if(a.ApplicableOutlineDisplay)this.ApplicableOutlineDisplay=a.ApplicableOutlineDisplay;if(a.NavbarVolume)this.NavbarVolume=a.NavbarVolume;if(a.EnableShowDiagnostics)this.EnableShowDiagnostics=
a.EnableShowDiagnostics=="true"}};
UserPreferences.prototype.StoreCookie=function(){var a=this.GetCookie();a.TimeStamp=this.TimeStamp;a.PlayAudio=this.PlayAudio;a.ShowLeadIn=this.ShowLeadIn;a.MarqueeColor=this.MarqueeColor;a.TryIt_EnableSkipping=this.TryIt.EnableSkipping;a.DoIt_HotKey_Ctrl=this.DoIt.HotKey.Ctrl;a.DoIt_HotKey_Shift=this.DoIt.HotKey.Shift;a.DoIt_HotKey_Alt=this.DoIt.HotKey.Alt;a.DefaultPlayMode=this.DefaultPlayMode;a.WebPageAutoPlayback=this.WebPageAutoPlayback;a.ApplicableOutlineDisplay=this.ApplicableOutlineDisplay;
a.NavbarVolume=this.NavbarVolume;a.EnableShowDiagnostics=this.EnableShowDiagnostics;a.Store()};UserPreferences.prototype.GetUrlParamString=function(){return"PP_SOUND="+this.PlayAudio+"&PP_LEADIN="+this.ShowLeadIn+"&PP_SKIP="+(this.TryIt.EnableSkipping?"true":"false")+"&PP_MARQUEE="+this.MarqueeColor+"&PP_ENABLE="+(this.EnablePreferences?"true":"false")+"&PP_HOTKEY="+this.DoIt.HotKey.Ctrl+this.DoIt.HotKey.Shift+this.DoIt.HotKey.Alt};
UserPreferences.prototype.ParseUrlParamString=function(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].split("=");if(d[0].toUpperCase()=="PP_SOUND")this.PlayAudio=d[1];else if(d[0].toUpperCase()=="PP_LEADIN")this.ShowLeadIn=d[1];else if(d[0].toUpperCase()=="PP_MARQUEE")this.MarqueeColor=d[1];else if(d[0].toUpperCase()=="PP_SKIP")this.TryIt.EnableSkipping=d[1]=="true";else if(d[0].toUpperCase()=="PP_ENABLE")this.EnablePreferences=d[1]=="true";else if(d[0].toUpperCase()=="PP_HOTKEY"){this.DoIt.HotKey.Ctrl=
d[1].charAt(0);this.DoIt.HotKey.Shift=d[1].charAt(1);this.DoIt.HotKey.Alt=d[1].charAt(2)}}};var UserPrefs=new UserPreferences,UserPref_PlayAudio_Original="";typeof SetDefaultPreferences!=="undefined"&&SetDefaultPreferences();UserPrefs.EnablePreferences&&UserPrefs.LoadCookie();var paramstr=unescape(document.location.hash.substring(1));if(paramstr=="")paramstr=unescape(document.location.search.substring(1));UserPrefs.ParseUrlParamString(paramstr);
function OpenPreferencesDialog(a,c){if(UserPrefs.EnablePreferences){var d=a+"/html/preferences.html",e;e=upk.browserInfo.isChrome()?430:upk.browserInfo.isFF()?420:upk.browserInfo.isSafari()?350:412;var f=[];try{if(lms_IsUserProfileAvailable()){var j=lms_GetUserProfileUrl();if(j!="")f[f.length]="UserProfileUrl="+Escape.MyEscape(j)}}catch(m){}if(c)f[f.length]="nosound";for(j=0;j<f.length;j++){d+=j==0?"?":"&";d+=f[j]}if(IsTouchDevice()||upk.browserInfo.isIE10Modern()){e+=50;showDialog(d,-1,-1,400,e,
true,96,"../../../",false)}else window.open(d,"prefwin","width=500,height="+e+",resizable=1,scrollbars=0,top="+(screen.availHeight-290)/2+",left="+(screen.availWidth-500)/2)}else alert(R_preferences_disabled)}function SessionPreferences(){this.swipeInstructionShowed=false}SessionPreferences.prototype.GetCookie=function(){return new Cookie(document,"OnDemandPlayerSession",null,"/")};
SessionPreferences.prototype.LoadCookie=function(){var a=this.GetCookie();a.Load();if(a.swipeInstructionShowed)this.swipeInstructionShowed=a.swipeInstructionShowed};SessionPreferences.prototype.StoreCookie=function(){var a=this.GetCookie();a.swipeInstructionShowed=this.swipeInstructionShowed;a.Store()};var SessionPrefs=new SessionPreferences;
function GetContentPathName(){var a=window.location.pathname,c=a.indexOf("data/toc.html");if(c>0)return a.substr(0,c);c=a.indexOf("html/roles.html");if(c>0)return a.substr(0,c);c=a.indexOf("data/tpc/");if(c>0)return a.substr(0,c);c=a.indexOf("html/lmsui.html");if(c>0)return a.substr(0,c);return a}function UserRolesClass(){this.Filtering=false;this.Roles=[]}UserRolesClass.prototype.Copy=function(a){this.Filtering=a.Filtering;this.Roles=[];for(var c=0;c<a.Roles.length;c++)this.Roles[c]=a.Roles[c]};
UserRolesClass.prototype.Compare=function(a){if(this.Filtering!=a.Filtering)return true;if(this.Roles.length!=a.Roles.length)return true;for(var c=0;c<this.Roles.length;c++)if(this.Roles[c]!=a.Roles[c])return true;return false};UserRolesClass.prototype.GetCookie=function(){return new Cookie(document,"OnDemandPlayerRoles",90,GetContentPathName(),null,false)};
UserRolesClass.prototype.LoadCookie=function(){var a=this.GetCookie();a.Load();this.Filtering=false;if(a.Filtering)this.Filtering=a.Filtering=="true";this.Roles=[];if(a.Roles)this.Roles=a.Roles.split("+")};UserRolesClass.prototype.StoreCookie=function(){var a=this.GetCookie();a.Filtering=this.Filtering?"true":"false";a.Roles=this.Roles.join("+");a.Store()};UserRolesClass.prototype.GetUrlParamString=function(){return"PP_ROLEFILTERING="+(this.Filtering?"true":"false")+"&PP_ROLES="+encodeURIComponent(this.Roles.join("+"))};
UserRolesClass.prototype.ParseUrlParamString=function(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].split("=");if(d[0].toUpperCase()=="PP_ROLEFILTERING")this.Filtering=d[1]=="true";else if(d[0].toUpperCase()=="PP_ROLES"){this.Roles=[];if(d[1])this.Roles=d[1].split("+")}}};var UserRoles=new UserRolesClass;UserRoles.LoadCookie();UserRoles.ParseUrlParamString(paramstr);
function OpenRolesDialog(a){window.open(a+"/html/roles.html","roleswin","width=500,height=318,resizable=1,scrollbars=0,top="+(screen.availHeight-286)/2+",left="+(screen.availWidth-500)/2)}var intPos=window.location.search.toLowerCase().indexOf("aicc_url"),intPos2=window.location.search.toLowerCase().indexOf("aicc_sid");function getOnlyPath(a){for(;a.indexOf("\\")!=-1;)a=a.replace("\\","/");return a.substr(0,a.lastIndexOf("/"))}
if(intPos>-1&&intPos2>-1){if(LmsConfig.AiccAppletPath==""){var currentPgPath=window.location.protocol+"//"+window.location.host+getOnlyPath(window.location.pathname);fullPath=currentPgPath+"/"+lms_path+"aicc"}else fullPath=LmsConfig.AiccAppletPath;document.write("<div style='position: absolute;'><applet NAME='GetHTTPPostData' codebase='"+fullPath+"' archive='gethttppostdata.jar' code='GetHTTPPostData' width='1' height='1' MAYSCRIPT><param name='permissions' value='sandbox' /></applet></div>")}
function InsertRuntimeAPI(a){if(Kpath_launch==false)setTimeout(a,1);else{var c=findKPathAPIFrame(window);if(c==null){c=document.createElement("iframe");c.id="KPATH_API_FRAME";c.style.display="none";document.body.appendChild(c);if(a)if(navigator.appName=="Microsoft Internet Explorer")c.attachEvent("onload",a);else c.onload=a;c.src=Kpath_Runtime_API}else setTimeout(a,1)}}
function findKPathAPIFrame(a){var c=null,d=0,e=a;try{for(;e!=null;){c=e.document.getElementById("KPATH_API_FRAME");if(c!=null)return c.contentWindow;d++;if(d>7)break;if(e===e.parent)break;e=e.parent}if(a.top.opener!=null)return findKPathAPIFrame(a.top.opener)}catch(f){}return null}var _GlobalLmsComFactory=null;function GetLmsComFactory(){_GlobalLmsComFactory==null&&alert(R_initializelmscom_not_called);return _GlobalLmsComFactory}
function CheckForLMSAPI(){if(_lmsMode=="LMS"&&!(_GlobalLmsComFactory.api_type=="scorm2004"||_GlobalLmsComFactory.api_type=="scorm12"||_GlobalLmsComFactory.api_type=="aicc"||_GlobalLmsComFactory.api_type=="kpath"&&findKPathAPIFrame(window)))alert(R_scorm_noapi);_lmsMode=="KPT"&&!findKPathAPIFrame(window)&&alert(R_scorm_noapi)}function InitializeLmsCom(){_GlobalLmsComFactory=new LmsComFactory(window.location.search)}
function LmsComFactory(a){this.api_type="none";this.launch_arg=a;this.aicc_sid=this.aicc_url="";this.scorm_api_2004=this.scorm_api_12=null;a=this.launch_arg.substring(1).split("&");lmslog.addEntry(0,"LmsComFactory","strArgs",a);for(var c=0;c<a.length;c++){strArg=a[c];var d;d=this.CheckParam(strArg,"aicc_url=");if(d!="")this.aicc_url=d.substr(0,4).toLowerCase()!="http"?LmsConfig.AiccUrlProtocol+d:d;else{d=this.CheckParam(strArg,"aicc_sid=");if(d!="")this.aicc_sid=d}}if(LmsConfig.ScormVersion!=="1.2")this.scorm_api_2004=
this.FindScorm2004API();if(this.scorm_api_2004==null&&LmsConfig.ScormVersion!=="2004")this.scorm_api_12=this.FindScorm12API();if(this.aicc_url!=""&&this.aicc_sid!="")this.api_type="aicc";else if(Kpath_launch==true)this.api_type="kpath";else if(this.scorm_api_2004!=null)this.api_type="scorm2004";else if(this.scorm_api_12!=null)this.api_type="scorm12"}
LmsComFactory.prototype.CreateLmsCom=function(){if(this.api_type=="aicc")return new LmsComAICC(this.aicc_url,this.aicc_sid);else if(this.api_type=="scorm2004")return new LmsComScorm2004;else if(this.api_type=="kpath"){var a=new LmsComKPath;a.API=this.scorm_api_2004;return a}else if(this.api_type=="scorm12")return new LmsComScorm12;return PlayerConfig.EnableCookies?new LmsComCookie:new LmsComBase};
LmsComFactory.prototype.FindScorm12API=function(){try{var a=this.FindWindowScorm12API(window);if(a==null&&top.window.opener!=null&&!top.window.opener.closed)a=this.FindWindowScorm12API(top.window.opener);return a}catch(c){return null}};LmsComFactory.prototype.FindWindowScorm12API=function(a){for(var c=0;a.API==null&&a.parent!=null&&a.parent!=a;){c++;if(c>500){lmslog.addEntry(0,"FindScorm12API","",R_scorm_apideep);return null}a=a.parent}return a.API};
LmsComFactory.prototype.FindScorm2004API=function(){try{var a=this.FindWindowScorm2004API(window);if(a==null&&top.window.opener!=null&&!top.window.opener.closed)a=this.FindWindowScorm2004API(top.window.opener);return a}catch(c){return null}};LmsComFactory.prototype.FindWindowScorm2004API=function(a){for(var c=0;a.API_1484_11==null&&a.parent!=null&&a.parent!=a;){c++;if(c>500){lmslog.addEntry(0,"FindScorm2004API","",R_scorm_apideep);return null}a=a.parent}return a.API_1484_11};
LmsComFactory.prototype.CheckParam=function(a,c){var d=c.length,e="";if(a.substr(0,d).toLowerCase()==c)e=a.substring(d);return e};var LMS_PASSED="passed",LMS_FAILED="failed",LMS_COMPLETED="completed",LMS_INCOMPLETE="incomplete",LMS_NOT_ATTEMPTED="not attempted";Date.prototype.toSCORM=function(){return this.getFullYear()+"-"+("0"+(this.getMonth()+1)).slice(-2)+"-"+("0"+this.getDate()).slice(-2)+"T"+("0"+this.getHours()).slice(-2)+":"+("0"+this.getMinutes()).slice(-2)+":"+("0"+this.getSeconds()).slice(-2)};
function LmsComBase(a){this.status_obj=null;this.ordinal_number=0;this.credit=this.student_name=this.student_id=this.end_date=this.start_date="";this.lesson_status=LMS_NOT_ATTEMPTED;this.time=this.score=this.core_vendor=this.original_lesson_data=this.lesson_data=this.lesson_location=this.lesson_flag="";this.doit_child_time=this.mode_idle_time=this.idle_time=0;this.guid=this.owner=null;this.isTestIt=this.bigsco=this.session_active=false;if(a!=null){this.Copy(a);this.ParentLmsCom=a}this.object_type_name=
"LmsComBase"}LmsComBase.prototype.GetOrdinalNumber=function(){return this.ordinal_number};LmsComBase.prototype.SetOrdinalNumber=function(a){this.ordinal_number=a};LmsComBase.prototype.Copy=function(a){this.student_id=a.student_id;this.student_name=a.student_name;this.credit=a.credit;this.lesson_status=a.lesson_status;this.bigsco=a.bigsco;this.lesson_data=a.lesson_data;this.lesson_location=a.lesson_location};
LmsComBase.prototype.Begin=function(){this.start_date=(new Date).getTime();this.session_active&&alert(R_lmscom_already_active);return this.session_active=true};LmsComBase.prototype.End=function(){this.session_active||alert(R_lmscom_inactive);this.end_date=(new Date).getTime();this.session_active=false;return true};LmsComBase.prototype.LoadAPIAdapter=function(a){a()};LmsComBase.prototype.SendCompletionInfo=function(){};
LmsComBase.prototype.NotifyParent=function(){var a=this.ParentLmsCom;a&&!a.owner.closed&&a.owner.ListenChildClose&&a.owner.ListenChildClose()};LmsComBase.prototype.getReportedLessonStatus=function(){return this.lesson_status===LMS_PASSED?LmsConfig.ReportOnPass:this.lesson_status===LMS_FAILED?LmsConfig.ReportOnFail:this.lesson_status};LmsComBase.prototype.computeTime=function(a,c){return this.convertTotalSeconds((c-a-this.idle_time)/1E3)};
LmsComBase.prototype.computeTime2=function(a,c){return""+(c.getTime()-a-this.doit_child_time)/1E3};LmsComBase.prototype.convertTotalSeconds=function(a){var c=a%60;a-=c;var d=a%3600;a-=d;c=Math.round(c*100)/100;var e=c=new String(c);if(c.indexOf(".")!=-1){e=c.substring(0,c.indexOf("."));c.substring(c.indexOf(".")+1,c.length)}if(e.length<2)e="0"+e;c=e;a=a%3600!=0?0:a/3600;d=d%60!=0?0:d/60;if((new String(a)).length<2)a="0"+a;if((new String(d)).length<2)d="0"+d;return a+":"+d+":"+c};
LmsComBase.prototype.doGetUPKValue=function(a){if(this.ParentLmsCom)return this.ParentLmsCom.doGetUPKValue(a);return""};LmsComBase.prototype.doSetUPKValue=function(a,c){this.ParentLmsCom&&this.ParentLmsCom.doSetUPKValue(a,c)};LmsComBase.prototype.doUPKCommit=function(){this.ParentLmsCom&&this.ParentLmsCom.doUPKCommit()};LmsComBase.prototype.setInteraction=function(a,c){if(this.ParentLmsCom)return this.ParentLmsCom.setInteraction(a,c)};
LmsComBase.prototype.getAnsweredQuestions=function(){if(this.ParentLmsCom)return this.ParentLmsCom.getAnsweredQuestions();return{}};LmsComBase.prototype.setObjective=function(a,c){this.ParentLmsCom&&this.ParentLmsCom.setObjective(a,c)};LmsComBase.prototype.requestContinue=function(){this.ParentLmsCom&&this.ParentLmsCom.requestContinue()};LmsComBase.prototype.IsConnected=function(){if(this.ParentLmsCom)return this.ParentLmsCom.IsConnected();return false};
LmsComBase.prototype.OpenBasicStatus=function(){this.status_obj=new LmsBasicStatus;this.status_obj.status=this.lesson_status;return this.status_obj};
LmsComBase.prototype.OpenTopicStatus=function(a,c,d){this.status_obj=new LmsTopicStatus;this.status_obj.setRequiredMode(a,c,d);lmslog.addEntry(0,"OpenTopicStatus","RequiredMode",this.status_obj.requiredMode);this.status_obj.isScored=!!a.K;a=GetTopLevelLmsMode()=="LMS"?a:c;this.status_obj.setModeavail("S",a.S);this.status_obj.setModeavail("T",a.T);this.status_obj.setModeavail("K",a.K);this.status_obj.setModeavail("D",a.D);this.status_obj.setModeavail("P",a.P);this.status_obj.setModeavail("E",a.E);
lmslog.addEntry(0,"OpenTopicStatus","SeeIt",this.status_obj.getModeavail("S"));lmslog.addEntry(0,"OpenTopicStatus","TryIt",this.status_obj.getModeavail("T"));lmslog.addEntry(0,"OpenTopicStatus","KnowIt",this.status_obj.getModeavail("K"));lmslog.addEntry(0,"OpenTopicStatus","DoIt",this.status_obj.getModeavail("D"));lmslog.addEntry(0,"OpenTopicStatus","PrintIt",this.status_obj.getModeavail("P"));lmslog.addEntry(0,"OpenTopicStatus","TestIt",this.status_obj.getModeavail("E"));if(this.bigsco){this.status_obj.savedStatus=
this.lesson_data.charAt(0);this.lesson_data=this.lesson_data.substring(1)}this.status_obj.initTopicstat(this.lesson_data);return this.status_obj};
LmsComBase.prototype.OpenTopicLaunchStatus=function(a,c,d,e){this.status_obj=new LmsTopicLaunchStatus(a);this.status_obj.setRequiredMode(c,d,e);lmslog.addEntry(0,"OpenTopicLaunchStatus","RequiredMode",this.status_obj.requiredMode);this.status_obj.isScored=c.indexOf("K")!=-1;a=GetTopLevelLmsMode()=="LMS"?c:d;this.status_obj.setModeavail("S",a.indexOf("S")!=-1);this.status_obj.setModeavail("T",a.indexOf("T")!=-1);this.status_obj.setModeavail("K",a.indexOf("K")!=-1);this.status_obj.setModeavail("D",
a.indexOf("D")!=-1);this.status_obj.setModeavail("P",a.indexOf("P")!=-1);this.status_obj.setModeavail("E",a.indexOf("E")!=-1);lmslog.addEntry(0,"OpenTopicLaunchStatus","SeeIt",this.status_obj.getModeavail("S"));lmslog.addEntry(0,"OpenTopicLaunchStatus","TryIt",this.status_obj.getModeavail("T"));lmslog.addEntry(0,"OpenTopicLaunchStatus","KnowIt",this.status_obj.getModeavail("K"));lmslog.addEntry(0,"OpenTopicLaunchStatus","DoIt",this.status_obj.getModeavail("D"));lmslog.addEntry(0,"OpenTopicLaunchStatus",
"PrintIt",this.status_obj.getModeavail("P"));lmslog.addEntry(0,"OpenTopicLaunchStatus","TestIt",this.status_obj.getModeavail("E"));this.status_obj.initTopicstat(this.lesson_data);return this.status_obj};LmsComBase.prototype.OpenQuestionStatus=function(){this.status_obj=new LmsQuestionStatus;this.status_obj.status=LMS_NOT_ATTEMPTED;this.status_obj.savedStatus=this.lesson_data?Stat2Lms(this.lesson_data):LMS_NOT_ATTEMPTED;return this.status_obj};
LmsComBase.prototype.OpenAssessmentStatus=function(a,c,d){this.status_obj=new LmsAssessmentStatus;this.status_obj.hash=c;this.status_obj.questionlimit=d;var e=this.lesson_data,f,j=null,m=-1;if(e)if(this.bigsco)j=c;else{var i=e.indexOf("@");if(i>0){f=parseInt(e.substring(0,i));j=e.substring(i+1,i+f+1).replace(/ /g,"+");e=e.substring(i+f+1);i=e.indexOf("@");if(i>0){f=parseInt(e.substring(0,i));m=parseInt(e.substring(i+1,i+f+1));e=e.substring(i+f+1)}}}if(c===j&&e.length===a+1&&d===m){this.status_obj.savedStatus=
e.charAt(0);this.status_obj.status=e.charAt(0)==="I"?LMS_INCOMPLETE:LMS_NOT_ATTEMPTED;for(c=0;c<a;c++)this.status_obj.questionstatus[c]=e.charAt(c+1)}else{if(e&&!this.bigsco){this.status_obj.stateDiscarded=true;this.status_obj.savedStatus=e.charAt(0)==="I"?"N":e.charAt(0)}else this.status_obj.savedStatus="N";this.status_obj.status=LMS_NOT_ATTEMPTED;for(c=0;c<a;c++)this.status_obj.questionstatus[c]="N"}return this.status_obj};
LmsComBase.prototype.OpenTOCStatus=function(a,c){var d=new LmsTOCStatus;this.status_obj=d;var e=new TOCState(a,c);d.setTocState(e);this.lesson_data!=null&&this.lesson_data.length>0&&e.DeserializeTOC(this.lesson_data);return d};LmsComBase.prototype.SaveStatus=function(){this.status_obj&&this.status_obj.Save(this)};LmsComBase.prototype.utGetModeIndex=function(){this.ParentLmsCom&&this.ParentLmsCom.utGetModeIndex()};LmsComBase.prototype.utPushModeIndex=function(){this.ParentLmsCom&&this.ParentLmsCom.utPushModeIndex()};
LmsComBase.prototype.utPopModeIndex=function(){this.ParentLmsCom&&this.ParentLmsCom.utPopModeIndex()};LmsComBase.prototype.utRecordType=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordType(a)};LmsComBase.prototype.utRecordStartTime=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordStartTime(a)};LmsComBase.prototype.utRecordTimespan=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordTimespan(a)};LmsComBase.prototype.utRecordEndTime=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordEndTime(a)};
LmsComBase.prototype.utRecordCompletionStatus=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordCompletionStatus(a)};LmsComBase.prototype.utRecordSuccessStatus=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordSuccessStatus(a)};LmsComBase.prototype.utRecordScoreScaled=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordScoreScaled(a)};LmsComBase.prototype.utRecordFrameViewed=function(a){this.ParentLmsCom&&this.ParentLmsCom.utRecordFrameViewed(a)};
LmsComBase.prototype.utSendTestItResult=function(a){this.ParentLmsCom&&this.ParentLmsCom.utSendTestItResult(a)};function LmsComScorm12(){this.allow_launch=false;this.object_type_name="LmsComScorm12"}LmsComScorm12.prototype=new LmsComBase;LmsComScorm12.prototype.constructor=LmsComScorm12;LmsComScorm12.prototype.BaseClass=LmsComBase.prototype;
LmsComScorm12.prototype.Begin=function(){LmsComScorm12.prototype.BaseClass.Begin.call(this);lmslog.addEntry(0,"LmsComScorm12.Begin","","Start");if(this.API==null){this.allow_launch=true;return false}if(this.API.LMSInitialize("")=="false"){var a=this.API.LMSGetLastError(),c=this.API.LMSGetErrorString(a)+"\n"+this.API.LMSGetDiagnostic("");this.API=null;lms_ConnectionLost(a+" "+c);lmslog.addEntry(0,"LmsComScorm12.Begin","",c);return false}this.lesson_status=this.original_lesson_status=this.doLMSGetValue("cmi.core.lesson_status");
this.lesson_data=this.doLMSGetValue("cmi.suspend_data");this.lesson_location=this.doLMSGetValue("cmi.core.lesson_location");this.student_id=this.doLMSGetValue("cmi.core.student_id");this.student_name=this.doLMSGetValue("cmi.core.student_name");this.allow_launch=true;lmslog.addEntry(0,"LmsComScorm12.Begin","","LMS session started");return true};
LmsComScorm12.prototype.End=function(){LmsComScorm12.prototype.BaseClass.End.call(this);lmslog.addEntry(0,"LmsComScorm12.End","","Start");if(!this.allow_launch)return false;this.allow_launch=false;if(this.API==null)return false;this.lesson_status==LMS_INCOMPLETE?this.doLMSSetValue("cmi.core.exit","suspend"):this.doLMSSetValue("cmi.core.exit","");this.doLMSSetValue("cmi.core.session_time",this.computeTime(this.start_date,this.end_date));this.lesson_data&&this.doLMSSetValue("cmi.suspend_data",this.lesson_data);
this.lesson_location&&this.doLMSSetValue("cmi.core.lesson_location",this.lesson_location);this.SendCompletionInfo(true);if(this.API&&this.API.LMSFinish("")=="false"){var a=this.API.LMSGetLastError(),c=this.API.LMSGetErrorString(a)+"\n"+this.API.LMSGetDiagnostic("");this.API=null;lms_ConnectionLost(a+" "+c);lmslog.addEntry(0,"LmsComScorm12.End","",c);return false}this.API=null;lmslog.addEntry(0,"LmsComScorm12.End","","LMS session terminated");return true};
LmsComScorm12.prototype.SendCompletionInfo=function(a){if(this.lesson_status===LMS_NOT_ATTEMPTED)this.original_lesson_status===LMS_NOT_ATTEMPTED?this.doLMSSetValue("cmi.core.lesson_status",LMS_INCOMPLETE):this.doLMSSetValue("cmi.core.lesson_status",this.original_lesson_status);else this.doLMSSetValue("cmi.core.lesson_status",this.getReportedLessonStatus());if(this.score!==""){this.doLMSSetValue("cmi.core.score.raw",this.score);this.doLMSSetValue("cmi.core.score.min","0");this.doLMSSetValue("cmi.core.score.max",
"100")}a||this.doLMSCommit()};LmsComScorm12.prototype.LoadAPIAdapter=function(a){this.API=null;if(GetLmsComFactory())this.API=GetLmsComFactory().scorm_api_12;a()};LmsComScorm12.prototype.IsConnected=function(){return this.API!=null};LmsComScorm12.prototype.ErrorCodes={NoError:0,GeneralException:101,ElementCannotHaveChildren:202,ElementNotAnArray:203,NotInitialized:301,NotImplemented:401,InvalidSetValue:402,ElementIsReadOnly:403,ElementIsWriteOnly:404,IncorrectDataType:405};
LmsComScorm12.prototype.doLMSGetValue=function(a){if(this.API==null)return"";var c=this.API.LMSGetValue(a),d=this.API.LMSGetLastError();if(d!=this.ErrorCodes.NoError){c=this.API.LMSGetErrorString(d);lms_ConnectionLost(d+" "+c+", "+a);lmslog.addEntry(0,"doLMSGetValue","",R_scorm_getvalfail+a+" "+c);return""}lmslog.addEntry(1,"doLMSGetValue",a,c);return c};
LmsComScorm12.prototype.doLMSSetValue=function(a,c){if(this.API==null)return"false";if(this.API.LMSSetValue(a,c)=="false"){var d=this.API.LMSGetLastError();if(d!=this.ErrorCodes.NoError&&d!=this.ErrorCodes.NotImplemented){var e=this.API.LMSGetErrorString(d);lms_ConnectionLost(d+" "+e+", "+a+", "+c);lmslog.addEntry(0,"doLMSSetValue","",R_scorm_setvalfail+a+":"+c+" "+e);return"false"}}lmslog.addEntry(1,"doLMSSetValue",a,c);return"true"};
LmsComScorm12.prototype.doLMSCommit=function(){if(this.API==null)return"false";if(this.API.LMSCommit("")=="false"){var a=this.API.LMSGetLastError(),c=this.API.LMSGetErrorString(a);lms_ConnectionLost(a+" "+c);lmslog.addEntry(0,"doLMSCommit","",c);this.API=null;return"false"}lmslog.addEntry(1,"doLMSCommit","","");return"true"};function LmsComScorm2004(){this.allow_launch=false;this.object_type_name="LmsComScorm2004";this.lesson_data_location="cmi.suspend_data"}LmsComScorm2004.prototype=new LmsComBase;
LmsComScorm2004.prototype.constructor=LmsComScorm2004;LmsComScorm2004.prototype.BaseClass=LmsComBase.prototype;
LmsComScorm2004.prototype.Begin=function(){LmsComScorm2004.prototype.BaseClass.Begin.call(this);lmslog.addEntry(0,"LmsComScorm2004.Begin","","Start");if(this.API==null){this.allow_launch=true;return false}if(this.API.Initialize("")=="false"){var a=this.API.GetLastError(),c=this.API.GetErrorString(a)+"\n"+this.API.GetDiagnostic("");this.API=null;lms_ConnectionLost(a+" "+c);lmslog.addEntry(0,"LmsComScorm2004.Begin","",c);return false}this.lesson_status=this.doGetValue("cmi.completion_status");if(this.lesson_status===
"unknown")this.lesson_status=LMS_NOT_ATTEMPTED;else if(this.lesson_status===LMS_COMPLETED){a=this.doGetValue("cmi.success_status");if(a===LMS_PASSED||a===LMS_FAILED)this.lesson_status=a}this.original_lesson_status=this.lesson_status;this.lesson_data=this.doGetValue(this.lesson_data_location);this.lesson_location=this.doGetValue("cmi.location");this.student_id=this.doGetValue("cmi.learner_id");this.student_name=this.doGetValue("cmi.learner_name");this.allow_launch=true;lmslog.addEntry(0,"LmsComScorm2004.Begin",
"","LMS session started");return true};
LmsComScorm2004.prototype.End=function(){LmsComScorm2004.prototype.BaseClass.End.call(this);lmslog.addEntry(0,"LmsComScorm2004.End","","Start");if(!this.allow_launch)return false;this.allow_launch=false;if(this.API==null)return false;this.lesson_status==LMS_INCOMPLETE?this.doSetValue("cmi.exit","suspend"):this.doSetValue("cmi.exit","normal");this.doSetValue("cmi.session_time",this.computeTime(this.start_date,this.end_date));this.lesson_data&&this.doSetValue(this.lesson_data_location,this.lesson_data);
this.lesson_location&&this.doSetValue("cmi.location",this.lesson_location);this.SendCompletionInfo(true);if(this.API&&this.API.Terminate("")=="false"){var a=this.API.GetLastError(),c=this.API.GetErrorString(a)+"\n"+this.API.GetDiagnostic("");this.API=null;lms_ConnectionLost(a+" "+c);lmslog.addEntry(0,"LmsComScorm2004.End","",c);return false}this.API=null;lmslog.addEntry(0,"LmsComScorm2004.End","","LMS session terminated");return true};
LmsComScorm2004.prototype.LoadAPIAdapter=function(a){this.API=null;if(GetLmsComFactory())this.API=GetLmsComFactory().scorm_api_2004;a()};
LmsComScorm2004.prototype.SendCompletionInfo=function(a){var c=this.getReportedLessonStatus();if(c===LMS_NOT_ATTEMPTED)c=this.original_lesson_status;if(c==LMS_PASSED||c==LMS_FAILED){this.doSetValue("cmi.success_status",c);this.doSetValue("cmi.completion_status",LMS_COMPLETED)}else this.doSetValue("cmi.completion_status",c);if(this.score!==""){this.doSetValue("cmi.score.raw",this.score);this.doSetValue("cmi.score.scaled",this.score/100);this.doSetValue("cmi.score.min","0");this.doSetValue("cmi.score.max",
"100")}a||this.doCommit()};LmsComScorm2004.prototype.convertTotalSeconds=function(a){var c=a%60;a-=c;var d=a%3600;a-=d;c=Math.round(c*100)/100;var e=c=new String(c);if(c.indexOf(".")!=-1){e=c.substring(0,c.indexOf("."));c.substring(c.indexOf(".")+1,c.length)}if(e.length<2)e="0"+e;c=e;a=a%3600!=0?0:a/3600;d=d%60!=0?0:d/60;if((new String(a)).length<2)a="0"+a;if((new String(d)).length<2)d="0"+d;return"PT"+a+"H"+d+"M"+c+"S"};LmsComScorm2004.prototype.IsConnected=function(){return this.API!=null};
LmsComScorm2004.prototype.ErrorCodes={NoError:0,GeneralException:101,GeneralInitializationFailure:102,AlreadyInitialized:103,ContentInstanceTerminated:104,GeneralTerminationFailure:111,TerminationBeforeInitialization:112,TerminationAfterTermination:113,RetrieveDataBeforeInitialization:122,RetrieveDataAfterTermination:123,StoreDataBeforeInitialization:132,StoreDataAfterTermination:133,CommitBeforeInitialization:142,CommitAfterTermination:143,GeneralArgumentError:201,GeneralGetFailure:301,GeneralSetFailure:351,
GeneralCommitFailure:391,UndefinedDataModelElement:401,UnimplementedDataModelElement:402,DataModelElementValueNotInitialized:403,DataModelElementIsReadOnly:404,DataModelElementIsWriteOnly:405,DataModelElementTypeMismatch:406,DataModelElementValueOutOfRange:407,DataModelDependencyNotEstablished:408,KPathTimeout:1501,KPathConnect:1502,KPathBusy:1503};
LmsComScorm2004.prototype.doGetValue=function(a){if(this.API==null)return"";var c=this.API.GetValue(a),d=this.API.GetLastError();if(d!=this.ErrorCodes.NoError&&d!=this.ErrorCodes.DataModelElementValueNotInitialized)if(d==this.ErrorCodes.KPathTimeout&&this.object_type_name=="LmsComKPath"){lmslog.addEntry(0,"doGetValue","","KCenter timeout");d=this.API.GetValue("upk.idle_time");lmslog.addEntry(0,"doGetValue","upk.idle_time",d);this.idle_time+=d;this.mode_idle_time+=d;lmslog.addEntry(0,"doGetValue",
"idle_time",this.idle_time);return this.doGetValue(a)}else{c=this.API.GetErrorString(d);lms_ConnectionLost(d+" "+c+", "+a);lmslog.addEntry(0,"doGetValue","",R_scorm_getvalfail+a+" "+c);return""}lmslog.addEntry(1,"doGetValue",a,c);return c};
LmsComScorm2004.prototype.doSetValue=function(a,c){if(this.API==null)return"false";if(this.API.SetValue(a,c)=="false"){var d=this.API.GetLastError();if(d!=this.ErrorCodes.NoError&&d!=this.ErrorCodes.UnimplementedDataModelElement)if(d==this.ErrorCodes.KPathTimeout&&this.object_type_name=="LmsComKPath"){lmslog.addEntry(0,"doSetValue","","KCenter timeout");d=this.API.GetValue("upk.idle_time");lmslog.addEntry(0,"doSetValue","upk.idle_time",d);this.idle_time+=d;this.mode_idle_time+=d;lmslog.addEntry(0,
"doSetValue","idle_time",this.idle_time);return this.doSetValue(a,c)}else{var e=this.API.GetErrorString(d);lms_ConnectionLost(d+" "+e+", "+a+", "+c);lmslog.addEntry(0,"doSetValue","",R_scorm_setvalfail+a+":"+c+" "+e);return"false"}}lmslog.addEntry(1,"doSetValue",a,c);return"true"};
LmsComScorm2004.prototype.doCommit=function(){if(this.API==null)return"false";if(this.API.Commit("")=="false"){var a=this.API.GetLastError(),c=this.API.GetErrorString(a);this.API=null;lms_ConnectionLost(a+" "+c);lmslog.addEntry(0,"doCommit","",c);return"false"}lmslog.addEntry(1,"doCommit","","");return"true"};
function LmsComKPath(a){this.allow_launch=false;if(a!=null){this.Copy(a);this.ParentLmsCom=a}this.object_type_name="LmsComKPath";this.lesson_data_location="upk.sco_data";this.commitNeeded=this.commitActive=false}LmsComKPath.prototype=new LmsComScorm2004;LmsComKPath.prototype.constructor=LmsComKPath;LmsComKPath.prototype.BaseClass=LmsComScorm2004.prototype;
LmsComKPath.prototype.Begin=function(){lmslog.addEntry(0,"LmsComKPath.Begin","","Start");var a=LmsComKPath.prototype.BaseClass.Begin.call(this);this.doSetValue("upk.launch_from",GetTopLevelLmsMode());lmslog.addEntry(0,"LmsComKPath.Begin","","LMS session started");return a};
LmsComKPath.prototype.SendCompletionInfo=function(a){var c=this.getReportedLessonStatus();if(c===LMS_NOT_ATTEMPTED)this.doSetValue("cmi.completion_status",LMS_NOT_ATTEMPTED);else{if(c==LMS_PASSED||c==LMS_FAILED){this.doSetValue("cmi.success_status",c);this.doSetValue("cmi.completion_status",LMS_COMPLETED)}else this.doSetValue("cmi.completion_status",c);if(this.score!==""){this.doSetValue("cmi.score.raw",this.score);this.doSetValue("cmi.score.scaled",this.score/100);this.doSetValue("cmi.score.min",
"0");this.doSetValue("cmi.score.max","100")}a||this.doCommit()}};LmsComKPath.prototype.LoadAPIAdapter=function(a){if(this.API)a();else{var c=findKPathAPIFrame(window);if(c&&c.LoadRuntime&&this.guid){this.deferred_callback=a;var d=this;c.LoadRuntime(this.guid,0,0,0,function(e,f,j,m){d.LoadAPIAdapterCallback(e,f,j,m)},upk.browserInfo.isTouchDevice(),this.isTestIt)}else a()}};
LmsComKPath.prototype.LoadAPIAdapterCallback=function(a,c,d,e){if(a=="succeeded"&&c==this.guid){this.API=d.GetAPI();lmslog.addEntry(0,"LoadAPIAdapterCallback","","KPath adapter bound");try{this.deferred_callback()}catch(f){}}else{if(a=="no SCO")this.API=null;else alert(R_scorm_noapi+" "+e);lmslog.addEntry(0,"LoadAPIAdapterCallback","",e);this.deferred_callback()}};LmsComKPath.prototype.doGetUPKValue=function(a){a=this.doGetValue(a);if(a==="")a=-1;return a};
LmsComKPath.prototype.doSetUPKValue=function(a,c){this.doSetValue(a,c)};LmsComKPath.prototype.doUPKCommit=function(){this.doCommit()};
LmsComKPath.prototype.doCommit=function(){if(this.API==null)return"false";if(this.commitActive){lmslog.addEntry(0,"doCommit","commitActive==true","");this.commitNeeded=true;return"true"}lmslog.addEntry(1,"doCommit","","");if(upk.browserInfo.isTouchDevice())c=null;else{this.commitActive=true;var a=this,c=function(e,f){a.doCommitCallback(e,f)}}if(this.API.Commit("",c)=="false"){this.commitActive=false;c=this.API.GetLastError();var d=this.API.GetErrorString(c);if(c==this.ErrorCodes.KPathTimeout&&this.object_type_name==
"LmsComKPath"){lmslog.addEntry(0,"doCommit","","KCenter timeout");c=this.API.GetValue("upk.idle_time");lmslog.addEntry(0,"doCommit","upk.idle_time",c);this.idle_time+=c;this.mode_idle_time+=c;lmslog.addEntry(0,"doCommit","idle_time",this.idle_time);return this.doCommit()}else{this.API=null;lms_ConnectionLost(c+" "+d);lmslog.addEntry(0,"doCommit","",d);return"false"}}return"true"};
LmsComKPath.prototype.doCommitCallback=function(a,c){lmslog.addEntry(1,"doCommitCallback","","");this.commitActive=false;if(!a){this.API=null;lms_ConnectionLost(c);lmslog.addEntry(0,"doCommitCallback","",c)}if(this.commitNeeded){this.commitNeeded=false;this.doCommit()}};
LmsComKPath.prototype.setInteraction=function(a,c){if(this.API){var d=c.status_obj,e=this.doGetValue("cmi.interactions._count");if(a==-1)a=e;a>=e&&this.doSetValue("cmi.interactions."+a+".id",c.guid);this.doSetValue("cmi.interactions."+a+".type",d.getQuestionType());this.doSetValue("cmi.interactions."+a+".timestamp",(new Date).toSCORM());this.doSetValue("cmi.interactions."+a+".weighting","1");if(d.getResult()){this.doSetValue("cmi.interactions."+a+".learner_response",d.getLearnerResponse());this.doSetValue("cmi.interactions."+
a+".result",d.getResult())}this.doCommit();return a}};LmsComKPath.prototype.getAnsweredQuestions=function(){var a={};if(!this.API)return a;for(var c=this.doGetValue("cmi.interactions._count"),d=0;d<c;d++){var e=this.doGetValue("cmi.interactions."+d+".id");a[e]={index:d};a[e].weighting=this.doGetValue("cmi.interactions."+d+".weighting");a[e].result=this.doGetValue("cmi.interactions."+d+".result")}return a};
LmsComKPath.prototype.setObjective=function(a,c){if(this.API){this.doSetValue("cmi.objectives."+a+".id",c.objectiveGuid=="PRIMARYOBJ"?"PRIMARYOBJ":"OBJ_"+c.objectiveGuid);this.doSetValue("cmi.objectives."+a+".score.scaled",c.score/100);this.doSetValue("cmi.objectives."+a+".completion_status",c.completed?"completed":"incomplete");this.doSetValue("cmi.objectives."+a+".success_status",c.completed?"passed":"failed")}};
LmsComKPath.prototype.requestContinue=function(){this.doSetValue("adl.nav.request","continue")};LmsComKPath.prototype.utGetModeIndex=function(){this.mode_index=this.doGetValue("upk.modes._count")};LmsComKPath.prototype.utPushModeIndex=function(){this.saved_mode_index=this.mode_index;this.utGetModeIndex()};LmsComKPath.prototype.utPopModeIndex=function(){this.mode_index=this.saved_mode_index;delete this.saved_mode_index};
LmsComKPath.prototype.utRecordType=function(a){this.doSetValue("upk.modes."+this.mode_index+".type",a)};LmsComKPath.prototype.utRecordStartTime=function(a){this.doSetValue("upk.modes."+this.mode_index+".start_time",a.toSCORM());this.mode_idle_time=0};LmsComKPath.prototype.utRecordEndTime=function(a){this.doSetValue("upk.modes."+this.mode_index+".end_time",a.toSCORM())};
LmsComKPath.prototype.utRecordTimespan=function(a){this.doSetValue("upk.modes."+this.mode_index+".timespan",a-this.mode_idle_time/1E3)};LmsComKPath.prototype.utRecordCompletionStatus=function(a){this.doSetValue("upk.modes."+this.mode_index+".completion_status",a)};LmsComKPath.prototype.utRecordSuccessStatus=function(a){this.doSetValue("upk.modes."+this.mode_index+".success_status",a)};
LmsComKPath.prototype.utRecordScoreScaled=function(a){this.doSetValue("upk.modes."+this.mode_index+".score.scaled",a)};LmsComKPath.prototype.utRecordFrameViewed=function(a){this.doSetValue("upk.modes."+this.mode_index+".frame_viewed",a);this.doSetValue("cmi.session_time",this.computeTime(this.start_date,(new Date).getTime()));this.doCommit()};LmsComKPath.prototype.utSendTestItResult=function(a){this.doSetValue("upk.modes."+this.mode_index+".test_result",a);this.doCommit()};
function LmsComAICC(a,c){this.allow_launch=false;this.aicc_url=a;this.aicc_sid=c;this.app=document.applets.GetHTTPPostData;this.object_type_name="LmsComAICC"}LmsComAICC.prototype=new LmsComBase;LmsComAICC.prototype.constructor=LmsComScorm12;LmsComAICC.prototype.BaseClass=LmsComBase.prototype;LmsComAICC.prototype.Begin=function(){LmsComAICC.prototype.BaseClass.Begin.call(this);lmslog.addEntry(0,"LmsComAICC.Begin","","Start");this.hacpGetparam();lmslog.addEntry(0,"LmsComAICC.Begin","","about to log paramvalues")};
LmsComAICC.prototype.End=function(){LmsComAICC.prototype.BaseClass.End.call(this);lmslog.addEntry(0,"LmsComAICC.End","","Start");if(!this.allow_launch)return false;this.allow_launch=false;var a=this.hacpGetpostdata();a="command=putparam&version="+LmsConfig.AiccVersion+"&session_id="+this.aicc_sid+"&aicc_data="+escape(a)+"&";lmslog.addEntry(0,"LmsComAICC.End","params",a);a=this.app.GetData(unescape(this.aicc_url),a);lmslog.addEntry(0,"LmsComAICC.End","strData",a);a="version="+LmsConfig.AiccVersion+
"&command=ExitAU&session_id="+this.aicc_sid+"&";lmslog.addEntry(0,"LmsComAICC.End","params",a);a=this.app.GetData(unescape(this.aicc_url),a);lmslog.addEntry(0,"LmsComAICC.End","strData",a)};var closingAmp=true;
LmsComAICC.prototype.hacpGetparam=function(){lmslog.addEntry(0,"hacpGetparam","","Start");var a="";a="version="+LmsConfig.AiccVersion+"&command=GetParam&session_id="+this.aicc_sid;if(closingAmp)a+="&";lmslog.addEntry(0,"hacpGetparam","params",a);a=this.app.GetData(unescape(this.aicc_url),a);lmslog.addEntry(0,"hacpGetparam","strData",a);var c,d,e=false;a+=" ";for(var f=a.split("\r"),j=0;j<f.length;j++){var m=f[j],i=trimValue(m.substring(0,m.indexOf("="))),o=trimValue(m.substring(m.indexOf("=")+1));
if(i.toLowerCase()=="error"){c=o;e=true}if(i.toLowerCase()=="error_text")d=o;if(i.toLowerCase()=="aicc_data"){this.aicc_data=a.substring(a.indexOf(m.substring(0,m.indexOf("=")))+m.substring(0,m.indexOf("=")).length+1);e=true}}if(e)if(c==0){f=get_group_content("core",this.aicc_data).split("\r");for(j=0;j<f.length;j++){m=f[j];i=trimValue(m.substring(0,m.indexOf("=")));o=trimValue(m.substring(m.indexOf("=")+1));if(i.toLowerCase()=="student_id")this.student_id=o;if(i.toLowerCase()=="student_name")this.student_name=
o;if(i.toLowerCase()=="lesson_status"){this.lesson_status=o.toLowerCase().charAt(0);if(o.indexOf(",")!=-1)this.lesson_flag=trimValue(o.substring(o.indexOf(",")+1)).toLowerCase();if(this.lesson_status=="p")this.lesson_status=LMS_PASSED;if(this.lesson_status=="c")this.lesson_status=LMS_COMPLETED;if(this.lesson_status=="f")this.lesson_status=LMS_FAILED;if(this.lesson_status=="i")this.lesson_status=LMS_INCOMPLETE;if(this.lesson_status=="n")this.lesson_status=LMS_NOT_ATTEMPTED;this.original_lesson_status=
this.lesson_status}if(i.toLowerCase()=="lesson_location")this.lesson_location=o;if(i.toLowerCase()=="credit")this.credit=o;if(i.toLowerCase()=="score")this.score=o;if(i.toLowerCase()=="time")this.time=o}this.lesson_data=this.lesson_status==LMS_INCOMPLETE||this.lesson_status==LMS_COMPLETED||this.lesson_status==LMS_PASSED||this.lesson_status==LMS_FAILED?trimValue(get_group_content("core_lesson",this.aicc_data)):"";this.core_vendor=trimValue(get_group_content("core_vendor",this.aicc_data));this.allow_launch=
true}else{alert(R_error_unexp+d);lmslog.addEntry(0,"hacpGetparam","","Unable to continue because of the following error: "+d)}else{alert(R_error_svr+unescape(this.aicc_url)+"\r\r - "+a);lmslog.addEntry(0,"hacpGetparam","","Unable to post to server "+unescape(this.aicc_url)+" - "+a)}};
LmsComAICC.prototype.hacpGetpostdata=function(){lmslog.addEntry(0,"hacpGetpostdata","","Start");var a="";a="[CORE]\r\n";a+="Lesson_Location=\r\n";var c=this.getReportedLessonStatus();if(c===LMS_NOT_ATTEMPTED)c=this.original_lesson_status;a+=this.lesson_status===LMS_INCOMPLETE?"Lesson_Status="+c+", suspend\r\n":"Lesson_Status="+c+"\r\n";lmslog.addEntry(0,"hacpGetpostdata","is_assess",this.is_assess);a+=this.score!==""?"Score="+this.score+"\r\n":"Score=\r\n";a+="Time="+this.computeTime(this.start_date,
this.end_date)+"\r\n";a+="[CORE_LESSON]\r\n";a+=this.lesson_data+"\r\n";lmslog.addEntry(0,"hacpGetpostdata","NewAiccData",a);return a};function get_group_content(a,c){for(var d="",e=c.split("\r"),f=false,j=0;j<e.length;j++){var m=trimValue(e[j]);if(m.substr(0,1)=="[")f=m.toLowerCase().indexOf("["+a.toLowerCase()+"]")>=0?true:false;else if(f)d+=m+"\r\n"}return d}
function trimValue(a){for(var c=0,d=a.length,e=0;e<a.length;e++)if(a.substr(e,1)!=" "&&a.substr(e,1)!="\t"&&a.substr(e,1)!="\n"&&a.substr(e,1)!="\r"){c=e;break}if(e==a.length)return"";for(e=a.length-1;e>0;e--)if(a.substr(e,1)!=" "&&a.substr(e,1)!="\t"&&a.substr(e,1)!="\n"&&a.substr(e,1)!="\r"){d=e;break}if(e==0)d=0;return a.substring(c,d+1)}LmsComAICC.prototype.IsConnected=function(){return true};function LmsComCookie(){this.allow_launch=false;this.object_type_name="LmsComCookie"}
LmsComCookie.prototype=new LmsComBase;LmsComCookie.prototype.constructor=LmsComCookie;LmsComCookie.prototype.BaseClass=LmsComBase.prototype;LmsComCookie.prototype.Begin=function(){LmsComCookie.prototype.BaseClass.Begin.call(this)};LmsComCookie.prototype.End=function(){LmsComCookie.prototype.BaseClass.End.call(this)};function LmsBasicStatus(){this.status=LMS_NOT_ATTEMPTED}LmsBasicStatus.prototype.getStatus=function(){return this.status};LmsBasicStatus.prototype.setStatus=function(a){this.status=a};
LmsBasicStatus.prototype.Save=function(a){a.lesson_status=this.status};LmsTopicStatus.prototype=new LmsBasicStatus;LmsTopicStatus.prototype.constructor=LmsTopicStatus;LmsTopicStatus.prototype.BaseClass=LmsBasicStatus.prototype;function LmsTopicStatus(){this.score="";this.passed=false;this.modes=[];this.modes.S=new Mode("S");this.modes.T=new Mode("T");this.modes.K=new Mode("K");this.modes.D=new Mode("D");this.modes.P=new Mode("P");this.modes.E=new Mode("E");this.anylaunched=false}
LmsTopicStatus.prototype.Save=function(a){a.lesson_data=a.bigsco?"":this.getStatusstring();a.lesson_status=this.getLMSStatus();a.score=this.getScore()};LmsTopicStatus.prototype.setModeavail=function(a,c){this.modes[a].avail=c};LmsTopicStatus.prototype.getModeavail=function(a){return this.modes[a].avail};LmsTopicStatus.prototype.setModestatus=function(a,c){if(this.modes[a].avail)this.modes[a].complete=c;else lmslog.addEntry(0,"setModestatus","","Invalid call of setModestatus")};
LmsTopicStatus.prototype.getModestatus=function(a){return this.modes[a].complete};LmsTopicStatus.prototype.setRequiredMode=function(a,c,d){this.requiredMode=GetTopLevelLmsMode()=="LMS"?d||this._getRequiredMode(a):this._getRequiredMode(c)};LmsTopicStatus.prototype._getRequiredMode=function(a){for(var c=0;c<6;c++)if(a["EKTSPD".charAt(c)])return"EKTSPD".charAt(c);return"None"};LmsTopicStatus.prototype.GetRequiredMode=function(){return this.requiredMode};
LmsTopicStatus.prototype.initTopicstat=function(a){lmslog.addEntry(0,"initTopicstat","","Start");lmslog.addEntry(0,"initTopicstat","s string",a);lmslog.addEntry(0,"initTopicstat","s.length",a.length);if(a.length!=0){var c=a.split(",");for(a=0;a<=c.length-1;a++){lmslog.addEntry(0,"initTopicstat","f["+a+"]",c[a]);if(c[a].charAt(1)=="=")this.modes[c[a].charAt(0)].complete=this.modeIscomplete(c[a].substr(2,1));else if(c[a].substr(0,5)=="PASS=")this.passed=c[a].substr(5,1)!=="0";else if(c[a].substr(0,
6)=="SCORE=")this.score=c[a].substr(6)}}};LmsTopicStatus.prototype.clearTopicstat=function(){this.score="";this.passed=false;for(var a in this.modes)this.modes[a].complete=false};
LmsTopicStatus.prototype.getStatusstring=function(){lmslog.addEntry(0,"get_statusstring","","Start");var a="";for(x in this.modes){if(a.length!=0)a+=",";a+=this.modes[x].id+"="+(this.modes[x].complete?"C":"I")}if(this.modes.E.complete)a+=",PASS="+(this.passed?"1":"0");else if(this.requiredMode==="K"&&this.modes.K.complete&&this.isScored)a+=",PASS="+(this.passed?"1":"0")+",SCORE="+this.score;lmslog.addEntry(0,"get_statusstring","dataString",a);return a};
LmsTopicStatus.prototype.getStatus=function(){var a="";if(this.isComplete())if(this.requiredMode==="K"&&this.isScored||this.requiredMode==="E")a=this.passed?LMS_PASSED:LMS_FAILED;else{a=LMS_COMPLETED;if(this.savedStatus=="P"||this.savedStatus=="F")a=this.savedStatus}else{a=LMS_INCOMPLETE;if(this.savedStatus=="P"||this.savedStatus=="F"||this.savedStatus=="C")a=Stat2Lms(this.savedStatus)}return a};
LmsTopicStatus.prototype.getLMSStatus=function(){if(this.isComplete()&&!this.anylaunched)return LMS_NOT_ATTEMPTED;return this.getStatus()};LmsTopicStatus.prototype.getScore=function(){return this.score};LmsTopicStatus.prototype.isComplete=function(){lmslog.addEntry(0,"is_complete","","Start");var a=false;if(this.requiredMode==="None"||this.modes[this.requiredMode].complete)a=true;lmslog.addEntry(0,"is_complete","iscomp",a);return a};
LmsTopicStatus.prototype.modeIscomplete=function(a){var c=false;lmslog.addEntry(0,"modeIscomplete","","Start");if(a=="C")c=true;else if(a=="I")c=false;lmslog.addEntry(0,"modeIscomplete","ret",c);return c};LmsTopicStatus.prototype.isRequired=function(a){return this.requiredMode===a};LmsTopicLaunchStatus.prototype=new LmsTopicStatus;LmsTopicLaunchStatus.prototype.constructor=LmsTopicStatus;LmsTopicLaunchStatus.prototype.BaseClass=LmsTopicStatus.prototype;
function LmsTopicLaunchStatus(a){this.mode=this.modes[a];this.score="";this.passed=false;this.anylaunched=true}LmsTopicLaunchStatus.prototype.Save=function(a){this.BaseClass.Save.call(this,a)};LmsTopicLaunchStatus.prototype._getRequiredMode=function(a){for(var c=0;c<6;c++)if(a.indexOf("EKTSPD".charAt(c))!=-1)return"EKTSPD".charAt(c);return"None"};LmsTopicLaunchStatus.prototype.getResult=function(){return this.passed?"correct":"incorrect"};LmsTopicLaunchStatus.prototype.getQuestionType=function(){return"other"};
LmsTopicLaunchStatus.prototype.getLearnerResponse=function(){return""};function Mode(a){this.complete=this.avail=false;this.id=a}LmsQuestionStatus.prototype=new LmsBasicStatus;LmsQuestionStatus.prototype.constructor=LmsQuestionStatus;LmsQuestionStatus.prototype.BaseClass=LmsBasicStatus.prototype;function LmsQuestionStatus(){this.result=this.learner_response=this.question_type=null}LmsQuestionStatus.prototype.Save=function(a){a.lesson_status=this.status;a.lesson_data=Lms2Stat(this.getStatus())};
LmsQuestionStatus.prototype.getStatus=function(){return this.status===LMS_NOT_ATTEMPTED?this.savedStatus:this.status};LmsQuestionStatus.prototype.getQuestionType=function(){return this.question_type};LmsQuestionStatus.prototype.setQuestionType=function(a){return this.question_type=a};LmsQuestionStatus.prototype.getLearnerResponse=function(){return this.learner_response};LmsQuestionStatus.prototype.setLearnerResponse=function(a){return this.learner_response=a};
LmsQuestionStatus.prototype.getResult=function(){return this.result};LmsQuestionStatus.prototype.setResult=function(a){return this.result=a};LmsAssessmentStatus.prototype=new LmsBasicStatus;LmsAssessmentStatus.prototype.constructor=LmsAssessmentStatus;LmsAssessmentStatus.prototype.BaseClass=LmsBasicStatus.prototype;function LmsAssessmentStatus(){this.score="";this.questionstatus=[];this.stateDiscarded=false}
LmsAssessmentStatus.prototype.Save=function(a){a.lesson_status=this.status;a.score=this.status!=LMS_INCOMPLETE&&this.status!=LMS_NOT_ATTEMPTED?this.score:"";var c="";if(!a.bigsco){c=this.hash.length+"@"+this.hash;var d=this.questionlimit.toString();c+=d.length+"@"+d}c+=this.status==LMS_NOT_ATTEMPTED?this.savedStatus:Lms2Stat(this.status);for(d=0;d<this.questionstatus.length;d++)c+=this.questionstatus[d];a.lesson_data=c};
LmsAssessmentStatus.prototype.getStatus=function(){return this.status===LMS_NOT_ATTEMPTED?Stat2Lms(this.savedStatus):this.status};LmsAssessmentStatus.prototype.getLMSStatus=function(){return this.status};LmsAssessmentStatus.prototype.getScore=function(){return this.score};LmsAssessmentStatus.prototype.setScore=function(a){return this.score=a};LmsTOCStatus.prototype=new LmsBasicStatus;LmsTOCStatus.prototype.constructor=LmsTOCStatus;LmsTOCStatus.prototype.BaseClass=LmsBasicStatus.prototype;
function LmsTOCStatus(){}LmsTOCStatus.prototype.getStatus=function(){return Stat2Lms(this.getTocState().GetStatus(0))};LmsTOCStatus.prototype.Save=function(a){a.lesson_status=this.getStatus();var c=this.getTocState();a.lesson_data=c.SerializeTOC()};LmsTOCStatus.prototype.getTocState=function(){return this.tocstate};LmsTOCStatus.prototype.setTocState=function(a){return this.tocstate=a};function NodeState(){this.Status="N";this.Score=null;this.ChildrenStatus=""}
function TOCState(a,c){this.NodeCounter=a;this.TocVersion=c;this.InitInLookupTable()}TOCState.prototype.SetStatus=function(a,c){this.LookUpTable[a]||(this.LookUpTable[a]=new NodeState);this.LookUpTable[a].Status=c};TOCState.prototype.GetStatus=function(a){return this.LookUpTable[a].Status};TOCState.prototype.SetScore=function(a,c){this.LookUpTable[a]||(this.LookUpTable[a]=new NodeState);this.LookUpTable[a].Score=c};TOCState.prototype.GetScore=function(a){return this.LookUpTable[a].Score};
TOCState.prototype.SetChildren=function(a,c){this.LookUpTable[a]||(this.LookUpTable[a]=new NodeState);this.LookUpTable[a].ChildrenStatus=c};TOCState.prototype.GetChildren=function(a){return this.LookUpTable[a].ChildrenStatus};
TOCState.prototype.DeserializeTOC=function(a){var c=0,d,e=a.indexOf("@");if(e>0){c=parseInt(a.substring(0,e));d=a.substring(e+1,e+c+1);if(d==this.TocVersion){a=a.substring(e+c+2);e=a.indexOf("@");if(e>0){c=parseInt(a.substring(0,e));a=a.substring(e+1,e+c+1);if(a.length==c){a=this.RLESDecode(a);this.DeserializeLookUpTable(a)}}}}};
TOCState.prototype.DeserializeLookUpTable=function(a){for(var c=0,d="",e=0;e<a.length;e++){d=a.charAt(e);this.SetStatus(c,d);for(d="";e<a.length-1&&a.charAt(e+1)>="0"&&a.charAt(e+1)<="9";){e++;d+=a.charAt(e)}d.length>0&&this.SetScore(c,parseInt(d));if(e<a.length-1&&a.charAt(e+1)=="{"){d=a.indexOf("}",e+2);this.SetChildren(c,a.substring(e+2,d));e=d}c++}};
TOCState.prototype.SerializeTOC=function(){var a=this.RLESEncode(this.SerializeLookupTable());return this.TocVersion.length+"@"+this.TocVersion+" "+a.length+"@"+a};TOCState.prototype.SerializeLookupTable=function(){for(var a="",c=0;c<this.NodeCounter;c++){var d=this.LookUpTable[c].Status,e=this.LookUpTable[c].ChildrenStatus;d||(d="N");a+=d;if(e)a+="{"+e+"}"}return a};
TOCState.prototype.InitInLookupTable=function(){this.LookUpTable=[];for(var a=0;a<this.NodeCounter;a++)this.LookUpTable[a]=new NodeState;this.SetStatus(0,"I")};TOCState.prototype.RLESEncode=function(a){var c="",d=0,e="";c=a.charAt(0);for(var f=d=1;f<a.length;f++)if(a.charAt(f)==c)d++;else{if(d>2){e+="#";e+=d;e+=c}else e+=a.substring(f-d,f);c=a.charAt(f);d=1}if(d>2){e+="#";e+=d;e+=c}else e+=a.substring(f-d,f);return e};
TOCState.prototype.RLESDecode=function(a){for(var c="",d="",e=0;e<a.length;e++)if(a.charAt(e)=="#"){d="";for(e++;a.charAt(e)>="0"&&a.charAt(e)<="9";){d+=a.charAt(e);e++}d=parseInt(d);for(var f=0;f<d;f++)c+=a.charAt(e)}else c+=a.charAt(e);return c};function Lms2Stat(a){return a.charAt(0).toUpperCase()}function Stat2Lms(a){return[LMS_PASSED,LMS_FAILED,LMS_COMPLETED,LMS_INCOMPLETE,LMS_NOT_ATTEMPTED]["PFCIN".indexOf(a)]}
function LogEntry(a,c,d,e,f){this.logType=c;this.funcName=d;this.varName=e;this.msgValue=f;this.dateTime=(new Date).getTime()-a}LogEntry.prototype.GetTableRow=function(){var a="#006600";if(this.logType===1)a="#000033";var c=this.varName;if(c==="")c="&nbsp;";var d=this.msgValue;if(d==="")d="&nbsp;";var e="<tr>";e+="<td align='right'>"+this.dateTime/1E3+"</td>";e+="<td style='color:"+a+";'>"+this.funcName+"</td>";e+="<td>"+c+"</td>";e+="<td>"+d+"</td>";e+="</tr>";return e};
function Log(a){this.traceWindow=null;this.logArray=[];this.enabled=a;this.startDateTime=new Date;this.changed=true;this.windowReady=false;this.startLog()}Log.prototype.startLog=function(){if(this.enabled){this.addEntry(0,"initLog","","Log Intialized");this.openTraceWindow()}};Log.prototype.addEntry=function(a,c,d,e){if(this.enabled){this.logArray.push(new LogEntry(this.startDateTime.getTime(),a,c,d,e));this.changed=true;this.traceWindow&&this.windowReady&&this.traceWindow.UpdateTraceStack()}};
Log.prototype.writeLog=function(a,c){var d=c;if(d>this.logArray.length||d==0)d=this.logArray.length;var e="<table width='600'>";e+="<tr>";e+="<th colspan=4>Session start: "+this.startDateTime+"</th>";e+="</tr>";e+="<tr>";e+="<th>time</th>";e+="<th>function</th>";e+="<th>variable</th>";e+="<th>message</th>";e+="</tr>";var f;if(a==0)for(var j=this.logArray.length-d;j<this.logArray.length;j++){f=this.logArray[j];e+=f.GetTableRow(j)}else for(j=this.logArray.length-1;j>=this.logArray.length-d;j--){f=this.logArray[j];
e+=f.GetTableRow(j)}e+="</table>";this.changed=false;this.windowReady=true;return e};Log.prototype.writeDetails=function(a){return this.logArray[a].GetDetails()};Log.prototype.openTraceWindow=function(){if(this.traceWindow==null){this.changed=true;this.traceWindow=window.open(lms_path+"html/lmsdebug.html","_blank")}};var _lmsMode=null,_lmsParser=null;
function InitLmsMode(a){if(_lmsParser==null){_lmsParser=new UrlParser;_lmsParser.Parse();if(IsTouchDevice()&&a=="player")if(parent==null||window.location==parent.location)if(_lmsParser.GetParameter("directlaunch")==null)_lmsParser.params.directlaunch=2;if(a=="player"){if(_lmsParser.GetParameter("directlaunch")!=null)_lmsMode=Kpath_launch==true?"KPT":"Cookie"}else if(a=="lmstart"){if(_lmsParser.GetParameter("toc")==null)_lmsMode=_lmsParser.GetParameter("dhtml")!=null?Kpath_launch==true?"KPT":"Cookie":
"LMS"}else if(a=="toc"){if(_lmsParser.GetParameter("sco")==null)_lmsMode=Kpath_launch==true?"KPT":"Cookie"}else alert(R_undefined_lms_source)}}function GetTopLevelLmsMode(){return _GetTopLevelLmsMode(this)}function _GetTopLevelLmsMode(a){var c=a._lmsMode;if(c==null)return _GetTopLevelLmsMode(a.lms_store.parentW);return c}var lms_initialized=false,lms_store,lmslog;
function lms_InitPage(a,c,d,e){if(lms_initialized==true)setTimeout(e,1);else{__Ialert("lms_InitPage called with parameters:"+a+","+c+","+d+","+e);var f=false;if(window.lmsModes)f=typeof window.lmsModes=="string"?window.lmsModes.indexOf("E")>-1:window.lmsModes.E===true;lms_store={window:window,childIndex:a,parentW:c,cguid:d,isTestIt:f,callbackfunction:e};if(!c||c.closed){lmslog=new Log(LmsConfig.DebugMode);InitializeLmsCom();InsertRuntimeAPI(lms_LoadRuntimeComplete)}else if(c.lms_initialized){lmslog=
c.lmslog;setTimeout(lms_LoadRuntimeComplete,1)}}}
function lms_LoadRuntimeComplete(){__Ialert("lms_LoadRuntimeComplete() called");if(lms_store.parentW&&!lms_store.parentW.closed)lms_store.parentW.GetChildLmsCom(lms_store);else if(!lms_store.parentW&&!lms_store.cguid&&!window.bigScoItemCount)document.LmsCom=PlayerConfig.EnableCookies?new LmsComCookie:new LmsComBase;else{CheckForLMSAPI();document.LmsCom=_GlobalLmsComFactory.CreateLmsCom()}var a=document.LmsCom;a.guid=lms_store.cguid;a.isTestIt=lms_store.isTestIt;a.owner=window;a.LoadAPIAdapter(lms_LoadAdapterComplete)}
function lms_UpdateUI(a){try{parent&&parent.updateUI&&parent.updateUI(a)}catch(c){}}var hasClosed=false;
function lms_ClosePage(a){__Ialert("lms_ClosePage() called");if(hasClosed!=true){hasClosed=true;var c=document.LmsCom;if(c&&c.session_active){var d=c.child;d&&d.session_active&&d.owner&&!d.owner.closed&&d.owner.lms_ClosePage(true);(d=c.ancillaryChild)&&d.session_active&&d.owner&&!d.owner.closed&&d.owner.lms_ClosePage(true);window._closePage&&_closePage();if(c.session_active){c.SaveStatus();c.End();c.NotifyParent()}a&&window.close()}}}
function lms_ConnectionLost(a){window.ConnectionLostEvent&&ConnectionLostEvent(a);lms_store.parentW&&!lms_store.parentW.closed&&lms_store.parentW.lms_ConnectionLost(a)}function lms_IsConnected(){var a=document.LmsCom;if(a)return a.IsConnected();return false}function lms_IsKPathLogoutAvailable(){return!!window.Kpath_logout_available}
function _logout(a){if(lms_store.parentW&&!lms_store.parentW.closed&&lms_store.parentW._logout)lms_store.parentW._logout(false);else if(window.Kpath_logout_URL)if(GetTopLevelLmsMode()=="LMS")window.parent.parent.location.replace(Kpath_logout_URL);else if(a)if(window.opener&&!window.opener.closed){window.opener.location.replace(Kpath_logout_URL);window.close()}else window.location.replace(Kpath_logout_URL);else window.location.replace(Kpath_logout_URL)}
function lms_IsUserProfileAvailable(){__alert("lms_IsUserProfileAvailable() called");if(GetTopLevelLmsMode()!=="KPT")return false;return document.LmsCom.doGetUPKValue("upk.anonymous")=="0"}function lms_GetUserProfileUrl(){__alert("lms_GetUserProfileUrl() called");if(Kpath_launch==false)return"";return Kpath_profile_URL+"?UPKLaunch=true"}function GetNoSound(){return lms_store.parentW&&!lms_store.parentW.closed?lms_store.parentW.GetNoSound():lms_store.noSound}
function SetNoSound(a){lms_store.noSound=a}var _lms_show_all_alert=false;function __alert(a){if(_lms_show_alert||_lms_show_all_alert)alert(a+"\nfile: "+_lms_module_name)}function __Ialert(a){if(_lms_show_alert||_lms_show_Ialert||_lms_show_all_alert)alert(a+"\nfile: "+_lms_module_name)}var urlParser=null,_lmsEnvironment="";function InitLmsEnvironment(){_lmsEnvironment=urlParser.GetParameter("toc")!=null?"TOC":urlParser.GetParameter("dhtml")!=null?"DHTML":"LMS"}
function decodeHTMLString(a){return a=replaceString("&amp;","&",a)}function fixHTMLString(a){a=replaceString("<","&lt;",a);a=replaceString(">","&gt;",a);a=replaceString("'","&#39;",a);a=replaceString('"',"&#34;",a);for(var c=a.indexOf("\\\\");c>=0;){a=a.substr(0,c)+a.substr(c+1);c=a.indexOf("\\\\",c+1)}return a}var _deviceDPI=0;
function InitUI(){if(_deviceDPI==0)_deviceDPI=getDpiInfo();if(_deviceDPI==0)setTimeout("InitUI()",100);else{if(_deviceDPI!=96)if(getDPICookie()==false){this.location.replace("../../../html/unsuppdpi.html?"+Escape.MyEscape(AbsUrl(this.location.href)));return}urlParser=new UrlParser;urlParser.Parse();concept=decodeHTMLString(concept);concept=resolveIfRelative(concept);if(concept.length==0&&assetType=="T")concept="./tpc/"+topicID+"/leadin.html";topicName=decodeHTMLString(topicName);InitLmsEnvironment();
InitLmsMode("lmstart");var a=0,c=urlParser.GetParameter("lmsChildIndex");if(c>0)a=c;c=(assetType=="B"?originalType:assetType)+"_"+topicID;if(concept.length==0)if(assetType=="B"||assetType=="C")c=null;if(_lmsMode!=null)if(urlParser.GetParameter("nosound")==null)if(Sound_Init(soundIsExported,UserPref_PlayAudio_Original,null,false)==false)return;var d;switch(assetType){case "T":d="topic";break;case "A":d="assessment";break;case "Q":d="question";break;case "C":d="concept"}_lmsEnvironment=="TOC"?ctxHelper.SetContext("toc",
d):ctxHelper.SetContext(d);lms_InitPage(_lmsMode==null?a:-1,_lmsMode==null?window.parent:null,c,"InitUI2()")}}
function InitUI2(){urlParser.GetParameter("nosound")!=null&&SetNoSound(true);if(topicDescriptor==null)topicDescriptor=LoadDescriptor();assetType=="Q"&&BuildQuestionConcept();assetType=="A"&&BuildAssessmentConcept();if(!topicDescriptor.userdefined)if(concept.length>0)concept=urlParser.GetCorrectUrl(concept,true);try{getInnerWidth()>0&&getInnerHeight()>0&&this.frames.myframe.location.replace(urlParser.GetCorrectUrl("../../../html/lmsui.html"))}catch(a){}}
function getInnerWidth(){if(window.innerWidth)return window.innerWidth;else if(document.documentElement.clientWidth)return document.documentElement.clientWidth;else if(document.body.clientWidth)return document.body.clientWidth}function getInnerHeight(){if(window.innerHeight)return window.innerHeight;else if(document.documentElement.clientHeight)return document.documentElement.clientHeight;else if(document.body.clientHeight)return document.body.clientHeight}
function GetBasePath(){base=this.location.href;k=base.indexOf("?");if(k<0)k=base.indexOf("#");if(k>=0)base=base.substr(0,k);k=base.lastIndexOf("/");return b=base.substr(0,k)}
function BuildQuestionConcept(){var a=topicDescriptor.userdefined;concept=topicDescriptor.concept;if(a.toLowerCase()=="true"){a=AbsUrl("../../../../html/udq_callback.html");var c=0,d=0;switch(topicDescriptor.remediation.toLowerCase()){case "always":c=3;d=1;break;case "userasks":d=c=1;break;case "incorrect":c=2;d=1;break;case "resultsonly":c=0;d=1;break;case "none":d=c=0}concept+="?kpnextpage="+a+"&kpmode=0&kpremed="+c+"&kpfeedbk="+d+"&kprnda=0"}if(_lmsMode=="LMS")concept+="&lms";concept+="&question="+
topicID+"&host=player"}function AbsUrl(a){return a}function BuildAssessmentConcept(){var a=urlParser.GetCorrectUrl(concept,true);concept=topicDescriptor.concept+"&assessment="+topicID;concept+="&concept="+a;if(_lmsMode=="LMS")concept+="&lms";a=urlParser.GetParameter("owner");if(a!=null)if(a.length>0)concept+="&owner="+a}function OnQuestionContinue(){parent.OnQuestionContinue&&parent.OnQuestionContinue()}function OnPrepareDialog(){this.frames.myframe.OnPrepareDialog()}
function StartTopic(a,c,d){this.frames.myframe.launchTopic(a,c,d)}function getConceptPageWidth(){return this.frames.myframe.getConceptPageWidth()}function SetCtxexParam(a){urlParser.AddParameter("ctxex",a)}function RoleStatusChanged(){this.frames.myframe.UpdateSeeAlso(CheckSeeAlso())}function OpenSeeAlso(a,c){this.frames.myframe.OpenSeeAlso(a,c)}function OnNotesClosed(){this.frames.myframe.OnNotesClosed()}
function ConnectionLostEvent(a){this.frames.myframe.ConnectionLostEvent?this.frames.myframe.ConnectionLostEvent(a):alert(R_status_inst_offline+"\n"+R_status_error_prefix+a)}var topicDescriptor=null;
function topicDescriptorObj(a,c,d,e,f,j,m,i,o,t,w,H){this.title=a;this.type=c;this.tpc=d;this.playmodes=e;this.jumpInArray=f;this.leadin=j;this.concept=m;this.printitname=encodeURIComponent(i);this.userdefined=o;this.remediation=t;this.seealsoroot="";this.seealsolinks=[];this.qreference=w;this.bigsco=H}function seeAlsoLink(a,c,d,e){this.type=a;this.title=c;this.guid=d;this.filtered=false;this.empty=e}function JumpInPoint(a,c,d){this.label=a;this.frame_id=c;this.modes=d}
function LoadDescriptor(a){var c=null;try{if(window.location.href.substr(0,7).toLowerCase()=="http://"||window.location.href.substr(0,8).toLowerCase()=="https://")c=new XMLHttpRequest;if(window.location.href.substr(0,7).toLowerCase()=="file://"&&IsTouchDevice())c=new XMLHttpRequest}catch(d){}finally{if(c==null)c=new ActiveXObject("Microsoft.XMLHTTP")}c.open("GET",a==null?"descriptor.xml":"../"+a+"/descriptor.xml",false);c.send();if(c.status==200||location.hostname==""&&c.status==0)if(c.responseXML==
null||c.responseXML.documentElement==null){var e=null;try{e=new ActiveXObject("Microsoft.XMLDOM");e.async=false;e.loadXML(c.responseText)}catch(f){e=(new window.DOMParser).parseFromString(c.responseText,"application/xml")}var j=c.responseText;c={};c.responseXML=e;c.responseText=j}var m=getDescriptorItem(c,"PlayModes");jumpInArray=[];nodes=c.responseXML.getElementsByTagName("JumpIn");for(e=0;e<nodes.length;e++){n=nodes[e];if(n.textContent)label=n.textContent;else if(n.text)label=n.text;else if(n.firstChild.data)label=
n.firstChild.data;for(j=0;j<n.attributes.length;j++){t=n.attributes[j];if(t.nodeName.toLowerCase()=="frameid")frameid=t.value;if(t.nodeName.toLowerCase()=="modes")modes=t.value}jumpInArray[jumpInArray.length]=new JumpInPoint(fixHTMLString(label),frameid,modes)}_leadIn="../html/empty.html";nodes=c.responseXML.getElementsByTagName("Leadin");if(nodes.length>0)_leadIn="./tpc/"+topicID+"/leadin.html";_concept="";nodes=c.responseXML.getElementsByTagName("Concept");if(nodes.length>0){n=nodes[0];if(n.textContent)_concept=
n.textContent;else if(n.text)_concept=n.text;else if(n.firstChild.data)_concept=n.firstChild.data;if(_concept.indexOf("odrel://")==0)_concept=resolve(_concept)}_title=getDescriptorItem(c,"Title");_type=getDescriptorItem(c,"Type");_printitname=getDescriptorItem(c,"PrintItName");_userdefined=getDescriptorItem(c,"UserDefined");_remediation=getDescriptorItem(c,"Remediation");if(_remediation=="")_remediation="Always";_qreference=getDescriptorItem(c,"Reference");_bigsco=getDescriptorItem(c,"BigSco");m=
new topicDescriptorObj(_title,_type,topicID,m,jumpInArray,_leadIn,_concept,_printitname,_userdefined,_remediation,_qreference,_bigsco);nodes=c.responseXML.getElementsByTagName("SeeAlsoRoot");if(nodes.length>0){n=nodes[0];e="";if(n.textContent)e=n.textContent;else if(n.text)e=n.text;else if(n.firstChild.data)e=n.firstChild.data;m.seealsoroot=e}nodes=c.responseXML.getElementsByTagName("SeeAlso");for(e=0;e<nodes.length;e++){n=nodes[e];var i=c="";a="";var o=false;for(j=0;j<n.attributes.length;j++){var t=
n.attributes[j];if(t.nodeName=="Type")c=getTextContent(t);if(t.nodeName=="Title")i=getTextContent(t);if(t.nodeName=="Guid")a=getTextContent(t);if(t.nodeName=="Empty")o=true}if(c.length>0&&i.length>0)m.seealsolinks[m.seealsolinks.length]=new seeAlsoLink(c,i,a,o)}return m}function UpdateSeeAlsoLinks(a){for(var c=0;c<a.seealsolinks.length;c++)a.seealsolinks[c].filtered=parent._getFilteredStatus(a.seealsolinks[c].guid)}
function CheckSeeAlso(){if(topicDescriptor.seealsoroot.length==0)return false;if(topicDescriptor.seealsolinks.length==0)return false;if(_lmsEnvironment=="TOC"){if(parent.CheckSeeAlso()==false)return false;UpdateSeeAlsoLinks(topicDescriptor);for(var a=0;a<topicDescriptor.seealsolinks.length;a++)if(topicDescriptor.seealsolinks[a].filtered==false)return true;return false}return true}
function getDescriptorItem(a,c){var d="";try{var e=a.responseXML.getElementsByTagName(c);if(e.length>0){n=e[0];if(n.textContent!=null)d=n.textContent;else if(n.text!=null)d=n.text;else if(n.firstChild.data!=null)d=n.firstChild.data}}catch(f){}return d}function getTextContent(a){try{if(a.value)return a.value;else if(a.text)return a.text;else if(a.firstChild.data)return a.firstChild.data;return""}catch(c){return""}}
function lms_LoadAdapterComplete(){__Ialert("lms_LoadAdapterComplete() called");var a=document.LmsCom;a.Begin();var c=window.assetType;if((Kpath_launch||a.bigsco)&&c==="B")c="C";if(lms_store.cguid)switch(c){case "T":var d=a.OpenTopicStatus(lmsModes,playerModes,a.isTestIt||typeof window.lmsReqMode==="undefined"?null:window.lmsReqMode);if(d.isComplete()){if(d.GetRequiredMode()==="None"||a.lesson_status===LMS_INCOMPLETE){d.anylaunched=true;a.SaveStatus();a.SendCompletionInfo();a.NotifyParent()}}else{a.SaveStatus();
a.SendCompletionInfo();a.NotifyParent()}break;case "C":a.OpenBasicStatus();a.status_obj.setStatus(LMS_COMPLETED);a.SaveStatus();a.SendCompletionInfo();a.NotifyParent();break;case "A":a.OpenBasicStatus();a.itemCount=window.itemCount;a.hash=window.hash;a.questionlimit=window.questionlimit;break;default:a.OpenBasicStatus()}else a.OpenBasicStatus();if(c==="B"){a.bigScoItemCount=window.bigScoItemCount;a.bigScoHash=window.bigScoHash;a.lesson_data||a.status_obj.setStatus(LMS_NOT_ATTEMPTED)}lms_initialized=
true;setTimeout(lms_store.callbackfunction,1)}function GetChildLmsCom(a){__Ialert("lms_GetChildLmsCom() called");(a.window.document.LmsCom=document.LmsCom).owner=a.window}var _lms_module_name="lms_lmstart.js",_lms_show_alert=false,_lms_show_Ialert=false;function splitUri(a){a=a.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);a.shift();return a=[a[1]+"://"+a[3],a[4],a[6]+a[8]]}
function combine(a,c){var d=c;if(d.indexOf("odrel://")==0)d=d.substr(8);if(d=="")d=".";var e=splitUri(a),f=e[0];e=e[1];if(e.charAt(0)=="/")e=e.substr(1);if(e.charAt(e.length-1)=="/")e=e.substr(0,e.length-1);if(d.charAt(d.length-1)=="/")d=d.substr(0,d.length-1);e=e.split("/");var j=d.split("/");if(j.length>2&&j[0]==""&&j[1]==""){f=f.split(":")[0]+":/";for(d=2;d<j.length;d++)f+="/"+j[d];return f}var m=[];for(d=0;d<e.length;d++)m[d]=e[d];for(d=0;d<j.length;d++)if(j[d]==".."){if(m.length>0)m=m.slice(0,
m.length-1)}else if(j[d]!=".")if(j[d]=="")m=[];else m[m.length]=j[d];e="";for(d=0;d<m.length;d++)e+="/"+m[d];return f+e}function getRootUrl(){if(typeof isTocHtml!="undefined"){var a=document.location.href;return a.substr(0,a.lastIndexOf("/"))}var c=splitUri(document.location.href);a=c[0];c=c[1];if(c.charAt(0)=="/")c=c.substr(1);c=c.split("/");var d;for(d=c.length-1;c[d]!="tpc"&&d>=0;d--);if(d>0&&(c[d-1]=="data"||c[d-1]=="help"))d-=1;for(var e="",f=0;f<d;f++)e+="/"+c[f];return a+e}
function isRelative(a){a=a.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);return a[1]==""||a[1]==undefined}function resolveIfRelative(a){return a.indexOf("odrel://")==0?resolve(a):a}function resolve(a){if(isRelative(PlayerConfig.BaseUrl)){var c=getRootUrl();c=combine(c,PlayerConfig.BaseUrl);return combine(c,a)}else return combine(PlayerConfig.BaseUrl,a)}
function resolveLinksInWebPage(){for(var a=document.getElementsByTagName("a"),c=0;c<a.length;c++){var d=a[c].getAttribute("href");if(d!=null)if(d.indexOf("odrel://")==0)a[c].href=resolve(a[c].getAttribute("href"))}}var dlg_parent,dialogh_ref,device_dpi,dialog2_html,modal_dialog,dlg_width,dlg_height,dlg_autosizeheight=false,callback_end="",isopened=false,dlg_context="",grayPosition,overflowValue="",resizefn="";function setParent(a){dlg_parent=a}
function Click1(){closeDialog();$("#graydiv").remove()}function getDPI(){return device_dpi}function setWidth(a,c){$(a).css("width",c)}function setHeight(a,c){$(a).css("height",c)}function setPadding(a,c,d){c="<div style='padding:"+c+"px'";if(d&&d!="")c+=" class='"+d+"'";c+=">"+a+"</div>";return c}
function getContentSize(a){var c={width:0,height:0};a=$("<div style='display:visible;position:absolute;top:0px;left:0px;' id='04A98DB973UPK'>"+a+"</div>");$("body").append(a);c.width=$("#04A98DB973UPK").outerWidth(true);c.height=$("#04A98DB973UPK").outerHeight(true);$("#04A98DB973UPK").remove();return c}function showDialog3(a,c,d,e,f,j,m,i,o){showDialog2(a,c,d,e,f,j,m,i);$("body").append("<div id='04A98DB974UPK'>"+o+"</div>")}
function showDialog2(a,c,d,e,f,j,m,i){dlg_autosizeheight=f==-1?true:false;dialog2_html=a;showDialog("",c,d,e,f,j,m,"",i)}
(function(a){a.fn.drags=function(c){c=a.extend({handle:"",cursor:"move"},c);var d=a("<div>",{id:"ehandler",css:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"none",cursor:c.cursor,"z-index":999,"background-color":"red",opacity:"0",filter:"alpha(opacity=0)"}}).appendTo(document.body);return this.addClass("draggable").each(function(){$drag=a(this);(c.handle===""?$drag:$drag.find(c.handle)).addClass("active-handle").on("mousedown",function(e){if(a(e.target).is(a(this))){$drag.css("cursor",
c.cursor);e.preventDefault();$drag.css("z-index");var f=$drag.outerHeight(),j=$drag.outerWidth(),m=$drag.offset().top+f-e.pageY,i=$drag.offset().left+j-e.pageX;d.show().on("mousemove",function(o){o.preventDefault();y=o.pageY+m-f;x=o.pageX+i-j;if(y<0)y=0;if(x<0)x=0;if(window.innerWidth>$drag.outerWidth())if(x>window.innerWidth-$drag.outerWidth())x=window.innerWidth-$drag.outerWidth();if(window.innerHeight>$drag.outerHeight())if(y>window.innerHeight-$drag.outerHeight())y=window.innerHeight-$drag.outerHeight();
a(".draggable").offset({top:y,left:x})}).add(document).on("mouseup",function(o){$drag.css("cursor","default");o.preventDefault();a(this).off("mousemove mouseup");d.hide()})}})})}})(jQuery);
function showDialog(a,c,d,e,f,j,m,i,o){isopened=true;m=96;if(c!=-1)c=PtToPx(c,m);if(d!=-1)d=PtToPx(d,m);e=PtToPx(e,m);f=PtToPx(f,m);dlg_width=e;dlg_height=f;device_dpi=m;dialogh_ref=a;modal_dialog=j;m=$(document.body).scrollLeft();var t=$(document.body).scrollTop();if(m==0&&t==0&&upk.browserInfo.isiOS()){m=parent.window.pageXOffset;t=parent.window.pageYOffset}if(c==-1||d==-1){d=c=0;if(window.innerWidth)if(upk.browserInfo.isiOS()){c=parent.window.innerWidth;d=parent.window.innerHeight}else{c=window.innerWidth;
d=window.innerHeight}else if(document.documentElement){c=document.documentElement.scrollWidth;d=document.documentElement.scrollHeight}c=Math.floor(c/2-e/2+m);d=Math.floor(d/2-f/2+t)}if(o)o=dialogh_ref;if(document.body.scrollHeight<f)d=0;if(typeof lmsMode!=="undefined")if(lmsMode&&lmsMode=="LMS"&&upk.browserInfo.isiOS())d=20;o="top:0;left:0;";if(upk.browserInfo.isIEQuirks()){grayPosition="absolute";o="top:"+t+"px;left:"+m+"px;";overflowValue=$(document.body).css("overflow");overflowValue==="auto"&&
$(document.body).css("overflow","hidden");document.body.scroll="no";resizefn=window.onresize;window.onresize=""}else grayPosition="fixed";j?$(document.body).append('<div id="graydiv" scrolling="no" class="pointerdiv" style="position:'+grayPosition+";display:none;z-index: 99;"+o+'bottom:0;right:0;"></div>'):$(document.body).append('<div id="graydiv" scrolling="no" class="pointerdiv2" style="position:'+grayPosition+";display:none;z-index: 99;"+o+'bottom:0;right:0;" onclick="Click1();"></div>');$("#graydiv").on("touchmove",
function(){return false});$("input").on("focus",function(){this.blur()});$("#graydiv").show();style="left:"+c+"px; top:"+d+"px; width: "+e+"px; height: "+f+"px;";wwpx=e-60;hhpx=f-60;if(upk.browserInfo.isIEQuirks()&&upk.browserInfo.isIE9()||upk.browserInfo.isIEQuirks()&&upk.browserInfo.isIE8()){wwpx-=20;hhpx-=20}innerstyle="width: "+wwpx+"px; height: "+hhpx+"px;";o="iossafefordesktop";if(IsTouchDevice())o="iossafe";m="../img/empty.gif";if(i)m=i+"img/empty.gif";if(j){$(document.body).append('<div class="desktopDialog" id="dialog" style="'+
style+'"><div id="closebtn" onclick="Click1();"><img id="closeimg" class="close_qualifier" src="'+m+'" alt="" width="16" /></div><div class="'+o+'" style="'+innerstyle+'"><iframe id="dialogBody" frameborder="0" scrolling="yes" src="'+a+'" style="width: 100%; height: 100%;margin:0px; padding:0px; position: absolute;top: 0px; left: 0px; background-color: white;"></iframe></div></div>');$("#dialog").drags();$("#dialog").on("touchmove",function(){return false})}else{innerstyle="width: "+e+"px; height: "+
f+"px;";o="../html/dialog2.html";$(document.body).append('<div class="noborderDialog" id="dialog" style="'+style+'"><div id="dialogBodyDiv" class="noBorderDialogDesktop" style="'+innerstyle+'"><iframe id="dialogBody" frameborder="0" scrolling="no" src="'+o+'" style="width: 100%; height: 100%;margin:0px; padding:0px; position: absolute;top: 0px; left: 0px; background-color: white;"></iframe></div></div>')}dlg_context!=""&&ctxHelper.SetContext(dlg_context)}function isOpenDialog(){return isopened}
function removeDiv(a){$(a).remove()}function appendDiv(a){$(document.body).append(a)}
function closeDialog(){$("#04A98DB974UPK").remove();$("#graydiv").remove();$("#dialog").remove();$("#ehandler").remove();if(dlg_context!=""){ctxHelper.SetPrevContext();dlg_context=""}if(upk.browserInfo.isIEQuirks()){if(overflowValue==="auto"){$(document.body).css("overflow",overflowValue);overflowValue=""}document.body.scroll="auto";window.onresize=resizefn;resizefn=""}isopened=false;if(dlg_parent)callback_end&&dlg_parent.eval(callback_end);else callback_end&&eval(callback_end);$("input").off("focus")}
function setOnCloseEvent(a){if(callback_end.indexOf(a)<0)callback_end=a+";"+callback_end}function getOnCloseEvent(){return callback_end}function getDialog2Content(){return dialog2_html}function setDlgCtx(a){dlg_context=a}upk=upk||{};
$.extend(true,upk,{contextHelper:function(){var a=null,c,d;this.SetContext=function(f,j){if(a)a.SetContext(f,j);else{d=c;c={view:f,subview:j};ias.SetContext(c)}};this.SetNamespace=function(f){a||ias.SetNamespace(f)};this.AddDiscoveryCddUrl=function(f){a||ias.AddDiscoveryCddUrl(f)};this.SetPrevContext=function(){if(a)a.SetPrevContext();else{c=d;ias.SetContext(c)}};try{if(self!=top&&typeof parent.ctxHelper==="object")a=parent.ctxHelper}catch(e){}return this}});window.ctxHelper=new upk.contextHelper;
window.ias=function(a){function c(A){var v={};if(A!=i)for(var I in A){var J=A[I];if(J!=i)v[I]=J}return v}function d(A){w=c(A);H.push(w);t=i}function e(A,v){if(v!=i)G[A]=v;else delete G[A];M=i}function f(A,v){return encodeURIComponent(A)+"="+encodeURIComponent(v)}function j(A,v){return encodeURIComponent(A)+(v==""?"":"="+encodeURIComponent(v))}function m(A,v){var I=v?j:f,J=[],S;for(S in A){var F=A[S];if(F&&F.push&&F.sort)for(var u=0;u<F.length;++u)J.push(I(S,F[u]));else F!=i&&J.push(I(S,F))}return J.join(";")}
var i=null,o=i,t=i,w={},H=[w],G={},M=i,O=[],U=[],E=window.ias||{};E.SetNamespace=function(A){o=A};E.SetContext=function(A){w=c(A);H[H.length-1]=w;t=i};E.SetContextPart=function(A,v){if(v!=i)w[A]=v;else delete w[A];t=i};E.ResetContext=function(A){H=[];d(A)};E.SetTag=e;E.SetTags=function(A){for(var v in A)e(v,A[v])};E.ResetTags=function(A){G=c(A);M=i};E.PushContext=d;E.PopContext=function(){H.pop();H.length||H.push({});w=H[H.length-1];t=i};E.AddDiscoveryCddUrl=function(A){O.push(A)};E.AddApplicableCddUrl=
function(A){U.push(A)};a.UPK_GetNamespace=function(){return o};a.UPK_GetContext=function(){if(t==i)t=m(w);return t};a.UPK_GetTags=function(){if(M==i)M=m(G,true);return M};a.UPK_GetDiscoveryCddUrls=function(){return O.length?O:i};a.UPK_GetApplicableCddUrls=function(){return U.length?U:i};return E}(window);ias.SetTag("upk-trait-nohelp","");
var requiredFlashVersion="9.0.124",_name="",_asyn=false,_fire=false,_knowpalyer=false,bPlayerIsAvailable=false,useAudioTag=false,useFlash=false,hasRequestedVersion,_fPlayerPath="",soundjs_initialized=false;
function SoundjsInit(){if(soundjs_initialized!=true){soundjs_initialized=true;var a=document.getElementById("fplayer");if(a)if(typeof assetType==="undefined")a.innerHTML="<audio id='upkaudio' onended='AudioEnded();' onerror='AudioError();' oncanplay='AudioLoaded()' style='display: none;'><Source type='audio/mpeg'></audio>";if(upk.browserInfo.isiOS5()&&typeof assetType==="undefined"){getAPlayer().addEventListener("loadstart",SoundPlayer_OnLoadStart);getAPlayer().addEventListener("durationchange",SoundPlayer_OnDurationChange)}hasRequestedVersion=
swfobject.hasFlashPlayerVersion(requiredFlashVersion);try{_fPlayerPath=_webpage_==true?"../../../../":"../../../"}catch(c){_fPlayerPath="../../../"}SupportAAC();CheckAndEnableSound()}}function SoundPlayer_OnLoadStart(){SoundPlayerObj.LoadStartTimer&&clearInterval(SoundPlayerObj.LoadStartTimer);if(getAPlayer().src)SoundPlayerObj.LoadStartTimer=setInterval("SoundPlayer_Started()",3E3)}
function SoundPlayer_OnDurationChange(){if(SoundPlayerObj.LoadStartTimer){clearInterval(SoundPlayerObj.LoadStartTimer);SoundPlayerObj.LoadStartTimer=0}}function SoundPlayer_Started(){getAPlayer().src=getAPlayer().src;getAPlayer().play()}function SupportAAC(){if(upk.browserInfo.isiOS()){bPlayerIsAvailable=useAudioTag=true;if(PlayerConfig.AACIsAvailable==true)return true}return false}
function CheckAndEnableSound(){var a=false;try{a=soundIsPublished()}catch(c){a=false}a==true&&hasRequestedVersion&&!IsTouchDevice()&&bPlayerIsAvailable==false&&UserPrefs.PlayAudio!="none"&&swfobject.embedSWF(_fPlayerPath+"audio/fplayer.swf","fplayer","1","1",requiredFlashVersion,null,null,null,null,onLoadFlash)}
function onLoadFlash(a){if(a.success==true)bPlayerIsAvailable=useFlash=true;document.getElementById("fplayer").style.position="absolute";document.getElementById("fplayer").style.top="0px";document.getElementById("fplayer").style.left="0px"}function AreCookiesEnabled(){if(PlayerConfig.EnableCookies==false)return false;chkcookie=(new Date).getTime()+"";document.cookie="chkcookie="+chkcookie+"; path=/";return document.cookie.indexOf(chkcookie,0)<0?false:true}
function Check_Flash(a,c){if(a==false)return true;if(SupportAAC()==true)return true;if(hasRequestedVersion==false)if(c!="none")return false;return true}function getFPlayer(){return document.getElementById("fplayer")}function getAPlayer(){return document.getElementById("upkaudio")}
function Sound_Init(a,c,d,e,f){SoundjsInit();if(Check_Flash(a,c)==true)return true;if(!SupportAAC()&&upk.browserInfo.isiOS())return true;a="../../../";if(f!=undefined)a=f;d!=null&&eval(d);sw=(screen.width-640)/2;sh=(screen.height-480)/2;if(e==null)e=true;KeepAlive_DoNotSendClose();if(e==true)window.open(a+"html/getflash.html?url="+Escape.MyEscape(this.location.href)+"&newwindow","","top="+sh+", left="+sw+", width=640, height=480, resizable=1,toolbar=1,scrollbars=1,location=1,statusbar=1,menubar=1");
else e=="parent"?setTimeout('parent.location.replace("'+a+"html/getflash.html?url="+Escape.MyEscape(parent.location.href)+'")',10):setTimeout('this.location.replace("'+a+"html/getflash.html?url="+Escape.MyEscape(this.location.href)+'")',10);return false}
function SoundPlayerClass(){for(this.TopicPath=unescape(window.location.href);this.TopicPath.indexOf("\\")!=-1;)this.TopicPath=this.TopicPath.replace("\\","/");var a=this.TopicPath.indexOf("?");if(a>=0)this.TopicPath=this.TopicPath.substr(0,a);a=this.TopicPath.lastIndexOf("/");this.RootPath=this.TopicPath=this.TopicPath.substr(0,a+1);for(var c=0;c<=3;c++){a=this.RootPath.lastIndexOf("/");if(a!=-1)this.RootPath=this.RootPath.substr(0,a)}this.RootPath+="/";this.SoundPath=this.TopicPath;this.AudioPath=
resolveUri(this.TopicPath,"../../../audio/");this.Volume=100;this.PlayCheckerTimer=this.LoadStartTimer=0}function resolveUri(a,c){return a+c}SoundPlayerClass.prototype.ChangeFileSuffix=function(a){if(a.lastIndexOf(".mp3")==a.length-4)return a;a=a.substr(0,a.length-4);if(PlayerConfig.AACIsAvailable||upk.browserInfo.isiOS())return a+".m4a";if(useFlash)return a+".flv";alert("sound - file extension error")};
SoundPlayerClass.prototype.Play=function(a,c,d,e){if(useFlash){var f=getFPlayer();if(f){f.style.top=getScrollTop()+"px";f.style.left=getScrollLeft()+"px"}}c||S_SetFrameState("S");f=S_GetFrameState();e||(e=false);if(bPlayerIsAvailable){d||(d=false);if(d==true)e==false&&OnEndPlaySound();else if(a.length==0){if(e==false){f!="D"&&S_SetFrameState("D");OnErrorPlaySound()}}else{if(a.substr(a.length-4)==".ASX"){d=sounds[a].duration.split(":");try{_lastAudioFileSize=parseInt(d[0])*3600+parseInt(d[1])*60+parseFloat(d[2])}catch(j){_lastAudioFileSize=
0}a=sounds[a].flist[0]}SoundPlayer_Stop();if(a.length==0){if(e==false){f!="D"&&S_SetFrameState("D");OnErrorPlaySound()}}else{fname=c?resolveUri(this.AudioPath,a):resolveUri(this.SoundPath,a);_name=this.ChangeFileSuffix(fname);_asyn=e;_fire=true;if(useFlash)_knowpalyer==true&&setTimeout('SoundPlayer_Open("'+_name+'",'+e+")",120);else useAudioTag&&setTimeout('SoundPlayer_Open("'+_name+'",'+e+")",120)}}}else if(e==false){f!="D"&&S_SetFrameState("D");OnErrorPlaySound()}};
SoundPlayerClass.prototype.Stop=function(a){if(bPlayerIsAvailable)a?SoundPlayer_Stop():setTimeout("SoundPlayer_Stop()",10)};SoundPlayerClass.prototype.Pause=function(){try{if(bPlayerIsAvailable){useFlash&&getFPlayer().SoundPause();useAudioTag&&getAPlayer().pause()}}catch(a){}};SoundPlayerClass.prototype.Resume=function(){if(!InWebpage())if(getLastSoundFileName()!=getActualSoundFileName())return;try{if(bPlayerIsAvailable){useFlash&&getFPlayer().SoundPlay();useAudioTag&&getAPlayer().play()}}catch(a){}};
SoundPlayerClass.prototype.InitAudioPlayer=function(){if(bPlayerIsAvailable)if(useAudioTag){getAPlayer().src=this.AudioPath+"empty.m4a";getAPlayer().play()}};SoundPlayerClass.prototype.IsAvailable=function(){return bPlayerIsAvailable};SoundPlayerClass.prototype.SetSoundPath=function(a){if(a.length>0)this.SoundPath=a};
SoundPlayerClass.prototype.SetVolume=function(a){if(a==null)a=this.Volume;else this.Volume=a;if(useFlash)try{getFPlayer().SetSoundVolume(a/100)}catch(c){}if(useAudioTag)try{getAPlayer().volume=a/100}catch(d){}};function InWebpage(){if(typeof _webpage_==="undefined")return false;return _webpage_}function SoundPlayer_EndCheck(){getAPlayer().ended&&SoundPlayerObj.PlayCheckerTimer&&setTimeout(function(){SoundPlayerObj.PlayCheckerTimer&&SoundComplete(false)},50)}
var _lastAsyncronFile=false,_lastAudioFile="",_lastFlashTime=-1,_lastAudioFileSize=0,_lastFileName="";function clearLastSoundFileName(){_lastFileName=""}function getLastSoundFileName(){return _lastFileName.substr(_lastFileName.lastIndexOf("/")+1)}function getActualSoundFileName(){try{return sounds[showActObj.id.substr(1)+".ASX"].flist[0]}catch(a){return""}}
function SoundPlayer_Open(a,c){if(a.length>0)_lastFileName=a;try{if(a.length>0&&c==true)_lastAsyncronFile=true;if(timelineDescriptor.valid&&timelineDescriptor.type!="narration")throw"";if(useFlash){audio_loading=true;_lastFlashTime=-1;getFPlayer().SetSoundFile(a);getFPlayer().SoundPlay();if(timelineDescriptor.valid&&timelineDescriptor.type=="narration"){SoundFPlayer_SetTime();return}audio_loading=false}if(useAudioTag){audio_loading=true;getAPlayer().pause();if(_lastAudioFile==a)AudioLoaded();else{getAPlayer().src=
a;CLog(a+" - "+_lastAudioFile+" play")}_lastAudioFile=a}SoundPlayerObj.SetVolume();if(upk.browserInfo.isiOS()){SoundPlayerObj.PlayCheckerTimer&&clearInterval(SoundPlayerObj.PlayCheckerTimer);SoundPlayerObj.PlayCheckerTimer=setInterval("SoundPlayer_EndCheck()",500)}}catch(d){S_SetFrameState("D");c==false&&OnErrorPlaySound()}}
function SoundFPlayer_SetTime(){getFPlayer().SoundPause();getFPlayer().SoundSeek(timelineDescriptor.resttime/1E3);if(Math.abs(timelineDescriptor.resttime/1E3-getFPlayer().Time())<0.3){getFPlayer().SoundPlay();audio_loading=false}else setTimeout("SoundFPlayer_SetTime()",300)}
function SoundAPlayer_SetTime(){if(audio_seeking!=false)if(audio_counter>100)setTimeout("AudioReload();",100);else{audio_counter++;var a=0;if(timelineDescriptor.valid==true&&timelineDescriptor.type=="narration"){a=timelineDescriptor.resttime/1E3;if(a>_lastAudioFileSize-1){getAPlayer().pause();SoundComplete();CLog("nextframe");return}if(a<0)a=0}try{getAPlayer().currentTime=a}catch(c){setTimeout("SoundAPlayer_SetTime()",300)}var d=getAPlayer().currentTime,e=Math.abs(d-a);try{CLog("d: "+e+" "+d+" "+
a+" "+_lastAudioFileSize+" "+showScreen)}catch(f){CLog("d: "+e+" "+d+" "+a+" "+_lastAudioFileSize)}if(e<0.3){audio_seeking=false;CLog("play...");getAPlayer().play()}else setTimeout("SoundAPlayer_SetTime()",300)}}function SoundIsLocked(){return audio_loading==true||audio_seeking==true}
function SoundPlayer_Stop(){try{if(SoundPlayerObj.PlayCheckerTimer){clearInterval(SoundPlayerObj.PlayCheckerTimer);SoundPlayerObj.PlayCheckerTimer=0}_lastAsyncronFile=false;useFlash&&getFPlayer().SoundStop();useAudioTag&&getAPlayer().pause()}catch(a){}}
function SoundPlayer_GetTime(){var a=getLastSoundFileName(),c=showActObj.id.substr(1);c=sounds[c+".ASX"].flist[0];if(a.length>0&&a!=c)return{s:a,t:NaN};c=0;if(useAudioTag)c=getAPlayer().currentTime*1E3;if(useFlash)c=getFPlayer().Time()*1E3;if(c==0&&_lastFlashTime>=0)c=_lastFlashTime;else _lastFlashTime=c;return{s:a,t:c}}function OnFlashLoad(){_fire==true&&setTimeout('SoundPlayer_Open("'+_name+'",'+_asyn+")",20);_fire_=false;_knowpalyer=true}
function SoundComplete(a){if(InWebpage())a?OnErrorPlaySound():OnEndPlaySound();else{if(SoundPlayerObj.PlayCheckerTimer){clearInterval(SoundPlayerObj.PlayCheckerTimer);SoundPlayerObj.PlayCheckerTimer=0}if(_lastAsyncronFile)_lastAsyncronFile=false;else{if(useAudioTag)if(a){S_SetFrameState("D");OnErrorPlaySound()}else{if(typeof animObject!="undefined")if(animObject)if(fusionmode==true&&animObject.timeout==DELAY_INFINITE*100){if(animObject.showbubble==false)animObject.timeout=0}else animObject.timeout=
0;OnEndPlaySound()}if(useFlash){s=getFPlayer().SoundState();if(s=="notfoundfile"){S_SetFrameState("D");OnErrorPlaySound()}else if(s=="complete"){if(typeof animObject!="undefined")if(animObject)if(fusionmode==true&&animObject.timeout==DELAY_INFINITE*100){if(animObject.showbubble==false)animObject.timeout=0}else animObject.timeout=0;OnEndPlaySound()}}}}}function AudioEnded(){var a=getAPlayer();CLog(a.src+" done...");a.src.indexOf("empty.m4a")>=0||SoundComplete(false)}
function AudioError(){var a=getAPlayer();if(a!=null)if(a.src!="")if(!(a.src.indexOf("empty.m4a")>=0)){CLog(a.src+" error...");SoundComplete(true)}}var audio_loading=false,audio_seeking=false,audio_counter=0;function AudioReload(){audio_loading=true;getAPlayer().pause();getAPlayer().src=_lastAudioFile;CLog(fname+" - "+_lastAudioFile+" replay")}
function AudioLoaded(){CLog("AudioLoaded");if(audio_loading==true){CLog("AudioLoaded true");audio_loading=false;audio_counter=0;getAPlayer().pause();audio_seeking=true;SoundAPlayer_SetTime()}}function S_GetFrameState(){try{return upk.Timeline.GetFrameState()}catch(a){return""}}function S_SetFrameState(a){try{upk.Timeline.SetFrameState(a)}catch(c){}}
function TimelineDescriptor(a,c,d,e,f,j){if(this.valid=a){this.frameid=c;this.timelineindex=d;this.narration=e;this.animation=f;this.resttime=j;this.type="narration";if(j>=e)this.type="animationstart";if(j>=e+f/2)this.type="nextframe"}}var timelineDescriptor=new TimelineDescriptor(false,"",0,0,0,0),SoundPlayerObj=new SoundPlayerClass,clog_enabled=false;function CLog(a,c){if(clog_enabled||c==true)console!==undefined&&console.log(a)};
